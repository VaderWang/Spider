[{"title": "用 Python 玩转 GitHub 的贡献板", "url": "http://python.jobbole.com/89337/", "url_object_id": "99e104716b0e1364874d451735ca32f5", "create_date": "2019-06-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/02/591d8b55a524f825dd29a22b8df70000.jpg"], "praise_nums": 1, "comment_nums": 0, "fav_nums": 0, "tags": "实践项目,Github", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://blog.csdn.net/l598465252/article/details/81100127?tdsourcetag=s_pcqq_aiomsg\">Johnson·Lee</a>   </div><p>细心的人都会发现GitHub个人主页有一个记录每天贡献次数的面板，我暂且称之为贡献面板。就像下图那个样子。只要当天在GitHub有提交记录，对应的小格子就会变成绿色，当天提交次数越多，颜色也会越深。因此我就有了一个大胆的想法。细心的你应该也发现了，我就是要讲如何搞出这个小❤️❤️来。项目地址：https://github.com/YES-Lee/git_painter</p>\n<p><strong>原理</strong><br>\n基本原理前面已经讲过，我们只需要控制项目提交的日期和次数，就能在贡献面板中填充出花样来。可能有朋友会问，前面的部分怎么办？拿到我得等一年？No☝️，经过研究发现，GitHub的贡献面板是活得，什么意思呢？GitHub是根据项目的提交记录时时生成的贡献面板，所以只要在本地把时间改成过去，进行提交操作，再push到GitHub，就实现了穿越。了解了这些之后，就可以动手了。最后如果效果不尽人意或者像换个图样换个心情，只需要删了对应的仓库就行了。</p>\n<blockquote><p>坑1：码云不像GitHub，码云的贡献面板是一次性的，推上去之后就不会变，所以谨慎操作</p></blockquote>\n<p><strong>程序设计</strong><br>\n目标<br>\n1、设计一个模板，可以通过修改模板来改变图样<br>\n2、将过去时间的记录自动全部填充<br>\n3、每天进行自动COMMIT/PUSH操作<br>\n实现<br>\n1、模板设计成一个json二维数组，由0和1组成，分别到表有/无提交记录。行数最好固定是7（周一到周日），列数可以自已随意设置。下面是基于python的实现。<br>\nmodel.json</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d284cf5c8184051969\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[\r\n  [0, 1, 1, 0, 0, 0, 1, 1, 0, 0],\r\n  [1, 1, 1, 1, 0, 1, 1, 1, 1, 0],\r\n  [1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\r\n  [0, 1, 1, 1, 1, 1, 1, 1, 0, 0],\r\n  [0, 0, 1, 1, 1, 1, 1, 0, 0, 0],\r\n  [0, 0, 0, 1, 1, 1, 0, 0, 0, 0],\r\n  [0, 0, 0, 0, 1, 0, 0, 0, 0, 0]\r\n]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5c8184051969-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5c8184051969-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5c8184051969-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5c8184051969-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5c8184051969-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5c8184051969-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5c8184051969-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5c8184051969-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5c8184051969-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5c8184051969-1\"><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5c8184051969-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5c8184051969-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5c8184051969-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5c8184051969-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5c8184051969-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5c8184051969-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5c8184051969-8\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5c8184051969-9\"><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0051 seconds] -->\r\n<p>下面的代码是根据当前日期和模板对应的值来进行提交，用于定时任务每天执行。可以直接部署到服务器，通过后面的命令设置定时任务。<br>\nmain.py</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d284cf5d2154904855\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#!/usr/bin/env python3\r\n# -*- coding: utf-8 -*-\r\nimport json\r\nimport os\r\nimport time\r\nimport datetime\r\n\r\n\r\ndef calculate_date(start, end):\r\n    # 计算日期相差天数\r\n    start_sec = time.mktime(time.strptime(start, '%Y-%m-%d'))\r\n    end_sec = time.mktime(time.strptime(end, '%Y-%m-%d'))\r\n\r\n    days = int((end_sec - start_sec) / (24 * 60 * 60))\r\n\r\n    return days\r\n\r\n\r\ndef commit(flag):\r\n    if flag:\r\n        for n in range(49):  # 设置commit次数\r\n            with open('./record.txt', 'a') as record:\r\n                record.write('.')\r\n                record.close()\r\n                os.system('git commit -a -m \\\"HeartBeat\\\"')\r\n\r\n    else:  # 每天推一条\r\n        with open('./record.txt', 'a') as record:\r\n            record.write('.')\r\n            record.close()\r\n            os.system('git commit -a -m \\\"HeartBeat\\\"')\r\n\r\n    os.system('git pull &amp;&amp; git push origin master')\r\n\r\n\r\nwith open('./model.json') as f:  # 加载模型\r\n    PATTEN = json.loads(f.read())\r\n    f.close()\r\n\r\nPERIOD = len(PATTEN[0])  # 周期(图案列数)\r\n\r\nSTART_DATE = '2017-7-16'  # 开始日期，很重要，左上角提一格的日期，自己手动修改\r\nnow = datetime.datetime.now().strftime('%Y-%m-%d')\r\n\r\nrow = calculate_date(START_DATE, now) % 7\r\ncol = int(calculate_date(START_DATE, now) / 7) % PERIOD\r\n\r\ncommit(PATTEN[row][col])</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5d2154904855-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5d2154904855-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5d2154904855-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5d2154904855-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5d2154904855-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5d2154904855-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5d2154904855-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5d2154904855-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5d2154904855-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5d2154904855-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5d2154904855-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5d2154904855-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5d2154904855-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5d2154904855-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5d2154904855-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5d2154904855-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5d2154904855-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5d2154904855-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5d2154904855-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5d2154904855-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5d2154904855-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5d2154904855-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5d2154904855-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5d2154904855-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5d2154904855-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5d2154904855-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5d2154904855-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5d2154904855-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5d2154904855-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5d2154904855-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5d2154904855-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5d2154904855-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5d2154904855-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5d2154904855-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5d2154904855-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5d2154904855-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5d2154904855-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5d2154904855-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5d2154904855-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5d2154904855-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5d2154904855-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5d2154904855-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5d2154904855-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5d2154904855-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5d2154904855-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5d2154904855-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5d2154904855-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5d2154904855-48\">48</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5d2154904855-1\"><span class=\"crayon-c\">#!/usr/bin/env python3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5d2154904855-2\"><span class=\"crayon-c\"># -*- coding: utf-8 -*-</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5d2154904855-3\"><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">json</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5d2154904855-4\"><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">os</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5d2154904855-5\"><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">time</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5d2154904855-6\"><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">datetime</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5d2154904855-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5d2154904855-8\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5d2154904855-9\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">calculate_date</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">start</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">end</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5d2154904855-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\"># 计算日期相差天数</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5d2154904855-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">start_sec</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">time</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">mktime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">time</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">strptime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">start</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'%Y-%m-%d'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5d2154904855-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">end_sec</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">time</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">mktime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">time</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">strptime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">end</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'%Y-%m-%d'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5d2154904855-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5d2154904855-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">days</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">end_sec</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">start_sec</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">24</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">60</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">60</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5d2154904855-15\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5d2154904855-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">days</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5d2154904855-17\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5d2154904855-18\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5d2154904855-19\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">commit</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">flag</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5d2154904855-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">flag</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5d2154904855-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">49</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\"># 设置commit次数</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5d2154904855-22\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">with</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">open</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'./record.txt'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'a'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">record</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5d2154904855-23\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">record</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">write</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'.'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5d2154904855-24\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">record</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5d2154904855-25\"><span class=\"crayon-h\">                </span><span class=\"crayon-k \">os</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">system</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'git commit -a -m \\\"HeartBeat\\\"'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5d2154904855-26\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5d2154904855-27\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\"># 每天推一条</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5d2154904855-28\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">with</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">open</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'./record.txt'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'a'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">record</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5d2154904855-29\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">record</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">write</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'.'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5d2154904855-30\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">record</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5d2154904855-31\"><span class=\"crayon-h\">            </span><span class=\"crayon-k \">os</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">system</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'git commit -a -m \\\"HeartBeat\\\"'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5d2154904855-32\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5d2154904855-33\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">os</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">system</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'git pull &amp;&amp; git push origin master'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5d2154904855-34\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5d2154904855-35\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5d2154904855-36\"><span class=\"crayon-st\">with</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">open</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'./model.json'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\"># 加载模型</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5d2154904855-37\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">PATTEN</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">json</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">loads</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">read</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5d2154904855-38\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5d2154904855-39\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5d2154904855-40\"><span class=\"crayon-v\">PERIOD</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">PATTEN</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\"># 周期(图案列数)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5d2154904855-41\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5d2154904855-42\"><span class=\"crayon-v\">START_DATE</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2017-7-16'</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\"># 开始日期，很重要，左上角提一格的日期，自己手动修改</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5d2154904855-43\"><span class=\"crayon-v\">now</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">datetime</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">datetime</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">now</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">strftime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'%Y-%m-%d'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5d2154904855-44\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5d2154904855-45\"><span class=\"crayon-v\">row</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">calculate_date</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">START_DATE</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">now</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5d2154904855-46\"><span class=\"crayon-v\">col</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">calculate_date</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">START_DATE</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">now</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PERIOD</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5d2154904855-47\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5d2154904855-48\"><span class=\"crayon-e\">commit</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">PATTEN</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">row</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">col</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0078 seconds] -->\r\n<p>开启定时任务</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d284cf5d7698638040\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ncrontab -e\r\n#  输入以下代码，前两个参数分别是分钟和小时，该任务为每天12:00定时执行\r\n# 00 12 * * * cd /home/git_heart &amp;&amp; git pull &amp;&amp; /usr/bin/python main.py</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5d7698638040-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5d7698638040-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5d7698638040-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5d7698638040-1\"><span class=\"crayon-v\">crontab</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">e</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5d7698638040-2\"><span class=\"crayon-c\">#  输入以下代码，前两个参数分别是分钟和小时，该任务为每天12:00定时执行</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5d7698638040-3\"><span class=\"crayon-c\"># 00 12 * * * cd /home/git_heart &amp;&amp; git pull &amp;&amp; /usr/bin/python main.py</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>2、定时任务只能帮我完成今天及以后的事情，之前的也需要写个脚本跑一下。<br>\nloop.py</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d284cf5db613548211\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#!/usr/bin/env python3\r\n# -*- coding: utf-8 -*-\r\nimport json\r\nimport os\r\nimport time\r\nimport datetime\r\n\r\n\r\ndef calculate_date(start, end):\r\n    # 计算日期相差天数\r\n    start_sec = time.mktime(time.strptime(start, '%Y-%m-%d'))\r\n    end_sec = time.mktime(time.strptime(end, '%Y-%m-%d'))\r\n\r\n    days = int((end_sec - start_sec) / (24 * 60 * 60))\r\n\r\n    return days\r\n\r\n\r\ndef add_days(d, num):\r\n    # 日期递增\r\n    sec = num * 24 * 60 * 60\r\n    now_sec = time.mktime(time.strptime(d, '%Y-%m-%d')) + sec\r\n    return time.strftime(\"%Y-%m-%d\", time.localtime(now_sec))\r\n\r\n\r\ndef commit(flag):\r\n    if flag:\r\n        for n in range(49):\r\n            with open('./record.txt', 'a') as record:\r\n                record.write('.')\r\n                record.close()\r\n                os.system('git commit -a -m \\\"HeartBeat\\\"')\r\n\r\n        with open('./record.txt', 'a') as record:\r\n            record.write('\\n')\r\n            record.close()\r\n            os.system('git commit -a -m \\\"HeartBeat\\\"')\r\n\r\n    else:\r\n        with open('./record.txt', 'a') as record:\r\n            record.write(now + '\\n')\r\n            record.close()\r\n            os.system('git commit -a -m \\\"HeartBeat\\\"')\r\n\r\n\r\nwith open('./model.json') as f:  # 加载模型\r\n    PATTEN = json.loads(f.read())\r\n    f.close()\r\n\r\nPERIOD = len(PATTEN[0])  # 周期(图案列数)\r\n\r\nSTART_DATE = '2017-7-16'  # 开始日期, 码云和git显示不一样, 建议从最左上角开始\r\nnow = datetime.datetime.now().strftime('%Y-%m-%d')\r\n\r\nos.system('timedatectl set-ntp false') # 关闭时间自动同步\r\n\r\nwhile calculate_date(START_DATE, now) &gt;= 0:\r\n    row = calculate_date(START_DATE, now) % 7\r\n    col = int(calculate_date(START_DATE, now) / 7) % PERIOD\r\n    commit(PATTEN[row][col])\r\n\r\n    now = add_days(now, -1)\r\n    os.system('timedatectl set-time ' + now)\r\n\r\n#  复原时间\r\nos.system('timedatectl set-ntp 1 &amp;&amp; timedatectl set-local-rtc 1')</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5db613548211-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5db613548211-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5db613548211-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5db613548211-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5db613548211-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5db613548211-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5db613548211-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5db613548211-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5db613548211-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5db613548211-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5db613548211-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5db613548211-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5db613548211-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5db613548211-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5db613548211-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5db613548211-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5db613548211-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5db613548211-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5db613548211-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5db613548211-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5db613548211-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5db613548211-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5db613548211-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5db613548211-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5db613548211-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5db613548211-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5db613548211-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5db613548211-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5db613548211-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5db613548211-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5db613548211-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5db613548211-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5db613548211-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5db613548211-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5db613548211-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5db613548211-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5db613548211-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5db613548211-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5db613548211-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5db613548211-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5db613548211-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5db613548211-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5db613548211-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5db613548211-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5db613548211-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5db613548211-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5db613548211-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5db613548211-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5db613548211-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5db613548211-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5db613548211-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5db613548211-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5db613548211-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5db613548211-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5db613548211-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5db613548211-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5db613548211-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5db613548211-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5db613548211-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5db613548211-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5db613548211-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5db613548211-62\">62</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5db613548211-63\">63</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5db613548211-64\">64</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5db613548211-65\">65</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5db613548211-66\">66</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5db613548211-1\"><span class=\"crayon-c\">#!/usr/bin/env python3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5db613548211-2\"><span class=\"crayon-c\"># -*- coding: utf-8 -*-</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5db613548211-3\"><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">json</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5db613548211-4\"><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">os</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5db613548211-5\"><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">time</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5db613548211-6\"><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">datetime</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5db613548211-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5db613548211-8\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5db613548211-9\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">calculate_date</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">start</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">end</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5db613548211-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\"># 计算日期相差天数</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5db613548211-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">start_sec</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">time</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">mktime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">time</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">strptime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">start</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'%Y-%m-%d'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5db613548211-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">end_sec</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">time</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">mktime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">time</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">strptime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">end</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'%Y-%m-%d'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5db613548211-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5db613548211-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">days</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">end_sec</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">start_sec</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">24</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">60</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">60</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5db613548211-15\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5db613548211-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">days</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5db613548211-17\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5db613548211-18\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5db613548211-19\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">add_days</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">num</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5db613548211-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\"># 日期递增</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5db613548211-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">sec</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">num</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">24</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">60</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">60</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5db613548211-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">now_sec</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">time</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">mktime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">time</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">strptime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'%Y-%m-%d'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sec</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5db613548211-23\"><span class=\"crayon-e\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">time</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">strftime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"%Y-%m-%d\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">time</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">localtime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">now_sec</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5db613548211-24\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5db613548211-25\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5db613548211-26\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">commit</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">flag</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5db613548211-27\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">flag</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5db613548211-28\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">49</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5db613548211-29\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">with</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">open</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'./record.txt'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'a'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">record</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5db613548211-30\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">record</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">write</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'.'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5db613548211-31\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">record</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5db613548211-32\"><span class=\"crayon-h\">                </span><span class=\"crayon-k \">os</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">system</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'git commit -a -m \\\"HeartBeat\\\"'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5db613548211-33\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5db613548211-34\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">with</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">open</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'./record.txt'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'a'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">record</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5db613548211-35\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">record</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">write</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'\\n'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5db613548211-36\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">record</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5db613548211-37\"><span class=\"crayon-h\">            </span><span class=\"crayon-k \">os</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">system</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'git commit -a -m \\\"HeartBeat\\\"'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5db613548211-38\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5db613548211-39\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5db613548211-40\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">with</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">open</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'./record.txt'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'a'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">record</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5db613548211-41\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">record</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">write</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">now</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'\\n'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5db613548211-42\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">record</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5db613548211-43\"><span class=\"crayon-h\">            </span><span class=\"crayon-k \">os</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">system</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'git commit -a -m \\\"HeartBeat\\\"'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5db613548211-44\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5db613548211-45\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5db613548211-46\"><span class=\"crayon-st\">with</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">open</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'./model.json'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\"># 加载模型</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5db613548211-47\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">PATTEN</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">json</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">loads</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">read</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5db613548211-48\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5db613548211-49\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5db613548211-50\"><span class=\"crayon-v\">PERIOD</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">PATTEN</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\"># 周期(图案列数)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5db613548211-51\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5db613548211-52\"><span class=\"crayon-v\">START_DATE</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2017-7-16'</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\"># 开始日期, 码云和git显示不一样, 建议从最左上角开始</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5db613548211-53\"><span class=\"crayon-v\">now</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">datetime</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">datetime</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">now</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">strftime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'%Y-%m-%d'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5db613548211-54\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5db613548211-55\"><span class=\"crayon-k \">os</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">system</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'timedatectl set-ntp false'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\"># 关闭时间自动同步</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5db613548211-56\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5db613548211-57\"><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">calculate_date</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">START_DATE</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">now</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5db613548211-58\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">row</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">calculate_date</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">START_DATE</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">now</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5db613548211-59\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">col</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">calculate_date</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">START_DATE</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">now</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PERIOD</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5db613548211-60\"><span class=\"crayon-e\">    </span><span class=\"crayon-e\">commit</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">PATTEN</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">row</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">col</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5db613548211-61\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5db613548211-62\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">now</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">add_days</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">now</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5db613548211-63\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">os</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">system</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'timedatectl set-time '</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">now</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5db613548211-64\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5db613548211-65\"><span class=\"crayon-c\">#  复原时间</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5db613548211-66\"><span class=\"crayon-k \">os</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">system</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'timedatectl set-ntp 1 &amp;&amp; timedatectl set-local-rtc 1'</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0112 seconds] -->\r\n<p>到这里基本就结束了，第三个目标实际上在第一步就已经完成了，下面上一下测试结果。</p>\n<p><strong>效果展示</strong><br>\n1、小心心</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d284cf5df690699727\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[\r\n  [0, 1, 1, 0, 0, 0, 1, 1, 0, 0],\r\n  [1, 1, 1, 1, 0, 1, 1, 1, 1, 0],\r\n  [1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\r\n  [0, 1, 1, 1, 1, 1, 1, 1, 0, 0],\r\n  [0, 0, 1, 1, 1, 1, 1, 0, 0, 0],\r\n  [0, 0, 0, 1, 1, 1, 0, 0, 0, 0],\r\n  [0, 0, 0, 0, 1, 0, 0, 0, 0, 0]\r\n]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5df690699727-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5df690699727-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5df690699727-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5df690699727-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5df690699727-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5df690699727-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5df690699727-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5df690699727-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5df690699727-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5df690699727-1\"><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5df690699727-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5df690699727-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5df690699727-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5df690699727-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5df690699727-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5df690699727-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5df690699727-8\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5df690699727-9\"><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0069 seconds] -->\r\n<p><img src=\"https://user-images.githubusercontent.com/19748456/50627104-dff87f00-0f6c-11e9-8c27-c158bd3c7288.png\" alt=\"image\"></p>\n<p>2、X</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d284cf5e4053269916\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[\r\n  [0, 0, 0, 0, 0],\r\n  [1, 0, 0, 0, 1],\r\n  [0, 1, 0, 1, 0],\r\n  [0, 0, 1, 0, 0],\r\n  [0, 1, 0, 1, 0],\r\n  [1, 0, 0, 0, 1],\r\n  [0, 0, 0, 0, 0]\r\n]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5e4053269916-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5e4053269916-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5e4053269916-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5e4053269916-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5e4053269916-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5e4053269916-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5e4053269916-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d284cf5e4053269916-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d284cf5e4053269916-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5e4053269916-1\"><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5e4053269916-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5e4053269916-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5e4053269916-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5e4053269916-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5e4053269916-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5e4053269916-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d284cf5e4053269916-8\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d284cf5e4053269916-9\"><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0028 seconds] -->\r\n<p><img src=\"https://user-images.githubusercontent.com/19748456/50627126-061e1f00-0f6d-11e9-941c-170cd5ed55db.png\" alt=\"image\"></p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89337\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89337votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89337\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"title": "鲜为人知的 Python 语法", "url": "http://python.jobbole.com/89252/", "url_object_id": "dc9e75633d05c06f3ea15f176edf97d6", "create_date": "2019-06-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/02/3cccc8c943fe706b4be2fc3d02ba4a1e.jpg"], "praise_nums": 2, "comment_nums": 0, "fav_nums": 4, "tags": "基础知识,语法", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://python.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/jobbole\">伯乐在线读者</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://medium.com/@chipiga86/non-obvious-possibilities-of-python-syntax-a95a7210aaaf\">medium</a>。欢迎加入<a target=\"_blank\" href=\"https://github.com/jobbole/translation-project\">翻译组</a>。</div><p>所有人（好吧，不是所有人）都知道 Python 是一门用途广泛、易读、而且容易入门的编程语言。</p>\n<p>但同时 Python 语法也允许我们做一些很奇怪的事情。</p>\n<h1><a id=\"user-content-使用-lambda-表达式重写多行函数\" href=\"#%E4%BD%BF%E7%94%A8-lambda-%E8%A1%A8%E8%BE%BE%E5%BC%8F%E9%87%8D%E5%86%99%E5%A4%9A%E8%A1%8C%E5%87%BD%E6%95%B0\"></a>使用 lambda 表达式重写多行函数</h1>\n<p>众所周知 python 的 lambda 表达式不支持多行代码。但是可以模拟出多行代码的效果。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bd8c25268235238018\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef f():\r\n    x = 'string'\r\n    if x.endswith('g'):\r\n        x = x[:-1]\r\n    r = ''\r\n    for i in xrange(len(x)):\r\n        if x[i] != 'i':\r\n            r += x[i]\r\n    return r\r\nf()\r\n-&gt; 'strn'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c25268235238018-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c25268235238018-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c25268235238018-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c25268235238018-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c25268235238018-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c25268235238018-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c25268235238018-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c25268235238018-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c25268235238018-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c25268235238018-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c25268235238018-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bd8c25268235238018-1\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">f</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c25268235238018-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'string'</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bd8c25268235238018-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">endswith</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'g'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c25268235238018-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bd8c25268235238018-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">r</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c25268235238018-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">xrange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bd8c25268235238018-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'i'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c25268235238018-8\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">r</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bd8c25268235238018-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">r</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c25268235238018-10\"><span class=\"crayon-e\">f</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bd8c25268235238018-11\"><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'strn'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0022 seconds] -->\r\n<p>虽然看起来很奇怪，但是上面的函数可以使用下面的 <strong>lambda</strong> 表达式函数代替：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bd8c25273513140620\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n(lambda: ([x for x in ['string']], x.endswith('g') and [x for x in [x[:-1]]], [r for r in ['']], [x[i] != 'i' and [r for r in [r+x[i]]] for i in xrange(len(x))], r)[-1])()\r\n-&gt; 'strn'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c25273513140620-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c25273513140620-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bd8c25273513140620-1\"><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">lambda</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'string'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">endswith</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'g'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-i\">r</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">r</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'i'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-i\">r</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">r</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">xrange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">r</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c25273513140620-2\"><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'strn'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0029 seconds] -->\r\n\n</div>\n<p>永远不要在生产环境写这样的代码 :)</p>\n<h1><a id=\"user-content-三元运算符\" href=\"#%E4%B8%89%E5%85%83%E8%BF%90%E7%AE%97%E7%AC%A6\"></a>三元运算符</h1>\n<p>现代的 python 提供了更简便的语法:</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bd8c25278752537396\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nb if a else c</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c25278752537396-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bd8c25278752537396-1\"><span class=\"crayon-i\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n\n</div>\n<p>也可以通过下面的方式重写：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bd8c2527b661373548\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n(a and [b] or [c])[0]\r\n\r\n(b, c)[not a]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c2527b661373548-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c2527b661373548-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c2527b661373548-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bd8c2527b661373548-1\"><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c2527b661373548-2\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4bd8c2527b661373548-3\"><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n\n</div>\n<p>顺便说一下，下面的变体是错误的：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bd8c2527f371999287\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\na and b or c\r\nTrue and [] or [1] -&gt; [1], but: [] if True else [1] -&gt; []</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c2527f371999287-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c2527f371999287-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bd8c2527f371999287-1\"><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">c</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c2527f371999287-2\"><span class=\"crayon-t\">True</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">but</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">True</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n\n</div>\n<h2><a id=\"user-content-通过列表推导式移除重复的元素\" href=\"#%E9%80%9A%E8%BF%87%E5%88%97%E8%A1%A8%E6%8E%A8%E5%AF%BC%E5%BC%8F%E7%A7%BB%E9%99%A4%E9%87%8D%E5%A4%8D%E7%9A%84%E5%85%83%E7%B4%A0\"></a>通过列表推导式移除重复的元素</h2>\n<p>让我们来把字符串 <code>x = 'tteesstt'</code> 转换成 <code>'test'</code> 吧。</p>\n<p>1.在原字符串中和上一个字符比较：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bd8c25283941207642\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n''.join(['' if i and j == x[i-1] else j for i,j in enumerate(x)])</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c25283941207642-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bd8c25283941207642-1\"><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">join</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">''</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-i\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">enumerate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n\n</div>\n<p>2.把前一个字符保存到临时变量中：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bd8c25286566161230\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n''.join([('' if i == a else i, [a for a in [i]])[0] for a in [''] for i in x])\r\n''.join([('' if i == a.pop() else i, a.append(i))[0] for a in [['']] for i in x])</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c25286566161230-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c25286566161230-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bd8c25286566161230-1\"><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">join</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">''</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c25286566161230-2\"><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">join</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">''</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0023 seconds] -->\r\n\n</div>\n<p>3.在新字符串中和上一个字符比较：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bd8c2528a706754983\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[(not r.endswith(i) and [r for r in [r+i]], r)[-1] for r in [''] for i in x][-1]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c2528a706754983-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bd8c2528a706754983-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">(</span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">r</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">endswith</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-i\">r</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">r</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">r</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">r</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n\n</div>\n<p>4.通过 reduce 函数和 lambda 表达式：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bd8c2528d659302404\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nreduce(lambda a, b: a if a.endswith(b) else a + b, x)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c2528d659302404-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bd8c2528d659302404-1\"><span class=\"crayon-e\">reduce</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">lambda</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">endswith</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n\n</div>\n<h1><a id=\"user-content-通过列表推导式获得斐波拉契数列\" href=\"#%E9%80%9A%E8%BF%87%E5%88%97%E8%A1%A8%E6%8E%A8%E5%AF%BC%E5%BC%8F%E8%8E%B7%E5%BE%97%E6%96%90%E6%B3%A2%E6%8B%89%E5%A5%91%E6%95%B0%E5%88%97\"></a>通过列表推导式获得斐波拉契数列</h1>\n<ol>\n<li>把中间值保存在列表中</li>\n</ol>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bd8c25290931617712\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[(lambda: (l[-1], l.append(l[-1] + l[-2]))[0])() for l in [[1, 1]] for x in xrange(19)]\r\n[(l[-1], l.append(l[-1] + l[-2]))[0] for l in [[1, 1]] for x in xrange(19)]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c25290931617712-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c25290931617712-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bd8c25290931617712-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">lambda</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">l</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">l</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">l</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">l</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">xrange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">19</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c25290931617712-2\"><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">l</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">l</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">l</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">l</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">xrange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">19</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0025 seconds] -->\r\n\n</div>\n<ol start=\"2\">\n<li>把中间值保存到字典中:</li>\n</ol>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bd8c25295177943265\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[i for x in [(lambda: (l['a'], l.update({'a': l['a'] + l['b']}), l['b'], l.update({'b': l['a'] + l['b']}))[::2])() for l in [{'a': 1, 'b': 1}] for x in xrange(10)] for i in x]\r\n[i for x in [(l['a'], l.update({'a': l['a'] + l['b']}), l['b'], l.update({'b': l['a'] + l['b']}))[::2] for l in [{'a': 1, 'b': 1}] for x in xrange(10)] for i in x]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c25295177943265-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c25295177943265-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bd8c25295177943265-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">lambda</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">l</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'a'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">l</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">update</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'a'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">l</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'a'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">l</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'b'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">l</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'b'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">l</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">update</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'b'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">l</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'a'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">l</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'b'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">::</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'a'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'b'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">xrange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c25295177943265-2\"><span class=\"crayon-sy\">[</span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">l</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'a'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">l</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">update</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'a'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">l</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'a'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">l</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'b'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">l</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'b'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">l</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">update</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'b'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">l</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'a'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">l</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'b'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">::</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'a'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'b'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">xrange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0042 seconds] -->\r\n\n</div>\n<ol start=\"3\">\n<li>通过 reduce 函数和 lambda 表达式：</li>\n</ol>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bd8c25299218887288\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nreduce(lambda a, b: a + [a[-1] + a[-2]], xrange(10), [1, 1])\r\nreduce(lambda a, b: a.append(a[-1] + a[-2]) or a, xrange(10), [1, 1])</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c25299218887288-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c25299218887288-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bd8c25299218887288-1\"><span class=\"crayon-e\">reduce</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">lambda</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">xrange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c25299218887288-2\"><span class=\"crayon-e\">reduce</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">lambda</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">xrange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n\n</div>\n<ol start=\"4\">\n<li>速度最快的变体：</li>\n</ol>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bd8c2529d684502553\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[l.append(l[-1] + l[-2]) or l for l in [[1, 1]] for x in xrange(10)][0]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c2529d684502553-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bd8c2529d684502553-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">l</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">l</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">l</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">xrange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n\n</div>\n<h1><a id=\"user-content-使用列表推导式产生死循环\" href=\"#%E4%BD%BF%E7%94%A8%E5%88%97%E8%A1%A8%E6%8E%A8%E5%AF%BC%E5%BC%8F%E4%BA%A7%E7%94%9F%E6%AD%BB%E5%BE%AA%E7%8E%AF\"></a>使用列表推导式产生死循环</h1>\n<p><code>[a.append(b) for a in [[None]] for b in a]</code></p>\n<h1><a id=\"user-content-列表切片技巧\" href=\"#%E5%88%97%E8%A1%A8%E5%88%87%E7%89%87%E6%8A%80%E5%B7%A7\"></a>列表切片技巧</h1>\n<ol>\n<li>复制列表：</li>\n</ol>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bd8c252a1517403386\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nl = [1, 2, 3]\r\nm = l[:]\r\nm\r\n-&gt; [1, 2, 3]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c252a1517403386-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c252a1517403386-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c252a1517403386-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c252a1517403386-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bd8c252a1517403386-1\"><span class=\"crayon-v\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c252a1517403386-2\"><span class=\"crayon-v\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">l</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bd8c252a1517403386-3\"><span class=\"crayon-v\">m</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c252a1517403386-4\"><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n\n</div>\n<ol start=\"2\">\n<li>移除/替换 列表中的任意元素：</li>\n</ol>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bd8c252a4346171511\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nl = [1, 2, 3]\r\nl[1:-1] = [4, 5, 6, 7]\r\nl\r\n-&gt; [1, 4, 5, 6, 7, 3]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c252a4346171511-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c252a4346171511-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c252a4346171511-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c252a4346171511-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bd8c252a4346171511-1\"><span class=\"crayon-v\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c252a4346171511-2\"><span class=\"crayon-v\">l</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bd8c252a4346171511-3\"><span class=\"crayon-v\">l</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c252a4346171511-4\"><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n\n</div>\n<ol start=\"3\">\n<li>在列表的开头添加元素：</li>\n</ol>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bd8c252a8063461659\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nl = [1, 2, 3]\r\nl[:0] = [4, 5, 6]\r\nl\r\n-&gt; [4, 5, 6, 1, 2, 3]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c252a8063461659-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c252a8063461659-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c252a8063461659-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c252a8063461659-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bd8c252a8063461659-1\"><span class=\"crayon-v\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c252a8063461659-2\"><span class=\"crayon-v\">l</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bd8c252a8063461659-3\"><span class=\"crayon-v\">l</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c252a8063461659-4\"><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n\n</div>\n<ol start=\"4\">\n<li>在列表的尾部添加元素：</li>\n</ol>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bd8c252ab305123226\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nl = [1, 2, 3]\r\nl[-1:] = [l[-1], 4, 5, 6]\r\nl\r\n-&gt; [1, 2, 3, 4, 5, 6]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c252ab305123226-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c252ab305123226-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c252ab305123226-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c252ab305123226-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bd8c252ab305123226-1\"><span class=\"crayon-v\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c252ab305123226-2\"><span class=\"crayon-v\">l</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">l</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bd8c252ab305123226-3\"><span class=\"crayon-v\">l</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c252ab305123226-4\"><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n\n</div>\n<ol start=\"5\">\n<li>反转列表：</li>\n</ol>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bd8c252af246320293\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nl = [1, 2, 3]\r\nl[:] = l[::-1]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c252af246320293-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c252af246320293-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bd8c252af246320293-1\"><span class=\"crayon-v\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c252af246320293-2\"><span class=\"crayon-v\">l</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">l</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">::</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n\n</div>\n<h1><a id=\"user-content-替换方法字节码\" href=\"#%E6%9B%BF%E6%8D%A2%E6%96%B9%E6%B3%95%E5%AD%97%E8%8A%82%E7%A0%81\"></a>替换方法字节码</h1>\n<p>Python 阻止替换类实例中的方法，因为 python 给类实例中的方法赋予了只读属性：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bd8c252b2325901478\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass A(object):\r\n    def x(self):\r\n        print \"hello\"\r\na = A()\r\ndef y(self):\r\n    print \"world\"\r\na.x.im_func = y\r\n-&gt; TypeError: readonly attribute</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c252b2325901478-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c252b2325901478-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c252b2325901478-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c252b2325901478-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c252b2325901478-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c252b2325901478-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c252b2325901478-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c252b2325901478-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bd8c252b2325901478-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">A</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">object</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c252b2325901478-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-i\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">x</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bd8c252b2325901478-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-i\">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"hello\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c252b2325901478-4\"><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">A</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bd8c252b2325901478-5\"><span class=\"crayon-i\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">y</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c252b2325901478-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-i\">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"world\"</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bd8c252b2325901478-7\"><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">im_func</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c252b2325901478-8\"><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TypeError</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">readonly </span><span class=\"crayon-v\">attribute</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n\n</div>\n<p>但是可以在字节码的层面上进行替换：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bd8c252b5110726820\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\na.x.im_func.func_code = y.func_code\r\na.x()\r\n-&gt; 'world'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c252b5110726820-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c252b5110726820-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c252b5110726820-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bd8c252b5110726820-1\"><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">im_func</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">func_code</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">func</span><span class=\"crayon-sy\">_</span>code</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c252b5110726820-2\"><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">x</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bd8c252b5110726820-3\"><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'world'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n\n</div>\n<p><strong>注意！</strong> 这不仅对当前的实例有影响，而且对整个类都有影响（准确的说是与这个类绑定的函数）（译者注:此处应该是笔误，推测作者原意是:准确的说是与这个函数绑定的所有类），并且所有其他的实例也会受到影响：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bd8c252b8717480086\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nnew_a = A()\r\nnew_a.x()\r\n-&gt; 'world'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c252b8717480086-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c252b8717480086-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c252b8717480086-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bd8c252b8717480086-1\"><span class=\"crayon-v\">new_a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">A</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c252b8717480086-2\"><span class=\"crayon-v\">new_a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">x</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bd8c252b8717480086-3\"><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'world'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n\n</div>\n<h1><a id=\"user-content-让可变元素作为函数参数默认值\" href=\"#%E8%AE%A9%E5%8F%AF%E5%8F%98%E5%85%83%E7%B4%A0%E4%BD%9C%E4%B8%BA%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0%E9%BB%98%E8%AE%A4%E5%80%BC\"></a>让可变元素作为函数参数默认值</h1>\n<p>把可变对象作为函数参数的默认值是非常危险的一件事，并且在面试中有大量关于这方面棘手的面试问题。但这一点对于缓存机制非常有帮助。</p>\n<ol>\n<li>阶乘函数：</li>\n</ol>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bd8c252bc967387937\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef f(n, c={}):\r\n    if n in c:\r\n        return c[n]\r\n    if (n &lt; 2):\r\n        r = 1\r\n    else:\r\n        r = n * f(n - 1)\r\n    c[n] = r\r\n    return r\r\nf(10)\r\n-&gt; 3628800\r\nf.func_defaults\r\n({1: 1,\r\n  2: 2,\r\n  3: 6,\r\n  4: 24,\r\n  5: 120,\r\n  6: 720,\r\n  7: 5040,\r\n  8: 40320,\r\n  9: 362880,\r\n  10: 3628800},)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c252bc967387937-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c252bc967387937-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c252bc967387937-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c252bc967387937-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c252bc967387937-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c252bc967387937-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c252bc967387937-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c252bc967387937-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c252bc967387937-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c252bc967387937-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c252bc967387937-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c252bc967387937-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c252bc967387937-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c252bc967387937-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c252bc967387937-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c252bc967387937-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c252bc967387937-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c252bc967387937-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c252bc967387937-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c252bc967387937-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c252bc967387937-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c252bc967387937-22\">22</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bd8c252bc967387937-1\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">f</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c252bc967387937-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bd8c252bc967387937-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c252bc967387937-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bd8c252bc967387937-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">r</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c252bc967387937-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bd8c252bc967387937-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">r</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">f</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c252bc967387937-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">r</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bd8c252bc967387937-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">r</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c252bc967387937-10\"><span class=\"crayon-e\">f</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bd8c252bc967387937-11\"><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3628800</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c252bc967387937-12\"><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">func_defaults</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bd8c252bc967387937-13\"><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c252bc967387937-14\"><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bd8c252bc967387937-15\"><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">3</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c252bc967387937-16\"><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">24</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bd8c252bc967387937-17\"><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">120</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c252bc967387937-18\"><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">6</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">720</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bd8c252bc967387937-19\"><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">7</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5040</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c252bc967387937-20\"><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">8</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">40320</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bd8c252bc967387937-21\"><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">9</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">362880</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c252bc967387937-22\"><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">10</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3628800</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0040 seconds] -->\r\n<p></p>\n<ol start=\"2\">\n<li>斐波拉契数列：</li>\n</ol>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bd8c252bf560969990\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef fib(n, c={}):\r\n    if n in c:\r\n        return c[n]\r\n    if (n &lt; 2):\r\n        r = 1\r\n    else:\r\n        r = fib(n - 2) + fib(n - 1)\r\n    c[n] = r\r\n    return r\r\nfib(10)\r\n-&gt; 89\r\nfib.func_defaults[0].values()\r\n-&gt; [1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c252bf560969990-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c252bf560969990-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c252bf560969990-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c252bf560969990-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c252bf560969990-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c252bf560969990-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c252bf560969990-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c252bf560969990-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c252bf560969990-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c252bf560969990-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c252bf560969990-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bd8c252bf560969990-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bd8c252bf560969990-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bd8c252bf560969990-1\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fib</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c252bf560969990-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bd8c252bf560969990-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c252bf560969990-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bd8c252bf560969990-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">r</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c252bf560969990-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bd8c252bf560969990-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">r</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fib</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fib</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c252bf560969990-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">r</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bd8c252bf560969990-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">r</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c252bf560969990-10\"><span class=\"crayon-e\">fib</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bd8c252bf560969990-11\"><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">89</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bd8c252bf560969990-12\"><span class=\"crayon-v\">fib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">func_defaults</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">values</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bd8c252bf560969990-13\"><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">21</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">34</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">55</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">89</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0036 seconds] -->\r\n\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89252\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89252votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89252\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/jobbole\">伯乐在线读者</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/jobbole\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            ① 本账号用于发布那些在伯乐在线无账号的读者的投稿，包括译文和原创文章。② 欢迎加入伯乐在线专栏作者：http://blog.jobbole.com/99322/        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/jobbole\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://python.jobbole.com/author/jobbole/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/jobbole/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 34</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"title": "盘点 Python 的目标受众", "url": "http://python.jobbole.com/89258/", "url_object_id": "707a5cba9a385d4924e89edb459a81ff", "create_date": "2019-06-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/02/edecceebedd0d04aa17bccba430ddcaf.jpg"], "praise_nums": 1, "comment_nums": 0, "fav_nums": 0, "tags": "基础知识,目标受众", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"http://www.curiousefficiency.org/posts/2017/10/considering-pythons-target-audience.html\"> Nick Coghlan</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9936-1.html\">Linux中国--qhwdw</a>   </div><p>Python 是为谁设计的？</p>\n<p>几年前，我在 python-dev 邮件列表中，以及在活跃的 CPython 核心开发人员和认为参与这一过程不是有效利用个人时间和精力的人中<a href=\"http://www.curiousefficiency.org/posts/2011/04/musings-on-culture-of-python-dev.html\">强调</a>说，“CPython 的发展太快了也太慢了” 是很多冲突的原因之一。</p>\n<p>我一直认为事实确实如此，但这也是一个要点，在这几年中我也花费了很多时间去反思它。在我写那篇文章的时候，我还在波音防务澳大利亚公司（Boeing Defence Australia）工作。下个月，我离开了波音进入红帽亚太（Red Hat Asia-Pacific），并且开始在大企业的<a href=\"http://community.redhat.com/blog/2015/02/the-quid-pro-quo-of-open-infrastructure/\">开源供应链管理</a>方面取得了再分发者redistributor层面的视角。</p>\n<h1 id=\"toc_1\">Python 的参考解析器使用情况</h1>\n<p>我尝试将 CPython 的使用情况分解如下，尽管看起来有些过于简化（注意，这些分类的界线并不是很清晰，他们仅关注于考虑新软件特性和版本发布后不同因素的影响）：</p>\n<ul>\n<li>教育类：教育工作者的主要兴趣在于建模方法的教学和计算操作方面，<em>不会去</em>编写或维护生产级别的软件。例如：\n<ul>\n<li>澳大利亚的<a href=\"https://aca.edu.au/#home-unpack\">数字课程</a></li>\n<li>Lorena A. Barba 的 <a href=\"https://github.com/barbagroup/AeroPython\">AeroPython</a></li>\n</ul>\n</li>\n<li>个人类的自动化和爱好者的项目：主要且经常是一类自写自用的软件。例如：\n<ul>\n<li>my Digital Blasphemy <a href=\"https://nbviewer.jupyter.org/urls/bitbucket.org/ncoghlan/misc/raw/default/notebooks/Digital%20Blasphemy.ipynb\">图片下载器</a></li>\n<li>Paul Fenwick 的 (Inter)National <a href=\"https://github.com/pjf/rickastley\">Rick Astley Hotline</a></li>\n</ul>\n</li>\n<li>组织organisational过程自动化：主要且经常是为组织利益而编写的。例如：\n<ul>\n<li>CPython 的<a href=\"https://github.com/python/core-workflow\">核心工作流工具</a></li>\n<li>Linux 发行版的开发、构建和发行管理工具</li>\n</ul>\n</li>\n<li>“一劳永逸Set-and-forget” 的基础设施：这类软件在其生命周期中几乎不会升级，但在底层平台可能会升级（这种说法有时候有些争议）。例如：\n<ul>\n<li>大多数自我管理的企业或机构的基础设施（在那些资金充足的可持续工程计划中，这种情况是让人非常不安的）</li>\n<li>拨款资助的软件（当最初的拨款耗尽时，维护通常会终止）</li>\n<li>有严格认证要求的软件（如果没有绝对必要的话，从经济性考虑，重新认证比常规升级来说要昂贵很多）</li>\n<li>没有自动升级功能的嵌入式软件系统</li>\n</ul>\n</li>\n<li>持续升级的基础设施：具有健壮支撑的工程学模型的软件，对于依赖和平台升级通常是例行的，不必关心源码变更。例如：\n<ul>\n<li>Facebook 的 Python 服务基础设施</li>\n<li>滚动发布的 Linux 分发版</li>\n<li>大多数的公共 PaaS 无服务器环境（Heroku、OpenShift、AWS Lambda、Google Cloud Functions、Azure Cloud Functions 等等）</li>\n</ul>\n</li>\n<li>长周期性升级的标准的操作环境：对其核心组件进行常规升级，但这些升级以年为单位进行，而不是周或月。例如：\n<ul>\n<li><a href=\"http://www.vfxplatform.com/\">VFX 平台</a></li>\n<li>长期支持（LTS）的 Linux 分发版</li>\n<li>CPython 和 Python 标准库</li>\n<li>基础设施管理和编排工具（如 OpenStack、Ansible）</li>\n<li>硬件控制系统</li>\n</ul>\n</li>\n<li>短生命周期的软件：软件仅被使用一次，然后就丢弃或忽略，而不是随后接着升级。例如：\n<ul>\n<li>临时Ad hoc自动化脚本</li>\n<li>被确定为 “终止” 的单用户游戏（你玩了一次后，甚至都忘了去卸载它们，或许在一个新的设备上都不打算再去安装了）</li>\n<li>不具备（或不完整）状态保存的单用户游戏（如果你卸载并重安装它们，游戏体验也不会有什么大的变化）</li>\n<li>特定事件的应用程序（这些应用程序与特定的事件捆绑，一旦事件结束，这些应用程序就不再有用了）</li>\n</ul>\n</li>\n<li>常规用途的应用程序：部署后定期升级的软件。例如：\n<ul>\n<li>业务管理软件</li>\n<li>个人和专业的生产力应用程序（如 Blender）</li>\n<li>开发工具和服务（如 Mercurial、Buildbot、Roundup）</li>\n<li>多用户游戏，和其它明显处于持续状态还没有被定义为 “终止” 的游戏</li>\n<li>有自动升级功能的嵌入式软件系统</li>\n</ul>\n</li>\n<li>共享的抽象层：在一个特定的问题领域中，设计用于让工作更高效的软件组件。即便是你没有亲自掌握该领域的所有错综复杂的东西。例如：\n<ul>\n<li>大多数的运行时runtime库和框架都归入这一类（如 Django、Flask、Pyramid、SQL Alchemy、NumPy、SciPy、requests)</li>\n<li>适合归入这一类的许多测试和类型推断工具（如 pytest、Hypothesis、vcrpy、behave、mypy）</li>\n<li>其它应用程序的插件（如 Blender plugins、OpenStack hardware adapters）</li>\n<li>本身就代表了 “Python 世界” 基准的标准库（那是一个<a href=\"http://www.curiousefficiency.org/posts/2015/10/languages-to-improve-your-python.html#broadening-our-horizons\">难以置信的复杂</a>的世界观）</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"toc_2\">CPython 主要服务于哪些受众？</h1>\n<p>从根本上说，CPython 和标准库的主要受众是哪些呢？是那些不管出于什么原因，将有限的标准库和从 PyPI 显式声明安装的第三方库组合起来所提供的服务还不能够满足需求的那些人。</p>\n<p>为了更进一步简化上面回顾的不同用法和部署模型，宏观地将最大的 Python 用户群体分开来看，一类是在一些感兴趣的环境中将 Python 作为一种 <em>脚本语言</em> 使用的人；另外一种是将它用作一个 <em>应用程序开发语言</em> 的人，他们最终发布的是一种产品而不是他们的脚本。</p>\n<p>把 Python 作为一种脚本语言来使用的开发者的典型特性包括：</p>\n<ul>\n<li>主要的工作单元是由一个 Python 文件组成的（或 Jupyter notebook)，而不是一个 Python 和元数据文件的目录</li>\n<li>没有任何形式的单独的构建步骤 —— 是<em>作为</em>一个脚本分发的，类似于分发一个独立的 shell 脚本的方式</li>\n<li>没有单独的安装步骤（除了下载这个文件到一个合适的位置），因为在目标系统上要求预配置运行时环境</li>\n<li>没有显式的规定依赖关系，除了最低的 Python 版本，或一个预期的运行环境声明。如果需要一个标准库以外的依赖项，他们会通过一个环境脚本去提供（无论是操作系统、数据分析平台、还是嵌入 Python 运行时的应用程序）</li>\n<li>没有单独的测试套件，使用 “通过你给定的输入，这个脚本是否给出了你期望的结果?” 这种方式来进行测试</li>\n<li>如果在执行前需要测试，它将以试运行dry run&gt;和预览preview模式来向用户展示软件<em>将</em>怎样运行</li>\n<li>如果使用静态代码分析工具，则通过集成到用户的软件开发环境中，而不是为每个脚本单独设置</li>\n</ul>\n<p>相比之下，使用 Python 作为一个应用程序开发语言的开发者特征包括：</p>\n<ul>\n<li>主要的工作单元是由 Python 和元数据文件组成的目录，而不是单个 Python 文件</li>\n<li>在发布之前有一个单独的构建步骤去预处理应用程序，哪怕是把它的这些文件一起打包进一个 Python sdist、wheel 或 zipapp 中</li>\n<li>应用程序是否有独立的安装步骤做预处理，取决于它是如何打包的，和支持的目标环境</li>\n<li>外部的依赖明确存在于项目目录下的一个元数据文件中，要么是直接在项目目录中（如 <code>pyproject.toml</code>、<code>requirements.txt</code>、<code>Pipfile</code>），要么是作为生成的发行包的一部分（如 <code>setup.py</code>、<code>flit.ini</code>）</li>\n<li>有独立的测试套件，或者作为一个 Python API 的一个单元测试，或者作为功能接口的集成测试，或者是两者都有</li>\n<li>静态分析工具的使用是在项目级配置的，并作为测试管理的一部分，而不是作为依赖</li>\n</ul>\n<p>作为以上分类的一个结果，CPython 和标准库的主要用途是，在相应的 CPython 特性发布后，为教育和临时ad hoc的 Python 脚本环境提供 3-5 年基础维护服务。</p>\n<p>对于临时脚本使用的情况，这个 3-5 年的延迟是由于再分发者给用户开发新版本的延迟造成的，以及那些再分发版本的用户们花在修改他们的标准操作环境上的时间。</p>\n<p>对于教育环境中的情况是，教育工作者需要一些时间去评估新特性，然后决定是否将它们包含进教学的课程中。</p>\n<h3 id=\"toc_3\">这些相关问题的原因是什么？</h3>\n<p>这篇文章很大程度上是受 Twitter 上对<a href=\"https://twitter.com/ncoghlan_dev/status/916994106819088384\">我的这个评论</a>的讨论的启发，它援引了定义在 <a href=\"https://www.python.org/dev/peps/pep-0411/\">PEP 411</a> 中临时Provisional API 的情形，作为一个开源项目的例子，对用户发出事实上的邀请，请其作为共同开发者去积极参与设计和开发过程，而不是仅被动使用已准备好的最终设计。</p>\n<p>这些回复包括一些在更高级别的库中支持临时 API 的困难程度的一些沮丧性表述，没有这些库做临时状态的传递，因此而被限制为只有临时 API 的最新版本才支持这些相关特性，而不是任何早期版本的迭代。</p>\n<p>我的<a href=\"https://twitter.com/ncoghlan_dev/status/917092464355241984\">主要回应</a>是，建议开源提供者应该强制实施有限支持，通过这种强制的有限支持可以让个人的维护努力变得可持续。这意味着，如果对临时 API 的老版本提供迭代支持是非常痛苦的，那么，只有在项目开发人员自己需要、或有人为此支付费用时，他们才会去提供支持。这与我的这个观点是类似的，那就是，志愿者提供的项目是否应该免费支持老的、商业性质的、长周期的 Python 版本，这对他们来说是非常麻烦的事，我<a href=\"http://www.curiousefficiency.org/posts/2015/04/stop-supporting-python26.html\">不认为他们应该这样做</a>，正如我所期望的那样，大多数这样的需求都来自于管理差劲的惯性，而不是真正的需求（真正的需求，应该去支付费用来解决问题）。</p>\n<p>而我的<a href=\"https://twitter.com/ncoghlan_dev/status/917088410162012160\">第二个回应</a>是去实现这一点，尽管多年来一直在讨论这个问题（比如，在上面链接中最早在 2011 年的一篇的文章中，以及在 Python 3 问答的回复中的<a href=\"http://python-notes.curiousefficiency.org/en/latest/python3/questions_and_answers.html#wouldn-t-a-python-2-8-release-help-ease-the-transition\">这里</a>、<a href=\"http://python-notes.curiousefficiency.org/en/latest/python3/questions_and_answers.html#doesn-t-this-make-python-look-like-an-immature-and-unstable-platform\">这里</a>、和<a href=\"http://python-notes.curiousefficiency.org/en/latest/python3/questions_and_answers.html#what-about-insert-other-shiny-new-feature-here\">这里</a>，以及去年的这篇文章 <a href=\"http://www.curiousefficiency.org/posts/2016/09/python-packaging-ecosystem.html\">Python 包生态系统</a>中也提到了一些)，但我从来没有真实地尝试直接去解释它在标准库设计过程中的影响。</p>\n<p>如果没有这些背景，设计过程中的一部分，比如临时 API 的引入，或者是受启发而不同于它inspired-by-not-the-same-as的引入，看起来似乎是完全没有意义的，因为他们看起来似乎是在尝试对 API 进行标准化，而实际上并没有。</p>\n<h1 id=\"toc_4\">适合进入 PyPI 规划的方面有哪些？</h1>\n<p><em>任何</em>提交给 python-ideas 或 python-dev 的提案所面临的第一个门槛就是清楚地回答这个问题：“为什么 PyPI 上的模块不够好？”。绝大多数的提案都在这一步失败了，为了通过这一步，这里有几个常见的话题：</p>\n<ul>\n<li>比起下载一个合适的第三方库，新手一般可能更倾向于从互联网上 “复制粘贴” 错误的指导。（这就是为什么存在 <code>secrets</code> 库的原因：它使得人们很少去使用 <code>random</code> 模块，由于安全敏感的原因，它预期用于游戏和模拟统计）</li>\n<li>该模块旨在提供一个参考实现，并允许与其它的竞争实现之间提供互操作性，而不是对所有人的所有事物都是必要的。（如 <code>asyncio</code>、<code>wsgiref</code>、<code>unittest</code>、和 <code>logging</code> 都是这种情况）</li>\n<li>该模块是预期用于标准库的其它部分（如 <code>enum</code> 就是这种情况，像 <code>unittest</code> 一样）</li>\n<li>该模块是被设计用于支持语言之外的一些语法（如 <code>contextlib</code>、<code>asyncio</code> 和 <code>typing</code>）</li>\n<li>该模块只是普通的临时的脚本用途（如 <code>pathlib</code> 和 <code>ipaddress</code>）</li>\n<li>该模块被用于一个教育环境（例如，<code>statistics</code> 模块允许进行交互式地探索统计的概念，尽管你可能根本就不会用它来做完整的统计分析）</li>\n</ul>\n<p>只通过了前面的 “PyPI 是不是明显不够好” 的检查，一个模块还不足以确保被纳入标准库中，但它已经足以将问题转变为 “在未来几年中，你所推荐的要包含的库能否对一般的入门级 Python 开发人员的经验有所提升？”</p>\n<p>标准库中的 <code>ensurepip</code> 和 <code>venv</code> 模块的引入也明确地告诉再分发者，我们期望的 Python 级别的打包和安装工具在任何平台的特定分发机制中都予以支持。</p>\n<h1 id=\"toc_5\">当添加它们到标准库中时，为什么一些 API 会被修改？</h1>\n<p>现有的第三方模块有时候会被批量地采用到标准库中，在其它情况下，实际上添加的是吸收了用户对现有 API 体验之后进行重新设计和重新实现的 API，但是会根据另外的设计考虑和已经成为其中一部分的语言实现参考来进行一些删除或细节修改。</p>\n<p>例如，与流行的第三方库 <code>path.py</code>、<code>pathlib</code> 的前身不同，它们并<em>没有</em>定义字符串子类，而是以独立的类型替代。作为解决文件互操作性问题的结果，定义了文件系统路径协议，它允许使用文件系统路径的接口去使用更多的对象。</p>\n<p>为了在 “IP 地址” 这个概念的教学上提供一个更好的工具，<code>ipaddress</code> 模块设计调整为明确地将主机接口定义与地址和网络的定义区分开（IP 地址被关联到特定的 IP 网络)，而最原始的 <code>ipaddr</code> 模块中，在网络术语的使用方式上不那么严格。</p>\n<p>另外的情况是，标准库将综合多种现有的方法的来构建，以及为早已存在的库定义 API 时，还有可能依赖不存在的语法特性。比如，<code>asyncio</code> 和 <code>typing</code> 模块就全部考虑了这些因素，虽然在 PEP 557 中正在考虑将后者所考虑的因素应用到 <code>dataclasses</code> API 上。（它可以被总结为 “像属性一样，但是使用可变注释作为字段声明”）。</p>\n<p>这类修改的原理是，这类库不会消失，并且它们的维护者对标准库维护相关的那些限制通常并不感兴趣（特别是相对缓慢的发布节奏）。在这种情况下，在标准库文档的更新版本中使用 “See Also” 链接指向原始模块的做法非常常见，尤其是在第三方版本额外提供了标准库模块中忽略的那些特性时。</p>\n<h1 id=\"toc_6\">为什么一些 API 是以临时的形式被添加的？</h1>\n<p>虽然 CPython 维护了 API 的弃用策略，但在没有正当理由的情况下，我们通常不会去使用该策略（在其他项目试图与 Python 2.7 保持兼容性时，尤其如此）。</p>\n<p>然而在实践中，当添加这种受已有的第三方启发而不是直接精确拷贝第三方设计的新 API 时，所承担的风险要高于一些正常设计决定可能出现问题的风险。</p>\n<p>当我们考虑到这种改变的风险比平常要高，我们将相关的 API 标记为临时，表示保守的终端用户要避免完全依赖它们，而共享抽象层的开发者可能希望对他们准备去支持的那个临时 API 的版本考虑实施比平时更严格的限制。</p>\n<h1 id=\"toc_7\">为什么只有一些标准库 API 被升级？</h1>\n<p>这里简短的回答得到升级的主要 API 有哪些：</p>\n<ul>\n<li>不太可能有大量的外部因素干扰的附加更新的</li>\n<li>无论是对临时脚本用例还是对促进将来多个第三方解决方案之间的互操作性，都有明显好处的</li>\n<li>对这方面感兴趣的人提交了一个可接受的建议的</li>\n</ul>\n<p>如果在将模块用于应用程序开发目的时（如 <code>datetime</code>），现有模块的限制主要是显而易见的，如果再分发者通过第三方方案很容易地实现了改进，（如 <code>requests</code>），或者如果标准库的发布节奏与所需要的包之间真的存在冲突，（如 <code>certifi</code>），那么，建议对标准库版本进行改变的因素将显著减少。</p>\n<p>从本质上说，这和上面关于 PyPI 问题正好相反：因为从应用程序开发人员体验的角度来说，PyPI 的分发机制通常已经够好了，这种分发方式的改进是有意义的，允许再分发者和平台提供者自行决定将哪些内容作为他们缺省提供的一部分。</p>\n<p>假设在 3-5 年时间内，缺省出现了被认为是改变带来的可感知的价值时，才会将这些改变纳入到 CPython 和标准库中。</p>\n<h1 id=\"toc_8\">标准库任何部分都有独立的版本吗？</h1>\n<p>是的，就像是 <code>ensurepip</code> 使用的捆绑模式（CPython 发行了一个 <code>pip</code> 的最新捆绑版本，而并没有把它放进标准库中），将来可能被应用到其它模块中。</p>\n<p>最有可能的第一个候选者是 <code>distutils</code> 构建系统，因为切换到这种模式将允许构建系统在多个发行版本之间保持一致。</p>\n<p>这种处理方式的其它可能候选者是 Tcl/Tk 图形套件和 IDLE 编辑器，它们已经被拆分，并且一些开发者将其改为可选安装项。</p>\n<h1 id=\"toc_9\">这些注意事项为什么很重要？</h1>\n<p>从本质上说，那些积极参与开源开发的人就是那些致力于开源应用程序和共享抽象层的人。</p>\n<p>那些写一些临时脚本或为学生设计一些教学习题的人，通常不认为他们是软件开发人员 —— 他们是教师、系统管理员、数据分析人员、金融工程师、流行病学家、物理学家、生物学家、市场研究员、动画师、平面设计师等等。</p>\n<p>对于一种语言，当我们全部的担心都是开发人员的经验时，那么我们就可以根据人们所知道的内容、他们使用的工具种类、他们所遵循的开发流程种类、构建和部署他们软件的方法等假定，来做大量的简化。</p>\n<p>当应用程序运行时作为脚本引擎广泛流行时，事情会变得更加复杂。做好任何一项工作已经很困难，并且作为单个项目的一部分来平衡两个受众的需求会导致双方经常不理解和不相信。</p>\n<p>这篇文章不是为了说明我们在开发 CPython 过程中从来没有做出过不正确的决定 —— 它只是去合理地回应那些对添加到 Python 标准库中的看上去很荒谬的特性的质疑，它将是 “我不是那个特性的预期目标受众的一部分”，而不是 “我对它没有兴趣，因此它对所有人都是毫无用处和没有价值的，添加它纯属骚扰我”。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89258\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89258votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89258\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"title": "示例解读 Python 2 和 Python 3 之间的主要差异", "url": "http://python.jobbole.com/89263/", "url_object_id": "a2ed9b025e5df4e8b88e42c7cad34c20", "create_date": "2019-06-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/08/31fa8f53bfe2d0e316758ab4ffe913e0.png"], "praise_nums": 1, "comment_nums": 0, "fav_nums": 2, "tags": "基础知识,Python", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://jaxenter.com/differences-python-2-3-148432.html\">Vinodh Kumar</a>   译文出处：<a target=\"_blank\" href=\"https://www.oschina.net/news/99235/difference-between-python2-and-python-3\">开源中国</a>   </div><p>每门编程语言在发布更新之后，主要版本之间都会发生很大的变化。 在本文中，Vinodh Kumar 通过示例解释了 Python 2 和 Python 3 之间的一些重大差异，以帮助说明语言的变化。<a href=\"http://jbcdn2.b0.upaiyun.com/2015/02/86a1298ce44ca9807871520b81767e6f.gif\"><br>\n</a></p>\n<div id=\"articleContent\">\n<p>本教程主要介绍内容：</p>\n<ul>\n<li>表达式</li>\n<li>Print 选项</li>\n<li>Unequal 操作</li>\n<li>Range</li>\n<li>自动迁移</li>\n<li>性能问题</li>\n<li>主要的内部事务更改</li>\n</ul>\n<h1>1、表达式</h1>\n<p>在 Python 2 中为获得计算表达式，你会键入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d1b0199c9582642549\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nX = raw_input (\"enter some values)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d1b0199c9582642549-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d1b0199c9582642549-1\"><span class=\"crayon-i\">X</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-v\">raw</span><span class=\"crayon-sy\">_</span>input <span class=\"crayon-sy\">(</span>\"<span class=\"crayon-i\">enter</span> <span class=\"crayon-i\">some</span> <span class=\"crayon-v\">values</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>但在 Python 3 中，你会键入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d1b0199d2462146923\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nX = input (\"enter some values\")</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d1b0199d2462146923-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d1b0199d2462146923-1\"><span class=\"crayon-i\">X</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-i\">input</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"enter some values\"</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>因此，无论我们输入什么，值都会分配给 2 和 3 中的变量 x。当在 Python 2 中输入 2*6 时，结果将是 12，这是评估值。</p>\n<p>但是，当在 Python 3 中运行相同的程序时，结果是字符串值。 在这种情况下，它看起来像字符串格式的 2*6。</p>\n<p>那么，我们如何获得评估表达式呢？ 现在，我们必须使用一个名为 eval 的表达式或函数。 当您在输入之前编写 eval 时，它会将表达式转换为计算值。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d1b0199d6683135480\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nx= eval(input(\"enter some values\")) = 12</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d1b0199d6683135480-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d1b0199d6683135480-1\"><span class=\"crayon-v\">x</span><span class=\"crayon-o\">=</span> <span class=\"crayon-e\">eval</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">input</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"enter some values\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-cn\">12</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p><strong>具体表达式示例：</strong></p>\n<p>在 Python 2 中：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d1b0199da943381420\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nname = input(\"What is your name? \")print (\"Hello, %s.\" %name)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d1b0199da943381420-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d1b0199da943381420-1\"><span class=\"crayon-i\">name</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-e\">input</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"What is your name? \"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-i\">print</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Hello, %s.\"</span> <span class=\"crayon-o\">%</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>然后输出：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/08/31fa8f53bfe2d0e316758ab4ffe913e0.png\" width=\"438\" height=\"115\"></p>\n<p>在 Python 3 中：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d1b0199dd391962601\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nname = input(\"What is your name? \")print (\"Hello, %s.\" %name)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d1b0199dd391962601-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d1b0199dd391962601-1\"><span class=\"crayon-i\">name</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-e\">input</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"What is your name? \"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-i\">print</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Hello, %s.\"</span> <span class=\"crayon-o\">%</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>然后输出：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/08/7858b686989bad3a421fab23ab38281b.png\" width=\"435\" height=\"99\"></p>\n<p>我们可以清楚地看到，他们之间的差异很小。</p>\n<h1>2、Print 选项</h1>\n<p>在 Python 2 中，print 是一个不需要括号的语句。 在 Python 3 中，print 是一个函数，值需要用括号括起来。</p>\n<p><strong>Python 2</strong></p>\n<p>输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d1b0199e1302383741\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nprint \"hello world\"</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d1b0199e1302383741-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d1b0199e1302383741-1\"><span class=\"crayon-i\">print</span> <span class=\"crayon-s\">\"hello world\"</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>会输出：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/08/357ad1f81689bed9d281080f809f9744.png\" width=\"398\" height=\"81\"></p>\n<p><strong>Python 3</strong></p>\n<p>输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d1b0199e4955870657\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n1 != 1.0print (False)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d1b0199e4955870657-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d1b0199e4955870657-1\"><span class=\"crayon-cn\">1</span> <span class=\"crayon-o\">!=</span> <span class=\"crayon-cn\">1.0print</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-t\">False</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>会输出：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/08/35aa3eb1937567d098057f85cf20f299.png\" width=\"397\" height=\"82\"></p>\n<h1>3、Unequal 操作</h1>\n<p>当我们在 Python 2 中使用 Unequal 运算符时，我们需要使用大于 &gt; 或小于 &lt; 符号。 但是，在 Python 3 中，有一个通用运算符。 感叹号 ! 和等号 = 用于表示值是否相等。</p>\n<p>Python 2 -&lt;&gt; 运算符表示不相等<br>\nPython 3 -! 运算符表示不相等</p>\n<p><strong>Python 2</strong></p>\n<p>输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d1b0199e7682360457\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n1 &lt;&gt; 1.0print \"False\"</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d1b0199e7682360457-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d1b0199e7682360457-1\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.0print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"False\"</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>会输出：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/08/73127bc8b0f543a7568e3efd5721903a.png\" width=\"400\" height=\"84\"></p>\n<p><strong>Python 3</strong></p>\n<p>输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d1b0199eb444876550\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n1 != 1.0print (False)1 != 1.0print (False)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d1b0199eb444876550-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d1b0199eb444876550-1\"><span class=\"crayon-cn\">1</span> <span class=\"crayon-o\">!=</span> <span class=\"crayon-cn\">1.0print</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-t\">False</span><span class=\"crayon-sy\">)</span><span class=\"crayon-cn\">1</span> <span class=\"crayon-o\">!=</span> <span class=\"crayon-cn\">1.0print</span> <span class=\"crayon-sy\">(</span><span class=\"crayon-t\">False</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>会输出：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/08/3f540755b7b2b3566fdacc5a8e0458a5.png\" width=\"400\" height=\"96\"></p>\n<h1>4、Range</h1>\n<p>Range 用于生成数字列表，通常用于迭代 for 循环。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/08/b61ebcaf57d1128acd2b6a5e3352ae7d.png\" width=\"703\" height=\"315\"></p>\n<p>在这里你可以看到 X 等于 Range 10。当我们检查变量 X 时，它返回了列表类型。 这意味着在 Python 2 中，Range 是列表的类型。当我写 X 之后，得到一个对象列表，这里是：0 1 2 3 4 5 6 7 8 9。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/08/ca1cc003ba81aa218608921f2bfc029c.png\" width=\"645\" height=\"137\"></p>\n<p>现在让我们转到 Python 3，当我们写 X 等于 Range 5，这个值就被赋给变量 X；当我们检查变量 X 的类型时，它会返回一个 Range 对象本身。 这意味着在 Python 3 中，Range 是一个范围对象本身。</p>\n<p><strong>Python 2</strong></p>\n<p>输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d1b0199ee020473931\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nprint range(0,10,1)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d1b0199ee020473931-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d1b0199ee020473931-1\"><span class=\"crayon-i\">print</span> <span class=\"crayon-e\">range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>会输出：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/08/95f38afdb58afb8c5c19381eca492431.png\" width=\"391\" height=\"115\"></p>\n<p><strong>Python 3</strong></p>\n<p>输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d1b0199f2007242597\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nprint(list(range(10)))</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d1b0199f2007242597-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d1b0199f2007242597-1\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">list</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>会输出：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/08/c7a13c6014444570bf51b5dc7fb9efb7.png\" width=\"390\" height=\"99\"></p>\n<h1>5、自动迁移</h1>\n<p>那么，我们如何自动执行脚本以将代码从 Python 2 移动到 3？</p>\n<p>在这里，我们可以使用 Python 中的 Add 2 Numbers 进行测试。</p>\n<p><strong>Python 2</strong></p>\n<p>输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d1b0199f5337837026\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nn1 = 1n2 = 2add = float(n1) + float(n2)print 'sum of {0} and {1} is {2}'.format(n1, n2, add)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d1b0199f5337837026-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d1b0199f5337837026-1\"><span class=\"crayon-i\">n1</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-cn\">1n2</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-cn\">2add</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-t\">float</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n1</span><span class=\"crayon-sy\">)</span> <span class=\"crayon-o\">+</span> <span class=\"crayon-t\">float</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-i\">print</span> <span class=\"crayon-s\">'sum of {0} and {1} is {2}'</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n1</span><span class=\"crayon-sy\">,</span> <span class=\"crayon-v\">n2</span><span class=\"crayon-sy\">,</span> <span class=\"crayon-v\">add</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>会输出：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/08/fa7832dcf2994126026848addc7e0592.png\" width=\"390\" height=\"90\"></p>\n<p>现在使用 2to3 的迁移，我们可以转换上面的代码。</p>\n<p>输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d1b0199f8996647297\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nn1 = 1n2 = 2add = float(n1) + float(n2)\r\nprint('sum of {0} and {1} is {2}'.format(n1, n2, add))</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d1b0199f8996647297-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d1b0199f8996647297-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d1b0199f8996647297-1\"><span class=\"crayon-i\">n1</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-cn\">1n2</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-cn\">2add</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-t\">float</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n1</span><span class=\"crayon-sy\">)</span> <span class=\"crayon-o\">+</span> <span class=\"crayon-t\">float</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n2</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d1b0199f8996647297-2\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'sum of {0} and {1} is {2}'</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n1</span><span class=\"crayon-sy\">,</span> <span class=\"crayon-v\">n2</span><span class=\"crayon-sy\">,</span> <span class=\"crayon-v\">add</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>会输出：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/08/c451809aec9760e156a3986e1d109cc2.png\" width=\"390\" height=\"90\"></p>\n<p>所以在这里我们看到它可以在命令行上通过 2to3 转换为 Python 3 代码。</p>\n<p>Python 提供了自己的工具，名为 2to3.py，它运行了一堆脚本来将你的 Python 2 代码转换为 3。虽然它并不完美，但它总体上做得非常出色。转换任何代码后，您可以手动修复任何问题。</p>\n<h1>6、性能问题</h1>\n<p>此升级中已修复了大多数性能问题！ 在比较两个版本之间的基准时，差异几乎可以忽略不计。</p>\n<h1>7、一些主要的内部事务变更</h1>\n<p>Python 2</p>\n<ul>\n<li>print 功能括号选填。</li>\n<li>使用 u 作为前缀字符串以生成 unicode 字符串。</li>\n<li>整数除法总是返回整数 -5/2=2。</li>\n<li>Raw_input() 读取字符串。</li>\n<li>input() 评估读取的数据。</li>\n<li>generator .next()。</li>\n</ul>\n<p>Python 3：</p>\n<ul>\n<li>print 功能括号必填。</li>\n<li>默认情况下为字符串 unicode。</li>\n<li>整数除法可能导致浮动 -5/2=2.5。</li>\n<li>Raw_input() 不可用。</li>\n<li>输入始终读取字符串。</li>\n<li>Next (generator)。</li>\n<li>Py2 to py3 实用程序。</li>\n<li>Dictionary .keys() 和 .values() 返回的为视图不是列表。</li>\n<li>在非自然比较中不能再使用比较运算符。<br>\n例如，None &lt; None 将引发 TypeError 而不是返回 false。</li>\n<li>不推荐使用百分比（％）字符串格式化运算符，使用 .format() 函数或连接。</li>\n</ul>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89263\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89263votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89263\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"title": "Python 核心开发者解释为何 Python 4.0 不会像 3.0 一样", "url": "http://python.jobbole.com/89267/", "url_object_id": "b71135b253219eff5d8c7fae6f58f077", "create_date": "2019-06-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/02/24004ba5c7c6660ad259e346b2d86114.png"], "praise_nums": 1, "comment_nums": 0, "fav_nums": 1, "tags": "基础知识,Python", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/life/14/9/why-python-4-wont-be-python-3\">Nick Coghlan</a>   译文出处：<a target=\"_blank\" href=\"https://www.oschina.net/translate/why-python-4-wont-be-python-3?print\">oschina</a>   </div><p>当提出向后不兼容的更改时python-ideas的新手偶尔会提出“Python 4000”的概念，这些更改不给当前合法的Python3代码提供明确的移植路径。毕竟，我们允许Python 3.0进行这种更改，那么为什么我们不允许它用于Python 4.0呢？</p>\n<p>我现在已经听过那么多问题了（包括更关注的措辞“你做了一次大的向后兼容性突破，我怎么知道你不会再这样做了？”），我想我会在这里记录我的答案，所以我将来能够将人们引回来。</p>\n<h1>现在对Python 4.0的预测是什么？</h1>\n<p>我现在的预测就是Python 4.0只不过是“Python 3.9后的版本”。就是这样。对语言来说没有重大改变，没有主要向后兼容突破——从Python 3.9到4.0应该就像从Python 3.3 到3.4（或者从2.6到2.7）。我甚至预测稳定的应用程序二进制接口（Application Binary Interface）（在<a href=\"http://www.python.org/dev/peps/pep-0384/\" target=\"_blank\" rel=\"nofollow\">PEP 384</a>中首次定义一样）会在这个过渡边界上保留。</p>\n<p>按照当前语言特性发布的速度（大约每18个月），意味着我们可能会在2023年的某个时候看到Python 4.0，而不是看到Python 3.10。</p>\n<h2>那么 Python 将如何继续发展？</h2>\n<p>首先，Python 增强提议流程没有任何变化 —— 仍然提出了后向兼容的更改，添加了新模块（如 asyncio）和语言功能（如 yield from）以增强 Python 应用程序可用的功能。随着时间的推移，Python 3 在默认情况下提供的功能方面继续领先于 Python 2，即使 Python 2 用户可以通过第三方模块或 Python 3 的后端访问同等功能。</p>\n<p>在解释器实现和扩展上竞赛还将继续探索增强Python的不同方法，包括PyPy对JIT编译器生成和软件事务存储的探索，以及在科学和数据分析社区中对充分利用现代CPU和GPU所提供的矢量化计算能力的面向阵列编程的探索。与其他虚拟机运行时（如JVM和CLR）的集成也有望随着时间的推移而改进，尤其是当Python在教育领域取得的进展可能使其作为嵌入式脚本语言在更多的应用程序的运行时的运行环境中更受欢迎。</p>\n<p>对于向后不兼容的改动，<a href=\"http://www.python.org/dev/peps/pep-0387/\" target=\"_blank\" rel=\"nofollow\">PEP 387</a>提供了在Python 2系列中使用多年的方法的合理概述，并且至今仍然适用：如果某个功能被识别为过于有问题，那么它可能会被弃用并最终被移除。</p>\n<p>然而，对开发和发布过程进行了许多其他变更，这使得在Python 3系列中不太可能需要这些弃用。</p>\n<ul>\n<li>正如CPython核心开发团队和Python Packaging Authority之间的协作，以及将pip安装程序与Python 3.4+的捆绑所揭示的，越加注重的Python Package Index，在它们能足够稳定适应相对较慢的语言更新周期之前，减少了将模块添加到标准库的压力。</li>\n<li>“临时API”概念（在PEP 411中引入）使得可以在提供标准向后兼容性保证之前，对可能从更广泛的反馈中受益的库和API应用“稳定”期。</li>\n<li>很多累积的遗留行为确实在Python 3过渡中被清除了，而Python和标准库的新增功能要求比Python 1.x和Python 2.x时期要严格得多。</li>\n<li>“单一来源”Python 2/3库和框架的广泛开发强烈鼓励在Python 3中使用“文档弃用”，即使功能被更新的，首选的替代品替换。在这些情况下，文档中会放置弃用通知，建议新代码首选的方法，但不添加编程弃用警告。这允许现有代码（包括支持Python 2和Python 3的代码）保持不变（以牺牲新用户为代价，在维护现有代码库的任务时可能需要稍微学习一些）。</li>\n</ul>\n<h2>从（多数是）英语到所有书面语言</h2>\n<p>同样值得注意的是，Python 3预计不会像它原来那样具有破坏性。在Python 3中所有与之相关的向后不兼容的改动中，许多严重的迁移障碍可以放在<a href=\"http://www.python.org/dev/peps/pep-3100/#atomic-types\" rel=\"nofollow\">PEP 3100</a>的一个小基点上：</p>\n<p>使所有字符串都是Unicode，并具有单独的bytes()类型。新的字符串类型将被称为’str’。</p>\n<p>PEP 3100是Python 3变更的基地，它被认为是毫无争议的，单独的PEP是没有必要的。这个特殊变化被认为是无争议的原因是因为我们使用Python 2的经验表明Web和GUI框架的作者是正确的：作为应用程序开发者明智地处理Unicode意味着确保所有文本数据从二进制转换为尽可能接近于系统边界，按照文本处理，然后转换回二进制以用于输出的目的。</p>\n<p>遗憾的是，Python 2并不鼓励开发人员以这种方式编写程序 – 它大大模糊了二进制和文本数据之间的界限，并使开发人员难以将两者分开，更不用说在代码中了。因此，Web和GUI框架作者必须告知他们的Python 2用户“始终使用Unicode格式文本。如果不这样做，你可能会在处理Unicode输入时遇到晦涩难以处理的bug”。</p>\n<p>Python 3是不同的：它在“二进制域”和“文本域”之间实现了更大的隔离，使得编写正常的应用程序代码变得更加容易，同时使得编写二进制及文本边界不太清晰的系统中的代码变得更加困难。我在<a href=\"http://python-notes.curiousefficiency.org/en/latest/python3/questions_and_answers.html#what-actually-changed-in-the-text-model-between-python-2-and-python-3\" target=\"_blank\" rel=\"nofollow\">其他地方</a>更详细地介绍了Python 2和Python 3之间文本模型的实际变动。</p>\n<p>Python 对 Unicode 支持的这场革命是发生在更大的计算文本操作迁移的背景下的，从仅支持英文的 <a href=\"https://en.wikipedia.org/wiki/ASCII\" target=\"_blank\" rel=\"nofollow\">ASCII</a>（1963年正式定义），到“二进制数据+编码声明”的模型（包括 <a href=\"https://en.wikipedia.org/wiki/Locale\" target=\"_blank\" rel=\"nofollow\">C/POSIX locale</a> 和在20世纪八十年代后期引入的 Windows <a href=\"https://en.wikipedia.org/wiki/Windows_code_page\" target=\"_blank\" rel=\"nofollow\">代码页</a>系统）的复杂性以及从最初的 16 位 <a href=\"https://en.wikipedia.org/wiki/Unicode\" target=\"_blank\" rel=\"nofollow\">Unicode</a> 标准版本（1991年发布）到相对全面的现代 Unicode 代码点系统（1996年首次定义，每几年发布一个包含了新的主要更新的版本）。</p>\n<p>为什么要提这一点呢？因为这种切换到“默认情况下使用 Unicode”是对 Python3 中后向不兼容最具破坏性的，而不像其他改动（它们与语言本身相关性更高），它是文本数据表示和操作方式在更大行业广泛变化的一小部分。随着 Python 3 转换清除了语言特定问题，与 Python 早期版本相比，新语言功能的进入门槛要高得多，而且正在进行的从“带编码的二进制数据”切换到用于文本建模的 Unicode 的规模都比其他行业更广泛，我看不到任何需要 Python 3 样式后向兼容性中断和并行支持的更改。相反，我希望我们能够在正常的变更管理流程中适应任何未来的语言演变，任何无法以这种方式处理的提案都会被否决，因为它会给社区和核心开发团队带来不可接受的高昂成本。</p>\n<p><strong>关于作者</strong></p>\n<p>Nick Coghlan  –  Nick是CPython的核心开发人员，也是Python Software Foundation的董事会成员。他是几个公认的Python增强建议的作者或共同作者（包括PEP 343，它在Python 2.5中添加了with语句和上下文管理器，PEP 453看到了与Python 3.4捆绑在一起的pip安装程序），并且还接受了一些Guido van Rossum代表BDFL代表的PEP。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89267\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89267votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89267\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"title": "Python 中字符串拼接的 N 种方法", "url": "http://python.jobbole.com/89250/", "url_object_id": "da062367eb1bf18d73e74a3212f8aa0e", "create_date": "2019-06-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/02/edecceebedd0d04aa17bccba430ddcaf.jpg"], "praise_nums": 1, "comment_nums": 0, "fav_nums": 1, "tags": "基础知识,字符串", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://my.oschina.net/mutoushirana/blog/1861267\">mutoushirana</a>   </div><p>python拼接字符串一般有以下几种方法：</p>\n<p><strong>①直接通过（+）操作符拼接</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b03ecf6d8233064808\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ns = 'Hello'+' '+'World'+'!'\r\nprint(s)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b03ecf6d8233064808-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b03ecf6d8233064808-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b03ecf6d8233064808-1\"><span class=\"crayon-v\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Hello'</span><span class=\"crayon-o\">+</span><span class=\"crayon-s\">' '</span><span class=\"crayon-o\">+</span><span class=\"crayon-s\">'World'</span><span class=\"crayon-o\">+</span><span class=\"crayon-s\">'!'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b03ecf6d8233064808-2\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>输出结果：<em>Hello World!</em></p>\n<p>使用这种方式进行字符串连接的操作效率低下，因为python中使用 + 拼接两个字符串时会生成一个新的字符串，生成新的字符串就需要重新申请内存，当拼接字符串较多时自然会影响效率。</p>\n<p><strong>②通过str.join()方法拼接</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b03ecf6e2316329976\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nstrlist=['Hello',' ','World','!']\r\nprint(''.join(strlist))</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b03ecf6e2316329976-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b03ecf6e2316329976-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b03ecf6e2316329976-1\"><span class=\"crayon-v\">strlist</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'Hello'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">' '</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'World'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'!'</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b03ecf6e2316329976-2\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">join</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">strlist</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>输出结果：<em>Hello World!</em></p>\n<p>这种方式一般常使用在将集合转化为字符串，”.join()其中”可以是空字符，也可以是任意其他字符，当是任意其他字符时，集合中字符串会被该字符隔开，例如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b03ecf6e6319804095\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nstrlist=['Hello',' ','World','!']\r\nprint(','.join(strlist))</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b03ecf6e6319804095-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b03ecf6e6319804095-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b03ecf6e6319804095-1\"><span class=\"crayon-v\">strlist</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'Hello'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">' '</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'World'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'!'</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b03ecf6e6319804095-2\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">','</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">join</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">strlist</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>输出结果：<em>Hello, ,World,!</em></p>\n<p><strong>③通过str.format()方法拼接</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b03ecf6ea913241357\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ns='{} {}!'.format('Hello','World')\r\nprint(s)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b03ecf6ea913241357-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b03ecf6ea913241357-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b03ecf6ea913241357-1\"><span class=\"crayon-v\">s</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'{} {}!'</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Hello'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'World'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b03ecf6ea913241357-2\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>输出结果：<em>Hello World!</em></p>\n<p>通过这种方式拼接字符串需要注意的是字符串中{}的数量要和format方法参数数量一致，否则会报错。</p>\n<p><strong>④通过(%)操作符拼接</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b03ecf6ed547103121\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ns = '%s %s!' % ('Hello', 'World')\r\nprint(s)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b03ecf6ed547103121-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b03ecf6ed547103121-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b03ecf6ed547103121-1\"><span class=\"crayon-v\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'%s %s!'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Hello'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'World'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b03ecf6ed547103121-2\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>输出结果：<em>Hello World!</em></p>\n<p>这种方式与str.format()使用方式基本一致。</p>\n<p><strong>⑤通过()多行拼接</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b03ecf6f1122584277\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ns = (\r\n    'Hello'\r\n    ' '\r\n    'World'\r\n    '!'\r\n)\r\nprint(s)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b03ecf6f1122584277-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b03ecf6f1122584277-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b03ecf6f1122584277-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b03ecf6f1122584277-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b03ecf6f1122584277-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b03ecf6f1122584277-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b03ecf6f1122584277-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b03ecf6f1122584277-1\"><span class=\"crayon-v\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b03ecf6f1122584277-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">'Hello'</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b03ecf6f1122584277-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">' '</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b03ecf6f1122584277-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">'World'</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b03ecf6f1122584277-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">'!'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b03ecf6f1122584277-6\"><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b03ecf6f1122584277-7\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>输出结果：<em>Hello World!</em></p>\n<p>python遇到未闭合的小括号，自动将多行拼接为一行。</p>\n<p><strong>⑥通过string模块中的Template对象拼接</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b03ecf6f4596232091\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfrom string import Template\r\ns = Template('${s1} ${s2}!') \r\nprint(s.safe_substitute(s1='Hello',s2='World'))</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b03ecf6f4596232091-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b03ecf6f4596232091-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b03ecf6f4596232091-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b03ecf6f4596232091-1\"><span class=\"crayon-e\">from </span><span class=\"crayon-t\">string</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-i\">Template</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b03ecf6f4596232091-2\"><span class=\"crayon-v\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Template</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'${s1} ${s2}!'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5cf4b03ecf6f4596232091-3\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">safe_substitute</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s1</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'Hello'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">s2</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'World'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>输出结果：<em>Hello World!</em></p>\n<p>Template的实现方式是首先通过Template初始化一个字符串。这些字符串中包含了一个个key。通过调用substitute或safe_subsititute，将key值与方法中传递过来的参数对应上，从而实现在指定的位置导入字符串。这种方式的好处是不需要担心参数不一致引发异常，如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b03ecf6f7226914116\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfrom string import Template\r\ns = Template('${s1} ${s2} ${s3}!') \r\nprint(s.safe_substitute(s1='Hello',s2='World'))</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b03ecf6f7226914116-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b03ecf6f7226914116-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b03ecf6f7226914116-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b03ecf6f7226914116-1\"><span class=\"crayon-e\">from </span><span class=\"crayon-t\">string</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-i\">Template</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b03ecf6f7226914116-2\"><span class=\"crayon-v\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Template</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'${s1} ${s2} ${s3}!'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5cf4b03ecf6f7226914116-3\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">safe_substitute</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s1</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'Hello'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">s2</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'World'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>输出结果：<em>Hello World ${s3}!</em></p>\n<p><strong>⑦通过F-strings拼接</strong></p>\n<p>在python3.6.2版本中，PEP 498 提出一种新型字符串格式化机制，被称为“字符串插值”或者更常见的一种称呼是<strong>F-strings，</strong>F-strings提供了一种明确且方便的方式将python表达式嵌入到字符串中来进行格式化：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b03ecf6fb776113985\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ns1='Hello'\r\ns2='World'\r\nprint(f'{s1} {s2}!')</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b03ecf6fb776113985-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b03ecf6fb776113985-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b03ecf6fb776113985-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b03ecf6fb776113985-1\"><span class=\"crayon-v\">s1</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'Hello'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b03ecf6fb776113985-2\"><span class=\"crayon-v\">s2</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'World'</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b03ecf6fb776113985-3\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">f</span><span class=\"crayon-s\">'{s1} {s2}!'</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>输出结果：<em>Hello World!</em></p>\n<p>在F-strings中我们也可以执行函数：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b03ecf6fe583937744\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef power(x):\r\n    return x*x\r\nx=4\r\nprint(f'{x} * {x} = {power(x)}')</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b03ecf6fe583937744-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b03ecf6fe583937744-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b03ecf6fe583937744-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b03ecf6fe583937744-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b03ecf6fe583937744-1\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">power</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b03ecf6fe583937744-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">x*</span><span class=\"crayon-i\">x</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b03ecf6fe583937744-3\"><span class=\"crayon-v\">x</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">4</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b03ecf6fe583937744-4\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">f</span><span class=\"crayon-s\">'{x} * {x} = {power(x)}'</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>输出结果：<em>4 * 4 = 16</em></p>\n<p>而且F-strings的运行速度很快，比%-string和str.format()这两种格式化方法都快得多。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89250\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89250votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89250\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"title": "Python 调试器入门", "url": "http://python.jobbole.com/89272/", "url_object_id": "d1c1d7bd5d4e5ce6f9bfa7924846d250", "create_date": "2019-06-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/10/bfa0d07e7eb2fac2eb80cd5df9567931.jpg"], "praise_nums": 1, "comment_nums": 0, "fav_nums": 1, "tags": "基础知识,调试器", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://fedoramagazine.org/getting-started-python-debugger/\">Clément Verna</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9979-1.html\">linux中国-Flowsnow</a>   </div><p>Python 生态系统包含丰富的工具和库，可以让开发人员更加舒适。 例如，我们之前已经介绍了如何<a href=\"https://fedoramagazine.org/enhance-python-interactive-shell\">使用交互式 shell 增强 Python</a>。本文重点介绍另一种可以节省时间并提高 Python 技能的工具：Python 调试器。</p>\n<div id=\"article_content\">\n<h1 id=\"toc_1\">Python 调试器</h1>\n<p>Python 标准库提供了一个名为 pdb 的调试器。此调试器提供了调试所需的大多数功能，如断点、单行步进、堆栈帧的检查等等。</p>\n<p>了解一些pdb 的基本知识很有用，因为它是标准库的一部分。 你可以在无法安装其他增强的调试器的环境中使用它。</p>\n<h2 id=\"toc_2\">运行 pdb</h2>\n<p>运行 pdb 的最简单方法是从命令行，将程序作为参数传递来调试。 看看以下脚本：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4c563d17f1922033159\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# pdb_test.py\r\n#!/usr/bin/python3\r\nfrom time import sleep\r\ndef countdown(number):\r\n    for i in range(number, 0, -1):\r\n        print(i)\r\n        sleep(1)\r\nif __name__ == \"__main__\":\r\n    seconds = 10\r\n    countdown(seconds)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d17f1922033159-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d17f1922033159-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d17f1922033159-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d17f1922033159-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d17f1922033159-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d17f1922033159-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d17f1922033159-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d17f1922033159-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d17f1922033159-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d17f1922033159-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4c563d17f1922033159-1\"><span class=\"crayon-c\"># pdb_test.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d17f1922033159-2\"><span class=\"crayon-c\">#!/usr/bin/python3</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d17f1922033159-3\"><span class=\"crayon-st\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">time</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sleep</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d17f1922033159-4\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">countdown</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">number</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d17f1922033159-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">number</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d17f1922033159-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d17f1922033159-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">sleep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d17f1922033159-8\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">__name__</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"__main__\"</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d17f1922033159-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">seconds</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d17f1922033159-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">countdown</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">seconds</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n<p>你可以从命令行运行 pdb，如下所示：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4c563d17fa657746990\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ python3 -m pdb pdb_test.py\r\n&gt; /tmp/pdb_test.py(1)&lt;module&gt;()\r\n-&gt; from time import sleep\r\n(Pdb)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d17fa657746990-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d17fa657746990-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d17fa657746990-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d17fa657746990-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4c563d17fa657746990-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">python3</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">pdb</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pdb_test</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d17fa657746990-2\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tmp</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">pdb_test</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">py</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">module</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d17fa657746990-3\"><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">time</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sleep</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d17fa657746990-4\"><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">Pdb</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>使用 pdb 的另一种方法是在程序中设置断点。为此，请导入 <code>pdb</code> 模块并使用<code>set_trace</code> 函数：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4c563d17fe851504297\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# pdb_test.py\r\n#!/usr/bin/python3\r\nfrom time import sleep\r\ndef countdown(number):\r\n    for i in range(number, 0, -1):\r\n        import pdb; pdb.set_trace()\r\n        print(i)\r\n        sleep(1)\r\nif __name__ == \"__main__\":\r\n    seconds = 10\r\n    countdown(seconds)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d17fe851504297-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d17fe851504297-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d17fe851504297-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d17fe851504297-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d17fe851504297-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d17fe851504297-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d17fe851504297-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d17fe851504297-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d17fe851504297-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d17fe851504297-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d17fe851504297-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4c563d17fe851504297-1\"><span class=\"crayon-c\"># pdb_test.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d17fe851504297-2\"><span class=\"crayon-c\">#!/usr/bin/python3</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d17fe851504297-3\"><span class=\"crayon-st\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">time</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sleep</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d17fe851504297-4\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">countdown</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">number</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d17fe851504297-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">number</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d17fe851504297-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">pdb</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">pdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">set_trace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d17fe851504297-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d17fe851504297-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">sleep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d17fe851504297-9\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">__name__</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"__main__\"</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d17fe851504297-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">seconds</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d17fe851504297-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">countdown</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">seconds</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4c563d1802474633073\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ python3 pdb_test.py\r\n&gt; /tmp/pdb_test.py(6)countdown()\r\n-&gt; print(i)\r\n(Pdb)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1802474633073-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1802474633073-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1802474633073-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1802474633073-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4c563d1802474633073-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">python3 </span><span class=\"crayon-v\">pdb_test</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1802474633073-2\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tmp</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">pdb_test</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">py</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">)</span><span class=\"crayon-e\">countdown</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d1802474633073-3\"><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1802474633073-4\"><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">Pdb</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0030 seconds] -->\r\n<p>脚本在断点处停止，pdb 显示脚本中的下一行。 你也可以在失败后执行调试器。 这称为事后调试postmortem debugging。</p>\n<h2 id=\"toc_3\">穿行于执行堆栈</h2>\n<p>调试中的一个常见用例是在执行堆栈中穿行。 Python 调试器运行后，可以使用以下命令：</p>\n<ul>\n<li><code>w(here)</code>：显示当前执行的行以及执行堆栈的位置。</li>\n</ul>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4c563d1805087542309\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ python3 test_pdb.py\r\n&gt; /tmp/test_pdb.py(10)countdown()\r\n-&gt; print(i)\r\n(Pdb) w\r\n/tmp/test_pdb.py(16)&lt;module&gt;()\r\n-&gt; countdown(seconds)\r\n&gt; /tmp/test_pdb.py(10)countdown()\r\n-&gt; print(i)\r\n(Pdb)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1805087542309-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1805087542309-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1805087542309-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1805087542309-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1805087542309-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1805087542309-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1805087542309-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1805087542309-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1805087542309-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4c563d1805087542309-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">python3 </span><span class=\"crayon-v\">test_pdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1805087542309-2\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tmp</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">test_pdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">py</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span><span class=\"crayon-e\">countdown</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d1805087542309-3\"><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1805087542309-4\"><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">Pdb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">w</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d1805087542309-5\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tmp</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">test_pdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">py</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">16</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">module</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1805087542309-6\"><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">countdown</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">seconds</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d1805087542309-7\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tmp</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">test_pdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">py</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span><span class=\"crayon-e\">countdown</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1805087542309-8\"><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d1805087542309-9\"><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">Pdb</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0021 seconds] -->\r\n<p></p>\n<ul>\n<li><code>l(ist)</code>：显示当前位置周围更多的上下文（代码）</li>\n</ul>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4c563d1809567711783\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ python3 test_pdb.py\r\n&gt; /tmp/test_pdb.py(10)countdown()\r\n-&gt; print(i)\r\n(Pdb) l\r\n5\r\n6\r\n7     def countdown(number):\r\n8         for i in range(number, 0, -1):\r\n9             import pdb; pdb.set_trace()\r\n10  -&gt;         print(i)\r\n11             sleep(1)\r\n12\r\n13\r\n14     if __name__ == \"__main__\":\r\n15         seconds = 10</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1809567711783-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1809567711783-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1809567711783-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1809567711783-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1809567711783-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1809567711783-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1809567711783-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1809567711783-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1809567711783-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1809567711783-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1809567711783-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1809567711783-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1809567711783-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1809567711783-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1809567711783-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4c563d1809567711783-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">python3 </span><span class=\"crayon-v\">test_pdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1809567711783-2\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tmp</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">test_pdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">py</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span><span class=\"crayon-e\">countdown</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d1809567711783-3\"><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1809567711783-4\"><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">Pdb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d1809567711783-5\"><span class=\"crayon-cn\">5</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1809567711783-6\"><span class=\"crayon-cn\">6</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d1809567711783-7\"><span class=\"crayon-cn\">7</span><span class=\"crayon-h\">     </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">countdown</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">number</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1809567711783-8\"><span class=\"crayon-cn\">8</span><span class=\"crayon-h\">         </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">number</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d1809567711783-9\"><span class=\"crayon-cn\">9</span><span class=\"crayon-h\">             </span><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">pdb</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">pdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">set_trace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1809567711783-10\"><span class=\"crayon-cn\">10</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\">         </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d1809567711783-11\"><span class=\"crayon-cn\">11</span><span class=\"crayon-h\">             </span><span class=\"crayon-e\">sleep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1809567711783-12\"><span class=\"crayon-cn\">12</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d1809567711783-13\"><span class=\"crayon-cn\">13</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1809567711783-14\"><span class=\"crayon-cn\">14</span><span class=\"crayon-h\">     </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">__name__</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"__main__\"</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d1809567711783-15\"><span class=\"crayon-cn\">15</span><span class=\"crayon-h\">         </span><span class=\"crayon-v\">seconds</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0029 seconds] -->\r\n<p></p>\n<ul>\n<li><code>u(p)</code>/<code>d(own)</code>：向上或向下穿行调用堆栈。</li>\n</ul>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4c563d180c060948507\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ py3 test_pdb.py\r\n&gt; /tmp/test_pdb.py(10)countdown()\r\n-&gt; print(i)\r\n(Pdb) up\r\n&gt; /tmp/test_pdb.py(16)&lt;module&gt;()\r\n-&gt; countdown(seconds)\r\n(Pdb) down\r\n&gt; /tmp/test_pdb.py(10)countdown()\r\n-&gt; print(i)\r\n(Pdb)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d180c060948507-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d180c060948507-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d180c060948507-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d180c060948507-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d180c060948507-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d180c060948507-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d180c060948507-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d180c060948507-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d180c060948507-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d180c060948507-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4c563d180c060948507-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">py3 </span><span class=\"crayon-v\">test_pdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d180c060948507-2\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tmp</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">test_pdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">py</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span><span class=\"crayon-e\">countdown</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d180c060948507-3\"><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d180c060948507-4\"><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">Pdb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">up</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d180c060948507-5\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tmp</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">test_pdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">py</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">16</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">module</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d180c060948507-6\"><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">countdown</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">seconds</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d180c060948507-7\"><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">Pdb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">down</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d180c060948507-8\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tmp</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">test_pdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">py</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span><span class=\"crayon-e\">countdown</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d180c060948507-9\"><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d180c060948507-10\"><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">Pdb</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0022 seconds] -->\r\n<p></p>\n<h2 id=\"toc_4\">单步执行程序</h2>\n<p>pdb提供以下命令来执行和单步执行代码：</p>\n<ul>\n<li><code>n(ext)</code>：继续执行，直到达到当前函数中的下一行，或者返回</li>\n<li><code>s(tep)</code>：执行当前行并在第一个可能的场合停止（在被调用的函数或当前函数中）</li>\n<li><code>c(ontinue)</code>：继续执行，仅在断点处停止。</li>\n</ul>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4c563d1810498382095\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ py3 test_pdb.py\r\n&gt; /tmp/test_pdb.py(10)countdown()\r\n-&gt; print(i)\r\n(Pdb) n\r\n10\r\n&gt; /tmp/test_pdb.py(11)countdown()\r\n-&gt; sleep(1)\r\n(Pdb) n\r\n&gt; /tmp/test_pdb.py(8)countdown()\r\n-&gt; for i in range(number, 0, -1):\r\n(Pdb) n\r\n&gt; /tmp/test_pdb.py(9)countdown()\r\n-&gt; import pdb; pdb.set_trace()\r\n(Pdb) s\r\n--Call--\r\n&gt; /usr/lib64/python3.6/pdb.py(1584)set_trace()\r\n-&gt; def set_trace():\r\n(Pdb) c\r\n&gt; /tmp/test_pdb.py(10)countdown()\r\n-&gt; print(i)\r\n(Pdb) c\r\n9\r\n&gt; /tmp/test_pdb.py(9)countdown()\r\n-&gt; import pdb; pdb.set_trace()\r\n(Pdb)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1810498382095-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1810498382095-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1810498382095-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1810498382095-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1810498382095-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1810498382095-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1810498382095-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1810498382095-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1810498382095-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1810498382095-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1810498382095-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1810498382095-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1810498382095-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1810498382095-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1810498382095-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1810498382095-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1810498382095-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1810498382095-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1810498382095-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1810498382095-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1810498382095-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1810498382095-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1810498382095-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1810498382095-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1810498382095-25\">25</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4c563d1810498382095-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">py3 </span><span class=\"crayon-v\">test_pdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1810498382095-2\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tmp</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">test_pdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">py</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span><span class=\"crayon-e\">countdown</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d1810498382095-3\"><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1810498382095-4\"><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">Pdb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">n</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d1810498382095-5\"><span class=\"crayon-cn\">10</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1810498382095-6\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tmp</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">test_pdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">py</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-e\">countdown</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d1810498382095-7\"><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sleep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1810498382095-8\"><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">Pdb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d1810498382095-9\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tmp</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">test_pdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">py</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">)</span><span class=\"crayon-e\">countdown</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1810498382095-10\"><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">number</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d1810498382095-11\"><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">Pdb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1810498382095-12\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tmp</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">test_pdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">py</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">)</span><span class=\"crayon-e\">countdown</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d1810498382095-13\"><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">pdb</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">pdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">set_trace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1810498382095-14\"><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">Pdb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d1810498382095-15\"><span class=\"crayon-o\">--</span><span class=\"crayon-v\">Call</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1810498382095-16\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib64</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">python3</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">6</span><span class=\"crayon-o\">/</span><span class=\"crayon-k \">pdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">py</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1584</span><span class=\"crayon-sy\">)</span><span class=\"crayon-e\">set_trace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d1810498382095-17\"><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">set_trace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1810498382095-18\"><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">Pdb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d1810498382095-19\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tmp</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">test_pdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">py</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span><span class=\"crayon-e\">countdown</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1810498382095-20\"><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d1810498382095-21\"><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">Pdb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">c</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1810498382095-22\"><span class=\"crayon-cn\">9</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d1810498382095-23\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tmp</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">test_pdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">py</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">)</span><span class=\"crayon-e\">countdown</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1810498382095-24\"><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">pdb</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">pdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">set_trace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d1810498382095-25\"><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">Pdb</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0055 seconds] -->\r\n<p>该示例显示了 <code>next</code> 和 <code>step</code> 之间的区别。 实际上，当使用 <code>step</code> 时，调试器会进入 <code>pdb</code> 模块源代码，而接下来就会执行 <code>set_trace</code> 函数。</p>\n<h2 id=\"toc_5\">检查变量内容</h2>\n<ul>\n<li>pdb 非常有用的地方是检查执行堆栈中存储的变量的内容。 例如，<code>a(rgs)</code> 命令打印当前函数的变量，如下所示：</li>\n</ul>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4c563d1813450182165\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npy3 test_pdb.py\r\n&gt; /tmp/test_pdb.py(10)countdown()\r\n-&gt; print(i)\r\n(Pdb) where\r\n/tmp/test_pdb.py(16)&lt;module&gt;()\r\n-&gt; countdown(seconds)\r\n&gt; /tmp/test_pdb.py(10)countdown()\r\n-&gt; print(i)\r\n(Pdb) args\r\nnumber = 10\r\n(Pdb)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1813450182165-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1813450182165-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1813450182165-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1813450182165-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1813450182165-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1813450182165-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1813450182165-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1813450182165-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1813450182165-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1813450182165-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1813450182165-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4c563d1813450182165-1\"><span class=\"crayon-e\">py3 </span><span class=\"crayon-v\">test_pdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1813450182165-2\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tmp</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">test_pdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">py</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span><span class=\"crayon-e\">countdown</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d1813450182165-3\"><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1813450182165-4\"><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">Pdb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">where</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d1813450182165-5\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tmp</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">test_pdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">py</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">16</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">module</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1813450182165-6\"><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">countdown</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">seconds</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d1813450182165-7\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tmp</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">test_pdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">py</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span><span class=\"crayon-e\">countdown</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1813450182165-8\"><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d1813450182165-9\"><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">Pdb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">args</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1813450182165-10\"><span class=\"crayon-v\">number</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d1813450182165-11\"><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">Pdb</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0023 seconds] -->\r\n<p>pdb 打印变量的值，在本例中是 10。</p>\n<ul>\n<li>可用于打印变量值的另一个命令是 <code>p(rint)</code>。</li>\n</ul>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4c563d1817124883508\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ py3 test_pdb.py\r\n&gt; /tmp/test_pdb.py(10)countdown()\r\n-&gt; print(i)\r\n(Pdb) list\r\n5\r\n6\r\n7     def countdown(number):\r\n8         for i in range(number, 0, -1):\r\n9             import pdb; pdb.set_trace()\r\n10  -&gt;         print(i)\r\n11             sleep(1)\r\n12\r\n13\r\n14     if __name__ == \"__main__\":\r\n15         seconds = 10\r\n(Pdb) print(seconds)\r\n10\r\n(Pdb) p i\r\n10\r\n(Pdb) p number - i\r\n0\r\n(Pdb)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1817124883508-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1817124883508-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1817124883508-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1817124883508-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1817124883508-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1817124883508-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1817124883508-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1817124883508-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1817124883508-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1817124883508-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1817124883508-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1817124883508-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1817124883508-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1817124883508-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1817124883508-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1817124883508-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1817124883508-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1817124883508-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1817124883508-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1817124883508-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1817124883508-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1817124883508-22\">22</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4c563d1817124883508-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">py3 </span><span class=\"crayon-v\">test_pdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1817124883508-2\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tmp</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">test_pdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">py</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span><span class=\"crayon-e\">countdown</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d1817124883508-3\"><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1817124883508-4\"><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">Pdb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">list</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d1817124883508-5\"><span class=\"crayon-cn\">5</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1817124883508-6\"><span class=\"crayon-cn\">6</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d1817124883508-7\"><span class=\"crayon-cn\">7</span><span class=\"crayon-h\">     </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">countdown</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">number</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1817124883508-8\"><span class=\"crayon-cn\">8</span><span class=\"crayon-h\">         </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">number</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d1817124883508-9\"><span class=\"crayon-cn\">9</span><span class=\"crayon-h\">             </span><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">pdb</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">pdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">set_trace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1817124883508-10\"><span class=\"crayon-cn\">10</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\">         </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d1817124883508-11\"><span class=\"crayon-cn\">11</span><span class=\"crayon-h\">             </span><span class=\"crayon-e\">sleep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1817124883508-12\"><span class=\"crayon-cn\">12</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d1817124883508-13\"><span class=\"crayon-cn\">13</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1817124883508-14\"><span class=\"crayon-cn\">14</span><span class=\"crayon-h\">     </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">__name__</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"__main__\"</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d1817124883508-15\"><span class=\"crayon-cn\">15</span><span class=\"crayon-h\">         </span><span class=\"crayon-v\">seconds</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1817124883508-16\"><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">Pdb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">seconds</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d1817124883508-17\"><span class=\"crayon-cn\">10</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1817124883508-18\"><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">Pdb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">i</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d1817124883508-19\"><span class=\"crayon-cn\">10</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1817124883508-20\"><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">Pdb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">number</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">i</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d1817124883508-21\"><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1817124883508-22\"><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">Pdb</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0038 seconds] -->\r\n<p>如示例中最后的命令所示，<code>print</code> 可以在显示结果之前计算表达式。</p>\n<p><a href=\"https://docs.python.org/3/library/pdb.html\">Python 文档</a>包含每个 pdb 命令的参考和示例。 对于开始使用 Python 调试器人来说，这是一个有用的读物。</p>\n<h1 id=\"toc_6\">增强的调试器</h1>\n<p>一些增强的调试器提供了更好的用户体验。 大多数为 pdb 添加了有用的额外功能，例如语法突出高亮、更好的回溯和自省。 流行的增强调试器包括 <a href=\"https://github.com/gotcha/ipdb\">IPython 的 ipdb</a> 和 <a href=\"https://github.com/antocuni/pdb\">pdb++</a>。</p>\n<p>这些示例显示如何在虚拟环境中安装这两个调试器。 这些示例使用新的虚拟环境，但在调试应用程序的情况下，应使用应用程序的虚拟环境。</p>\n<h2 id=\"toc_7\">安装 IPython 的 ipdb</h2>\n<p>要安装 IPython ipdb，请在虚拟环境中使用 <code>pip</code>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4c563d181b821112553\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ python3 -m venv .test_pdb\r\n$ source .test_pdb/bin/activate\r\n(test_pdb)$ pip install ipdb</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d181b821112553-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d181b821112553-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d181b821112553-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4c563d181b821112553-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">python3</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">venv</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">test</span><span class=\"crayon-sy\">_</span>pdb</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d181b821112553-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">source</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">test_pdb</span><span class=\"crayon-o\">/</span><span class=\"crayon-k \">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">activate</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d181b821112553-3\"><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">test_pdb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pip </span><span class=\"crayon-e\">install </span><span class=\"crayon-v\">ipdb</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>要在脚本中调用 ipdb，必须使用以下命令。 请注意，该模块称为 ipdb 而不是 pdb：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4c563d181e100466415\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nimport ipdb; ipdb.set_trace()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d181e100466415-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4c563d181e100466415-1\"><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ipdb</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ipdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">set_trace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>IPython 的 ipdb 也可以用 Fedora 包安装，所以你可以使用 Fedora 的包管理器 <code>dnf</code> 来安装它：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4c563d1822689360406\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo dnf install python3-ipdb</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1822689360406-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4c563d1822689360406-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">dnf </span><span class=\"crayon-e\">install </span><span class=\"crayon-v\">python3</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">ipdb</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p></p>\n<h2 id=\"toc_8\">安装 pdb++</h2>\n<p>你可以类似地安装 pdb++：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4c563d1825343697819\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ python3 -m venv .test_pdb\r\n$ source .test_pdb/bin/activate\r\n(test_pdb)$ pip install pdbp</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1825343697819-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c563d1825343697819-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1825343697819-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4c563d1825343697819-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">python3</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">venv</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">test</span><span class=\"crayon-sy\">_</span>pdb</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c563d1825343697819-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">source</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">test_pdb</span><span class=\"crayon-o\">/</span><span class=\"crayon-k \">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">activate</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c563d1825343697819-3\"><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">test_pdb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pip </span><span class=\"crayon-e\">install </span><span class=\"crayon-v\">pdbp</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>pdb++ 重写了 pdb 模块，因此你可以使用相同的语法在程序中添加断点：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4c563d1828913760221\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nimport pdb; pdb.set_trace()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4c563d1828913760221-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4c563d1828913760221-1\"><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">pdb</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">pdb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">set_trace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p></p>\n<h1 id=\"toc_9\">总结</h1>\n<p>学习如何使用 Python 调试器可以节省你在排查应用程序问题时的时间。 对于了解应用程序或某些库的复杂部分如何工作也是有用的，从而提高 Python 开发人员的技能。</p>\n<p> </p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89272\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89272votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89272\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"title": "使用 VS Code 进行 Python 编程", "url": "http://python.jobbole.com/89275/", "url_object_id": "d26f19d4f910bbb470d446859941a730", "create_date": "2019-06-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/12/28c8edde3d61a0411511d3b1866f063615.png"], "praise_nums": 1, "comment_nums": 0, "fav_nums": 4, "tags": "实践项目,VS Code", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://fedoramagazine.org/vscode-python-howto/\">Clément Verna</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9989-1.html\">linux中国-idea2act</a>   </div><p>Visual Studio Code，简称 VS Code，是一个开源的文本编辑器，包含用于构建和调试应用程序的工具。安装启用 Python 扩展后，VS Code 可以配置成理想的 Python 开发工作环境。本文将介绍一些有用的 VS Code 扩展，并配置它们以充分提高 Python 开发效率。</p>\n<div id=\"article_content\">\n<p>如果你的计算机上还没有安装 VS Code，可以参考文章 <a href=\"https://fedoramagazine.org/using-visual-studio-code-fedora/\">在 Fedora 上使用 VS Code</a> 来安装。</p>\n<h1 id=\"toc_1\">在 VS Code 中安装 Python 扩展</h1>\n<p>首先，为了更方便地在 VS Code 中进行 Python 开发，需要从 VS Code 扩展商店中安装 Python 扩展。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/09/1b6fa92673ca228d82553683c5048afa.gif\" alt=\"\"></p>\n<p>Python 扩展安装完成后，就可以开始配置 Python 扩展了。</p>\n<p>VS Code 通过两个 JSON 文件管理设置:</p>\n<ul>\n<li>一个文件用于 VS Code 的全局设置，作用于所有的项目</li>\n<li>另一个文件用于特殊设置，作用于单独项目</li>\n</ul>\n<p>可以用快捷键 <code>Ctrl+,</code> （逗号）打开全局设置，也可以通过 <strong>文件 -&gt; 首选项 -&gt; 设置</strong> 来打开。</p>\n<h2 id=\"toc_2\">设置 Python 路径</h2>\n<p>您可以在全局设置中配置 <code>python.pythonPath</code> 使 VS Code 自动为每个项目选择最适合的 Python 解释器。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b52e785ef193187201\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// 将设置放在此处以覆盖默认设置和用户设置。\r\n// Path to Python, you can use a custom version of Python by modifying this setting to include the full path.\r\n{\r\n    \"python.pythonPath\":\"${workspaceRoot}/.venv/bin/python\",\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b52e785ef193187201-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b52e785ef193187201-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b52e785ef193187201-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b52e785ef193187201-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b52e785ef193187201-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b52e785ef193187201-1\"><span class=\"crayon-o\">/</span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span>将设置放在此处以覆盖默认设置和用户设置。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b52e785ef193187201-2\"><span class=\"crayon-o\">/</span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Path </span><span class=\"crayon-e\">to </span><span class=\"crayon-v\">Python</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">you </span><span class=\"crayon-e\">can </span><span class=\"crayon-i\">use</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">custom </span><span class=\"crayon-e\">version </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">Python </span><span class=\"crayon-e\">by </span><span class=\"crayon-e\">modifying </span><span class=\"crayon-e\">this </span><span class=\"crayon-e\">setting </span><span class=\"crayon-e\">to </span><span class=\"crayon-e\">include </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">full </span><span class=\"crayon-v\">path</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b52e785ef193187201-3\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b52e785ef193187201-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"python.pythonPath\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">\"${workspaceRoot}/.venv/bin/python\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b52e785ef193187201-5\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>这样，VS Code 将使用虚拟环境目录 <code>.venv</code> 下项目根目录中的 Python 解释器。</p>\n<h2 id=\"toc_3\">使用环境变量</h2>\n<p>默认情况下，VS Code 使用项目根目录下的 <code>.env</code> 文件中定义的环境变量。 这对于设置环境变量很有用，如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b52e785f9732031461\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nPYTHONWARNINGS=\"once\"</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b52e785f9732031461-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b52e785f9732031461-1\"><span class=\"crayon-v\">PYTHONWARNINGS</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"once\"</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>可使程序在运行时显示警告。</p>\n<p>可以通过设置 <code>python.envFile</code> 来加载其他的默认环境变量文件：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b52e785fd282505174\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// Absolute path to a file containing environment variable definitions.\r\n\"python.envFile\": \"${workspaceFolder}/.env\",</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b52e785fd282505174-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b52e785fd282505174-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b52e785fd282505174-1\"><span class=\"crayon-o\">/</span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Absolute </span><span class=\"crayon-e\">path </span><span class=\"crayon-i\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">file</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">containing </span><span class=\"crayon-e\">environment </span><span class=\"crayon-e\">variable </span><span class=\"crayon-v\">definitions</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b52e785fd282505174-2\"><span class=\"crayon-s\">\"python.envFile\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"${workspaceFolder}/.env\"</span><span class=\"crayon-sy\">,</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p></p>\n<h1 id=\"toc_4\">代码分析</h1>\n<p>Python 扩展还支持不同的代码分析工具（pep8、flake8、pylint）。要启用你喜欢的或者正在进行的项目所使用的分析工具，只需要进行一些简单的配置。</p>\n<p>扩展默认情况下使用 pylint 进行代码分析。你可以这样配置以使用 flake8 进行分析：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b52e78600875572313\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n\"python.linting.pylintEnabled\": false,\r\n\"python.linting.flake8Path\": \"${workspaceRoot}/.venv/bin/flake8\",\r\n\"python.linting.flake8Enabled\": true,\r\n\"python.linting.flake8Args\": [\"--max-line-length=90\"],</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b52e78600875572313-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b52e78600875572313-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b52e78600875572313-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b52e78600875572313-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b52e78600875572313-1\"><span class=\"crayon-s\">\"python.linting.pylintEnabled\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b52e78600875572313-2\"><span class=\"crayon-s\">\"python.linting.flake8Path\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"${workspaceRoot}/.venv/bin/flake8\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b52e78600875572313-3\"><span class=\"crayon-s\">\"python.linting.flake8Enabled\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b52e78600875572313-4\"><span class=\"crayon-s\">\"python.linting.flake8Args\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"--max-line-length=90\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>启用代码分析后，分析器会在不符合要求的位置加上波浪线，鼠标置于该位置，将弹窗提示其原因。注意，项目的虚拟环境中需要安装有 flake8，此示例方能有效。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/09/13a719593c8cb491db10fe39d25c6698.gif\" alt=\"\"></p>\n<h1 id=\"toc_5\">格式化代码</h1>\n<p>可以配置 VS Code 使其自动格式化代码。目前支持 autopep8、black 和 yapf。下面的设置将启用 “black” 模式。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b52e78604645085418\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// Provider for formatting. Possible options include 'autopep8', 'black', and 'yapf'.\r\n\"python.formatting.provider\": \"black\",\r\n\"python.formatting.blackPath\": \"${workspaceRoot}/.venv/bin/black\"\r\n\"python.formatting.blackArgs\": [\"--line-length=90\"],\r\n\"editor.formatOnSave\": true,</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b52e78604645085418-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b52e78604645085418-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b52e78604645085418-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b52e78604645085418-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b52e78604645085418-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b52e78604645085418-1\"><span class=\"crayon-o\">/</span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Provider </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">formatting</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Possible </span><span class=\"crayon-e\">options </span><span class=\"crayon-i\">include</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'autopep8'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'black'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'yapf'</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b52e78604645085418-2\"><span class=\"crayon-s\">\"python.formatting.provider\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"black\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b52e78604645085418-3\"><span class=\"crayon-s\">\"python.formatting.blackPath\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"${workspaceRoot}/.venv/bin/black\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b52e78604645085418-4\"><span class=\"crayon-s\">\"python.formatting.blackArgs\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"--line-length=90\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b52e78604645085418-5\"><span class=\"crayon-s\">\"editor.formatOnSave\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">,</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>如果不需要编辑器在保存时自动格式化代码，可以将 <code>editor.formatOnSave</code> 设置为 <code>false</code> 并手动使用快捷键 <code>Ctrl + Shift + I</code> 格式化当前文档中的代码。 注意，项目的虚拟环境中需要安装有 black，此示例方能有效。</p>\n<h1 id=\"toc_6\">运行任务</h1>\n<p>VS Code 的一个重要特点是它可以运行任务。需要运行的任务保存在项目根目录中的 JSON 文件中。</p>\n<h2 id=\"toc_7\">运行 flask 开发服务</h2>\n<p>这个例子将创建一个任务来运行 Flask 开发服务器。 使用一个可以运行外部命令的基本模板来创建新的工程：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/09/a9061cda35e87dff8a2999ca0ad64480.gif\" alt=\"\"></p>\n<p>编辑如下所示的 <code>tasks.json</code> 文件，创建新任务来运行 Flask 开发服务：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b52e78608054460235\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n{\r\n  // See https://go.microsoft.com/fwlink/?LinkId=733558\r\n  // for the documentation about the tasks.json format\r\n  \"version\": \"2.0.0\",\r\n  \"tasks\": [\r\n    {\r\n      \"label\": \"Run Debug Server\",\r\n      \"type\": \"shell\",\r\n      \"command\": \"${workspaceRoot}/.venv/bin/flask run -h 0.0.0.0 -p 5000\",\r\n      \"group\": {\r\n          \"kind\": \"build\",\r\n          \"isDefault\": true\r\n       }\r\n    }\r\n  ]\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b52e78608054460235-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b52e78608054460235-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b52e78608054460235-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b52e78608054460235-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b52e78608054460235-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b52e78608054460235-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b52e78608054460235-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b52e78608054460235-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b52e78608054460235-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b52e78608054460235-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b52e78608054460235-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b52e78608054460235-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b52e78608054460235-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b52e78608054460235-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b52e78608054460235-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b52e78608054460235-16\">16</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b52e78608054460235-1\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b52e78608054460235-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">See </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">go</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">microsoft</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">fwlink</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">?</span><span class=\"crayon-v\">LinkId</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">733558</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b52e78608054460235-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">documentation </span><span class=\"crayon-e\">about </span><span class=\"crayon-e\">the </span><span class=\"crayon-v\">tasks</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">json</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">format</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b52e78608054460235-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"version\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"2.0.0\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b52e78608054460235-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">\"tasks\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b52e78608054460235-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b52e78608054460235-7\"><span class=\"crayon-h\">      </span><span class=\"crayon-s\">\"label\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Run Debug Server\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b52e78608054460235-8\"><span class=\"crayon-h\">      </span><span class=\"crayon-s\">\"type\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"shell\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b52e78608054460235-9\"><span class=\"crayon-h\">      </span><span class=\"crayon-s\">\"command\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"${workspaceRoot}/.venv/bin/flask run -h 0.0.0.0 -p 5000\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b52e78608054460235-10\"><span class=\"crayon-h\">      </span><span class=\"crayon-s\">\"group\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b52e78608054460235-11\"><span class=\"crayon-h\">          </span><span class=\"crayon-s\">\"kind\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"build\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b52e78608054460235-12\"><span class=\"crayon-h\">          </span><span class=\"crayon-s\">\"isDefault\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b52e78608054460235-13\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b52e78608054460235-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b52e78608054460235-15\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b52e78608054460235-16\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0021 seconds] -->\r\n<p>Flask 开发服务使用环境变量来获取应用程序的入口点。 如 <strong>使用环境变量</strong> 一节所说，可以在 <code>.env</code> 文件中声明这些变量：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b52e7860c026426520\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nFLASK_APP=wsgi.py\r\nFLASK_DEBUG=True</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b52e7860c026426520-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b52e7860c026426520-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b52e7860c026426520-1\"><span class=\"crayon-v\">FLASK_APP</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">wsgi</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b52e7860c026426520-2\"><span class=\"crayon-v\">FLASK_DEBUG</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">True</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>这样就可以使用快捷键 <code>Ctrl + Shift + B</code> 来执行任务了。</p>\n<h1 id=\"toc_8\">单元测试</h1>\n<p>VS Code 还支持单元测试框架 pytest、unittest 和 nosetest。启用测试框架后，可以在 VS Code 中单独运行搜索到的单元测试，通过测试套件运行测试或者运行所有的测试。</p>\n<p>例如，可以这样启用 pytest 测试框架：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b52e7860f608503107\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n\"python.unitTest.pyTestEnabled\": true,\r\n\"python.unitTest.pyTestPath\": \"${workspaceRoot}/.venv/bin/pytest\",</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b52e7860f608503107-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b52e7860f608503107-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b52e7860f608503107-1\"><span class=\"crayon-s\">\"python.unitTest.pyTestEnabled\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b52e7860f608503107-2\"><span class=\"crayon-s\">\"python.unitTest.pyTestPath\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"${workspaceRoot}/.venv/bin/pytest\"</span><span class=\"crayon-sy\">,</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>注意，项目的虚拟环境中需要安装有 pytest，此示例方能有效。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/09/1c1b8b212bf56ac0386b77507c94625e.gif\" alt=\"\"></p>\n<p> </p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89275\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89275votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89275\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"title": "API Star：一个 Python 3 的 API 框架", "url": "http://python.jobbole.com/89279/", "url_object_id": "da20f37c4aefa989ca57c51e8a63b313", "create_date": "2019-06-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/09/9fc061ae68c7e4bb393199a4b5f0469b.jpg"], "praise_nums": 1, "comment_nums": 0, "fav_nums": 1, "tags": "实践项目,API", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"http://polyglot.ninja/api-star-python-3-api-framework/\">MASNUN</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9987-1.html\">linux中国-MjSeven</a>   </div><p>为了在 Python 中快速构建 API，我主要依赖于 <a href=\"http://polyglot.ninja/rest-api-best-practices-python-flask-tutorial/\">Flask</a>。最近我遇到了一个名为 “API Star” 的基于 Python 3 的新 API 框架。由于几个原因，我对它很感兴趣。首先，该框架包含 Python 新特点，如类型提示和 asyncio。而且它再进一步为开发人员提供了很棒的开发体验。我们很快就会讲到这些功能，但在我们开始之前，我首先要感谢 Tom Christie，感谢他为 Django REST Framework 和 API Star 所做的所有工作。</p>\n<div id=\"article_content\">\n<p>现在说回 API Star —— 我感觉这个框架很有成效。我可以选择基于 asyncio 编写异步代码，或者可以选择传统后端方式就像 WSGI 那样。它配备了一个命令行工具 —— <code>apistar</code> 来帮助我们更快地完成工作。它支持 Django ORM 和 SQLAlchemy，这是可选的。它有一个出色的类型系统，使我们能够定义输入和输出的约束，API Star 可以自动生成 API 的模式（包括文档），提供验证和序列化功能等等。虽然 API Star 专注于构建 API，但你也可以非常轻松地在其上构建 Web 应用程序。在我们自己构建一些东西之前，所有这些可能都没有意义的。</p>\n<h1 id=\"toc_1\">开始</h1>\n<p>我们将从安装 API Star 开始。为此实验创建一个虚拟环境是一个好主意。如果你不知道如何创建一个虚拟环境，不要担心，继续往下看。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bee75f64f231055454\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npip install apistar</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f64f231055454-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bee75f64f231055454-1\"><span class=\"crayon-e\">pip </span><span class=\"crayon-e\">install </span><span class=\"crayon-v\">apistar</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>（译注：上面的命令是在 Python 3 虚拟环境下使用的）</p>\n<p>如果你没有使用虚拟环境或者你的 Python 3 的 <code>pip</code> 名为 <code>pip3</code>，那么使用 <code>pip3 install apistar</code> 代替。</p>\n<p>一旦我们安装了这个包，我们就应该可以使用 <code>apistar</code> 命令行工具了。我们可以用它创建一个新项目，让我们在当前目录中创建一个新项目。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bee75f659933543465\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\napistar new .</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f659933543465-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bee75f659933543465-1\"><span class=\"crayon-e\">apistar </span><span class=\"crayon-k \">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>现在我们应该创建两个文件：<code>app.py</code>，它包含主应用程序，然后是 <code>test.py</code>，它用于测试。让我们来看看 <code>app.py</code> 文件：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bee75f65d136701382\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfrom apistar import Include, Route\r\nfrom apistar.frameworks.wsgi import WSGIApp as App\r\nfrom apistar.handlers import docs_urls, static_urls\r\ndef welcome(name=None):\r\n    if name is None:\r\n        return {'message': 'Welcome to API Star!'}\r\n    return {'message': 'Welcome to API Star, %s!' % name}\r\nroutes = [\r\n    Route('/', 'GET', welcome),\r\n    Include('/docs', docs_urls),\r\n    Include('/static', static_urls)\r\n]\r\napp = App(routes=routes)\r\nif __name__ == '__main__':\r\n    app.main()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f65d136701382-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f65d136701382-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f65d136701382-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f65d136701382-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f65d136701382-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f65d136701382-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f65d136701382-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f65d136701382-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f65d136701382-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f65d136701382-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f65d136701382-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f65d136701382-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f65d136701382-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f65d136701382-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f65d136701382-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bee75f65d136701382-1\"><span class=\"crayon-st\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">apistar </span><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Include</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Route</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f65d136701382-2\"><span class=\"crayon-st\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">apistar</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">frameworks</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">wsgi </span><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WSGIApp </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">App</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bee75f65d136701382-3\"><span class=\"crayon-st\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">apistar</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">handlers </span><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">docs_urls</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">static_urls</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f65d136701382-4\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">welcome</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">name</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">None</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bee75f65d136701382-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">name </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">None</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f65d136701382-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'message'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Welcome to API Star!'</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bee75f65d136701382-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'message'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Welcome to API Star, %s!'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f65d136701382-8\"><span class=\"crayon-v\">routes</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bee75f65d136701382-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">Route</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'/'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'GET'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">welcome</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f65d136701382-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">Include</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'/docs'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">docs_urls</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bee75f65d136701382-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">Include</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'/static'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">static_urls</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f65d136701382-12\"><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bee75f65d136701382-13\"><span class=\"crayon-v\">app</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">App</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">routes</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">routes</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f65d136701382-14\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">__name__</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'__main__'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bee75f65d136701382-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">app</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0036 seconds] -->\r\n<p>在我们深入研究代码之前，让我们运行应用程序并查看它是否正常工作。我们在浏览器中输入 <code>http://127.0.0.1:8080/</code>，我们将得到以下响应：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bee75f661313235765\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n{\"message\": \"Welcome to API Star!\"}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f661313235765-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bee75f661313235765-1\"><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">\"message\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Welcome to API Star!\"</span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>如果我们输入：<code>http://127.0.0.1:8080/?name=masnun</code></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bee75f665368648710\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n{\"message\": \"Welcome to API Star, masnun!\"}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f665368648710-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bee75f665368648710-1\"><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">\"message\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Welcome to API Star, masnun!\"</span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>同样的，输入 <code>http://127.0.0.1:8080/docs/</code>，我们将看到自动生成的 API 文档。</p>\n<p>现在让我们来看看代码。我们有一个 <code>welcome</code> 函数，它接收一个名为 <code>name</code> 的参数，其默认值为 <code>None</code>。API Star 是一个智能的 API 框架。它将尝试在 url 路径或者查询字符串中找到 <code>name</code> 键并将其传递给我们的函数，它还基于其生成 API 文档。这真是太好了，不是吗？</p>\n<p>然后，我们创建一个 <code>Route</code> 和 <code>Include</code> 实例的列表，并将列表传递给 <code>App</code> 实例。<code>Route</code> 对象用于定义用户自定义路由。顾名思义，<code>Include</code> 包含了在给定的路径下的其它 url 路径。</p>\n<h1 id=\"toc_2\">路由</h1>\n<p>路由很简单。当构造 <code>App</code> 实例时，我们需要传递一个列表作为 <code>routes</code> 参数，这个列表应该有我们刚才看到的 <code>Route</code> 或 <code>Include</code> 对象组成。对于 <code>Route</code>，我们传递一个 url 路径，http 方法和可调用的请求处理程序（函数或者其他）。对于 <code>Include</code> 实例，我们传递一个 url 路径和一个 <code>Routes</code> 实例列表。</p>\n<h2 id=\"toc_3\">路径参数</h2>\n<p>我们可以在花括号内添加一个名称来声明 url 路径参数。例如 <code>/user/{user_id}</code> 定义了一个 url，其中 <code>user_id</code> 是路径参数，或者说是一个将被注入到处理函数（实际上是可调用的）中的变量。这有一个简单的例子：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bee75f669629250186\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfrom apistar import Route\r\nfrom apistar.frameworks.wsgi import WSGIApp as App\r\ndef user_profile(user_id: int):\r\n    return {'message': 'Your profile id is: {}'.format(user_id)}\r\nroutes = [\r\n    Route('/user/{user_id}', 'GET', user_profile),\r\n]\r\napp = App(routes=routes)\r\nif __name__ == '__main__':\r\n    app.main()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f669629250186-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f669629250186-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f669629250186-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f669629250186-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f669629250186-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f669629250186-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f669629250186-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f669629250186-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f669629250186-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f669629250186-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bee75f669629250186-1\"><span class=\"crayon-st\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">apistar </span><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Route</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f669629250186-2\"><span class=\"crayon-st\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">apistar</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">frameworks</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">wsgi </span><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WSGIApp </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">App</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bee75f669629250186-3\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">user_profile</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">user_id</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">int</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f669629250186-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'message'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Your profile id is: {}'</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">user_id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bee75f669629250186-5\"><span class=\"crayon-v\">routes</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f669629250186-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">Route</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'/user/{user_id}'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'GET'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">user_profile</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bee75f669629250186-7\"><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f669629250186-8\"><span class=\"crayon-v\">app</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">App</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">routes</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">routes</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bee75f669629250186-9\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">__name__</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'__main__'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f669629250186-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">app</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0023 seconds] -->\r\n<p>如果我们访问 <code>http://127.0.0.1:8080/user/23</code>，我们将得到以下响应：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bee75f66c573187841\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n{\"message\": \"Your profile id is: 23\"}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f66c573187841-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bee75f66c573187841-1\"><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">\"message\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Your profile id is: 23\"</span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>但如果我们尝试访问 <code>http://127.0.0.1:8080/user/some_string</code>，它将无法匹配。因为我们定义了 <code>user_profile</code> 函数，且为 <code>user_id</code> 参数添加了一个类型提示。如果它不是整数，则路径不匹配。但是如果我们继续删除类型提示，只使用 <code>user_profile(user_id)</code>，它将匹配此 url。这也展示了 API Star 的智能之处和利用类型和好处。</p>\n<h2 id=\"toc_4\">包含/分组路由</h2>\n<p>有时候将某些 url 组合在一起是有意义的。假设我们有一个处理用户相关功能的 <code>user</code> 模块，将所有与用户相关的 url 分组在 <code>/user</code> 路径下可能会更好。例如 <code>/user/new</code>、<code>/user/1</code>、<code>/user/1/update</code> 等等。我们可以轻松地在单独的模块或包中创建我们的处理程序和路由，然后将它们包含在我们自己的路由中。</p>\n<p>让我们创建一个名为 <code>user</code> 的新模块，文件名为 <code>user.py</code>。我们将以下代码放入这个文件：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bee75f670461498898\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfrom apistar import Route\r\ndef user_new():\r\n    return {\"message\": \"Create a new user\"}\r\ndef user_update(user_id: int):\r\n    return {\"message\": \"Update user #{}\".format(user_id)}\r\ndef user_profile(user_id: int):\r\n    return {\"message\": \"User Profile for: {}\".format(user_id)}\r\nuser_routes = [\r\n    Route(\"/new\", \"GET\", user_new),\r\n    Route(\"/{user_id}/update\", \"GET\", user_update),\r\n    Route(\"/{user_id}/profile\", \"GET\", user_profile),\r\n]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f670461498898-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f670461498898-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f670461498898-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f670461498898-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f670461498898-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f670461498898-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f670461498898-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f670461498898-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f670461498898-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f670461498898-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f670461498898-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f670461498898-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bee75f670461498898-1\"><span class=\"crayon-st\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">apistar </span><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Route</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f670461498898-2\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">user_new</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bee75f670461498898-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">\"message\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Create a new user\"</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f670461498898-4\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">user_update</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">user_id</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">int</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bee75f670461498898-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">\"message\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Update user #{}\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">user_id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f670461498898-6\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">user_profile</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">user_id</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">int</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bee75f670461498898-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">\"message\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"User Profile for: {}\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">user_id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f670461498898-8\"><span class=\"crayon-v\">user_routes</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bee75f670461498898-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">Route</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"/new\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"GET\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">user_new</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f670461498898-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">Route</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"/{user_id}/update\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"GET\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">user_update</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bee75f670461498898-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">Route</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"/{user_id}/profile\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"GET\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">user_profile</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f670461498898-12\"><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0106 seconds] -->\r\n<p>现在我们可以从 app 主文件中导入 <code>user_routes</code>，并像这样使用它：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bee75f674197941177\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfrom apistar import Include\r\nfrom apistar.frameworks.wsgi import WSGIApp as App\r\nfrom user import user_routes\r\nroutes = [\r\n    Include(\"/user\", user_routes)\r\n]\r\napp = App(routes=routes)\r\nif __name__ == '__main__':\r\n    app.main()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f674197941177-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f674197941177-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f674197941177-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f674197941177-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f674197941177-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f674197941177-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f674197941177-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f674197941177-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f674197941177-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bee75f674197941177-1\"><span class=\"crayon-st\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">apistar </span><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Include</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f674197941177-2\"><span class=\"crayon-st\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">apistar</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">frameworks</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">wsgi </span><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WSGIApp </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">App</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bee75f674197941177-3\"><span class=\"crayon-st\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">user</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">user_routes</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f674197941177-4\"><span class=\"crayon-v\">routes</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bee75f674197941177-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">Include</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"/user\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">user_routes</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f674197941177-6\"><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bee75f674197941177-7\"><span class=\"crayon-v\">app</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">App</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">routes</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">routes</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f674197941177-8\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">__name__</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'__main__'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bee75f674197941177-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">app</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n<p>现在 <code>/user/new</code> 将委托给 <code>user_new</code> 函数。</p>\n<h1 id=\"toc_5\">访问查询字符串/查询参数</h1>\n<p>查询参数中传递的任何参数都可以直接注入到处理函数中。比如 url <code>/call?phone=1234</code>，处理函数可以定义一个 <code>phone</code> 参数，它将从查询字符串/查询参数中接收值。如果 url 查询字符串不包含 <code>phone</code> 的值，那么它将得到 <code>None</code>。我们还可以为参数设置一个默认值，如下所示：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bee75f677447326760\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef welcome(name=None):\r\n    if name is None:\r\n        return {'message': 'Welcome to API Star!'}\r\n    return {'message': 'Welcome to API Star, %s!' % name}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f677447326760-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f677447326760-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f677447326760-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f677447326760-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bee75f677447326760-1\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">welcome</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">name</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">None</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f677447326760-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">name </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">None</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bee75f677447326760-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'message'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Welcome to API Star!'</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f677447326760-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'message'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Welcome to API Star, %s!'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>在上面的例子中，我们为 <code>name</code> 设置了一个默认值 <code>None</code>。</p>\n<h1 id=\"toc_6\">注入对象</h1>\n<p>通过给一个请求程序添加类型提示，我们可以将不同的对象注入到视图中。注入请求相关的对象有助于处理程序直接从内部访问它们。API Star 内置的 <code>http</code> 包中有几个内置对象。我们也可以使用它的类型系统来创建我们自己的自定义对象并将它们注入到我们的函数中。API Star 还根据指定的约束进行数据验证。</p>\n<p>让我们定义自己的 <code>User</code> 类型，并将其注入到我们的请求处理程序中：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bee75f67b806054679\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfrom apistar import Include, Route\r\nfrom apistar.frameworks.wsgi import WSGIApp as App\r\nfrom apistar import typesystem\r\nclass User(typesystem.Object):\r\n    properties = {\r\n    'name': typesystem.string(max_length=100),\r\n    'email': typesystem.string(max_length=100),\r\n    'age': typesystem.integer(maximum=100, minimum=18)\r\n    }\r\n    required = [\"name\", \"age\", \"email\"]\r\ndef new_user(user: User):\r\n    return user\r\nroutes = [\r\n    Route('/', 'POST', new_user),\r\n]\r\napp = App(routes=routes)\r\nif __name__ == '__main__':\r\n    app.main()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f67b806054679-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f67b806054679-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f67b806054679-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f67b806054679-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f67b806054679-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f67b806054679-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f67b806054679-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f67b806054679-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f67b806054679-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f67b806054679-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f67b806054679-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f67b806054679-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f67b806054679-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f67b806054679-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f67b806054679-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f67b806054679-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f67b806054679-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f67b806054679-18\">18</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bee75f67b806054679-1\"><span class=\"crayon-st\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">apistar </span><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Include</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Route</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f67b806054679-2\"><span class=\"crayon-st\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">apistar</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">frameworks</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">wsgi </span><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WSGIApp </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">App</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bee75f67b806054679-3\"><span class=\"crayon-st\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">apistar </span><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">typesystem</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f67b806054679-4\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">User</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">typesystem</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">Object</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bee75f67b806054679-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">properties</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f67b806054679-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">'name'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">typesystem</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">string</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">max_length</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bee75f67b806054679-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">'email'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">typesystem</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">string</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">max_length</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f67b806054679-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">'age'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">typesystem</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">integer</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">maximum</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">minimum</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">18</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bee75f67b806054679-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f67b806054679-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">required</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"name\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"age\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"email\"</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bee75f67b806054679-11\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">new_user</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">user</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">User</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f67b806054679-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">user</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bee75f67b806054679-13\"><span class=\"crayon-v\">routes</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f67b806054679-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">Route</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'/'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'POST'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">new_user</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bee75f67b806054679-15\"><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f67b806054679-16\"><span class=\"crayon-v\">app</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">App</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">routes</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">routes</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bee75f67b806054679-17\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">__name__</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'__main__'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f67b806054679-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">app</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0041 seconds] -->\r\n<p>现在如果我们发送这样的请求：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bee75f67f193632175\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ncurl -X POST \\\r\n  http://127.0.0.1:8080/ \\\r\n  -H 'Cache-Control: no-cache' \\\r\n  -H 'Content-Type: application/json' \\\r\n  -d '{\"name\": \"masnun\", \"email\": \"masnun@gmail.com\", \"age\": 12}'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f67f193632175-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f67f193632175-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f67f193632175-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f67f193632175-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f67f193632175-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bee75f67f193632175-1\"><span class=\"crayon-v\">curl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">X</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">POST</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">\\</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f67f193632175-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">http</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">8080</span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">\\</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bee75f67f193632175-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">H</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Cache-Control: no-cache'</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">\\</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f67f193632175-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">H</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Content-Type: application/json'</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">\\</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bee75f67f193632175-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'{\"name\": \"masnun\", \"email\": \"masnun@gmail.com\", \"age\": 12}'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>猜猜发生了什么？我们得到一个错误，说年龄必须等于或大于 18。类型系允许我们进行智能数据验证。如果我们启用了 <code>docs</code> url，我们还将自动记录这些参数。</p>\n<h1 id=\"toc_7\">发送响应</h1>\n<p>如果你已经注意到，到目前为止，我们只可以传递一个字典，它将被转换为 JSON 并作为默认返回。但是，我们可以使用 <code>apistar</code> 中的 <code>Response</code> 类来设置状态码和其它任意响应头。这有一个简单的例子：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bee75f682145982372\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfrom apistar import Route, Response\r\nfrom apistar.frameworks.wsgi import WSGIApp as App\r\ndef hello():\r\n    return Response(\r\n    content=\"Hello\".encode(\"utf-8\"),\r\n    status=200,\r\n    headers={\"X-API-Framework\": \"API Star\"},\r\n    content_type=\"text/plain\"\r\n    )\r\nroutes = [\r\n    Route('/', 'GET', hello),\r\n]\r\napp = App(routes=routes)\r\nif __name__ == '__main__':\r\n    app.main()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f682145982372-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f682145982372-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f682145982372-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f682145982372-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f682145982372-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f682145982372-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f682145982372-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f682145982372-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f682145982372-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f682145982372-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f682145982372-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f682145982372-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f682145982372-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bee75f682145982372-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bee75f682145982372-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bee75f682145982372-1\"><span class=\"crayon-st\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">apistar </span><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Route</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Response</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f682145982372-2\"><span class=\"crayon-st\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">apistar</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">frameworks</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">wsgi </span><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WSGIApp </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">App</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bee75f682145982372-3\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">hello</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f682145982372-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Response</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bee75f682145982372-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">content</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"Hello\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">encode</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"utf-8\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f682145982372-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">status</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">200</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bee75f682145982372-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">headers</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">\"X-API-Framework\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"API Star\"</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f682145982372-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">content_type</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"text/plain\"</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bee75f682145982372-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f682145982372-10\"><span class=\"crayon-v\">routes</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bee75f682145982372-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">Route</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'/'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'GET'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">hello</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f682145982372-12\"><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bee75f682145982372-13\"><span class=\"crayon-v\">app</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">App</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">routes</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">routes</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bee75f682145982372-14\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">__name__</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'__main__'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bee75f682145982372-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">app</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0029 seconds] -->\r\n<p>它应该返回纯文本响应和一个自定义标响应头。请注意，<code>content</code> 应该是字节，而不是字符串。这就是我编码它的原因。</p>\n<h1 id=\"toc_8\">继续</h1>\n<p>我刚刚介绍了 API Star 的一些特性，API Star 中还有许多非常酷的东西，我建议通过 <a href=\"https://github.com/encode/apistar\">Github Readme</a> 文件来了解这个优秀框架所提供的不同功能的更多信息。我还将尝试在未来几天内介绍关于 API Star 的更多简短的，集中的教程。</p>\n<p> </p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89279\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89279votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89279\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"title": "8 个用于业余项目的优秀 Python 库", "url": "http://python.jobbole.com/89287/", "url_object_id": "326a1b6c86bf8e62bf9cbd3d190a2254", "create_date": "2019-06-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/02/2c224095b3bd5c6fee7c908a481292f7.jpg"], "praise_nums": 2, "comment_nums": 0, "fav_nums": 4, "tags": "基础知识,Python 库", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/article/18/9/python-libraries-side-projects\">Jeff Triplett</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-10008-1.html\">Linux中国-ucasFL</a>   </div><div id=\"article_content\">\n<blockquote>\n<div> 这些库可以使你更容易构架个人项目。</div>\n</blockquote>\n<p>在 Python/Django 的世界里有这样一个谚语：为语言而来，为社区而留。对绝大多数人来说的确是这样的，但是，还有一件事情使得我们一直停留在 Python 的世界里，不愿离开，那就是我们可以很容易地利用一顿午餐或晚上几个小时的时间，把一个想法快速地实现出来。</p>\n<p>这个月，我们来探讨一些我们喜欢用来快速完成业余项目side projects或打发午餐时间的 Python 库。</p>\n<h1 id=\"toc_1\">在数据库中即时保存数据：Dataset</h1>\n<p>当我们想要在不知道最终数据库表长什么样的情况下，快速收集数据并保存到数据库中的时候，<a href=\"https://dataset.readthedocs.io/en/latest/\">Dataset</a> 库将是我们的最佳选择。Dataset 库有一个简单但功能强大的 API，因此我们可以很容易的把数据保存下来，之后再进行整理。</p>\n<p>Dataset 建立在 SQLAlchemy 之上，所以如果需要对它进行扩展，你会感到非常熟悉。使用 Django 内建的 <a href=\"https://docs.djangoproject.com/en/2.1/ref/django-admin/#django-admin-inspectdb\">inspectdb</a> 管理命令可以很容易地把底层数据库模型导入 Django 中，这使得和现有数据库一同工作不会出现任何障碍。</p>\n<h1 id=\"toc_2\">从网页抓取数据：Beautiful Soup</h1>\n<p><a href=\"https://www.crummy.com/software/BeautifulSoup/\">Beautiful Soup</a>（一般写作 BS4）库使得从 HTML 网页中提取信息变得非常简单。当我们需要把非结构化或弱结构化的 HTML 转换为结构化数据的时候，就需要使用 Beautiful Soup 。用它来处理 XML 数据也是一个很好的选择，否则 XML 的可读性或许会很差。</p>\n<h1 id=\"toc_3\">和 HTTP 内容打交道：Requests</h1>\n<p>当需要和 HTTP 内容打交道的时候，<a href=\"http://docs.python-requests.org/\">Requests</a> 毫无疑问是最好的标准库。当我们想要抓取 HTML 网页或连接 API 的时候，都离不开 Requests 库。同时，它也有很好的文档。</p>\n<h1 id=\"toc_4\">编写命令行工具：Click</h1>\n<p>当需要写一个简单的 Python 脚本作为命令行工具的时候，<a href=\"http://click.pocoo.org/5/\">Click</a> 是我最喜欢用的库。它的 API 非常直观，并且在实现时经过了深思熟虑，我们只需要记住很少的几个模式。它的文档也很优秀，这使得学习其高级特性更加容易。</p>\n<h1 id=\"toc_5\">对事物命名：Python Slugify</h1>\n<p>众所周知，命名是一件困难的事情。<a href=\"https://github.com/un33k/python-slugify\">Python Slugify</a> 是一个非常有用的库，它可以把一个标题或描述转成一个带有特性的唯一标识符。如果你正在做一个 Web 项目，并且你想要使用对搜索引擎优化友好SEO-friendly的链接，那么，使用 Python Slugify 可以让这件事变得很容易。</p>\n<h1 id=\"toc_6\">和插件打交道：Pluggy</h1>\n<p><a href=\"https://pluggy.readthedocs.io/en/latest/\">Pluggy</a> 库相对较新，但是如果你想添加一个插件系统到现有应用中，那么使用 Pluggy 是最好也是最简单的方式。如果你使用过 pytest，那么实际上相当于已经使用过 Pluggy 了，虽然你还不知道它。</p>\n<h1 id=\"toc_7\">把 CSV 文件转换到 API 中：DataSette</h1>\n<p><a href=\"https://github.com/simonw/datasette\">DataSette</a> 是一个神奇的工具，它可以很容易地把 CSV 文件转换为全特性的只读 REST JSON API，同时，不要把它和 Dataset 库混淆。Datasette 有许多特性，包括创建图表和 geo（用于创建交互式地图），并且很容易通过容器或第三方网络主机进行部署。</p>\n<h1 id=\"toc_8\">处理环境变量等：Envparse</h1>\n<p>如果你不想在源代码中保存 API 密钥、数据库凭证或其他敏感信息，那么你便需要解析环境变量，这时候 <a href=\"https://github.com/rconradharris/envparse\">envparse</a> 是最好的选择。Envparse 能够处理环境变量、ENV 文件、变量类型，甚至还可以进行预处理和后处理（例如，你想要确保变量名总是大写或小写的）。</p>\n<p>有什么你最喜欢的用于业余项目的 Python 库不在这个列表中吗？请在评论中和我们分享。</p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89287\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89287votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89287\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"title": "Python 中的 Socket 编程（指南）", "url": "http://python.jobbole.com/89290/", "url_object_id": "71a28cd07a61510030e7cdbf4b069264", "create_date": "2019-06-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/02/2c224095b3bd5c6fee7c908a481292f7.jpg"], "praise_nums": 3, "comment_nums": 2, "fav_nums": 23, "tags": "基础知识,,Socket", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://python.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/keelii\">keelii</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://realpython.com/python-sockets/\">realpython</a>。欢迎加入<a target=\"_blank\" href=\"https://github.com/jobbole/translation-project\">翻译组</a>。</div><p><strong>原作者</strong></p>\n<blockquote><p>Nathan Jennings 是 Real Python 教程团队的一员，他在很早之前就使用 C 语言开始了自己的编程生涯，但是最终发现了 Python，从 Web 应用和网络数据收集到网络安全，他喜欢任何 Pythonic 的东西 —— realpython</p></blockquote>\n<p id=\"译者注\"><strong>译者注</strong></p>\n<blockquote><p><a href=\"https://keelii.com/\">译者</a> 是一名前端工程师，平常会写很多的 JavaScript。但是当我使用 JavaScript 很长一段时间后，会对一些 <em>语言无关</em> 的编程概念感兴趣，比如：网络/socket 编程、异步/并发、线/进程通信等。然而恰好这些内容在 JavasScript 领域很少见</p>\n<p>因为一直从事 Web 开发，所以我认为理解了网络通信及其 socket 编程就理解了 Web 开发的某些本质。过程中我发现 Python 社区有很多我喜欢的内容，并且很多都是高质量的公开发布且开源的。</p>\n<p>最近我发现了这篇文章，系统地从底层网络通信讲到了应用层协议及其 C/S 架构的应用程序，由浅入深。虽然代码、API 使用了 Python，但是底层原理相通。非常值得一读，推荐给大家</p>\n<p>另外，由于本人水平所限，翻译的内容难免出现偏差，如果你在阅读的过程中发现问题，请毫不犹豫的提醒我或者开新 <a href=\"https://github.com/keelii/socket-programming-in-python-cn/pulls\">PR</a>。或者有什么不理解的地方也可以开 <a href=\"https://github.com/keelii/socket-programming-in-python-cn/issues\">issue</a> 讨论，当然 star 也是欢迎的</p></blockquote>\n<h2 id=\"授权\">开始</h2>\n<p>网络中的 Socket 和 Socket API 是用来跨网络的消息传送的，它提供了 <a href=\"https://en.wikipedia.org/wiki/Inter-process_communication\">进程间通信(IPC)</a> 的一种形式。网络可以是逻辑的、本地的电脑网络，或者是可以物理连接到外网的网络，并且可以连接到其它网络。英特网就是一个明显的例子，就是那个你通过 ISP 连接到的网络</p>\n<p>本篇教程有三个不同的迭代阶段，来展示如何使用 Python 构建一个 Socket 服务器和客户端</p>\n<ol>\n<li>我们将以一个简单的 Socket 服务器和客户端程序来开始本教程</li>\n<li>当你看完 API 了解例子是怎么运行起来以后，我们将会看到一个具有同时处理多个连接能力的例子的改进版</li>\n<li>最后，我们将会开发出一个更加完善且具有完整的自定义头信息和内容的 Socket 应用</li>\n</ol>\n<p>教程结束后，你将学会如何使用 Python 中的 <a href=\"https://docs.python.org/3/library/socket.html\">socket 模块</a> 来写一个自己的客户端/服务器应用。以及向你展示如何在你的应用中使用自定义类在不同的端之间发送消息和数据</p>\n<p>所有的例子程序都使用 Python 3.6 编写，你可以在 Github 上找到 <a href=\"https://github.com/realpython/materials/tree/master/python-sockets-tutorial\">源代码</a></p>\n<p>网络和 Socket 是个很大的话题。网上已经有了关于它们的字面解释，如果你还不是很了解 Socket 和网络。当你你读到那些解释的时候会感到不知所措，这是非常正常的。因为我也是这样过来的</p>\n<p>尽管如此也不要气馁。 我已经为你写了这个教程。 就像学习 Python 一样，我们可以一次学习一点。用你的浏览器保存本页面到书签，以便你学习下一部分时能找到</p>\n<p>让我们开始吧！</p>\n<h2 id=\"背景\">背景</h2>\n<p>Socket 有一段很长的历史，最初是在 <a href=\"https://en.wikipedia.org/wiki/Network_socket#History\">1971 年被用于 ARPANET</a>，随后就成了 1983 年发布的 Berkeley Software Distribution (BSD) 操作系统的 API，并且被命名为 <a href=\"https://en.wikipedia.org/wiki/Berkeley_sockets\">Berkeleysocket</a></p>\n<p>当互联网在 20 世纪 90 年代随万维网兴起时，网络编程也火了起来。Web 服务和浏览器并不是唯一使用新的连接网络和 Socket 的应用程序。各种类型不同规模的客户端/服务器应用都广泛地使用着它们</p>\n<p>时至今日，尽管 Socket API 使用的底层协议已经进化了很多年，也出现了许多新的协议，但是底层的 API 仍然保持不变</p>\n<p>Socket 应用最常见的类型就是 <strong>客户端/服务器</strong> 应用，服务器用来等待客户端的链接。我们教程中涉及到的就是这类应用。更明确地说，我们将看到用于 <a href=\"https://en.wikipedia.org/wiki/Berkeley_sockets\">InternetSocket</a> 的 Socket API，有时称为 Berkeley 或 BSD Socket。当然也有 <a href=\"https://en.wikipedia.org/wiki/Unix_domain_socket\">Unix domain sockets</a> —— 一种用于 <strong>同一主机</strong> 进程间的通信</p>\n<h2 id=\"socket-api-概览\">Socket API 概览</h2>\n<p>Python 的 socket 模块提供了使用 Berkeley sockets API 的接口。这将会在我们这个教程里使用和讨论到</p>\n<p>主要的用到的 Socket API 函数和方法有下面这些：</p>\n<ul>\n<li><code>socket()</code></li>\n<li><code>bind()</code></li>\n<li><code>listen()</code></li>\n<li><code>accept()</code></li>\n<li><code>connect()</code></li>\n<li><code>connect_ex()</code></li>\n<li><code>send()</code></li>\n<li><code>recv()</code></li>\n<li><code>close()</code></li>\n</ul>\n<p>Python 提供了和 C 语言一致且方便的 API。我们将在下面一节中用到它们</p>\n<p>作为标准库的一部分，Python 也有一些类可以让我们方便的调用这些底层 Socket 函数。尽管这个教程中并没有涉及这部分内容，你也可以通过<a href=\"https://docs.python.org/3/library/socketserver.html\">socketserver 模块</a> 中找到文档。当然还有很多实现了高层网络协议（比如：HTTP, SMTP）的的模块，可以在下面的链接中查到 <a href=\"https://docs.python.org/3/library/internet.html\">Internet Protocols and Support</a></p>\n<h2 id=\"tcp-sockets\">TCP Sockets</h2>\n<p>就如你马上要看到的，我们将使用 <code>socket.socket()</code> 创建一个类型为 <code>socket.SOCK_STREAM</code> 的 socket 对象，默认将使用 <a href=\"https://en.wikipedia.org/wiki/Transmission_Control_Protocol\">Transmission Control Protocol(TCP) 协议</a>，这基本上就是你想使用的默认值</p>\n<p>为什么应该使用 TCP 协议？</p>\n<ul>\n<li><strong>可靠的</strong>：网络传输中丢失的数据包会被检测到并重新发送</li>\n<li><strong>有序传送</strong>：数据按发送者写入的顺序被读取</li>\n</ul>\n<p>相反，使用 <code>socket.SOCK_DGRAM</code> 创建的 <a href=\"https://en.wikipedia.org/wiki/User_Datagram_Protocol\">用户数据报协议(UDP)</a> Socket 是 <strong>不可靠</strong> 的，而且数据的读取写发送可以是 <strong>无序的</strong></p>\n<p>为什么这个很重要？网络总是会尽最大的努力去传输完整数据（往往不尽人意）。没法保证你的数据一定被送到目的地或者一定能接收到别人发送给你的数据</p>\n<p>网络设备（比如：路由器、交换机）都有带宽限制，或者系统本身的极限。它们也有 CPU、内存、总线和接口包缓冲区，就像我们的客户端和服务器。TCP 消除了你对于丢包、乱序以及其它网络通信中通常出现的问题的顾虑</p>\n<p>下面的示意图中，我们将看到 Socket API 的调用顺序和 TCP 的数据流：</p>\n<p><img src=\"https://files.realpython.com/media/sockets-tcp-flow.1da426797e37.jpg\" alt=\"TCP Socket 流\"></p>\n<p>左边表示服务器，右边则是客户端</p>\n<p>左上方开始，注意服务器创建「监听」Socket 的 API 调用：</p>\n<ul>\n<li><code>socket()</code></li>\n<li><code>bind()</code></li>\n<li><code>listen()</code></li>\n<li><code>accept()</code></li>\n</ul>\n<p>「监听」Socket 做的事情就像它的名字一样。它会监听客户端的连接，当一个客户端连接进来的时候，服务器将调用 <code>accept()</code> 来「接受」或者「完成」此连接</p>\n<p>客户端调用 <code>connect()</code> 方法来建立与服务器的链接，并开始三次握手。握手很重要是因为它保证了网络的通信的双方可以到达，也就是说客户端可以正常连接到服务器，反之亦然</p>\n<p>上图中间部分往返部分表示客户端和服务器的数据交换过程，调用了 <code>send()</code> 和 <code>recv()</code>方法</p>\n<p>下面部分，客户端和服务器调用 <code>close()</code> 方法来关闭各自的 socket</p>\n<h2 id=\"打印客户端和服务端\">打印客户端和服务端</h2>\n<p>你现在已经了解了基本的 socket API 以及客户端和服务器是如何通信的，让我们来创建一个客户端和服务器。我们将会以一个简单的实现开始。服务器将打印客户端发送回来的内容</p>\n<h3 id=\"打印程序服务端\">打印程序服务端</h3>\n<p>下面就是服务器代码，<code>echo-server.py</code>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d5c4081332237\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#!/usr/bin/env python3\r\n\r\nimport socket\r\n\r\nHOST = '127.0.0.1'  # 标准的回环地址 (localhost)\r\nPORT = 65432        # 监听的端口 (非系统级的端口: 大于 1023)\r\n\r\nwith socket.socket(socket.AF_INET, socket.SOCK_STREAM) as s:\r\n    s.bind((HOST, PORT))\r\n    s.listen()\r\n    conn, addr = s.accept()\r\n    with conn:\r\n        print('Connected by', addr)\r\n        while True:\r\n            data = conn.recv(1024)\r\n            if not data:\r\n                break\r\n            conn.sendall(data)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d5c4081332237-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d5c4081332237-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d5c4081332237-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d5c4081332237-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d5c4081332237-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d5c4081332237-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d5c4081332237-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d5c4081332237-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d5c4081332237-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d5c4081332237-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d5c4081332237-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d5c4081332237-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d5c4081332237-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d5c4081332237-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d5c4081332237-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d5c4081332237-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d5c4081332237-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d5c4081332237-18\">18</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d5c4081332237-1\"><span class=\"crayon-p\">#!/usr/bin/env python3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d5c4081332237-2\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d5c4081332237-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">socket</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d5c4081332237-4\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d5c4081332237-5\"><span class=\"crayon-v\">HOST</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'127.0.0.1'</span><span class=\"crayon-h\">  </span><span class=\"crayon-p\"># 标准的回环地址 (localhost)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d5c4081332237-6\"><span class=\"crayon-v\">PORT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-h\">        </span><span class=\"crayon-p\"># 监听的端口 (非系统级的端口: 大于 1023)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d5c4081332237-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d5c4081332237-8\"><span class=\"crayon-e\">with </span><span class=\"crayon-v\">socket</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">socket</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">socket</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">AF_INET</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">socket</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">SOCK_STREAM</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d5c4081332237-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">bind</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">HOST</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">PORT</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d5c4081332237-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">listen</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d5c4081332237-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">conn</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">addr</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">accept</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d5c4081332237-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">with </span><span class=\"crayon-v\">conn</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d5c4081332237-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Connected by'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">addr</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d5c4081332237-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">True</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d5c4081332237-15\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">conn</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">recv</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1024</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d5c4081332237-16\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d5c4081332237-17\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">break</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d5c4081332237-18\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">conn</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sendall</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0024 seconds] -->\r\n<p></p>\n<blockquote><p>注意：上面的代码你可能还没法完全理解，但是不用担心。这几行代码做了很多事情，这 只是一个起点，帮你看见这个简单的服务器是如何运行的 教程后面有引用部分，里面有很多额外的引用资源链接，这个教程中我将把链接放在那儿</p></blockquote>\n<p>让我们一起来看一下 API 调用以及发生了什么</p>\n<p><code>socket.socket()</code> 创建了一个 socket 对象，并且支持 <a href=\"https://docs.python.org/3/reference/datamodel.html#context-managers\">context manager type</a>，你可以使用 <a href=\"https://docs.python.org/3/reference/compound_stmts.html#with\">with 语句</a>，这样你就不用再手动调用 <code>s.close()</code> 来关闭 socket 了</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d5d0800556496\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nwith socket.socket(socket.AF_INET, socket.SOCK_STREAM) as s:\r\n    pass  # Use the socket object without calling s.close().</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d5d0800556496-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d5d0800556496-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d5d0800556496-1\"><span class=\"crayon-e\">with </span><span class=\"crayon-v\">socket</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">socket</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">socket</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">AF_INET</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">socket</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">SOCK_STREAM</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d5d0800556496-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">pass</span><span class=\"crayon-h\">  </span><span class=\"crayon-p\"># Use the socket object without calling s.close().</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>调用 <code>socket()</code> 时传入的 socket 地址族参数 <code>socket.AF_INET</code> 表示因特网 IPv4 <a href=\"https://realpython.com/python-sockets/#socket-address-families\">地址族</a>，<code>SOCK_STREAM</code> 表示使用 TCP 的 socket 类型，协议将被用来在网络中传输消息</p>\n<p><code>bind()</code> 用来关联 socket 到指定的网络接口（IP 地址）和端口号：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d5d5820823499\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nHOST = '127.0.0.1'\r\nPORT = 65432\r\n\r\n# ...\r\n\r\ns.bind((HOST, PORT))</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d5d5820823499-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d5d5820823499-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d5d5820823499-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d5d5820823499-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d5d5820823499-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d5d5820823499-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d5d5820823499-1\"><span class=\"crayon-v\">HOST</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'127.0.0.1'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d5d5820823499-2\"><span class=\"crayon-v\">PORT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d5d5820823499-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d5d5820823499-4\"><span class=\"crayon-p\"># ...</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d5d5820823499-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d5d5820823499-6\"><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">bind</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">HOST</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">PORT</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p><code>bind()</code> 方法的入参取决于 socket 的地址族，在这个例子中我们使用了 <code>socket.AF_INET</code> (IPv4)，它将返回两个元素的元组：(host, port)</p>\n<p>host 可以是主机名称、IP 地址、空字符串，如果使用 IP 地址，host 就应该是 IPv4 格式的字符串，<code>127.0.0.1</code> 是标准的 IPv4 回环地址，只有主机上的进程可以连接到服务器，如果你传了空字符串，服务器将接受本机所有可用的 IPv4 地址</p>\n<p>端口号应该是 1-65535 之间的整数（0是保留的），这个整数就是用来接受客户端链接的 TCP 端口号，如果端口号小于 1024，有的操作系统会要求管理员权限</p>\n<p>使用 <code>bind()</code> 传参为主机名称的时候需要注意：</p>\n<blockquote><p>如果你在 host 部分 <strong>主机名称</strong> 作为 IPv4/v6 socket 的地址，程序可能会产生非确 定性的行为，因为 Python 会使用 DNS 解析后的 <strong>第一个</strong> 地址，根据 DNS 解析的结 果或者 host 配置 socket 地址将会以不同方式解析为实际的 IPv4/v6 地址。如果想得 到确定的结果传入的 host 参数建议使用数字格式的地址 <a href=\"https://docs.python.org/3/library/socket.html\">引用</a></p></blockquote>\n<p>我稍后将在 <a href=\"#%E4%BD%BF%E7%94%A8%E4%B8%BB%E6%9C%BA%E5%90%8D\">使用主机名</a> 部分讨论这个问题，但是现在也值得一提。目前来说你只需要知道当使用主机名时，你将会因为 DNS 解析的原因得到不同的结果</p>\n<p>可能是任何地址。比如第一次运行程序时是 10.1.2.3，第二次是 192.168.0.1，第三次是 172.16.7.8 等等</p>\n<p>继续看上面的服务器代码示例，<code>listen()</code> 方法调用使服务器可以接受连接请求，这使它成为一个「监听中」的 socket</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d5d9830903694\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ns.listen()\r\nconn, addr = s.accept()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d5d9830903694-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d5d9830903694-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d5d9830903694-1\"><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">listen</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d5d9830903694-2\"><span class=\"crayon-v\">conn</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">addr</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">accept</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p><code>listen()</code> 方法有一个 <code>backlog</code> 参数。它指定在拒绝新的连接之前系统将允许使用的 <em>未接受的连接</em> 数量。从 Python 3.5 开始，这是可选参数。如果不指定，Python 将取一个默认值</p>\n<p>如果你的服务器需要同时接收很多连接请求，增加 backlog 参数的值可以加大等待链接请求队列的长度，最大长度取决于操作系统。比如在 Linux 下，参考 <a href=\"https://serverfault.com/questions/518862/will-increasing-net-core-somaxconn-make-a-difference/519152\">/proc/sys/net/core/somaxconn</a></p>\n<p><code>accept()</code> 方法阻塞并等待传入连接。当一个客户端连接时，它将返回一个新的 socket 对象，对象中有表示当前连接的 conn 和一个由主机、端口号组成的 IPv4/v6 连接的元组，更多关于元组值的内容可以查看 <a href=\"#socket%20%E5%9C%B0%E5%9D%80%E6%97%8F\">socket 地址族</a> 一节中的详情</p>\n<p>这里必须要明白我们通过调用 <code>accept()</code> 方法拥有了一个新的 socket 对象。这非常重要，因为你将用这个 socket 对象和客户端进行通信。和监听一个 socket 不同的是后者只用来授受新的连接请求</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d5dd216604503\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nconn, addr = s.accept()\r\nwith conn:\r\n    print('Connected by', addr)\r\n    while True:\r\n        data = conn.recv(1024)\r\n        if not data:\r\n            break\r\n        conn.sendall(data)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d5dd216604503-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d5dd216604503-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d5dd216604503-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d5dd216604503-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d5dd216604503-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d5dd216604503-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d5dd216604503-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d5dd216604503-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d5dd216604503-1\"><span class=\"crayon-v\">conn</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">addr</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">accept</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d5dd216604503-2\"><span class=\"crayon-e\">with </span><span class=\"crayon-v\">conn</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d5dd216604503-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Connected by'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">addr</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d5dd216604503-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">True</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d5dd216604503-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">conn</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">recv</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1024</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d5dd216604503-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d5dd216604503-7\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">break</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d5dd216604503-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">conn</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sendall</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>从 <code>accept()</code> 获取客户端 socket 连接对象 conn 后，使用一个无限 while 循环来阻塞调用 <code>conn.recv()</code>，无论客户端传过来什么数据都会使用 <code>conn.sendall()</code> 打印出来</p>\n<p>如果 <code>conn.recv()</code> 方法返回一个空 byte 对象（<code>b''</code>），然后客户端关闭连接，循环结束，with 语句和 conn 一起使用时，通信结束的时候会自动关闭 socket 链接</p>\n<h3 id=\"打印程序客户端\">打印程序客户端</h3>\n<p>现在我们来看下客户端的程序，<code>echo-client.py</code>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d5e1248518398\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#!/usr/bin/env python3\r\n\r\nimport socket\r\n\r\nHOST = '127.0.0.1'  # 服务器的主机名或者 IP 地址\r\nPORT = 65432        # 服务器使用的端口\r\n\r\nwith socket.socket(socket.AF_INET, socket.SOCK_STREAM) as s:\r\n    s.connect((HOST, PORT))\r\n    s.sendall(b'Hello, world')\r\n    data = s.recv(1024)\r\n\r\nprint('Received', repr(data))</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d5e1248518398-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d5e1248518398-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d5e1248518398-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d5e1248518398-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d5e1248518398-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d5e1248518398-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d5e1248518398-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d5e1248518398-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d5e1248518398-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d5e1248518398-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d5e1248518398-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d5e1248518398-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d5e1248518398-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d5e1248518398-1\"><span class=\"crayon-p\">#!/usr/bin/env python3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d5e1248518398-2\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d5e1248518398-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">socket</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d5e1248518398-4\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d5e1248518398-5\"><span class=\"crayon-v\">HOST</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'127.0.0.1'</span><span class=\"crayon-h\">  </span><span class=\"crayon-p\"># 服务器的主机名或者 IP 地址</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d5e1248518398-6\"><span class=\"crayon-v\">PORT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-h\">        </span><span class=\"crayon-p\"># 服务器使用的端口</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d5e1248518398-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d5e1248518398-8\"><span class=\"crayon-e\">with </span><span class=\"crayon-v\">socket</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">socket</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">socket</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">AF_INET</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">socket</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">SOCK_STREAM</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d5e1248518398-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">connect</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">HOST</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">PORT</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d5e1248518398-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sendall</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">b</span><span class=\"crayon-s\">'Hello, world'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d5e1248518398-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">recv</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1024</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d5e1248518398-12\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d5e1248518398-13\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Received'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">repr</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p>与服务器程序相比，客户端程序简单很多。它创建了一个 socket 对象，连接到服务器并且调用 <code>s.sendall()</code> 方法发送消息，然后再调用 <code>s.recv()</code> 方法读取服务器返回的内容并打印出来</p>\n<h3 id=\"运行打印程序的客户端和服务端\">运行打印程序的客户端和服务端</h3>\n<p>让我们运行打印程序的客户端和服务端，观察他们的表现，看看发生了什么事情</p>\n<blockquote><p>如果你在运行示例代码时遇到了问题，可以阅读 <a href=\"https://dbader.org/blog/how-to-make-command-line-commands-with-python\">如何使用 Python 开发命令行命令</a>，如果 你使用的是 windows 操作系统，请查看 <a href=\"https://docs.python.org/3.6/faq/windows.html\">Python Windows FAQ</a></p></blockquote>\n<p>打开命令行程序，进入你的代码所在的目录，运行打印程序的服务端：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d5e4406969267\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ./echo-server.py</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d5e4406969267-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d5e4406969267-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">echo</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>你的命令行将被挂起，因为程序有一个阻塞调用</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d5e7946709304\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nconn, addr = s.accept()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d5e7946709304-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d5e7946709304-1\"><span class=\"crayon-v\">conn</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">addr</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">accept</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>它将等待客户端的连接，现在再打开一个命令行窗口运行打印程序的客户端：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d5eb947767595\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ./echo-client.py\r\nReceived b'Hello, world'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d5eb947767595-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d5eb947767595-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d5eb947767595-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">echo</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">client</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d5eb947767595-2\"><span class=\"crayon-i\">Received</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">b</span><span class=\"crayon-s\">'Hello, world'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>在服务端的窗口你将看见：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d5ee903797065\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ./echo-server.py\r\nConnected by ('127.0.0.1', 64623)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d5ee903797065-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d5ee903797065-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d5ee903797065-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">echo</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d5ee903797065-2\"><span class=\"crayon-e\">Connected </span><span class=\"crayon-e\">by</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'127.0.0.1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">64623</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>上面的输出中，服务端打印出了 <code>s.accept()</code> 返回的 addr 元组，这就是客户端的 IP 地址和 TCP 端口号。示例中的端口号是 64623 这很可能是和你机器上运行的结果不同</p>\n<h3 id=\"查看-socket-状态\">查看 socket 状态</h3>\n<p>想查找你主机上 socket 的当前状态，可以使用 <code>netstat</code> 命令。这个命令在 macOS, Window, Linux 系统上默认可用</p>\n<p>下面这个就是启动服务后 netstat 命令的输出结果：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d5f1464376317\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ netstat -an\r\nActive Internet connections (including servers)\r\nProto Recv-Q Send-Q  Local Address          Foreign Address        (state)\r\ntcp4       0      0  127.0.0.1.65432        *.*                    LISTEN</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d5f1464376317-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d5f1464376317-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d5f1464376317-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d5f1464376317-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d5f1464376317-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">netstat</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">an</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d5f1464376317-2\"><span class=\"crayon-e\">Active </span><span class=\"crayon-e\">Internet </span><span class=\"crayon-e\">connections</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">including </span><span class=\"crayon-v\">servers</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d5f1464376317-3\"><span class=\"crayon-e\">Proto </span><span class=\"crayon-v\">Recv</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Q</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Send</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Q</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">Local </span><span class=\"crayon-e\">Address          </span><span class=\"crayon-e\">Foreign </span><span class=\"crayon-e\">Address</span><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">state</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d5f1464376317-4\"><span class=\"crayon-i\">tcp4</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">127.0.0.1.65432</span><span class=\"crayon-h\">        </span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">LISTEN</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>注意本地地址是 127.0.0.1.65432，如果 <code>echo-server.py</code> 文件中 <code>HOST</code> 设置成空字符串 <code>''</code> 的话，netstat 命令将显示如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d5f5524235997\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ netstat -an\r\nActive Internet connections (including servers)\r\nProto Recv-Q Send-Q  Local Address          Foreign Address        (state)\r\ntcp4       0      0  *.65432                *.*                    LISTEN</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d5f5524235997-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d5f5524235997-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d5f5524235997-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d5f5524235997-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d5f5524235997-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">netstat</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">an</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d5f5524235997-2\"><span class=\"crayon-e\">Active </span><span class=\"crayon-e\">Internet </span><span class=\"crayon-e\">connections</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">including </span><span class=\"crayon-v\">servers</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d5f5524235997-3\"><span class=\"crayon-e\">Proto </span><span class=\"crayon-v\">Recv</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Q</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Send</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Q</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">Local </span><span class=\"crayon-e\">Address          </span><span class=\"crayon-e\">Foreign </span><span class=\"crayon-e\">Address</span><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">state</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d5f5524235997-4\"><span class=\"crayon-i\">tcp4</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">65432</span><span class=\"crayon-h\">                </span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">LISTEN</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>本地地址是 <code>*.65432</code>，这表示所有主机支持的 IP 地址族都可以接受传入连接，在我们的例子里面调用 <code>socket()</code> 时传入的参数 <code>socket.AF_INET</code> 表示使用了 IPv4 的 TCP socket，你可以在输出结果中的 <code>Proto</code> 列中看到(tcp4)</p>\n<p>上面的输出是我截取的只显示了咱们的打印程序服务端进程，你可能会看到更多输出，具体取决于你运行的系统。需要注意的是 Proto, Local Address 和 state 列。分别表示 TCP socket 类型、本地地址端口、当前状态</p>\n<p>另外一个查看这些信息的方法是使用 <code>lsof</code> 命令，这个命令在 macOS 上是默认安装的，Linux 上需要你手动安装</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d5f8205753830\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ lsof -i -n\r\nCOMMAND     PID   USER   FD   TYPE   DEVICE SIZE/OFF NODE NAME\r\nPython    67982 nathan    3u  IPv4 0xecf272      0t0  TCP *:65432 (LISTEN)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d5f8205753830-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d5f8205753830-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d5f8205753830-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d5f8205753830-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lsof</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">n</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d5f8205753830-2\"><span class=\"crayon-e\">COMMAND     </span><span class=\"crayon-e\">PID   </span><span class=\"crayon-e\">USER   </span><span class=\"crayon-e\">FD   </span><span class=\"crayon-e\">TYPE   </span><span class=\"crayon-e\">DEVICE </span><span class=\"crayon-v\">SIZE</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">OFF </span><span class=\"crayon-e\">NODE </span><span class=\"crayon-e\">NAME</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d5f8205753830-3\"><span class=\"crayon-i\">Python</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">67982</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">nathan</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">3u</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">IPv4</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0xecf272</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0t0</span><span class=\"crayon-h\">  </span><span class=\"crayon-e \">TCP *</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">65432</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">LISTEN</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>isof 命令使用 <code>-i</code> 参数可以查看打开的 socket 连接的 COMMAND, PID(process id) 和 USER(user id)，上面的输出就是打印程序服务端</p>\n<p><code>netstat</code> 和 <code>isof</code> 命令有许多可用的参数，这取决于你使用的操作系统。可以使用 man page 来查看他们的使用文档，这些文档绝对值得花一点时间去了解，你将受益匪浅，macOS 和 Linux 中使用命令 <code>man netstat</code> 或者 <code>man lsof</code> 命令，windows 下使用 <code>netstat /?</code> 来查看帮助文档</p>\n<p>一个通常会犯的错误是在没有监听 socket 端口的情况下尝试连接：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d5fc724858896\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ./echo-client.py\r\nTraceback (most recent call last):\r\n  File \"./echo-client.py\", line 9, in \r\n    s.connect((HOST, PORT))\r\nConnectionRefusedError: [Errno 61] Connection refused</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d5fc724858896-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d5fc724858896-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d5fc724858896-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d5fc724858896-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d5fc724858896-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d5fc724858896-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">echo</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">client</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d5fc724858896-2\"><span class=\"crayon-e\">Traceback</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">most </span><span class=\"crayon-e\">recent </span><span class=\"crayon-e\">call </span><span class=\"crayon-v\">last</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d5fc724858896-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-i\">File</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"./echo-client.py\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">line</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d5fc724858896-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">connect</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">HOST</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">PORT</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d5fc724858896-5\"><span class=\"crayon-v\">ConnectionRefusedError</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-i\">Errno</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">61</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Connection </span><span class=\"crayon-v\">refused</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>也可能是端口号出错、服务端没启动或者有防火墙阻止了连接，这些原因可能很难记住，或许你也会碰到 <code>Connection timed out</code> 的错误，记得给你的防火墙添加允许我们使用的端口规则</p>\n<p>引用部分有一些常见的 <a href=\"#%E9%94%99%E8%AF%AF\">错误</a></p>\n<h2 id=\"通信的流程分解\">通信的流程分解</h2>\n<p>让我们再仔细的观察下客户端是如何与服务端进行通信的：</p>\n<p><img src=\"https://files.realpython.com/media/sockets-loopback-interface.44fa30c53c70.jpg\" alt=\"host\"></p>\n<p>当使用回环地址时，数据将不会接触到外部网络，上图中，回环地址包含在了 host 里面。这就是回环地址的本质，连接数据传输是从本地到主机，这就是为什么你会听到有回环地址或者 <code>127.0.0.1</code>、<code>::1</code> 的 IP 地址和表示本地主机</p>\n<p>应用程序使用回环地址来与主机上的其它进程通信，这使得它与外部网络安全隔离。由于它是内部的，只能从主机内访问，所以它不会被暴露出去</p>\n<p>如果你的应用程序服务器使用自己的专用数据库（非公用的），则可以配置服务器仅监听回环地址，这样的话网络上的其它主机就无法连接到你的数据库</p>\n<p>如果你的应用程序中使用的 IP 地址不是 127.0.0.1 或者 ::1，那就可能会绑定到连接到外部网络的以太网上。这就是你通往 localhost 王国之外的其他主机的大门</p>\n<p><img src=\"https://files.realpython.com/media/sockets-ethernet-interface.aac312541af5.jpg\" alt=\"external network\"></p>\n<p>这里需要小心，并且可能让你感到难受甚至怀疑全世界。在你探索 localhost 的安全限制之前，确认读过 <a href=\"#%E4%BD%BF%E7%94%A8%E4%B8%BB%E6%9C%BA%E5%90%8D\">使用主机名</a> 一节。 一个安全注意事项是 <strong>不要使用主机名，要使用 IP 地址</strong></p>\n<h2 id=\"处理多个连接\">处理多个连接</h2>\n<p>打印程序的服务端肯定有它自己的一些局限。这个程序只能服务于一个客户端然后结束。打印程序的客户端也有它自己的局限，但是还有一个问题，如果客户端调用了下面的方法<code>s.recv()</code> 方法将返回 <code>b'Hello, world'</code> 中的一个字节 <code>b'H'</code></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d601834121392\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndata = s.recv(1024)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d601834121392-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d601834121392-1\"><span class=\"crayon-v\">data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">recv</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1024</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>1024 是缓冲区数据大小限制最大值参数 <code>bufsize</code>，并不是说 <code>recv()</code> 方法只返回 1024个字节的内容</p>\n<p><code>send()</code> 方法也是这个原理，它返回发送内容的字节数，结果可能小于传入的发送内容，你得处理这处情况，按需多次调用 <code>send()</code> 方法来发送完整的数据</p>\n<blockquote><p>应用程序负责检查是否已发送所有数据；如果仅传输了一些数据，则应用程序需要尝试传 递剩余数据 <a href=\"https://docs.python.org/3/library/socket.html#socket.socket.send\">引用</a></p></blockquote>\n<p>我们可以使用 <code>sendall()</code> 方法来回避这个过程</p>\n<blockquote><p>和 send() 方法不一样的是，<code>sendall()</code> 方法会一直发送字节，只到所有的数据传输完成 或者中途出现错误。成功的话会返回 None <a href=\"https://docs.python.org/3/library/socket.html#socket.socket.sendall\">引用</a></p></blockquote>\n<p>到目前为止，我们有两个问题：</p>\n<ul>\n<li>如何同时处理多个连接请求</li>\n<li>我们需要一直调用 <code>send()</code> 或者 <code>recv()</code> 直到所有数据传输完成</li>\n</ul>\n<p>应该怎么做呢，有很多方式可以实现并发。最近，有一个非常流程的库叫做 <a href=\"https://docs.python.org/3/library/asyncio.html\">Asynchronous I/O</a> 可以实现，asyncio 库在 Python 3.4 后默认添加到了标准库里面。传统的方法是使用线程</p>\n<p>并发的问题是很难做到正确，有许多细微之处需要考虑和防范。可能其中一个细节的问题都会导致整个程序崩溃</p>\n<p>我说这些并不是想吓跑你或者让你远离学习和使用并发编程。如果你想让程序支持大规模使用，使用多处理器、多核是很有必要的。然而在这个教程中我们将使用比线程更传统的方法使得逻辑更容易推理。我们将使用一个非常古老的系统调用：<code>select()</code></p>\n<p><code>select()</code> 允许你检查多个 socket 的 I/O 完成情况，所以你可以使用它来检测哪个 socket I/O 是就绪状态从而执行读取或写入操作，但是这是 Python，总会有更多其它的选择，我们将使用标准库中的<a href=\"https://docs.python.org/3/library/selectors.html\">selectors</a> 模块，所以我们使用了最有效的实现，不用在意你使用的操作系统：</p>\n<blockquote><p>这个模块提供了高层且高效的 I/O 多路复用，基于原始的 <code>select</code> 模块构建，推荐用 户使用这个模块，除非他们需要精确到操作系统层面的使用控制 <a href=\"https://docs.python.org/3/library/selectors.html\">引用 </a></p></blockquote>\n<p>尽管如此，使用 <code>select()</code> 也无法并发执行。这取决于您的工作负载，这种实现仍然会很快。这也取决于你的应用程序对连接所做的具体事情或者它需要支持的客户端数量</p>\n<p><a href=\"https://docs.python.org/3/library/asyncio.html\">asyncio</a> 使用单线程来处理多任务，使用事件循环来管理任务。通过使用 <code>select()</code>，我们可以创建自己的事件循环，更简单且同步化。当使用多线程时，即使要处理并发的情况，我们也不得不面临使用 CPython 或者 PyPy 中的「全局解析器锁 GIL」，这有效地限制了我们可以并行完成的工作量</p>\n<p>说这些是为了解析为什么使用 <code>select()</code> 可能是个更好的选择，不要觉得你必须使用 asyncio、线程或最新的异步库。通常，在网络应用程序中，你的应用程序就是 I/O 绑定：它可以在本地网络上，网络另一端的端，磁盘上等待</p>\n<p>如果你从客户端收到启动 CPU 绑定工作的请求，查看 <a href=\"https://docs.python.org/3/library/concurrent.futures.html\">concurrent.futures</a>模块，它包含一个 ProcessPoolExecutor 类，用来异步执行进程池中的调用</p>\n<p>如果你使用多进程，你的 Python 代码将被操作系统并行地在不同处理器或者核心上调度运行，并且没有全局解析器锁。你可以通过 Python 大会上的演讲 <a href=\"https://www.youtube.com/watch?v=0kXaLh8Fz3k\">John Reese – Thinking Outside the GIL with AsyncIO and Multiprocessing – PyCon 2018</a> 来了解更多的想法</p>\n<p>在下一节中，我们将介绍解决这些问题的服务器和客户端的示例。他们使用 <code>select()</code> 来同时处理多连接请求，按需多次调用 <code>send()</code> 和 <code>recv()</code></p>\n<h2 id=\"多连接的客户端和服务端\">多连接的客户端和服务端</h2>\n<p>下面两节中，我们将使用 selectors 模块中的 selector 对象来创建一个可以同时处理多个请求的客户端和服务端</p>\n<h3 id=\"多连接的服务端\">多连接的服务端</h3>\n<p>首页，我们来看眼多连接服务端程序的代码，<code>multiconn-server.py</code>。这是开始建立监听 socket 部分</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d607557502849\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nimport selectors\r\nsel = selectors.DefaultSelector()\r\n# ...\r\nlsock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\r\nlsock.bind((host, port))\r\nlsock.listen()\r\nprint('listening on', (host, port))\r\nlsock.setblocking(False)\r\nsel.register(lsock, selectors.EVENT_READ, data=None)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d607557502849-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d607557502849-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d607557502849-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d607557502849-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d607557502849-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d607557502849-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d607557502849-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d607557502849-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d607557502849-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d607557502849-1\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">selectors</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d607557502849-2\"><span class=\"crayon-v\">sel</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">selectors</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">DefaultSelector</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d607557502849-3\"><span class=\"crayon-p\"># ...</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d607557502849-4\"><span class=\"crayon-v\">lsock</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">socket</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">socket</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">socket</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">AF_INET</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">socket</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">SOCK_STREAM</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d607557502849-5\"><span class=\"crayon-v\">lsock</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">bind</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">host</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">port</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d607557502849-6\"><span class=\"crayon-v\">lsock</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">listen</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d607557502849-7\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'listening on'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">host</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">port</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d607557502849-8\"><span class=\"crayon-v\">lsock</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setblocking</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">False</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d607557502849-9\"><span class=\"crayon-v\">sel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">register</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">lsock</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">selectors</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">EVENT_READ</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">None</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n<p>这个程序和之前打印程序服务端最大的不同是使用了 <code>lsock.setblocking(False)</code> 配置 socket 为非阻塞模式，这个 socket 的调用将不在是阻塞的。当它和 <code>sel.select()</code> 一起使用的时候（下面会提到），我们就可以等待 socket 就绪事件，然后执行读写操作</p>\n<p><code>sel.register()</code> 使用 <code>sel.select()</code> 为你感兴趣的事件注册 socket 监控，对于监听 socket，我们希望使用 <code>selectors.EVENT_READ</code> 读取到事件</p>\n<p><code>data</code> 用来存储任何你 socket 中想存的数据，当 <code>select()</code> 返回的时候它也会返回。我们将使用 <code>data</code> 来跟踪 socket 上发送或者接收的东西</p>\n<p>下面就是事件循环：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d60a720424880\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nimport selectors\r\nsel = selectors.DefaultSelector()\r\n\r\n# ...\r\n\r\nwhile True:\r\n    events = sel.select(timeout=None)\r\n    for key, mask in events:\r\n        if key.data is None:\r\n            accept_wrapper(key.fileobj)\r\n        else:\r\n            service_connection(key, mask)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d60a720424880-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d60a720424880-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d60a720424880-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d60a720424880-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d60a720424880-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d60a720424880-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d60a720424880-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d60a720424880-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d60a720424880-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d60a720424880-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d60a720424880-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d60a720424880-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d60a720424880-1\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">selectors</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d60a720424880-2\"><span class=\"crayon-v\">sel</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">selectors</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">DefaultSelector</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d60a720424880-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d60a720424880-4\"><span class=\"crayon-p\"># ...</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d60a720424880-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d60a720424880-6\"><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">True</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d60a720424880-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">events</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">select</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">timeout</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">None</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d60a720424880-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">mask </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">events</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d60a720424880-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">data </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">None</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d60a720424880-10\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">accept_wrapper</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">fileobj</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d60a720424880-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d60a720424880-12\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">service_connection</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mask</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p><code>sel.select(timeout=None)</code> 调用会阻塞直到 socket I/O 就绪。它返回一个(key, events) 元组，每个 socket 一个。key 就是一个包含 <code>fileobj</code> 属性的具名元组。<code>key.fileobj</code> 是一个 socket 对象，<code>mask</code> 表示一个操作就绪的事件掩码</p>\n<p>如果 <code>key.data</code> 为空，我们就可以知道它来自于监听 socket，我们需要调用 <code>accept()</code> 方法来授受连接请求。我们将使用一个 <code>accept()</code> 包装函数来获取新的 socket 对象并注册到 <code>selector</code> 上，我们马上就会看到</p>\n<p>如果 <code>key.data</code> 不为空，我们就可以知道它是一个被接受的客户端 socket，我们需要为它服务，接着 <code>service_connection()</code> 会传入 <code>key</code> 和 <code>mask</code> 参数并调用，这包含了所有我们需要在 socket 上操作的东西</p>\n<p>让我们一起来看看 <code>accept_wrapper()</code> 方法做了什么：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d60e986715003\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef accept_wrapper(sock):\r\n    conn, addr = sock.accept()  # Should be ready to read\r\n    print('accepted connection from', addr)\r\n    conn.setblocking(False)\r\n    data = types.SimpleNamespace(addr=addr, inb=b'', outb=b'')\r\n    events = selectors.EVENT_READ | selectors.EVENT_WRITE\r\n    sel.register(conn, events, data=data)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d60e986715003-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d60e986715003-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d60e986715003-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d60e986715003-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d60e986715003-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d60e986715003-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d60e986715003-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d60e986715003-1\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">accept_wrapper</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sock</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d60e986715003-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">conn</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">addr</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sock</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">accept</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span><span class=\"crayon-p\"># Should be ready to read</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d60e986715003-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'accepted connection from'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">addr</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d60e986715003-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">conn</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setblocking</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">False</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d60e986715003-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">types</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">SimpleNamespace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">addr</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">addr</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">inb</span><span class=\"crayon-o\">=</span><span class=\"crayon-i\">b</span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">outb</span><span class=\"crayon-o\">=</span><span class=\"crayon-i\">b</span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d60e986715003-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">events</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">selectors</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">EVENT_READ</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">selectors</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">EVENT_WRITE</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d60e986715003-7\"><span class=\"crayon-e\">    </span><span class=\"crayon-v\">sel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">register</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">conn</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">events</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n<p>由于监听 socket 被注册到了 <code>selectors.EVENT_READ</code> 上，它现在就能被读取，我们调用 <code>sock.accept()</code> 后立即再立即调 <code>conn.setblocking(False)</code> 来让 socket 进入非阻塞模式</p>\n<p>请记住，这是这个版本服务器程序的主要目标，因为我们不希望它被阻塞。如果被阻塞，那么整个服务器在返回前都处于挂起状态。这意味着其它 socket 处于等待状态，这是一种 <strong>非常严重的</strong> 谁都不想见到的服务被挂起的状态</p>\n<p>接着我们使用了 <code>types.SimpleNamespace</code> 类创建了一个对象用来保存我们想要的 socket 和数据，由于我们得知道客户端连接什么时候可以写入或者读取，下面两个事件都会被用到：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d612120253802\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nevents = selectors.EVENT_READ | selectors.EVENT_WRITE</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d612120253802-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d612120253802-1\"><span class=\"crayon-v\">events</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">selectors</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">EVENT_READ</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">selectors</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">EVENT_WRITE</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>事件掩码、socket 和数据对象都会被传入 <code>sel.register()</code></p>\n<p>现在让我们来看下，当客户端 socket 就绪的时候连接请求是如何使用 <code>service_connection()</code> 来处理的</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d615785579033\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef service_connection(key, mask):\r\n    sock = key.fileobj\r\n    data = key.data\r\n    if mask &amp; selectors.EVENT_READ:\r\n        recv_data = sock.recv(1024)  # Should be ready to read\r\n        if recv_data:\r\n            data.outb += recv_data\r\n        else:\r\n            print('closing connection to', data.addr)\r\n            sel.unregister(sock)\r\n            sock.close()\r\n    if mask &amp; selectors.EVENT_WRITE:\r\n        if data.outb:\r\n            print('echoing', repr(data.outb), 'to', data.addr)\r\n            sent = sock.send(data.outb)  # Should be ready to write\r\n            data.outb = data.outb[sent:]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d615785579033-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d615785579033-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d615785579033-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d615785579033-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d615785579033-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d615785579033-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d615785579033-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d615785579033-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d615785579033-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d615785579033-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d615785579033-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d615785579033-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d615785579033-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d615785579033-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d615785579033-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d615785579033-16\">16</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d615785579033-1\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">service_connection</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mask</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d615785579033-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">sock</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">fileobj</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d615785579033-3\"><span class=\"crayon-e\">    </span><span class=\"crayon-v\">data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">data</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d615785579033-4\"><span class=\"crayon-e\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mask</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">selectors</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">EVENT_READ</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d615785579033-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">recv_data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sock</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">recv</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1024</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span><span class=\"crayon-p\"># Should be ready to read</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d615785579033-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">recv_data</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d615785579033-7\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">outb</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">recv_data</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d615785579033-8\"><span class=\"crayon-e\">        </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d615785579033-9\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'closing connection to'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">addr</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d615785579033-10\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">sel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">unregister</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sock</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d615785579033-11\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">sock</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d615785579033-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mask</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">selectors</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">EVENT_WRITE</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d615785579033-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">outb</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d615785579033-14\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'echoing'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">repr</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">outb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'to'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">addr</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d615785579033-15\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">sent</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sock</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">send</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">outb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span><span class=\"crayon-p\"># Should be ready to write</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d615785579033-16\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">outb</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">outb</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">sent</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0033 seconds] -->\r\n<p>这就是多连接服务端的核心部分，<code>key</code> 就是从调用 <code>select()</code> 方法返回的一个具名元组，它包含了 socket 对象「fileobj」和数据对象。<code>mask</code> 包含了就绪的事件</p>\n<p>如果 socket 就绪而且可以被读取，<code>mask &amp; selectors.EVENT_READ</code> 就为真，<code>sock.recv()</code> 会被调用。所有读取到的数据都会被追加到 <code>data.outb</code> 里面。随后被发送出去</p>\n<p>注意 <code>else:</code> 语句，如果没有收到任何数据：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d619852982987\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nif recv_data:\r\n    data.outb += recv_data\r\nelse:\r\n    print('closing connection to', data.addr)\r\n    sel.unregister(sock)\r\n    sock.close()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d619852982987-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d619852982987-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d619852982987-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d619852982987-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d619852982987-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d619852982987-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d619852982987-1\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">recv_data</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d619852982987-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">outb</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">recv_data</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d619852982987-3\"><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d619852982987-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'closing connection to'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">addr</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d619852982987-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">sel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">unregister</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sock</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d619852982987-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">sock</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>这表示客户端关闭了它的 socket 连接，这时服务端也应该关闭自己的连接。不过别忘了先调用 <code>sel.unregister()</code> 来撤销 <code>select()</code> 的监控</p>\n<p>当 socket 就绪而且可以被读取的时候，对于正常的 socket 应该一直是这种状态，任何接收并被 <code>data.outb</code> 存储的数据都将使用 <code>sock.send()</code> 方法打印出来。发送出去的字节随后就会被从缓冲中删除</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d61d609877112\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndata.outb = data.outb[sent:]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d61d609877112-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d61d609877112-1\"><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">outb</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">outb</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">sent</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p></p>\n<h3 id=\"多连接的客户端\">多连接的客户端</h3>\n<p>现在让我们一起来看看多连接的客户端程序，<code>multiconn-client.py</code>，它和服务端很相似，不一样的是它没有监听连接请求，它以调用 <code>start_connections()</code> 开始初始化连接：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d620396552504\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nmessages = [b'Message 1 from client.', b'Message 2 from client.']\r\n\r\n\r\ndef start_connections(host, port, num_conns):\r\n    server_addr = (host, port)\r\n    for i in range(0, num_conns):\r\n        connid = i + 1\r\n        print('starting connection', connid, 'to', server_addr)\r\n        sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\r\n        sock.setblocking(False)\r\n        sock.connect_ex(server_addr)\r\n        events = selectors.EVENT_READ | selectors.EVENT_WRITE\r\n        data = types.SimpleNamespace(connid=connid,\r\n                                     msg_total=sum(len(m) for m in messages),\r\n                                     recv_total=0,\r\n                                     messages=list(messages),\r\n                                     outb=b'')\r\n        sel.register(sock, events, data=data)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d620396552504-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d620396552504-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d620396552504-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d620396552504-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d620396552504-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d620396552504-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d620396552504-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d620396552504-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d620396552504-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d620396552504-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d620396552504-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d620396552504-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d620396552504-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d620396552504-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d620396552504-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d620396552504-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d620396552504-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d620396552504-18\">18</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d620396552504-1\"><span class=\"crayon-v\">messages</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-i\">b</span><span class=\"crayon-s\">'Message 1 from client.'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">b</span><span class=\"crayon-s\">'Message 2 from client.'</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d620396552504-2\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d620396552504-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d620396552504-4\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">start_connections</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">host</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">port</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">num_conns</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d620396552504-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">server_addr</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">host</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">port</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d620396552504-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">num_conns</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d620396552504-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">connid</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d620396552504-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'starting connection'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">connid</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'to'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">server_addr</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d620396552504-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">sock</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">socket</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">socket</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">socket</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">AF_INET</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">socket</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">SOCK_STREAM</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d620396552504-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">sock</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setblocking</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">False</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d620396552504-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">sock</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">connect_ex</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">server_addr</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d620396552504-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">events</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">selectors</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">EVENT_READ</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">selectors</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">EVENT_WRITE</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d620396552504-13\"><span class=\"crayon-e\">        </span><span class=\"crayon-v\">data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">types</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">SimpleNamespace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">connid</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">connid</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d620396552504-14\"><span class=\"crayon-h\">                                     </span><span class=\"crayon-v\">msg_total</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">sum</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">m</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">messages</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d620396552504-15\"><span class=\"crayon-h\">                                     </span><span class=\"crayon-v\">recv_total</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d620396552504-16\"><span class=\"crayon-h\">                                     </span><span class=\"crayon-v\">messages</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">list</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">messages</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d620396552504-17\"><span class=\"crayon-h\">                                     </span><span class=\"crayon-v\">outb</span><span class=\"crayon-o\">=</span><span class=\"crayon-i\">b</span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d620396552504-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">sel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">register</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sock</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">events</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0038 seconds] -->\r\n<p><code>num_conns</code> 参数是从命令行读取的，表示为服务器建立多少个链接。就像服务端程序一样，每个 socket 都设置成了非阻塞模式</p>\n<p>由于 <code>connect()</code> 方法会立即触发一个 <code>BlockingIOError</code> 异常，所以我们使用 <code>connect_ex()</code> 方法取代它。<code>connect_ex()</code> 会返回一个错误指示 <code>errno.EINPROGRESS</code>，不像 <code>connect()</code> 方法直接在进程中返回异常。一旦连接结束，socket 就可以进行读写并且通过 <code>select()</code> 方法返回</p>\n<p>socket 建立完成后，我们将使用 <code>types.SimpleNamespace</code> 类创建想会传送的数据。由于每个连接请求都会调用 <code>socket.send()</code>，发送到服务端的消息得使用 <code>list(messages)</code> 方法转换成列表结构。所有你想了解的东西，包括客户端将要发送的、已发送的、已接收的消息以及消息的总字节数都存储在 <code>data</code> 对象中</p>\n<p>让我们再来看看 <code>service_connection()</code>。基本上和服务端一样：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d624588631531\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef service_connection(key, mask):\r\n    sock = key.fileobj\r\n    data = key.data\r\n    if mask &amp; selectors.EVENT_READ:\r\n        recv_data = sock.recv(1024)  # Should be ready to read\r\n        if recv_data:\r\n            print('received', repr(recv_data), 'from connection', data.connid)\r\n            data.recv_total += len(recv_data)\r\n        if not recv_data or data.recv_total == data.msg_total:\r\n            print('closing connection', data.connid)\r\n            sel.unregister(sock)\r\n            sock.close()\r\n    if mask &amp; selectors.EVENT_WRITE:\r\n        if not data.outb and data.messages:\r\n            data.outb = data.messages.pop(0)\r\n        if data.outb:\r\n            print('sending', repr(data.outb), 'to connection', data.connid)\r\n            sent = sock.send(data.outb)  # Should be ready to write\r\n            data.outb = data.outb[sent:]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d624588631531-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d624588631531-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d624588631531-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d624588631531-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d624588631531-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d624588631531-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d624588631531-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d624588631531-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d624588631531-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d624588631531-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d624588631531-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d624588631531-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d624588631531-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d624588631531-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d624588631531-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d624588631531-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d624588631531-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d624588631531-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d624588631531-19\">19</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d624588631531-1\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">service_connection</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mask</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d624588631531-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">sock</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">fileobj</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d624588631531-3\"><span class=\"crayon-e\">    </span><span class=\"crayon-v\">data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">data</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d624588631531-4\"><span class=\"crayon-e\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mask</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">selectors</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">EVENT_READ</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d624588631531-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">recv_data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sock</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">recv</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1024</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span><span class=\"crayon-p\"># Should be ready to read</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d624588631531-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">recv_data</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d624588631531-7\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'received'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">repr</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">recv_data</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'from connection'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">connid</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d624588631531-8\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">recv_total</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">recv_data</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d624588631531-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">recv_data </span><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">recv_total</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">msg_total</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d624588631531-10\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'closing connection'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">connid</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d624588631531-11\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">sel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">unregister</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sock</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d624588631531-12\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">sock</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d624588631531-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mask</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">selectors</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">EVENT_WRITE</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d624588631531-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">outb </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">messages</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d624588631531-15\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">outb</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">messages</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d624588631531-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">outb</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d624588631531-17\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'sending'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">repr</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">outb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'to connection'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">connid</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d624588631531-18\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">sent</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sock</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">send</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">outb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span><span class=\"crayon-p\"># Should be ready to write</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d624588631531-19\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">outb</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">outb</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">sent</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0044 seconds] -->\r\n<p>有一个不同的地方，客户端会跟踪从服务器接收的字节数，根据结果来决定是否关闭 socket 连接，服务端检测到客户端关闭则会同样的关闭服务端的连接</p>\n<h3 id=\"运行多连接的客户端和服务端\">运行多连接的客户端和服务端</h3>\n<p>现在让我们把 <code>multiconn-server.py</code> 和 <code>multiconn-client.py</code> 两个程序跑起来。他们都使用了命令行参数，如果不指定参数可以看到参数调用的方法：</p>\n<p>服务端程序，传入主机和端口号</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d628355651713\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ./multiconn-server.py\r\nusage: ./multiconn-server.py</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d628355651713-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d628355651713-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d628355651713-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">multiconn</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d628355651713-2\"><span class=\"crayon-v\">usage</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">multiconn</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>客户端程序，传入启动服务端程序时同样的主机和端口号以及连接数量</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d62b238009035\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ./multiconn-client.py\r\nusage: ./multiconn-client.py</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d62b238009035-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d62b238009035-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d62b238009035-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">multiconn</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">client</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d62b238009035-2\"><span class=\"crayon-v\">usage</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">multiconn</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">client</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>下面就是服务端程序运行起来在 65432 端口上监听回环地址的输出：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d62f649885508\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ./multiconn-server.py 127.0.0.1 65432\r\nlistening on ('127.0.0.1', 65432)\r\naccepted connection from ('127.0.0.1', 61354)\r\naccepted connection from ('127.0.0.1', 61355)\r\nechoing b'Message 1 from client.Message 2 from client.' to ('127.0.0.1', 61354)\r\nechoing b'Message 1 from client.Message 2 from client.' to ('127.0.0.1', 61355)\r\nclosing connection to ('127.0.0.1', 61354)\r\nclosing connection to ('127.0.0.1', 61355)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d62f649885508-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d62f649885508-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d62f649885508-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d62f649885508-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d62f649885508-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d62f649885508-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d62f649885508-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d62f649885508-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d62f649885508-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">multiconn</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d62f649885508-2\"><span class=\"crayon-e\">listening </span><span class=\"crayon-e\">on</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'127.0.0.1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d62f649885508-3\"><span class=\"crayon-e\">accepted </span><span class=\"crayon-e\">connection </span><span class=\"crayon-e\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'127.0.0.1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">61354</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d62f649885508-4\"><span class=\"crayon-e\">accepted </span><span class=\"crayon-e\">connection </span><span class=\"crayon-e\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'127.0.0.1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">61355</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d62f649885508-5\"><span class=\"crayon-i\">echoing</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">b</span><span class=\"crayon-s\">'Message 1 from client.Message 2 from client.'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'127.0.0.1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">61354</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d62f649885508-6\"><span class=\"crayon-i\">echoing</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">b</span><span class=\"crayon-s\">'Message 1 from client.Message 2 from client.'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'127.0.0.1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">61355</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d62f649885508-7\"><span class=\"crayon-e\">closing </span><span class=\"crayon-e\">connection </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'127.0.0.1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">61354</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d62f649885508-8\"><span class=\"crayon-e\">closing </span><span class=\"crayon-e\">connection </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'127.0.0.1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">61355</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n<p>下面是客户端，它创建了两个连接请求到上面的服务端：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d632916030762\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ./multiconn-client.py 127.0.0.1 65432 2\r\nstarting connection 1 to ('127.0.0.1', 65432)\r\nstarting connection 2 to ('127.0.0.1', 65432)\r\nsending b'Message 1 from client.' to connection 1\r\nsending b'Message 2 from client.' to connection 1\r\nsending b'Message 1 from client.' to connection 2\r\nsending b'Message 2 from client.' to connection 2\r\nreceived b'Message 1 from client.Message 2 from client.' from connection 1\r\nclosing connection 1\r\nreceived b'Message 1 from client.Message 2 from client.' from connection 2\r\nclosing connection 2</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d632916030762-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d632916030762-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d632916030762-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d632916030762-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d632916030762-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d632916030762-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d632916030762-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d632916030762-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d632916030762-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d632916030762-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d632916030762-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d632916030762-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">multiconn</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">client</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d632916030762-2\"><span class=\"crayon-e\">starting </span><span class=\"crayon-i\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'127.0.0.1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d632916030762-3\"><span class=\"crayon-e\">starting </span><span class=\"crayon-i\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'127.0.0.1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d632916030762-4\"><span class=\"crayon-i\">sending</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">b</span><span class=\"crayon-s\">'Message 1 from client.'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d632916030762-5\"><span class=\"crayon-i\">sending</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">b</span><span class=\"crayon-s\">'Message 2 from client.'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d632916030762-6\"><span class=\"crayon-i\">sending</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">b</span><span class=\"crayon-s\">'Message 1 from client.'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d632916030762-7\"><span class=\"crayon-i\">sending</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">b</span><span class=\"crayon-s\">'Message 2 from client.'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d632916030762-8\"><span class=\"crayon-i\">received</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">b</span><span class=\"crayon-s\">'Message 1 from client.Message 2 from client.'</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-i\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d632916030762-9\"><span class=\"crayon-e\">closing </span><span class=\"crayon-i\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d632916030762-10\"><span class=\"crayon-i\">received</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">b</span><span class=\"crayon-s\">'Message 1 from client.Message 2 from client.'</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-i\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d632916030762-11\"><span class=\"crayon-e\">closing </span><span class=\"crayon-i\">connection</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0025 seconds] -->\r\n<p></p>\n<h2 id=\"应用程序客户端和服务端\">应用程序客户端和服务端</h2>\n<p>多连接的客户端和服务端程序版本与最早的原始版本相比肯定有了很大的改善，但是让我们再进一步地解决上面「多连接」版本中的不足，然后完成最终版的实现：客户端/服务器应用程序</p>\n<p>我们希望有个客户端和服务端在不影响其它连接的情况下做好错误处理，显然，如果没有发生异常，我们的客户端和服务端不能崩溃的一团糟。这也是到现在为止我们还没讨论的东西，我故意没有引入错误处理机制因为这样可以使之前的程序容易理解</p>\n<p>现在你对基本的 API，非阻塞 socket、select() 等概念已经有所了解了。我们可以继续添加一些错误处理同时讨论下「<a href=\"https://zh.wikipedia.org/wiki/%E6%88%BF%E9%96%93%E8%A3%8F%E7%9A%84%E5%A4%A7%E8%B1%A1\">房间里面的大象</a>」的问题，我把一些东西隐藏在了幕后。你应该还记得，我在介绍中讨论到的自定义类</p>\n<p>首先，让我们先解决错误：</p>\n<blockquote><p>所有的错误都会触发异常，像无效参数类型和内存不足的常见异常可以被抛出；从 Python 3.3 开始，与 socket 或地址语义相关的错误会引发 OSError 或其子类之一的异常 <a href=\"https://docs.python.org/3/library/socket.html\">引用</a></p></blockquote>\n<p>我们需要捕获 <code>OSError</code> 异常。另外一个我没提及的的问题是延迟，你将在文档的很多地方看见关于延迟的讨论，延迟会发生而且属于「正常」错误。主机或者路由器重启、交换机端口出错、电缆出问题或者被拔出，你应该在你的代码中处理好各种各样的错误</p>\n<p>刚才说的「房间里面的大象」问题是怎么回事呢。就像 <code>socket.SOCK_STREAM</code> 这个参数的字面意思一样，当使用 TCP 连接时，你会从一个连续的字节流读取的数据，好比从磁盘上读取数据，不同的是你是从网络读取字节流</p>\n<p>然而，和使用 <code>f.seek()</code> 读文件不同，换句话说，没法定位 socket 的数据流的位置，如果可以像文件一样定位数据流的位置（使用下标），那你就可以随意的读取你想要的数据</p>\n<p>当字节流入你的 socket 时，会需要有不同的网络缓冲区，如果想读取他们就必须先保存到其它地方，使用 <code>recv()</code> 方法持续的从 socket 上读取可用的字节流</p>\n<p>相当于你从 socket 中读取的是一块一块的数据，你必须使用 <code>recv()</code> 方法不断的从缓冲区中读取数据，直到你的应用确定读取到了足够的数据</p>\n<p>什么时候算「足够」这取决于你的定义，就 TCP socket 而言，它只通过网络发送或接收原始字节。它并不了解这些原始字节的含义</p>\n<p>这可以让我们定义一个应用层协议，什么是应用层协议？简单来说，你的应用会发送或者接收消息，这些消息其实就是你的应用程序的协议</p>\n<p>换句话说，这些消息的长度、格式可以定义应用程序的语义和行为，这和我们之前说的从socket 中读取字节部分内容相关，当你使用 <code>recv()</code> 来读取字节的时候，你需要知道读的字节数，并且决定什么时候算读取完成</p>\n<p>这些都是怎么完成的呢？一个方法是只读取固定长度的消息，如果它们的长度总是一样的话，这样做很容易。当你收到固定长度字节消息的时候，就能确定它是个完整的消息</p>\n<p>然而，如果你使用定长模式来发送比较短的消息会比较低效，因为你还得处理填充剩余的部分，此外，你还得处理数据不适合放在一个定长消息里面的情况</p>\n<p>在这个教程里面，我们将使用一个通用的方案，很多协议都会用到它，包括 HTTP。我们将在每条消息前面追加一个头信息，头信息中包括消息的长度和其它我们需要的字段。这样做的话我们只需要追踪头信息，当我们读到头信息时，就可以查到消息的长度并且读出所有字节然后消费它</p>\n<p>我们将通过使用一个自定义类来实现接收文本/二进制数据。你可以在此基础上做出改进或者通过继承这个类来扩展你的应用程序。重要的是你将看到一个例子实现它的过程</p>\n<p>我将会提到一些关于 socket 和字节相关的东西，就像之前讨论过的。当你通过 socket 来发送或者接收数据时，其实你发送或者接收到的是原始字节</p>\n<p>如果你收到数据并且想让它在一个多字节解释的上下文中使用，比如说 4-byte 的整形，你需要考虑它可能是一种不是你机器 CPU 本机的格式。客户端或者服务器的另外一头可能是另外一种使用了不同的字节序列的 CPU，这样的话，你就得把它们转换成你主机的本地字节序列来使用</p>\n<p>上面所说的字节顺序就是 CPU 的 <a href=\"https://zh.wikipedia.org/wiki/%E5%AD%97%E8%8A%82%E5%BA%8F\">字节序</a>，在引用部分的字节序 一节可以查看更多。我们将会利用 Unicode 字符集的优点来规避这个问题，并使用UTF-8 的方式编码，由于 UTF-8 使用了 8字节 编码方式，所以就不会有字节序列的问题</p>\n<p>你可以查看 Python 关于编码与 Unicode 的 <a href=\"https://docs.python.org/3/library/codecs.html#encodings-and-unicode\">文档</a>，注意我们只会编码消息的头部。我们将使用严格的类型，发送的消息编码格式会在头信息中定义。这将让我们可以传输我们觉得有用的任意类型/格式数据</p>\n<p>你可以通过调用 <code>sys.byteorder</code> 来决定你的机器的字节序列，比如在我的英特尔笔记本上，运行下面的代码就可以：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d639821929531\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ python3 -c 'import sys; print(repr(sys.byteorder))'\r\n'little'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d639821929531-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d639821929531-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d639821929531-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">python3</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'import sys; print(repr(sys.byteorder))'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d639821929531-2\"><span class=\"crayon-s\">'little'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>如果我把这段代码跑在可以模拟大字节序 CPU「PowerPC」的虚拟机上的话，应该是下面的结果：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d63c200459021\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ python3 -c 'import sys; print(repr(sys.byteorder))'\r\n'big'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d63c200459021-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d63c200459021-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d63c200459021-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">python3</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'import sys; print(repr(sys.byteorder))'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d63c200459021-2\"><span class=\"crayon-s\">'big'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>在我们的例子程序中，应用层的协议定义了使用 UTF-8 方式编码的 Unicode 字符。对于真正传输消息来说，如果需要的话你还是得手动交换字节序列</p>\n<p>这取决于你的应用，是否需要它来处理不同终端间的多字节二进制数据，你可以通过添加额外的头信息来让你的客户端或者服务端支持二进制，像 HTTP 一样，把头信息做为参数传进去</p>\n<p>不用担心自己还没搞懂上面的东西，下面一节我们看到是如果实现的</p>\n<h3 id=\"应用的协议头\">应用的协议头</h3>\n<p>让我们来定义一个完整的协议头：</p>\n<ul>\n<li>可变长度的文本</li>\n<li>基于 UTF-8 编码的 Unicode 字符集</li>\n<li>使用 JSON 序列化的一个 Python 字典</li>\n</ul>\n<p>其中必须具有的头应该有以下几个：</p>\n<table>\n<thead>\n<tr>\n<th>名称</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>byteorder</td>\n<td>机器的字节序列（uses sys.byteorder），应用程序可能用不上</td>\n</tr>\n<tr>\n<td>content-length</td>\n<td>内容的字节长度</td>\n</tr>\n<tr>\n<td>content-type</td>\n<td>内容的类型，比如 text/json 或者 binary/my-binary-type</td>\n</tr>\n<tr>\n<td>content-encoding</td>\n<td>内容的编码类型，比如 utf-8 编码的 Unicode 文本，二进制数据</td>\n</tr>\n</tbody>\n</table>\n<p>这些头信息告诉接收者消息数据，这样的话你就可以通过提供给接收者足够的信息让他接收到数据的时候正确的解码的方式向它发送任何数据，由于头信息是字典格式，你可以随意向头信息中添加键值对</p>\n<h3 id=\"发送应用程序消息\">发送应用程序消息</h3>\n<p>不过还有一个问题，由于我们使用了变长的头信息，虽然方便扩展但是当你使用 <code>recv()</code> 方法读取消息的时候怎么知道头信息的长度呢</p>\n<p>我们前面讲到过使用 <code>recv()</code> 接收数据和如何确定是否接收完成，我说过定长的头可能会很低效，的确如此。但是我们将使用一个比较小的 2 字节定长的头信息前缀来表示头信息的长度</p>\n<p>你可以认为这是一种混合的发送消息的实现方法，我们通过发送头信息长度来引导接收者，方便他们解析消息体</p>\n<p>为了给你更好地解释消息格式，让我们来看看消息的全貌：</p>\n<p><img src=\"https://files.realpython.com/media/sockets-app-message.2e131b0751e3.jpg\" alt=\"message\"></p>\n<p>消息以 2字节的固定长度的头开始，这两个字节是整型的网络字节序列，表示下面的变长 JSON 头信息的长度，当我们从 <code>recv()</code> 方法读取到 2 个字节时就知道它表示的是头信息长度的整形数字，然后在解码 JSON 头之前读取这么多的字节</p>\n<p>JSON 头包含了头信息的字典。其中一个就是 <code>content-length</code>，这表示消息内容的数量（不是JSON头），当我们使用 <code>recv()</code> 方法读取到了 <code>content-length</code> 个字节的数据时，就表示接收完成并且读取到了完整的消息</p>\n<h3 id=\"应用程序类\">应用程序类</h3>\n<p>最后让我们来看下成果，我们使用了一个消息类。来看看它是如何在 socket 发生读写事件时与 <code>select()</code> 配合使用的</p>\n<p>对于这个示例应用程序而言，我必须想出客户端和服务器将使用什么类型的消息，从这一点来讲这远远超过了最早时候我们写的那个玩具一样的打印程序</p>\n<p>为了保证程序简单而且仍然能够演示出它是如何在一个真正的程序中工作的，我创建了一个应用程序协议用来实现基本的搜索功能。客户端发送一个搜索请求，服务器做一次匹配的查找，如果客户端的请求没法被识别成搜索请求，服务器就会假定这个是二进制请求，对应的返回二进制响应</p>\n<p>跟着下面一节，运行示例、用代码做实验后你将会知道他是如何工作的，然后你就可以以这个消息类为起点把他修改成适合自己使用的</p>\n<p>就像我们之前讨论的，你将在下面看到，处理 socket 时需要保存状态。通过使用类，我们可以将所有的状态、数据和代码打包到一个地方。当连接开始或者接受的时候消息类就会为每个 socket 创建一个实例</p>\n<p>类中的很多包装方法、工具方法在客户端和服务端上都是差不多的。它们以下划线开头，就像 <code>Message._json_encode()</code> 一样，这些方法通过类使用起来很简单。这使得它们在其它方法中调用时更短，而且符合 <a href=\"https://en.wikipedia.org/wiki/Don%27t_repeat_yourself\">DRY</a> 原则</p>\n<p>消息类的服务端程序本质上和客户端一样。不同的是客户端初始化连接并发送请求消息，随后要处理服务端返回的内容。而服务端则是等待连接请求，处理客户端的请求消息，随后发送响应消息</p>\n<p>看起来就像这样：</p>\n<p>步骤 | 端 | 动作/消息内容 :- | :- | :- 1 | 客户端 | 发送带有请求内容的消息 2 | 服务端 | 接收并处理请求消息 3 | 服务端 | 发送有响应内容的消息 4 | 客户端 | 接收并处理响应消息</p>\n<p>下面是代码的结构：</p>\n<table>\n<thead>\n<tr>\n<th>应用程序</th>\n<th>文件</th>\n<th>代码</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>服务端</td>\n<td>app-server.py</td>\n<td>服务端主程序</td>\n</tr>\n<tr>\n<td>服务端</td>\n<td>libserver.py</td>\n<td>服务端消息类</td>\n</tr>\n<tr>\n<td>客户端</td>\n<td>app-client.py</td>\n<td>客户端主程序</td>\n</tr>\n<tr>\n<td>客户端</td>\n<td>libclient.py</td>\n<td>客户端消息类</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"消息入口点\">消息入口点</h3>\n<p>我想通过首先提到它的设计方面来讨论 Message 类的工作方式，不过这对我来说并不是立马就能解释清楚的，只有在重构它至少五次之后我才能达到它目前的状态。为什么呢？因为要管理状态</p>\n<p>当消息对象创建的时候，它就被一个使用 <code>selector.register()</code> 事件监控起来的 socket 关联起来了</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d643432786112\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nmessage = libserver.Message(sel, conn, addr)\r\nsel.register(conn, selectors.EVENT_READ, data=message)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d643432786112-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d643432786112-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d643432786112-1\"><span class=\"crayon-v\">message</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">libserver</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Message</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sel</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">conn</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">addr</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d643432786112-2\"><span class=\"crayon-v\">sel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">register</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">conn</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">selectors</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">EVENT_READ</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">message</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p></p>\n<blockquote><p>注意，这一节中的一些代码来自服务端主程序与消息类，但是这部分内容的讨论在客户端 也是一样的，我将在他们之间存在不同点的时候来解释客户端的版本</p></blockquote>\n<p>当 socket 上的事件就绪的时候，它就会被 <code>selector.select()</code> 方法返回。对过 key 对象的 data 属性获取到 message 的引用，然后在消息用调用一个方法：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d647521986021\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nwhile True:\r\n    events = sel.select(timeout=None)\r\n    for key, mask in events:\r\n        # ...\r\n        message = key.data\r\n        message.process_events(mask)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d647521986021-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d647521986021-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d647521986021-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d647521986021-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d647521986021-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d647521986021-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d647521986021-1\"><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">True</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d647521986021-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">events</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">select</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">timeout</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">None</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d647521986021-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">mask </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">events</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d647521986021-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-p\"># ...</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d647521986021-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">message</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">data</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d647521986021-6\"><span class=\"crayon-e\">        </span><span class=\"crayon-v\">message</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">process_events</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">mask</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>观察上面的事件循环，可以看见 <code>sel.select()</code> 位于「司机位置」，它是阻塞的，在循环的上面等待。当 socket 上的读写事件就绪时，它就会为其服务。这表示间接的它也要负责调用 <code>process_events()</code> 方法。这就是我说 <code>process_events()</code> 方法是入口的原因</p>\n<p>让我们来看下 <code>process_events()</code> 方法做了什么</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d64a142339667\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef process_events(self, mask):\r\n    if mask &amp; selectors.EVENT_READ:\r\n        self.read()\r\n    if mask &amp; selectors.EVENT_WRITE:\r\n        self.write()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d64a142339667-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d64a142339667-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d64a142339667-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d64a142339667-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d64a142339667-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d64a142339667-1\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">process_events</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mask</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d64a142339667-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mask</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">selectors</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">EVENT_READ</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d64a142339667-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">read</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d64a142339667-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mask</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">selectors</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">EVENT_WRITE</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d64a142339667-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">write</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>这样做很好，因为 <code>process_events()</code> 方法很简洁，它只可以做两件事情：调用 <code>read()</code> 和 <code>write()</code> 方法</p>\n<p>这又把我们带回了状态管理的问题。在几次重构后，我决定如果别的方法依赖于状态变量里面的某个确定值，那么它们就只应该从 <code>read()</code> 和 <code>write()</code> 方法中调用，这将使处理socket 事件的逻辑尽量的简单</p>\n<p>可能说起来很简单，但是经历了前面几次类的迭代：混合了一些方法，检查当前状态、依赖于其它值、在 <code>read()</code> 或者 <code>write()</code> 方法外面调用处理数据的方法，最后这证明了这样管理起来很复杂</p>\n<p>当然，你肯定需要把类按你自己的需求修改使它能够符合你的预期，但是我建议你尽可能把状态检查、依赖状态的调用的逻辑放在 <code>read()</code> 和 <code>write()</code> 方法里面</p>\n<p>让我们来看看 <code>read()</code> 方法，这是服务端版本，但是客户端也是一样的。不同之处在于方法名称，一个（客户端）是 <code>process_response()</code> 另一个（服务端）是 <code>process_request()</code></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d64e098614283\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef read(self):\r\n    self._read()\r\n\r\n    if self._jsonheader_len is None:\r\n        self.process_protoheader()\r\n\r\n    if self._jsonheader_len is not None:\r\n        if self.jsonheader is None:\r\n            self.process_jsonheader()\r\n\r\n    if self.jsonheader:\r\n        if self.request is None:\r\n            self.process_request()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d64e098614283-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d64e098614283-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d64e098614283-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d64e098614283-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d64e098614283-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d64e098614283-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d64e098614283-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d64e098614283-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d64e098614283-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d64e098614283-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d64e098614283-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d64e098614283-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d64e098614283-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d64e098614283-1\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">read</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d64e098614283-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_read</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d64e098614283-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d64e098614283-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_jsonheader_len </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">None</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d64e098614283-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">process_protoheader</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d64e098614283-6\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d64e098614283-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_jsonheader_len </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">None</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d64e098614283-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">jsonheader </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">None</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d64e098614283-9\"><span class=\"crayon-h\">            </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">process_jsonheader</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d64e098614283-10\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d64e098614283-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">jsonheader</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d64e098614283-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">request </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">None</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d64e098614283-13\"><span class=\"crayon-h\">            </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">process_request</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n<p><code>_read()</code> 方法首页被调用，然后调用 <code>socket.recv()</code> 从 socket 读取数据并存入到接收缓冲区</p>\n<p>记住，当调用 <code>socket.recv()</code> 方法时，组成消息的所有数据并没有一次性全部到达。<code>socket.recv()</code> 方法可能需要调用很多次，这就是为什么在调用相关方法处理数据前每次都要检查状态</p>\n<p>当一个方法开始处理消息时，首页要检查的就是接受缓冲区保存了足够的多读取的数据，如果确定，它们将继续处理各自的数据，然后把数据存到其它流程可能会用到的变量上，并且清空自己的缓冲区。由于一个消息有三个组件，所以会有三个状态检查和处理方法的调用：</p>\n<p>Message Component | Method | Output – | – | – Fixed-length header | process_protoheader() | self._jsonheader_len JSON header | process_jsonheader() | self.jsonheader Content | process_request() | self.request</p>\n<p>接下来，让我们一起看看 <code>write()</code> 方法，这是服务端的版本：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d652743711519\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef write(self):\r\n    if self.request:\r\n        if not self.response_created:\r\n            self.create_response()\r\n\r\n    self._write()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d652743711519-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d652743711519-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d652743711519-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d652743711519-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d652743711519-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d652743711519-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d652743711519-1\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">write</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d652743711519-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">request</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d652743711519-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">response_created</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d652743711519-4\"><span class=\"crayon-h\">            </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">create_response</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d652743711519-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d652743711519-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_write</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p><code>write()</code> 方法会首先检测是否有请求，如果有而且响应还没被创建的话 <code>create_response()</code> 方法就会被调用，它会设置状态变量 <code>response_created</code>，然后为发送缓冲区写入响应</p>\n<p>如果发送缓冲区有数据，<code>write()</code> 方法会调用 <code>socket.send()</code> 方法</p>\n<p>记住，当 <code>socket.send()</code> 被调用时，所有发送缓冲区的数据可能还没进入到发送队列，socket 的网络缓冲区可能满了，<code>socket.send()</code> 可能需要重新调用，这就是为什么需要检查状态的原因，<code>create_response()</code> 应该只被调用一次，但是 <code>_write()</code> 方法需要调用多次</p>\n<p>客户端的 <code>write()</code> 版大体与服务端一致：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d655144320276\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef write(self):\r\n    if not self._request_queued:\r\n        self.queue_request()\r\n\r\n    self._write()\r\n\r\n    if self._request_queued:\r\n        if not self._send_buffer:\r\n            # Set selector to listen for read events, we're done writing.\r\n            self._set_selector_events_mask('r')</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d655144320276-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d655144320276-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d655144320276-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d655144320276-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d655144320276-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d655144320276-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d655144320276-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d655144320276-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d655144320276-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d655144320276-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d655144320276-1\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">write</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d655144320276-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_request_queued</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d655144320276-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">queue_request</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d655144320276-4\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d655144320276-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_write</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d655144320276-6\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d655144320276-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_request_queued</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d655144320276-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_send_buffer</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d655144320276-9\"><span class=\"crayon-h\">            </span><span class=\"crayon-p\"># Set selector to listen for read events, we're done writing.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d655144320276-10\"><span class=\"crayon-h\">            </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_set_selector_events_mask</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'r'</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>因为客户端首页初始化了一个连接请求到服务端，状态变量<code>_request_queued</code>被检查。如果请求还没加入到队列，就调用 <code>queue_request()</code> 方法创建一个请求写入到发送缓冲区中，同时也会使用变量 <code>_request_queued</code> 记录状态值防止多次调用</p>\n<p>就像服务端一样，如果发送缓冲区有数据 <code>_write()</code> 方法会调用 <code>socket.send()</code> 方法</p>\n<p>需要注意客户端版本的 <code>write()</code> 方法与服务端不同之处在于最后的请求是否加入到队列中的检查，这个我们将在客户端主程序中详细解释，原因是要告诉 <code>selector.select()</code>停止监控 socket 的写入事件而且我们只对读取事件感兴趣，没有办法通知套接字是可写的</p>\n<p>我将在这一节中留下一个悬念，这一节的主要目的是解释 <code>selector.select()</code> 方法是如何通过 <code>process_events()</code> 方法调用消息类以及它是如何工作的</p>\n<p>这一点很重要，因为 <code>process_events()</code> 方法在连接的生命周期中将被调用很多次，因此，要确保那些只能被调用一次的方法正常工作，这些方法中要么需要检查自己的状态变量，要么需要检查调用者的方法中的状态变量</p>\n<h3 id=\"服务端主程序\">服务端主程序</h3>\n<p>在服务端主程序 <code>app-server.py</code> 中，主机、端口参数是通过命令行传递给程序的：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d65a694265295\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ./app-server.py\r\nusage: ./app-server.py</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d65a694265295-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d65a694265295-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d65a694265295-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">app</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d65a694265295-2\"><span class=\"crayon-v\">usage</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">app</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>例如需求监听本地回环地址上面的 65432 端口，需要执行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d65d826542668\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ./app-server.py 127.0.0.1 65432\r\nlistening on ('127.0.0.1', 65432)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d65d826542668-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d65d826542668-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d65d826542668-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">app</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d65d826542668-2\"><span class=\"crayon-e\">listening </span><span class=\"crayon-e\">on</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'127.0.0.1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p><code></code> 参数为空的话就可以监听主机上的所有 IP 地址</p>\n<p>创建完 socket 后，一个传入参数 <code>socket.SO_REUSEADDR</code> 的方法 <code>to socket.setsockopt()</code> 将被调用</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d660922475940\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# Avoid bind() exception: OSError: [Errno 48] Address already in use\r\nlsock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d660922475940-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d660922475940-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d660922475940-1\"><span class=\"crayon-p\"># Avoid bind() exception: OSError: [Errno 48] Address already in use</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d660922475940-2\"><span class=\"crayon-v\">lsock</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setsockopt</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">socket</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">SOL_SOCKET</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">socket</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">SO_REUSEADDR</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>设置这个参数是为了避免 <code>端口被占用</code> 的错误发生，如果当前程序使用的端口和之前的程序使用的一样，你就会发现连接处于 <code>TIME_WAIT</code> 状态</p>\n<p>比如说，如果服务器主动关闭连接，服务器会保持为大概两分钟的 <code>TIME_WAIT</code> 状态，具体时长取决于你的操作系统。如果你想在两分钟内再开启一个服务，你将得到一个<code>OSError</code> 表示 <code>端口被战胜</code>，这样做是为了确保一些在途的数据包正确的被处理</p>\n<p>事件循环会捕捉所有错误，以保证服务器正常运行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d663583374143\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nwhile True:\r\n    events = sel.select(timeout=None)\r\n    for key, mask in events:\r\n        if key.data is None:\r\n            accept_wrapper(key.fileobj)\r\n        else:\r\n            message = key.data\r\n            try:\r\n                message.process_events(mask)\r\n            except Exception:\r\n                print('main: error: exception for',\r\n                      f'{message.addr}:\\n{traceback.format_exc()}')\r\n                message.close()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d663583374143-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d663583374143-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d663583374143-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d663583374143-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d663583374143-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d663583374143-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d663583374143-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d663583374143-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d663583374143-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d663583374143-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d663583374143-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d663583374143-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d663583374143-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d663583374143-1\"><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">True</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d663583374143-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">events</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">select</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">timeout</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">None</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d663583374143-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">mask </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">events</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d663583374143-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">data </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">None</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d663583374143-5\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">accept_wrapper</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">fileobj</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d663583374143-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d663583374143-7\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">message</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">data</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d663583374143-8\"><span class=\"crayon-e\">            </span><span class=\"crayon-st\">try</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d663583374143-9\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">message</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">process_events</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">mask</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d663583374143-10\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">except </span><span class=\"crayon-v\">Exception</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d663583374143-11\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'main: error: exception for'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d663583374143-12\"><span class=\"crayon-h\">                      </span><span class=\"crayon-i\">f</span><span class=\"crayon-s\">'{message.addr}:\\n{traceback.format_exc()}'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d663583374143-13\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">message</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n<p>当服务器接受到一个客户端连接时，消息对象就会被创建：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d667768202739\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef accept_wrapper(sock):\r\n    conn, addr = sock.accept()  # Should be ready to read\r\n    print('accepted connection from', addr)\r\n    conn.setblocking(False)\r\n    message = libserver.Message(sel, conn, addr)\r\n    sel.register(conn, selectors.EVENT_READ, data=message)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d667768202739-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d667768202739-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d667768202739-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d667768202739-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d667768202739-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d667768202739-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d667768202739-1\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">accept_wrapper</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sock</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d667768202739-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">conn</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">addr</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sock</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">accept</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span><span class=\"crayon-p\"># Should be ready to read</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d667768202739-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'accepted connection from'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">addr</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d667768202739-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">conn</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setblocking</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">False</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d667768202739-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">message</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">libserver</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Message</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sel</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">conn</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">addr</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d667768202739-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">sel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">register</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">conn</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">selectors</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">EVENT_READ</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">message</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p>消息对象会通过 <code>sel.register()</code> 方法关联到 socket 上，而且它初始化就被设置成了只监控读事件。当请求被读取时，我们将通过监听到的写事件修改它</p>\n<p>在服务器端采用这种方法的一个优点是，大多数情况下，当 socket 正常并且没有网络问题时，它始终是可写的</p>\n<p>如果我们告诉 <code>sel.register()</code> 方法监控 <code>EVENT_WRITE</code> 写入事件，事件循环将会立即唤醒并通知我们这种情况，然而此时 socket 并不用唤醒调用 <code>send()</code> 方法。由于请求还没被处理，所以不需要发回响应。这将消耗并浪费宝贵的 CPU 周期</p>\n<h3 id=\"服务端消息类\">服务端消息类</h3>\n<p>在消息切入点一节中，当通过 <code>process_events()</code> 知道 socket 事件就绪时我们可以看到消息对象是如何发出动作的。现在让我们来看看当数据在 socket 上被读取是会发生些什么，以及为服务器就绪的消息的组件片段发生了什么</p>\n<p><code>libserver.py</code> 文件中的服务端消息类，可以在 Github 上找到 <a href=\"https://github.com/realpython/materials/tree/master/python-sockets-tutorial\">源代码</a></p>\n<p>这些方法按照消息处理顺序出现在类中</p>\n<p>当服务器读取到至少两个字节时，定长头的逻辑就可以开始了</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d66b569067012\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef process_protoheader(self):\r\n    hdrlen = 2\r\n    if len(self._recv_buffer) &gt;= hdrlen:\r\n        self._jsonheader_len = struct.unpack('&gt;H',\r\n                                             self._recv_buffer[:hdrlen])[0]\r\n        self._recv_buffer = self._recv_buffer[hdrlen:]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d66b569067012-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d66b569067012-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d66b569067012-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d66b569067012-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d66b569067012-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d66b569067012-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d66b569067012-1\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">process_protoheader</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d66b569067012-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">hdrlen</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d66b569067012-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_recv_buffer</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">hdrlen</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d66b569067012-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_jsonheader_len</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">struct</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">unpack</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'&gt;H'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d66b569067012-5\"><span class=\"crayon-h\">                                             </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_recv_buffer</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">hdrlen</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d66b569067012-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_recv_buffer</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_recv_buffer</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">hdrlen</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p>网络字节序列中的定长整型两字节包含了 JSON 头的长度，<code>struct.unpack()</code> 方法用来读取并解码，然后保存在 <code>self._jsonheader_len</code> 中，当这部分消息被处理完成后，就要调用 <code>process_protoheader()</code> 方法来删除接收缓冲区中处理过的消息</p>\n<p>就像上面的定长头的逻辑一样，当接收缓冲区有足够的 JSON 头数据时，它也需要被处理：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d66f350097534\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef process_jsonheader(self):\r\n    hdrlen = self._jsonheader_len\r\n    if len(self._recv_buffer) &gt;= hdrlen:\r\n        self.jsonheader = self._json_decode(self._recv_buffer[:hdrlen],\r\n                                            'utf-8')\r\n        self._recv_buffer = self._recv_buffer[hdrlen:]\r\n        for reqhdr in ('byteorder', 'content-length', 'content-type',\r\n                       'content-encoding'):\r\n            if reqhdr not in self.jsonheader:\r\n                raise ValueError(f'Missing required header \"{reqhdr}\".')</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d66f350097534-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d66f350097534-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d66f350097534-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d66f350097534-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d66f350097534-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d66f350097534-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d66f350097534-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d66f350097534-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d66f350097534-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d66f350097534-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d66f350097534-1\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">process_jsonheader</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d66f350097534-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">hdrlen</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_jsonheader_len</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d66f350097534-3\"><span class=\"crayon-e\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_recv_buffer</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">hdrlen</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d66f350097534-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">jsonheader</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_json_decode</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_recv_buffer</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">hdrlen</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d66f350097534-5\"><span class=\"crayon-h\">                                            </span><span class=\"crayon-s\">'utf-8'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d66f350097534-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_recv_buffer</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_recv_buffer</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">hdrlen</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d66f350097534-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">reqhdr </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'byteorder'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'content-length'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'content-type'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d66f350097534-8\"><span class=\"crayon-h\">                       </span><span class=\"crayon-s\">'content-encoding'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d66f350097534-9\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">reqhdr </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">jsonheader</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d66f350097534-10\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">raise </span><span class=\"crayon-e\">ValueError</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">f</span><span class=\"crayon-s\">'Missing required header \"{reqhdr}\".'</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0023 seconds] -->\r\n<p><code>self._json_decode()</code> 方法用来解码并反序列化 JSON 头成一个字典。由于我们定义的 JSON 头是 utf-8 格式的，所以解码方法调用时我们写死了这个参数，结果将被存放在 <code>self.jsonheader</code> 中，<code>process_jsonheader</code> 方法做完他应该做的事情后，同样需要删除接收缓冲区中处理过的消息</p>\n<p>接下来就是真正的消息内容，当接收缓冲区有 JSON 头中定义的 <code>content-length</code> 值的数量个字节时，请求就应该被处理了：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d672457273473\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef process_request(self):\r\n    content_len = self.jsonheader['content-length']\r\n    if not len(self._recv_buffer) &gt;= content_len:\r\n        return\r\n    data = self._recv_buffer[:content_len]\r\n    self._recv_buffer = self._recv_buffer[content_len:]\r\n    if self.jsonheader['content-type'] == 'text/json':\r\n        encoding = self.jsonheader['content-encoding']\r\n        self.request = self._json_decode(data, encoding)\r\n        print('received request', repr(self.request), 'from', self.addr)\r\n    else:\r\n        # Binary or unknown content-type\r\n        self.request = data\r\n        print(f'received {self.jsonheader[\"content-type\"]} request from',\r\n              self.addr)\r\n    # Set selector to listen for write events, we're done reading.\r\n    self._set_selector_events_mask('w')</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d672457273473-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d672457273473-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d672457273473-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d672457273473-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d672457273473-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d672457273473-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d672457273473-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d672457273473-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d672457273473-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d672457273473-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d672457273473-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d672457273473-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d672457273473-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d672457273473-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d672457273473-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d672457273473-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d672457273473-17\">17</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d672457273473-1\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">process_request</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d672457273473-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">content_len</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">jsonheader</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'content-length'</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d672457273473-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_recv_buffer</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">content_len</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d672457273473-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d672457273473-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_recv_buffer</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">content_len</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d672457273473-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_recv_buffer</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_recv_buffer</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">content_len</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d672457273473-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">jsonheader</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'content-type'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'text/json'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d672457273473-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">encoding</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">jsonheader</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'content-encoding'</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d672457273473-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">request</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_json_decode</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">encoding</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d672457273473-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'received request'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">repr</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">request</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'from'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">addr</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d672457273473-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d672457273473-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-p\"># Binary or unknown content-type</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d672457273473-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">request</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">data</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d672457273473-14\"><span class=\"crayon-e\">        </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">f</span><span class=\"crayon-s\">'received {self.jsonheader[\"content-type\"]} request from'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d672457273473-15\"><span class=\"crayon-h\">              </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">addr</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d672457273473-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># Set selector to listen for write events, we're done reading.</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d672457273473-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_set_selector_events_mask</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'w'</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0033 seconds] -->\r\n<p>把消息保存到 <code>data</code> 变量中后，<code>process_request()</code> 又会删除接收缓冲区中处理过的数据。接着，如果 content type 是 JSON 的话，它将解码并反序列化数据。否则（在我们的例子中）数据将被视 做二进制数据并打印出来</p>\n<p>最后 <code>process_request()</code> 方法会修改 selector 为只监控写入事件。在服务端的程序 <code>app-server.py</code> 中，socket 初始化被设置成仅监控读事件。现在请求已经被全部处理完了，我们对读取事件就不感兴趣了</p>\n<p>现在就可以创建一个响应写入到 socket 中。当 socket 可写时 <code>create_response()</code> 将被从 <code>write()</code> 方法中调用：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d677036655949\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef create_response(self):\r\n    if self.jsonheader['content-type'] == 'text/json':\r\n        response = self._create_response_json_content()\r\n    else:\r\n        # Binary or unknown content-type\r\n        response = self._create_response_binary_content()\r\n    message = self._create_message(**response)\r\n    self.response_created = True\r\n    self._send_buffer += message</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d677036655949-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d677036655949-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d677036655949-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d677036655949-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d677036655949-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d677036655949-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d677036655949-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d677036655949-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d677036655949-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d677036655949-1\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">create_response</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d677036655949-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">jsonheader</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'content-type'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'text/json'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d677036655949-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">response</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_create_response_json_content</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d677036655949-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d677036655949-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-p\"># Binary or unknown content-type</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d677036655949-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">response</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_create_response_binary_content</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d677036655949-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">message</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_create_message</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">response</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d677036655949-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">response_created</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">True</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d677036655949-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_send_buffer</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">message</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n<p>响应会根据不同的 content type 的不同而调用不同的方法创建。在这个例子中，当 <code>action == 'search'</code> 的时候会执行一个简单的字典查找。你可以在这个地方添加你自己的处理方法并调用</p>\n<p>一个不好处理的问题是响应写入完成时如何关闭连接，我会在 <code>_write()</code> 方法中调用 <code>close()</code></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d67a305800550\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef _write(self):\r\n    if self._send_buffer:\r\n        print('sending', repr(self._send_buffer), 'to', self.addr)\r\n        try:\r\n            # Should be ready to write\r\n            sent = self.sock.send(self._send_buffer)\r\n        except BlockingIOError:\r\n            # Resource temporarily unavailable (errno EWOULDBLOCK)\r\n            pass\r\n        else:\r\n            self._send_buffer = self._send_buffer[sent:]\r\n            # Close when the buffer is drained. The response has been sent.\r\n            if sent and not self._send_buffer:\r\n                self.close()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d67a305800550-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d67a305800550-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d67a305800550-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d67a305800550-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d67a305800550-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d67a305800550-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d67a305800550-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d67a305800550-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d67a305800550-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d67a305800550-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d67a305800550-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d67a305800550-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d67a305800550-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d67a305800550-14\">14</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d67a305800550-1\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">_write</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d67a305800550-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_send_buffer</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d67a305800550-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'sending'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">repr</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_send_buffer</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'to'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">addr</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d67a305800550-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">try</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d67a305800550-5\"><span class=\"crayon-h\">            </span><span class=\"crayon-p\"># Should be ready to write</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d67a305800550-6\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">sent</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sock</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">send</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_send_buffer</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d67a305800550-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">except </span><span class=\"crayon-v\">BlockingIOError</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d67a305800550-8\"><span class=\"crayon-h\">            </span><span class=\"crayon-p\"># Resource temporarily unavailable (errno EWOULDBLOCK)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d67a305800550-9\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">pass</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d67a305800550-10\"><span class=\"crayon-e\">        </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d67a305800550-11\"><span class=\"crayon-h\">            </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_send_buffer</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_send_buffer</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">sent</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d67a305800550-12\"><span class=\"crayon-h\">            </span><span class=\"crayon-p\"># Close when the buffer is drained. The response has been sent.</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d67a305800550-13\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sent </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_send_buffer</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d67a305800550-14\"><span class=\"crayon-h\">                </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0022 seconds] -->\r\n<p>虽然<code>close()</code> 方法的调用有点隐蔽，但是我认为这是一种权衡。因为消息类一个连接只处理一条消息。写入响应后，服务器无需执行任何操作。它的任务就完成了</p>\n<h3 id=\"客户端主程序\">客户端主程序</h3>\n<p>客户端主程序 <code>app-client.py</code> 中，参数从命令行中读取，用来创建请求并连接到服务端</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d67e679843270\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ./app-client.py\r\nusage: ./app-client.py</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d67e679843270-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d67e679843270-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d67e679843270-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">app</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">client</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d67e679843270-2\"><span class=\"crayon-v\">usage</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">app</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">client</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>来个示例演示一下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d681349167259\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ./app-client.py 127.0.0.1 65432 search needle</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d681349167259-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d681349167259-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">app</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">client</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">search </span><span class=\"crayon-v\">needle</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>当从命令行参数创建完一个字典来表示请求后，主机、端口、请求字典一起被传给 <code>start_connection()</code></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d684293786184\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef start_connection(host, port, request):\r\n    addr = (host, port)\r\n    print('starting connection to', addr)\r\n    sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\r\n    sock.setblocking(False)\r\n    sock.connect_ex(addr)\r\n    events = selectors.EVENT_READ | selectors.EVENT_WRITE\r\n    message = libclient.Message(sel, sock, addr, request)\r\n    sel.register(sock, events, data=message)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d684293786184-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d684293786184-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d684293786184-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d684293786184-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d684293786184-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d684293786184-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d684293786184-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d684293786184-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d684293786184-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d684293786184-1\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">start_connection</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">host</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">port</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">request</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d684293786184-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">addr</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">host</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">port</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d684293786184-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'starting connection to'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">addr</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d684293786184-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">sock</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">socket</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">socket</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">socket</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">AF_INET</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">socket</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">SOCK_STREAM</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d684293786184-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">sock</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setblocking</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">False</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d684293786184-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">sock</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">connect_ex</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">addr</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d684293786184-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">events</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">selectors</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">EVENT_READ</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">selectors</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">EVENT_WRITE</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d684293786184-8\"><span class=\"crayon-e\">    </span><span class=\"crayon-v\">message</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">libclient</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Message</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sel</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sock</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">addr</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">request</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d684293786184-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">sel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">register</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sock</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">events</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">message</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0025 seconds] -->\r\n<p>对服务器的 socket 连接被创建，消息对象被传入请求字典并创建</p>\n<p>和服务端一样，消息对象在 <code>sel.register()</code> 方法中被关联到 socket 上。然而，客户端不同的是，socket 初始化的时候会监控读写事件，一旦请求被写入，我们将会修改为只监控读取事件</p>\n<p>这种实现和服务端一样有好处：不浪费 CPU 生命周期。请求发送完成后，我们就不关注写入事件了，所以不用保持状态等待处理</p>\n<h3 id=\"客户端消息类\">客户端消息类</h3>\n<p>在 <a href=\"#%E6%B6%88%E6%81%AF%E5%85%A5%E5%8F%A3%E7%82%B9\">消息入口点</a> 一节中，我们看到过，当 socket 使用准备就绪时，消息对象是如何调用具体动作的。现在让我们来看看 socket 上的数据是如何被读写的，以及消息准备好被加工的时候发生了什么</p>\n<p>客户端消息类在 <code>libclient.py</code> 文件中，可以在 Github 上找到 <a href=\"https://github.com/realpython/materials/tree/master/python-sockets-tutorial\">源代码</a></p>\n<p>这些方法按照消息处理顺序出现在类中</p>\n<p>客户端的第一个任务就是让请求入队列：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d688156631588\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef queue_request(self):\r\n    content = self.request['content']\r\n    content_type = self.request['type']\r\n    content_encoding = self.request['encoding']\r\n    if content_type == 'text/json':\r\n        req = {\r\n            'content_bytes': self._json_encode(content, content_encoding),\r\n            'content_type': content_type,\r\n            'content_encoding': content_encoding\r\n        }\r\n    else:\r\n        req = {\r\n            'content_bytes': content,\r\n            'content_type': content_type,\r\n            'content_encoding': content_encoding\r\n        }\r\n    message = self._create_message(**req)\r\n    self._send_buffer += message\r\n    self._request_queued = True</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d688156631588-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d688156631588-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d688156631588-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d688156631588-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d688156631588-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d688156631588-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d688156631588-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d688156631588-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d688156631588-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d688156631588-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d688156631588-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d688156631588-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d688156631588-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d688156631588-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d688156631588-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d688156631588-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d688156631588-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d688156631588-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d688156631588-19\">19</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d688156631588-1\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">queue_request</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d688156631588-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">content</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">request</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'content'</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d688156631588-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">content_type</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">request</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'type'</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d688156631588-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">content_encoding</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">request</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'encoding'</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d688156631588-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">content_type</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'text/json'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d688156631588-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">req</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d688156631588-7\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'content_bytes'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_json_encode</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">content</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">content_encoding</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d688156631588-8\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'content_type'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">content_type</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d688156631588-9\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'content_encoding'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">content</span><span class=\"crayon-sy\">_</span>encoding</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d688156631588-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d688156631588-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d688156631588-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">req</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d688156631588-13\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'content_bytes'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">content</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d688156631588-14\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'content_type'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">content_type</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d688156631588-15\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'content_encoding'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">content</span><span class=\"crayon-sy\">_</span>encoding</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d688156631588-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d688156631588-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">message</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_create_message</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">req</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d688156631588-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_send_buffer</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">message</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d688156631588-19\"><span class=\"crayon-e\">    </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_request_queued</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">True</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0034 seconds] -->\r\n<p>用来创建请求的字典，取决于客户端程序 <code>app-client.py</code> 中传入的命令行参数，当消息对象创建的时候，请求字典被当做参数传入</p>\n<p>请求消息被创建并追加到发送缓冲区中，消息将被 <code>_write()</code> 方法发送，状态参数 <code>self._request_queued</code> 被设置，这使 <code>queue_request()</code> 方法不会被重复调用</p>\n<p>请求发送完成后，客户端就等待服务器的响应</p>\n<p>客户端读取和处理消息的方法和服务端一致，由于响应数据是从 socket 上读取的，所以处理 header 的方法会被调用：<code>process_protoheader()</code> 和 <code>process_jsonheader()</code></p>\n<p>最终处理方法名字的不同在于处理一个响应，而不是创建：<code>process_response()</code>,<code>_process_response_json_content()</code> 和 <code>_process_response_binary_content()</code></p>\n<p>最后，但肯定不是最不重要的 —— 最终的 <code>process_response()</code> 调用：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d68c999261432\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef process_response(self):\r\n    # ...\r\n    # Close when response has been processed\r\n    self.close()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d68c999261432-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d68c999261432-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d68c999261432-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d68c999261432-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d68c999261432-1\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">process_response</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d68c999261432-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># ...</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d68c999261432-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># Close when response has been processed</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d68c999261432-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p></p>\n<h3 id=\"消息类的包装\">消息类的包装</h3>\n<p>我将通过提及一些方法的重要注意点来结束消息类的讨论</p>\n<p>主程序中任意的类触发异常都由 <code>except</code> 字句来处理：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d691399315691\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ntry:\r\n    message.process_events(mask)\r\nexcept Exception:\r\n    print('main: error: exception for',\r\n          f'{message.addr}:\\n{traceback.format_exc()}')\r\n    message.close()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d691399315691-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d691399315691-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d691399315691-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d691399315691-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d691399315691-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d691399315691-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d691399315691-1\"><span class=\"crayon-st\">try</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d691399315691-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">message</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">process_events</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">mask</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d691399315691-3\"><span class=\"crayon-e\">except </span><span class=\"crayon-v\">Exception</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d691399315691-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'main: error: exception for'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d691399315691-5\"><span class=\"crayon-h\">          </span><span class=\"crayon-i\">f</span><span class=\"crayon-s\">'{message.addr}:\\n{traceback.format_exc()}'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d691399315691-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">message</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>注意最后一行的方法 <code>message.close()</code></p>\n<p>这一行很重要的原因有很多，不仅仅是保证 socket 被关闭，而且通过调用 <code>message.close()</code> 方法删除使用 <code>select()</code> 监控的 socket，这是类中的一段非常简洁的代码，它能减小复杂度。如果一个异常发生或者我们自己主动抛出，我们很清楚 <code>close()</code> 方法将处理善后</p>\n<p><code>Message._read()</code> 和 <code>Message._write()</code> 方法都包含一些有趣的东西：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d697886400265\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef _read(self):\r\n    try:\r\n        # Should be ready to read\r\n        data = self.sock.recv(4096)\r\n    except BlockingIOError:\r\n        # Resource temporarily unavailable (errno EWOULDBLOCK)\r\n        pass\r\n    else:\r\n        if data:\r\n            self._recv_buffer += data\r\n        else:\r\n            raise RuntimeError('Peer closed.')</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d697886400265-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d697886400265-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d697886400265-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d697886400265-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d697886400265-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d697886400265-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d697886400265-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d697886400265-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d697886400265-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d697886400265-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d697886400265-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d697886400265-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d697886400265-1\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">_read</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d697886400265-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">try</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d697886400265-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-p\"># Should be ready to read</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d697886400265-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sock</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">recv</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">4096</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d697886400265-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">except </span><span class=\"crayon-v\">BlockingIOError</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d697886400265-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-p\"># Resource temporarily unavailable (errno EWOULDBLOCK)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d697886400265-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">pass</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d697886400265-8\"><span class=\"crayon-e\">    </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d697886400265-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d697886400265-10\"><span class=\"crayon-h\">            </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_recv_buffer</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">data</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d697886400265-11\"><span class=\"crayon-e\">        </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d697886400265-12\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">raise </span><span class=\"crayon-e\">RuntimeError</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Peer closed.'</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>注意 except 行：<code>except BlockingIOError</code>：</p>\n<p><code>_write()</code> 方法也有，这几行很重要是因为它们捕获临时错误并通过使用 <code>pass</code> 跳过。临时错误是 socket 阻塞的时候发生的，比如等待网络响应或者连接的其它端</p>\n<p>通过使用 <code>pass</code> 跳过异常，<code>select()</code> 方法将再次调用，我们将有机会重新读写数据</p>\n<h3 id=\"运行应用程序的客户端和服务端\">运行应用程序的客户端和服务端</h3>\n<p>经过所有这些艰苦的工作后，让我们把程序运行起来并找到一些乐趣！</p>\n<p>在这个救命中，我们将传一个空的字符串做为 <code>host</code> 参数的值，用来监听服务器端的所有IP 地址。这样的话我就可以从其它网络上的虚拟机运行客户端程序，我将模拟一个 PowerPC 的机器</p>\n<p>首页，把服务端程序运行进来：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d69d778092291\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ./app-server.py '' 65432\r\nlistening on ('', 65432)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d69d778092291-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d69d778092291-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d69d778092291-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">app</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d69d778092291-2\"><span class=\"crayon-e\">listening </span><span class=\"crayon-e\">on</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>现在让我们运行客户端，传入搜索内容，看看是否能看他（墨菲斯-黑客帝国中的角色）：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d6a0798104916\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ./app-client.py 10.0.1.1 65432 search morpheus\r\nstarting connection to ('10.0.1.1', 65432)\r\nsending b'\\x00d{\"byteorder\": \"big\", \"content-type\": \"text/json\", \"content-encoding\": \"utf-8\", \"content-length\": 41}{\"action\": \"search\", \"value\": \"morpheus\"}' to ('10.0.1.1', 65432)\r\nreceived response {'result': 'Follow the white rabbit. 🐰'} from ('10.0.1.1', 65432)\r\ngot result: Follow the white rabbit. 🐰\r\nclosing connection to ('10.0.1.1', 65432)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6a0798104916-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d6a0798104916-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6a0798104916-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d6a0798104916-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6a0798104916-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d6a0798104916-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6a0798104916-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">app</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">client</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10.0.1.1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">search </span><span class=\"crayon-e\">morpheus</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d6a0798104916-2\"><span class=\"crayon-e\">starting </span><span class=\"crayon-e\">connection </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'10.0.1.1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6a0798104916-3\"><span class=\"crayon-i\">sending</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">b</span><span class=\"crayon-s\">'\\x00d{\"byteorder\": \"big\", \"content-type\": \"text/json\", \"content-encoding\": \"utf-8\", \"content-length\": 41}{\"action\": \"search\", \"value\": \"morpheus\"}'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'10.0.1.1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d6a0798104916-4\"><span class=\"crayon-e\">received</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">response</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'result'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Follow the white rabbit. 🐰'</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'10.0.1.1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6a0798104916-5\"><span class=\"crayon-e\">got </span><span class=\"crayon-v\">result</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Follow </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">white </span><span class=\"crayon-v\">rabbit</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span>🐰</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d6a0798104916-6\"><span class=\"crayon-e\">closing </span><span class=\"crayon-e\">connection </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'10.0.1.1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n<p>我的命令行 shell 使用了 utf-8 编码，所以上面的输出可以是 emojis</p>\n<p>再试试看能不能搜索到小狗：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d6a3078525200\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ./app-client.py 10.0.1.1 65432 search 🐶\r\nstarting connection to ('10.0.1.1', 65432)\r\nsending b'\\x00d{\"byteorder\": \"big\", \"content-type\": \"text/json\", \"content-encoding\": \"utf-8\", \"content-length\": 37}{\"action\": \"search\", \"value\": \"\\xf0\\x9f\\x90\\xb6\"}' to ('10.0.1.1', 65432)\r\nreceived response {'result': '🐾 Playing ball! 🏐'} from ('10.0.1.1', 65432)\r\ngot result: 🐾 Playing ball! 🏐\r\nclosing connection to ('10.0.1.1', 65432)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6a3078525200-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d6a3078525200-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6a3078525200-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d6a3078525200-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6a3078525200-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d6a3078525200-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6a3078525200-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">app</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">client</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10.0.1.1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">search</span><span class=\"crayon-h\"> </span>🐶</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d6a3078525200-2\"><span class=\"crayon-e\">starting </span><span class=\"crayon-e\">connection </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'10.0.1.1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6a3078525200-3\"><span class=\"crayon-i\">sending</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">b</span><span class=\"crayon-s\">'\\x00d{\"byteorder\": \"big\", \"content-type\": \"text/json\", \"content-encoding\": \"utf-8\", \"content-length\": 37}{\"action\": \"search\", \"value\": \"\\xf0\\x9f\\x90\\xb6\"}'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'10.0.1.1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d6a3078525200-4\"><span class=\"crayon-e\">received</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">response</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'result'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'🐾 Playing ball! 🏐'</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'10.0.1.1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6a3078525200-5\"><span class=\"crayon-e\">got </span><span class=\"crayon-v\">result</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>🐾<span class=\"crayon-h\"> </span><span class=\"crayon-e\">Playing </span><span class=\"crayon-v\">ball</span><span class=\"crayon-o\">!</span><span class=\"crayon-h\"> </span>🏐</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d6a3078525200-6\"><span class=\"crayon-e\">closing </span><span class=\"crayon-e\">connection </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'10.0.1.1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n<p>注意请求发送行的 byte string，很容易看出来你发送的小狗 emoji 表情被打印成了十六进制的字符串 <code>\\xf0\\x9f\\x90\\xb6</code>，我可以使用 emoji 表情来搜索是因为我的命令行支持utf-8 格式的编码</p>\n<p>这个示例中我们发送给网络原始的 bytes，这些 bytes 需要被接受者正确的解释。这就是为什么之前需要给消息附加头信息并且包含编码类型字段的原因</p>\n<p>下面这个是服务器对应上面两个客户端连接的输出：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d6a7376574702\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\naccepted connection from ('10.0.2.2', 55340)\r\nreceived request {'action': 'search', 'value': 'morpheus'} from ('10.0.2.2', 55340)\r\nsending b'\\x00g{\"byteorder\": \"little\", \"content-type\": \"text/json\", \"content-encoding\": \"utf-8\", \"content-length\": 43}{\"result\": \"Follow the white rabbit. \\xf0\\x9f\\x90\\xb0\"}' to ('10.0.2.2', 55340)\r\nclosing connection to ('10.0.2.2', 55340)\r\n\r\naccepted connection from ('10.0.2.2', 55338)\r\nreceived request {'action': 'search', 'value': '🐶'} from ('10.0.2.2', 55338)\r\nsending b'\\x00g{\"byteorder\": \"little\", \"content-type\": \"text/json\", \"content-encoding\": \"utf-8\", \"content-length\": 37}{\"result\": \"\\xf0\\x9f\\x90\\xbe Playing ball! \\xf0\\x9f\\x8f\\x90\"}' to ('10.0.2.2', 55338)\r\nclosing connection to ('10.0.2.2', 55338)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6a7376574702-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d6a7376574702-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6a7376574702-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d6a7376574702-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6a7376574702-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d6a7376574702-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6a7376574702-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d6a7376574702-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6a7376574702-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6a7376574702-1\"><span class=\"crayon-e\">accepted </span><span class=\"crayon-e\">connection </span><span class=\"crayon-e\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'10.0.2.2'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">55340</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d6a7376574702-2\"><span class=\"crayon-e\">received</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">request</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'action'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'search'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'value'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'morpheus'</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'10.0.2.2'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">55340</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6a7376574702-3\"><span class=\"crayon-i\">sending</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">b</span><span class=\"crayon-s\">'\\x00g{\"byteorder\": \"little\", \"content-type\": \"text/json\", \"content-encoding\": \"utf-8\", \"content-length\": 43}{\"result\": \"Follow the white rabbit. \\xf0\\x9f\\x90\\xb0\"}'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'10.0.2.2'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">55340</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d6a7376574702-4\"><span class=\"crayon-e\">closing </span><span class=\"crayon-e\">connection </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'10.0.2.2'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">55340</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6a7376574702-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d6a7376574702-6\"><span class=\"crayon-e\">accepted </span><span class=\"crayon-e\">connection </span><span class=\"crayon-e\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'10.0.2.2'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">55338</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6a7376574702-7\"><span class=\"crayon-e\">received</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">request</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'action'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'search'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'value'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'🐶'</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'10.0.2.2'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">55338</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d6a7376574702-8\"><span class=\"crayon-i\">sending</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">b</span><span class=\"crayon-s\">'\\x00g{\"byteorder\": \"little\", \"content-type\": \"text/json\", \"content-encoding\": \"utf-8\", \"content-length\": 37}{\"result\": \"\\xf0\\x9f\\x90\\xbe Playing ball! \\xf0\\x9f\\x8f\\x90\"}'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'10.0.2.2'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">55338</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6a7376574702-9\"><span class=\"crayon-e\">closing </span><span class=\"crayon-e\">connection </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'10.0.2.2'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">55338</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0027 seconds] -->\r\n<p>注意发送行中写到客户端的 bytes，这就是服务端的响应消息</p>\n<p>如果 action 参数不是搜索，你也可以试试给服务器发送二进制请求</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d6ab934568406\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ./app-client.py 10.0.1.1 65432 binary 😃\r\nstarting connection to ('10.0.1.1', 65432)\r\nsending b'\\x00|{\"byteorder\": \"big\", \"content-type\": \"binary/custom-client-binary-type\", \"content-encoding\": \"binary\", \"content-length\": 10}binary\\xf0\\x9f\\x98\\x83' to ('10.0.1.1', 65432)\r\nreceived binary/custom-server-binary-type response from ('10.0.1.1', 65432)\r\ngot response: b'First 10 bytes of request: binary\\xf0\\x9f\\x98\\x83'\r\nclosing connection to ('10.0.1.1', 65432)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6ab934568406-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d6ab934568406-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6ab934568406-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d6ab934568406-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6ab934568406-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d6ab934568406-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6ab934568406-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">app</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">client</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10.0.1.1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">binary</span><span class=\"crayon-h\"> </span>😃</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d6ab934568406-2\"><span class=\"crayon-e\">starting </span><span class=\"crayon-e\">connection </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'10.0.1.1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6ab934568406-3\"><span class=\"crayon-i\">sending</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">b</span><span class=\"crayon-s\">'\\x00|{\"byteorder\": \"big\", \"content-type\": \"binary/custom-client-binary-type\", \"content-encoding\": \"binary\", \"content-length\": 10}binary\\xf0\\x9f\\x98\\x83'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'10.0.1.1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d6ab934568406-4\"><span class=\"crayon-e\">received </span><span class=\"crayon-v\">binary</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">custom</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">server</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">binary</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">type </span><span class=\"crayon-e\">response </span><span class=\"crayon-e\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'10.0.1.1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6ab934568406-5\"><span class=\"crayon-e\">got </span><span class=\"crayon-v\">response</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">b</span><span class=\"crayon-s\">'First 10 bytes of request: binary\\xf0\\x9f\\x98\\x83'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d6ab934568406-6\"><span class=\"crayon-e\">closing </span><span class=\"crayon-e\">connection </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'10.0.1.1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n<p>由于请求的 content-type 不是 <code>text/json</code>，服务器会把内容当成二进制类型并且不会解码 JSON，它只会打印 content-type 和返回的前 10 个 bytes 给客户端</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d6ae370792172\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ./app-server.py '' 65432\r\nlistening on ('', 65432)\r\naccepted connection from ('10.0.2.2', 55320)\r\nreceived binary/custom-client-binary-type request from ('10.0.2.2', 55320)\r\nsending b'\\x00\\x7f{\"byteorder\": \"little\", \"content-type\": \"binary/custom-server-binary-type\", \"content-encoding\": \"binary\", \"content-length\": 37}First 10 bytes of request: binary\\xf0\\x9f\\x98\\x83' to ('10.0.2.2', 55320)\r\nclosing connection to ('10.0.2.2', 55320)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6ae370792172-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d6ae370792172-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6ae370792172-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d6ae370792172-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6ae370792172-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d6ae370792172-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6ae370792172-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">app</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d6ae370792172-2\"><span class=\"crayon-e\">listening </span><span class=\"crayon-e\">on</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6ae370792172-3\"><span class=\"crayon-e\">accepted </span><span class=\"crayon-e\">connection </span><span class=\"crayon-e\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'10.0.2.2'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">55320</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d6ae370792172-4\"><span class=\"crayon-e\">received </span><span class=\"crayon-v\">binary</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">custom</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">client</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">binary</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">type </span><span class=\"crayon-e\">request </span><span class=\"crayon-e\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'10.0.2.2'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">55320</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6ae370792172-5\"><span class=\"crayon-i\">sending</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">b</span><span class=\"crayon-s\">'\\x00\\x7f{\"byteorder\": \"little\", \"content-type\": \"binary/custom-server-binary-type\", \"content-encoding\": \"binary\", \"content-length\": 37}First 10 bytes of request: binary\\xf0\\x9f\\x98\\x83'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'10.0.2.2'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">55320</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d6ae370792172-6\"><span class=\"crayon-e\">closing </span><span class=\"crayon-e\">connection </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'10.0.2.2'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">55320</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n<p></p>\n<h2 id=\"故障排除\">故障排除</h2>\n<p>某些东西运行不了是很常见的，你可能不知道应该怎么做，不用担心，所有人都会遇到这种问题，希望你借助本教程、调试器和万能的搜索引擎解决问题并且继续下去</p>\n<p>如果还是解决不了，你的第一站应该是 python 的 <a href=\"https://docs.python.org/3/library/socket.html\">socket</a> 模块文档，确保你读过文档中每个我们使用到的方法、函数。同样的可以从引用一节中找到一些办法，尤其是错误一节中的内容</p>\n<p>有的时候问题并不是由你的源代码引起的，源代码可能是正确的。有可能是不同的主机、客户端和服务器。也可能是网络原因，比如路由器、防火墙或者是其它网络设备扮演了中间人的角色</p>\n<p>对于这些类型的问题，额外的一些工具是必要的。下面这些工具或者集可能会帮到你或者至少提供一些线索</p>\n<h3 id=\"pin\">pin</h3>\n<p>ping 命令通过发送一个 <a href=\"https://en.wikipedia.org/wiki/Internet_Control_Message_Protocol\">ICMP</a> 报文来检测主机是否连接到了网络，它直接与操作系统上的 TCP/IP 协议栈通信，所以它在主机上是独立于任何应用程序运行的</p>\n<p>下面是一段在 macOS 上执行 ping 命令的结果</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d6b2244781270\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ping -c 3 127.0.0.1\r\nPING 127.0.0.1 (127.0.0.1): 56 data bytes\r\n64 bytes from 127.0.0.1: icmp_seq=0 ttl=64 time=0.058 ms\r\n64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.165 ms\r\n64 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.164 ms\r\n\r\n--- 127.0.0.1 ping statistics ---\r\n3 packets transmitted, 3 packets received, 0.0% packet loss\r\nround-trip min/avg/max/stddev = 0.058/0.129/0.165/0.050 ms</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6b2244781270-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d6b2244781270-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6b2244781270-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d6b2244781270-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6b2244781270-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d6b2244781270-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6b2244781270-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d6b2244781270-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6b2244781270-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6b2244781270-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ping</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">127.0.0.1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d6b2244781270-2\"><span class=\"crayon-i\">PING</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">56</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">data </span><span class=\"crayon-i\">bytes</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6b2244781270-3\"><span class=\"crayon-cn\">64</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">bytes </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">icmp_seq</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ttl</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">64</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">time</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0.058</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ms</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d6b2244781270-4\"><span class=\"crayon-cn\">64</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">bytes </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">icmp_seq</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ttl</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">64</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">time</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0.165</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ms</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6b2244781270-5\"><span class=\"crayon-cn\">64</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">bytes </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">icmp_seq</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ttl</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">64</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">time</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0.164</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ms</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d6b2244781270-6\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6b2244781270-7\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ping </span><span class=\"crayon-v\">statistics</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d6b2244781270-8\"><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">packets </span><span class=\"crayon-v\">transmitted</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">packets </span><span class=\"crayon-v\">received</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">packet </span><span class=\"crayon-e\">loss</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6b2244781270-9\"><span class=\"crayon-v\">round</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">trip </span><span class=\"crayon-v\">min</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">avg</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">max</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">stddev</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.058</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0.129</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0.165</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0.050</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ms</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0029 seconds] -->\r\n<p>注意后面的统计输出，这对你排查间歇性的连接问题很有帮助。比如说，是否有数据包丢失？网络延迟怎么样（查看消息的往返时间）</p>\n<p>如果你与主机之间有防火墙的话，ping 发送的请求可能会被阻止。防火墙管理员定义了一些规则强制阻止一些请求，主要的原因就是他们不想自己的主机是可以被发现的。如果你的机器也出现这种情况的话，请确保在规则中添加了允许 ICMP 包的发送</p>\n<p>ICMP 是 ping 命令使用的协议，但它也是 TCP 和其他底层用于传递错误消息的协议，如果你遇到奇怪的行为或缓慢的连接，可能就是这个原因</p>\n<p>ICMP 消息通过类型和代号来定义。下面有一些重要的信息可以参考：</p>\n<p>ICMP 类型 | ICMP 代码 | 说明 – | – | – 8 | 0 | 打印请求 0 | 0 | 打印回复 3 | 0 | 目标网络不可达 3 | 1 | 目标主机不可达 3 | 2 | 目标协议不可达 3 | 3 | 目标端口不可达 3 | 4 | 需要分片，但是 DF(Don’t fragmentation) 标识已被设置 11 | 0 | 网络存在环路</p>\n<p>查看 <a href=\"https://en.wikipedia.org/wiki/Path_MTU_Discovery#Problems_with_PMTUD\">Path MTU Discovery</a> 更多关于分片和 ICMP 消息的内容，里面遇到的问题就是我前面提及的一些奇怪行为</p>\n<h3 id=\"netstat\">netstat</h3>\n<p>在 <a href=\"#%E6%9F%A5%E7%9C%8B%20socket%20%E7%8A%B6%E6%80%81\">查看 socket 状态</a> 一节中我们已经知道如何使用 netstat 来查看 socket 及其状态的信息。这个命令在 macOS, Linux, Windows 上都可以使用</p>\n<p>在之前的示例中我并没有提及 <code>Recv-Q</code> 和 <code>Send-Q</code> 列。这些列表示发送或者接收队列中网络缓冲区数据的字节数，但是由于某些原因这些字节还没被远程或者本地应用读写</p>\n<p>换句话说，这些网络中的字节还在操作系统的队列中。一个原因可能是应用程序受 CPU 限制或者无法调用 <code>socket.recv()</code>、<code>socket.send()</code> 方法处理，或者因为其它一些网络原因导致的，比如说网络的拥堵、失败、硬件及电缆的问题</p>\n<p>为了复现这个问题，看看到底在错误发生前我应该发送多少数据。我写了一个测试客户端可以连接到测试服务器，并且重复的调用 <code>socket.send()</code> 方法。测试服务端永远不调用 <code>socket.recv()</code> 或者 <code>socket.send()</code> 方法来处理客户端发送的数据，它只接受连接请求。这会导致服务器上的网络缓冲区被填满，最终会在客户端上报错</p>\n<p>首先运行服务端：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d6b7056859287\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ./app-server-test.py 127.0.0.1 65432 listening on ('127.0.0.1', 65432)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6b7056859287-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6b7056859287-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">app</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">server</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">test</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">listening </span><span class=\"crayon-e\">on</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'127.0.0.1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>然后运行客户端，看看发生了什么：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d6ba947987278\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ./app-client-test.py 127.0.0.1 65432 binary test\r\nerror: socket.send() blocking io exception for ('127.0.0.1', 65432):\r\nBlockingIOError(35, 'Resource temporarily unavailable')</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6ba947987278-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d6ba947987278-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6ba947987278-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6ba947987278-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">app</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">client</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">test</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">binary </span><span class=\"crayon-e\">test</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d6ba947987278-2\"><span class=\"crayon-v\">error</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">socket</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">send</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">blocking </span><span class=\"crayon-e\">io </span><span class=\"crayon-e\">exception </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'127.0.0.1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6ba947987278-3\"><span class=\"crayon-e\">BlockingIOError</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">35</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Resource temporarily unavailable'</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>下面是用 <code>netstat</code> 命令在错误发生时执行的结果：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d6bd090021587\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ netstat -an | grep 65432\r\nProto Recv-Q Send-Q  Local Address          Foreign Address        (state)\r\ntcp4  408300      0  127.0.0.1.65432        127.0.0.1.53225        ESTABLISHED\r\ntcp4       0 269868  127.0.0.1.53225        127.0.0.1.65432        ESTABLISHED\r\ntcp4       0      0  127.0.0.1.65432        *.*                    LISTEN</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6bd090021587-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d6bd090021587-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6bd090021587-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d6bd090021587-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6bd090021587-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6bd090021587-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">netstat</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">an</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">grep</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d6bd090021587-2\"><span class=\"crayon-e\">Proto </span><span class=\"crayon-v\">Recv</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Q</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Send</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Q</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">Local </span><span class=\"crayon-e\">Address          </span><span class=\"crayon-e\">Foreign </span><span class=\"crayon-e\">Address</span><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">state</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6bd090021587-3\"><span class=\"crayon-i\">tcp4</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">408300</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">127.0.0.1.65432</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">127.0.0.1.53225</span><span class=\"crayon-h\">        </span><span class=\"crayon-e\">ESTABLISHED</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d6bd090021587-4\"><span class=\"crayon-i\">tcp4</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">269868</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">127.0.0.1.53225</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">127.0.0.1.65432</span><span class=\"crayon-h\">        </span><span class=\"crayon-e\">ESTABLISHED</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6bd090021587-5\"><span class=\"crayon-i\">tcp4</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">127.0.0.1.65432</span><span class=\"crayon-h\">        </span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">LISTEN</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p>第一行就表示服务端（本地端口是 65432）</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d6c1053663799\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nProto Recv-Q Send-Q  Local Address          Foreign Address        (state)\r\ntcp4  408300      0  127.0.0.1.65432        127.0.0.1.53225        ESTABLISHED</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6c1053663799-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d6c1053663799-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6c1053663799-1\"><span class=\"crayon-e\">Proto </span><span class=\"crayon-v\">Recv</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Q</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Send</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Q</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">Local </span><span class=\"crayon-e\">Address          </span><span class=\"crayon-e\">Foreign </span><span class=\"crayon-e\">Address</span><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">state</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d6c1053663799-2\"><span class=\"crayon-i\">tcp4</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">408300</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">127.0.0.1.65432</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">127.0.0.1.53225</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">ESTABLISHED</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>注意 Recv-Q: 408300</p>\n<p>第二行表示客户端（远程端口是 65432）</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d6c4382358967\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nProto Recv-Q Send-Q  Local Address          Foreign Address        (state)\r\ntcp4       0 269868  127.0.0.1.53225        127.0.0.1.65432        ESTABLISHED</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6c4382358967-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d6c4382358967-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6c4382358967-1\"><span class=\"crayon-e\">Proto </span><span class=\"crayon-v\">Recv</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Q</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Send</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Q</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">Local </span><span class=\"crayon-e\">Address          </span><span class=\"crayon-e\">Foreign </span><span class=\"crayon-e\">Address</span><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">state</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d6c4382358967-2\"><span class=\"crayon-i\">tcp4</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">269868</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">127.0.0.1.53225</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">127.0.0.1.65432</span><span class=\"crayon-h\">        </span><span class=\"crayon-v\">ESTABLISHED</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>注意 Send-Q: 269868</p>\n<p>显然，客户端试着写入字节，但是服务端并没有读取他们。这导致服务端网络缓冲队列中应该保存的数据被积压在接收端，客户端的网络缓冲队列积压到发送端</p>\n<h3 id=\"windows\">windows</h3>\n<p>如果你使用的是 windows 电脑，有一个工具套件绝对值得安装 <a href=\"https://docs.microsoft.com/en-us/sysinternals/\">Windows Sysinternals</a></p>\n<p>里面有个工具叫 <code>TCPView.exe</code>，它是 windows 下的一个可视化的 netstat 工具。除了地址、端口号和 socket 状态之外，它还会显示发送和接收的数据包以及字节数。就像 Unix 工具集 <code>lsof</code> 命令一样，你也可以看见进程名和 ID，可以在菜单中查看更多选项</p>\n<p><img src=\"https://files.realpython.com/media/tcpview.53c115c8b061.png\" alt=\"TCPView\"></p>\n<h3 id=\"wireshark\">Wireshark</h3>\n<p>有时候你可能想查看网络底层发生了什么，忽略应用程序的输出或者外部库调用，想看看网络层面到底收发了什么内容，就像调试器一样，当你需要看清这些的时候，没有别的办法</p>\n<p><a href=\"https://www.wireshark.org/\">Wireshark</a> 是一款可以运行在 macOS, Linux, Windows 以及其它系统上的网络协议分析、流量捕获工具，GUI 版本的程序叫做 <code>wireshark</code>，命令 行的程序叫做 <code>tshark</code></p>\n<p>流量捕获是一个非常好用的方法，它可以让你看到网络上应用程序的行为，收集到关于收发消息多少、频率等信息，你也可以看到客户端或者服务端如何关闭/取消连接，或者停止响应，当你需要排除故障的时候这些信息非常的有用</p>\n<p>网上还有很多关于 <code>wireshark</code> 和 <code>TShark</code> 的基础使用教程</p>\n<p>这有一个使用 wireshark 捕获本地网络数据的例子：</p>\n<p><img src=\"https://files.realpython.com/media/wireshark.529c058891dc.png\" alt=\"wireshark\"></p>\n<p>还有一个和上面一样的使用 tshark 命令输出的结果：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d6c8654559939\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ tshark -i lo0 'tcp port 65432'\r\nCapturing on 'Loopback'\r\n    1   0.000000    127.0.0.1 → 127.0.0.1    TCP 68 53942 → 65432 [SYN] Seq=0 Win=65535 Len=0 MSS=16344 WS=32 TSval=940533635 TSecr=0 SACK_PERM=1\r\n    2   0.000057    127.0.0.1 → 127.0.0.1    TCP 68 65432 → 53942 [SYN, ACK] Seq=0 Ack=1 Win=65535 Len=0 MSS=16344 WS=32 TSval=940533635 TSecr=940533635 SACK_PERM=1\r\n    3   0.000068    127.0.0.1 → 127.0.0.1    TCP 56 53942 → 65432 [ACK] Seq=1 Ack=1 Win=408288 Len=0 TSval=940533635 TSecr=940533635\r\n    4   0.000075    127.0.0.1 → 127.0.0.1    TCP 56 [TCP Window Update] 65432 → 53942 [ACK] Seq=1 Ack=1 Win=408288 Len=0 TSval=940533635 TSecr=940533635\r\n    5   0.000216    127.0.0.1 → 127.0.0.1    TCP 202 53942 → 65432 [PSH, ACK] Seq=1 Ack=1 Win=408288 Len=146 TSval=940533635 TSecr=940533635\r\n    6   0.000234    127.0.0.1 → 127.0.0.1    TCP 56 65432 → 53942 [ACK] Seq=1 Ack=147 Win=408128 Len=0 TSval=940533635 TSecr=940533635\r\n    7   0.000627    127.0.0.1 → 127.0.0.1    TCP 204 65432 → 53942 [PSH, ACK] Seq=1 Ack=147 Win=408128 Len=148 TSval=940533635 TSecr=940533635\r\n    8   0.000649    127.0.0.1 → 127.0.0.1    TCP 56 53942 → 65432 [ACK] Seq=147 Ack=149 Win=408128 Len=0 TSval=940533635 TSecr=940533635\r\n    9   0.000668    127.0.0.1 → 127.0.0.1    TCP 56 65432 → 53942 [FIN, ACK] Seq=149 Ack=147 Win=408128 Len=0 TSval=940533635 TSecr=940533635\r\n   10   0.000682    127.0.0.1 → 127.0.0.1    TCP 56 53942 → 65432 [ACK] Seq=147 Ack=150 Win=408128 Len=0 TSval=940533635 TSecr=940533635\r\n   11   0.000687    127.0.0.1 → 127.0.0.1    TCP 56 [TCP Dup ACK 6#1] 65432 → 53942 [ACK] Seq=150 Ack=147 Win=408128 Len=0 TSval=940533635 TSecr=940533635\r\n   12   0.000848    127.0.0.1 → 127.0.0.1    TCP 56 53942 → 65432 [FIN, ACK] Seq=147 Ack=150 Win=408128 Len=0 TSval=940533635 TSecr=940533635\r\n   13   0.001004    127.0.0.1 → 127.0.0.1    TCP 56 65432 → 53942 [ACK] Seq=150 Ack=148 Win=408128 Len=0 TSval=940533635 TSecr=940533635\r\n^C13 packets captured</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6c8654559939-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d6c8654559939-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6c8654559939-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d6c8654559939-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6c8654559939-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d6c8654559939-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6c8654559939-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d6c8654559939-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6c8654559939-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d6c8654559939-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6c8654559939-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d6c8654559939-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6c8654559939-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d6c8654559939-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6c8654559939-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d6c8654559939-16\">16</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6c8654559939-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tshark</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">lo0</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'tcp port 65432'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d6c8654559939-2\"><span class=\"crayon-e\">Capturing </span><span class=\"crayon-i\">on</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Loopback'</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6c8654559939-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0.000000</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-h\"> </span>→<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">TCP</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">68</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">53942</span><span class=\"crayon-h\"> </span>→<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">SYN</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Seq</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Win</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">65535</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Len</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">MSS</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">16344</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">WS</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">32</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TSval</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">940533635</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TSecr</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">SACK_PERM</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d6c8654559939-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0.000057</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-h\"> </span>→<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">TCP</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">68</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-h\"> </span>→<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">53942</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">SYN</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ACK</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Seq</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Ack</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Win</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">65535</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Len</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">MSS</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">16344</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">WS</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">32</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TSval</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">940533635</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TSecr</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">940533635</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">SACK_PERM</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6c8654559939-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0.000068</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-h\"> </span>→<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">TCP</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">56</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">53942</span><span class=\"crayon-h\"> </span>→<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">ACK</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Seq</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Ack</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Win</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">408288</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Len</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TSval</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">940533635</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TSecr</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">940533635</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d6c8654559939-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0.000075</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-h\"> </span>→<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">TCP</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">56</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-e\">TCP </span><span class=\"crayon-e\">Window </span><span class=\"crayon-v\">Update</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-h\"> </span>→<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">53942</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">ACK</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Seq</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Ack</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Win</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">408288</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Len</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TSval</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">940533635</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TSecr</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">940533635</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6c8654559939-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0.000216</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-h\"> </span>→<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">TCP</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">202</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">53942</span><span class=\"crayon-h\"> </span>→<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">PSH</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ACK</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Seq</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Ack</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Win</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">408288</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Len</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">146</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TSval</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">940533635</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TSecr</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">940533635</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d6c8654559939-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">6</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0.000234</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-h\"> </span>→<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">TCP</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">56</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-h\"> </span>→<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">53942</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">ACK</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Seq</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Ack</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">147</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Win</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">408128</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Len</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TSval</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">940533635</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TSecr</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">940533635</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6c8654559939-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">7</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0.000627</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-h\"> </span>→<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">TCP</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">204</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-h\"> </span>→<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">53942</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">PSH</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ACK</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Seq</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Ack</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">147</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Win</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">408128</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Len</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">148</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TSval</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">940533635</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TSecr</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">940533635</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d6c8654559939-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">8</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0.000649</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-h\"> </span>→<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">TCP</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">56</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">53942</span><span class=\"crayon-h\"> </span>→<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">ACK</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Seq</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">147</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Ack</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">149</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Win</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">408128</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Len</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TSval</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">940533635</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TSecr</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">940533635</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6c8654559939-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">9</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0.000668</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-h\"> </span>→<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">TCP</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">56</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-h\"> </span>→<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">53942</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">FIN</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ACK</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Seq</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">149</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Ack</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">147</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Win</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">408128</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Len</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TSval</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">940533635</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TSecr</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">940533635</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d6c8654559939-12\"><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0.000682</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-h\"> </span>→<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">TCP</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">56</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">53942</span><span class=\"crayon-h\"> </span>→<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">ACK</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Seq</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">147</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Ack</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">150</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Win</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">408128</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Len</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TSval</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">940533635</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TSecr</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">940533635</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6c8654559939-13\"><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0.000687</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-h\"> </span>→<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">TCP</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">56</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-e\">TCP </span><span class=\"crayon-e\">Dup </span><span class=\"crayon-i\">ACK</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-p\">#1] 65432 → 53942 [ACK] Seq=150 Ack=147 Win=408128 Len=0 TSval=940533635 TSecr=940533635</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d6c8654559939-14\"><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">12</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0.000848</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-h\"> </span>→<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">TCP</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">56</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">53942</span><span class=\"crayon-h\"> </span>→<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">FIN</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ACK</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Seq</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">147</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Ack</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">150</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Win</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">408128</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Len</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TSval</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">940533635</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TSecr</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">940533635</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6c8654559939-15\"><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">13</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0.001004</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-h\"> </span>→<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">TCP</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">56</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">65432</span><span class=\"crayon-h\"> </span>→<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">53942</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">ACK</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Seq</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">150</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Ack</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">148</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Win</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">408128</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Len</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TSval</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">940533635</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TSecr</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">940533635</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d6c8654559939-16\"><span class=\"crayon-o\">^</span><span class=\"crayon-e\">C13 </span><span class=\"crayon-e\">packets </span><span class=\"crayon-v\">captured</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0121 seconds] -->\r\n<p></p>\n<h2 id=\"引用\">引用</h2>\n<p>这一节主要用来引用一些额外的信息和外部资源链接</p>\n<h3 id=\"python-文档\">Python 文档</h3>\n<ul>\n<li>Python’s <a href=\"https://docs.python.org/3/library/socket.html\">socket module</a></li>\n<li>Python’s <a href=\"https://docs.python.org/3/howto/sockets.html#socket-howto\">Socket Programming HOWTO</a></li>\n</ul>\n<h3 id=\"错误信息\">错误信息</h3>\n<p>下面这段话来自 python 的 socket 模块文档：</p>\n<blockquote><p>所有的错误都会触发异常，像无效参数类型和内存不足的常见异常可以被抛出；从 Python 3.3 开始，与 socket 或地址语义相关的错误会引发 OSError 或其子类之一的异 常 <a href=\"https://docs.python.org/3/library/socket.html\">引用</a></p></blockquote>\n<p>异常 | <code>errno</code> 常量 | 说明 BlockingIOError | EWOULDBLOCK | 资源暂不可用，比如在非阻塞模式下调用 <code>send()</code> 方法，对方太繁忙面没有读取，发送队列满了，或者网络有问题 OSError | EADDRINUSE | 端口被战用，确保没有其它的进程与当前的程序运行在同一地址/端口上，你的服务器设置了 <code>SO_REUSEADDR</code> 参数 ConnectionResetError | ECONNRESET | 连接被重置，远端的进程崩溃，或者 socket 意外关闭，或是有防火墙或链路上的设配有问题 TimeoutError | ETIMEDOUT | 操作超时，对方没有响应 ConnectionRefusedError | ECONNREFUSED | 连接被拒绝，没有程序监听指定的端口</p>\n<h3 id=\"socket-地址族\">socket 地址族</h3>\n<p><code>socket.AF_INET</code> 和 <code>socket.AF_INET6</code> 是 <code>socket.socket()</code> 方法调用的第一个参数 ，表示地址协议族，API 使用了一个期望传入指定格式参数的地址，这取决于是 <code>AF_INET</code> 还是 <code>AF_INET6</code></p>\n<p>地址族 | 协议 | 地址元组 | 说明 – | – | – | – socket.AF_INET | IPv4 | (host, port) | host 参数是个如 <code>www.example.com</code> 的主机名称，或者如 <code>10.1.2.3</code> 的 IPv4 地址 socket.AF_INET6 | IPv6 | (host, port, flowinfo, scopeid) | 主机名同上，IPv6 地址 如：<code>fe80::6203:7ab:fe88:9c23</code>，flowinfo 和 scopeid 分别表示 C 语言结构体 <code>sockaddr_in6</code> 中的 <code>sin6_flowinfo</code> 和 <code>sin6_scope_id</code> 成员</p>\n<p>注意下面这段 python socket 模块中关于 host 值和地址元组文档</p>\n<blockquote><p>对于 IPv4 地址，使用主机地址的方式有两种：<code>''</code> 空字符串表示 <code>INADDR_ANY</code>，字符 <code>''</code> 表示 <code>INADDR_BROADCAST</code>，这个行为和 IPv6 不兼容，因此如果你的 程序中使用的是 IPv6 就应该避免这种做法。<a href=\"https://docs.python.org/3/library/socket.html#socket-families\">源文档 </a></p></blockquote>\n<p>我在本教程中使用了 IPv4 地址，但是如果你的机器支持，也可以试试 IPv6 地址。<code>socket.getaddrinfo()</code> 方法会返回五个元组的序列，这包括所有创建 socket 连接的必要参数，<code>socket.getaddrinfo()</code> 方法理解并处理传入的 IPv6 地址和主机名</p>\n<p>下面的例子中程序将返回一个通过 TCP 连接到 <code>example.org</code> 80 端口上的地址信息：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d6cf501328369\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; socket.getaddrinfo(\"example.org\", 80, proto=socket.IPPROTO_TCP)\r\n[(, ,\r\n 6, '', ('2606:2800:220:1:248:1893:25c8:1946', 80, 0, 0)),\r\n (, ,\r\n 6, '', ('93.184.216.34', 80))]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6cf501328369-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d6cf501328369-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6cf501328369-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d6cf501328369-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6cf501328369-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6cf501328369-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">socket</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getaddrinfo</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"example.org\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">80</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">proto</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">socket</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">IPPROTO_TCP</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d6cf501328369-2\"><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6cf501328369-3\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'2606:2800:220:1:248:1893:25c8:1946'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">80</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d6cf501328369-4\"><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6cf501328369-5\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'93.184.216.34'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">80</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>如果 IPv6 可用的话结果可能有所不同，上面返回的值可以被用于 <code>socket.socket()</code> 和 <code>socket.connect()</code> 方法调用的参数，在 python socket 模块文档中的 <a href=\"https://docs.python.org/3/library/socket.html#example\">示例 </a> 一节中有客户端和服务端 程序</p>\n<h3 id=\"使用主机名\">使用主机名</h3>\n<p>这一节主要适用于使用 <code>bind()</code> 和 <code>connect()</code> 或 <code>connect_ex()</code> 方法时如何使用主机名，然而当你使用回环地址做为主机名时，它总是会解析到你期望的地址。这刚好与客户端使用主机名的场景相反，它需要 DNS 解析的过程，比如 <code>www.example.com</code></p>\n<p>下面一段来自 python socket 模块文档</p>\n<blockquote><p>如果你主机名称做为 IPv4/v6 socket 地址的 host 部分，程序可能会出现非预期的结果 ，由于 python 使用了 DNS 查找过程中的第一个结果，socket 地址会被解析成与真正的 IPv4/v6 地址不同的其它地址，这取决于 DNS 解析和你的 host 文件配置。如果想得到 确定的结果，请使用数字格式的地址做为 host 参数的值 <a href=\"https://docs.python.org/3/library/socket.html\">源文档 </a></p></blockquote>\n<p>通常回环地址 <code>localhost</code> 会被解析到 <code>127.0.0.1</code> 或 <code>::1</code> 上，你的系统可能就是这么设置的，也可能不是。这取决于你系统配置，与所有 IT 相关的事情一样，总会有例外的情况，没办法完全保证 localhost 被解析到了回环地址上</p>\n<p>比如在 Linux 上，查看 <code>man nsswitch.conf</code> 的结果，域名切换配置文件，还有另外一个 macOS 和 Linux 通用的配置文件地址是：<code>/etc/hosts</code>，在 windows 上则是<code>C:\\Windows\\System32\\drivers\\etc\\hosts</code>，hosts 文件包含了一个文本格式的静态域名地址映射表，总之 DNS 也是一个难题</p>\n<p>有趣的是，在撰写这篇文章的时候（2018 年 6 月），有一个关于 <a href=\"https://tools.ietf.org/html/draft-ietf-dnsop-let-localhost-be-localhost-02\">让 localhost 成为真正的 localhost</a>的 RFC 草案，讨论就是围绕着 localhost 使用的情况开展的</p>\n<p>最重要的一点是你要理解当你在应用程序中使用主机名时，返回的地址可能是任何东西，如果你有一个安全性敏感的应用程序，不要使用主机名。取决于你的应用程序和环境，这可能会困扰到你</p>\n<p><strong>注意：</strong> 安全方面的考虑和最佳实践总是好的，即使你的程序不是安全敏感型的应用。如果你的应用程序访问了网络，那它就应该是安全的稳定的。这表示至少要做到以下几点：</p>\n<ul>\n<li>经常会有系统软件升级和安全补丁，包括 python，你是否使用了第三方的库？如果是的话，确保他们能正常工作并且更新到了新版本</li>\n<li>尽量使用专用防火墙或基于主机的防火墙来限制与受信任系统的连接</li>\n<li>DNS 服务是如何配置的？你是否信任配置内容及其配置者</li>\n<li>在调用处理其他代码之前，请确保尽可能地对请求数据进行了清理和验证，还要为此添加测试用例，并且经常运行</li>\n</ul>\n<p>无论是否使用主机名称，你的应用程序都需要支持安全连接（加密授权），你可能会用到 <a href=\"https://en.wikipedia.org/wiki/Transport_Layer_Security\">TLS</a>，这是一个超越了本教程的范围的话题。可以从 python 的 <a href=\"https://docs.python.org/3/library/ssl.html\">SSL</a> 模块文档了解如何开始使用它，这个协议和你的浏览器使用的安全协议是一样的</p>\n<p>考虑到接口、IP 地址、域名解析这些「变量」，你应该怎么应对？如果你还没有网络应用程序审查流程，可以使用以下建议：</p>\n<p>应用程序 | 使用 | 建议 – | – | – 服务端 | 回环地址 | 使用 IP 地址 127.0.0.1 或 ::1 服务端 | 以太网地址 | 使用 IP 地址，比如：10.1.2.3，使用空字符串表示本机所有 IP 地址 客户端 | 回环地址 | 使用 IP 地址 127.0.0.1 或 ::1 客户端 | 以太网地址 | 使用统一的不依赖域名解析的 IP 地址，特殊情况下才会使用主机地址，查看上面的安全提示</p>\n<p>对于客户端或者服务端来说，如果你需要授权连接到主机，请查看如何使用 TLS</p>\n<h3 id=\"阻塞调用\">阻塞调用</h3>\n<p>如果一个 socket 函数或者方法使你的程序挂起，那么这个就是个阻塞调用，比如 accept(), connect(), send(), 和 recv() 都是 <strong>阻塞</strong> 的，它们不会立即返回，阻塞调用在返回前必须等待系统调用 (I/O) 完成。所以调用者 —— 你，会被阻止直到系统调用结束或者超过延迟时间或者有错误发生</p>\n<p>阻塞的 socket 调用可以设置成非阻塞的模式，这样他们就可以立即返回。如果你想做到这一点，就得重构并重新设计你的应用程序</p>\n<p>由于调用直接返回了，但是数据确没就绪，被调用者处于等待网络响应的状态，没法完成它的工作，这种情况下，当前 socket 的状态码 errno 应该是 <code>socket.EWOULDBLOCK</code>。<code>setblocking()</code> 方法是支持非阻塞模式的</p>\n<p>默认情况下，socket 会以阻塞模式创建，查看 <a href=\"https://docs.python.org/3/library/socket.html#notes-on-socket-timeouts\">socket 延迟的注意事项</a> 中三种模式的解释</p>\n<h3 id=\"关闭连接\">关闭连接</h3>\n<p>有趣的是 TCP 连接一端打开，另一端关闭的状态是完全合法的，这被称做 TCP「半连接」，是否需要这种保持状态是由应用程序决定的，通常来说不需要。这种状态下，关闭方将不能发送任何数据，它只能接收数据</p>\n<p>我不是在提倡你采用这种方法，但是作为一个例子，HTTP 使用了一个名为「Connection」的头来标准化规定应用程序是否关闭或者保持连接状态，更多内容请查看 <a href=\"https://tools.ietf.org/html/rfc7230#section-6.3\">RFC 7230 中 6.3 节, HTTP 协议 (HTTP/1.1): 消息语法与路由</a></p>\n<p>当你在设计应用程序及其应用层协议的时候，最好先了解一下如何关闭连接，有时这很简单而且很明显，或者采取一些可以实现的原型，这取决于你的应用程序以及消息循环如何被处理成期望的数据，只要确保 socket 在完成工作后总是能正确关闭</p>\n<h3 id=\"字节序\">字节序</h3>\n<p>查看维基百科 <a href=\"https://zh.wikipedia.org/wiki/%E5%AD%97%E8%8A%82%E5%BA%8F\">字节序</a> 中关于不同的 CPU 是如何在内存中存储字节序列的，处理单个字节时没有任何问题，但是当把多个字节处理成单个值（四字节整型）时，如果和你通信的另一端使用了不同的字节序时字节顺序需要被反转</p>\n<p>字节顺序对于字符文本来说也很重要，字符文本通过表示为多字节的序列，就像 Unicode 一样。除非你只使用 <code>true</code> 和 ASCII 字符来控制客户端和服务端的实现，否则使用 utf-8 格式或者支持字节序标识(BOM) 的 Unicode 字符集会比较合适</p>\n<p>在应用层协议中明确的规定使用编码格式是很重要的，你可以规定所有的文本都使用 utf-8 或者用「content-encoding」头指定编码格式，这将使你的程序不需要检测编码方式，当然也应该尽量避免这么做</p>\n<p>当数据被调用存储到了文件或者数据库中而且又没有数据的元信息的时候，问题就很麻烦了，当数据被传到其它端，它将试着检测数据的编码方式。有关讨论，请参阅 Wikipedia 的 <a href=\"https://en.wikipedia.org/wiki/Unicode\">Unicode</a> 文章，它引用了 <a href=\"https://tools.ietf.org/html/rfc3629#page-6\">RFC 3629:UTF-8, a transformation format of ISO 10646</a></p>\n<blockquote><p>然而 UTF-8 的标准 RFC 3629 中推荐禁止在 UTF-8 协议中使用标记字节序 (BOM)，但是 讨 论了无法实现的情况，最大的问题在于如何使用一种模式在不依赖 BOM 的情况下区分 UTF-8 和其它编码方式</p></blockquote>\n<p>避开这些问题的方法就是总是存储数据使用的编码方式，换句话说，如果不只用 utf-8 格式的编码或者其它的带有 BOM 的编码就要尝试以某种方式将编码方式存储为元数据，然后你就可以在数据上附加编码的头信息，告诉接收者编码方式</p>\n<p>TCP/IP 使用的字节顺序是 <a href=\"https://en.wikipedia.org/wiki/Endianness#Big\">big-endian</a>，被称做网络序。网络序被用来表示底层协议栈中的整型数字，好比 IP 地址和端口号，python 的 socket 模块有几个函数可以把这种整型数字从网络字节序转换成主机字节序</p>\n<p>函数 | 说明 – | – socket.ntohl(x) | 把 32 位的正整型数字从网络字节序转换成主机字节序，在网络字节序和主机字节序相同的机器上这是个空操作，否则将是一个 4 字节的交换操作 socket.ntohs(x) | 把 16 位的正整型数字从网络字节序转换成主机字节序，在网络字节序和主机字节序相同的机器上这是个空操作，否则将是一个 2 字节的交换操作 socket.htonl(x) | 把 32 位的正整型数字从主机字节序转换成网络字节序，在网络字节序和主机字节序相同的机器上这是个空操作，否则将是一个 4 字节的交换操作 socket.htons(x) | 把 16 位的正整型数字从主机字节序转换成网络字节序，在网络字节序和主机字节序相同的机器上这是个空操作，否则将是一个 2 字节的交换操作</p>\n<p>你也可以使用 <a href=\"https://docs.python.org/3/library/struct.html\">struct</a> 模块打包或者解包二进制数据（使用格式化字符串）：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4e04e2d6d9219337860\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nimport struct\r\nnetwork_byteorder_int = struct.pack('&gt;H', 256)\r\npython_int = struct.unpack('&gt;H', network_byteorder_int)[0]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6d9219337860-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4e04e2d6d9219337860-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4e04e2d6d9219337860-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6d9219337860-1\"><span class=\"crayon-e\">import </span><span class=\"crayon-t\">struct</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4e04e2d6d9219337860-2\"><span class=\"crayon-v\">network_byteorder_int</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">struct</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pack</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'&gt;H'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">256</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4e04e2d6d9219337860-3\"><span class=\"crayon-v\">python_int</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">struct</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">unpack</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'&gt;H'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">network_byteorder_int</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p></p>\n<h2 id=\"结论\">结论</h2>\n<p>我们在本教程中介绍了很多内容，网络和 socket 是很大的一个主题，如果你对它们都比较陌生，不要被这些规则和大写字母术语吓到</p>\n<p>为了理解所有的东西如何工作的，有很多部分需要了解。但是，就像 python 一样，当你花时间去了解每个独立的部分时它才开始变得有意义</p>\n<p>我们看过了 python socket 模块中底层的一些 API，并了解了如何使用它们创建客户端服务器应用程序。我们也创建了一个自定义类来做为应用层的协议，并用它在不同的端点之间交换数据，你可以使用这个类并在些基础上快速且简单地构建出一个你自己的 socket 应用程序</p>\n<p>你可以在 Github 上找到 <a href=\"https://github.com/realpython/materials/tree/master/python-sockets-tutorial\">源代码</a></p>\n<p>恭喜你坚持到最后！你现在就可以在程序中很好地使用 socket 了</p>\n<p>我希望这个教程能为你开始 socket 编程旅途中提供一些信息、示例、或者灵感</p>\n<p> </p>\n<p><a href=\"https://keelii.com/2018/09/24/socket-programming-in-python/\">翻译版原文</a></p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89290\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89290votetotal\">3</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89290\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 23 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/keelii\">keelii</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/keelii\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2016/08/3b953d3d7c4ae0591aa2783678869f3b.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            It’s not who you are underneath, it’s what you do that defines you        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/keelii\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://python.jobbole.com/author/keelii/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/keelii/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 7</a> · <a title=\"我的网站\" target=\"_blank\" href=\"https://keelii.github.io/\"><i class=\"fa fa-link\"></i></a> <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/keelii\"><i class=\"fa fa-weibo\"></i></a> <a title=\"个人微信：keelii\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a> <a title=\"GitHub主页\" target=\"_blank\" href=\"https://github.com/keelii\"><i class=\"fa fa-github\"></i></a> <a title=\"Twitter主页\" target=\"_blank\" href=\"https://twitter.com/keelii\"><i class=\"fa fa-twitter\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"title": "让 Python 代码更易维护的七种武器", "url": "http://python.jobbole.com/89297/", "url_object_id": "b58acd179fdf9ea36b7aa070280b6732", "create_date": "2019-06-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/09/140e53a51d881bfa3c6a0c4d6f870d3e.jpg"], "praise_nums": 1, "comment_nums": 0, "fav_nums": 4, "tags": "基础知识,武器", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/article/18/7/7-python-libraries-more-maintainable-code\"> Jeff Triplett</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-10059-1.html\">linux中国-Hank Chow</a>   </div><div id=\"article_content\">\n<blockquote>\n<div>检查你的代码的质量，通过这些外部库使其更易维护。</div>\n</blockquote>\n<div></div>\n<blockquote><p>可读性很重要。<br>\n— <a href=\"https://www.python.org/dev/peps/pep-0020/\">Python 之禅</a>The Zen of Python，Tim Peters</p></blockquote>\n<p>随着软件项目进入“维护模式”，对可读性和编码标准的要求很容易落空（甚至从一开始就没有建立过那些标准）。然而，在代码库中保持一致的代码风格和测试标准能够显著减轻维护的压力，也能确保新的开发者能够快速了解项目的情况，同时能更好地全程保持应用程序的质量。</p>\n<p>使用外部库来检查代码的质量不失为保护项目未来可维护性的一个好方法。以下会推荐一些我们最喜爱的<a href=\"https://en.wikipedia.org/wiki/Lint_(software)\">检查代码</a>（包括检查 PEP 8 和其它代码风格错误）的库，用它们来强制保持代码风格一致，并确保在项目成熟时有一个可接受的测试覆盖率。</p>\n<h1 id=\"toc_1\">检查你的代码风格</h1>\n<p><a href=\"https://www.python.org/dev/peps/pep-0008/\">PEP 8</a> 是 Python 代码风格规范，它规定了类似行长度、缩进、多行表达式、变量命名约定等内容。尽管你的团队自身可能也会有稍微不同于 PEP 8 的代码风格规范，但任何代码风格规范的目标都是在代码库中强制实施一致的标准，使代码的可读性更强、更易于维护。下面三个库就可以用来帮助你美化代码。</p>\n<h2 id=\"toc_2\">1、 Pylint</h2>\n<p><a href=\"https://www.pylint.org/\">Pylint</a> 是一个检查违反 PEP 8 规范和常见错误的库。它在一些流行的<a href=\"https://pylint.readthedocs.io/en/latest/user_guide/ide-integration.html\">编辑器和 IDE</a> 中都有集成，也可以单独从命令行运行。</p>\n<p>执行 <code>pip install pylint</code> 安装 Pylint 。然后运行 <code>pylint [options] path/to/dir</code> 或者 <code>pylint [options] path/to/module.py</code> 就可以在命令行中使用 Pylint，它会向控制台输出代码中违反规范和出现错误的地方。</p>\n<p>你还可以使用 <code>pylintrc</code> <a href=\"https://pylint.readthedocs.io/en/latest/user_guide/run.html#command-line-options\">配置文件</a>来自定义 Pylint 对哪些代码错误进行检查。</p>\n<h2 id=\"toc_3\">2、 Flake8</h2>\n<p><a href=\"http://flake8.pycqa.org/en/latest/\">Flake8</a> 是“将 PEP 8、Pyflakes（类似 Pylint）、McCabe（代码复杂性检查器）和第三方插件整合到一起，以检查 Python 代码风格和质量的一个 Python 工具”。</p>\n<p>执行 <code>pip install flake8</code> 安装 flake8 ，然后执行 <code>flake8 [options] path/to/dir</code> 或者 <code>flake8 [options] path/to/module.py</code> 可以查看报出的错误和警告。</p>\n<p>和 Pylint 类似，Flake8 允许通过<a href=\"http://flake8.pycqa.org/en/latest/user/configuration.html#configuration-locations\">配置文件</a>来自定义检查的内容。它有非常清晰的文档，包括一些有用的<a href=\"http://flake8.pycqa.org/en/latest/user/using-hooks.html\">提交钩子</a>，可以将自动检查代码纳入到开发工作流程之中。</p>\n<p>Flake8 也可以集成到一些流行的编辑器和 IDE 当中，但在文档中并没有详细说明。要将 Flake8 集成到喜欢的编辑器或 IDE 中，可以搜索插件（例如 <a href=\"https://github.com/SublimeLinter/SublimeLinter-flake8\">Sublime Text 的 Flake8 插件</a>）。</p>\n<h2 id=\"toc_4\">3、 Isort</h2>\n<p><a href=\"https://github.com/timothycrosley/isort\">Isort</a> 这个库能将你在项目中导入的库按字母顺序排序，并将其<a href=\"https://github.com/timothycrosley/isort#how-does-isort-work\">正确划分为不同部分</a>（例如标准库、第三方库、自建的库等）。这样提高了代码的可读性，并且可以在导入的库较多的时候轻松找到各个库。</p>\n<p>执行 <code>pip install isort</code> 安装 isort，然后执行 <code>isort path/to/module.py</code> 就可以运行了。<a href=\"https://github.com/timothycrosley/isort#using-isort\">文档</a>中还提供了更多的配置项，例如通过<a href=\"https://github.com/timothycrosley/isort#configuring-isort\">配置</a> <code>.isort.cfg</code> 文件来决定 isort 如何处理一个库的多行导入。</p>\n<p>和 Flake8、Pylint 一样，isort 也提供了将其与流行的<a href=\"https://github.com/timothycrosley/isort/wiki/isort-Plugins\">编辑器和 IDE</a> 集成的插件。</p>\n<h1 id=\"toc_5\">分享你的代码风格</h1>\n<p>每次文件发生变动之后都用命令行手动检查代码是一件痛苦的事，你可能也不太喜欢通过运行 IDE 中某个插件来实现这个功能。同样地，你的同事可能会用不同的代码检查方式，也许他们的编辑器中也没有那种插件，甚至你自己可能也不会严格检查代码和按照警告来更正代码。总之，你分享出来的代码库将会逐渐地变得混乱且难以阅读。</p>\n<p>一个很好的解决方案是使用一个库，自动将代码按照 PEP 8 规范进行格式化。我们推荐的三个库都有不同的自定义级别来控制如何格式化代码。其中有一些设置较为特殊，例如 Pylint 和 Flake8 ，你需要先行测试，看看是否有你无法忍受但又不能修改的默认配置。</p>\n<h2 id=\"toc_6\">4、 Autopep8</h2>\n<p><a href=\"https://github.com/hhatto/autopep8\">Autopep8</a> 可以自动格式化指定的模块中的代码，包括重新缩进行、修复缩进、删除多余的空格，并重构常见的比较错误（例如布尔值和 <code>None</code> 值）。你可以查看文档中完整的<a href=\"https://github.com/hhatto/autopep8#id4\">更正列表</a>。</p>\n<p>运行 <code>pip install --upgrade autopep8</code> 安装 Autopep8。然后执行 <code>autopep8 --in-place --aggressive --aggressive </code> 就可以重新格式化你的代码。<code>aggressive</code> 选项的数量表示 Auotopep8 在代码风格控制上有多少控制权。在这里可以详细了解 <a href=\"https://github.com/hhatto/autopep8#id5\">aggressive</a> 选项。</p>\n<h2 id=\"toc_7\">5、 Yapf</h2>\n<p><a href=\"https://github.com/google/yapf\">Yapf</a> 是另一种有自己的<a href=\"https://github.com/google/yapf#usage\">配置项</a>列表的重新格式化代码的工具。它与 Autopep8 的不同之处在于它不仅会指出代码中违反 PEP 8 规范的地方，还会对没有违反 PEP 8 但代码风格不一致的地方重新格式化，旨在令代码的可读性更强。</p>\n<p>执行 <code>pip install yapf</code> 安装 Yapf，然后执行 <code>yapf [options] path/to/dir</code> 或 <code>yapf [options] path/to/module.py</code> 可以对代码重新格式化。<a href=\"https://github.com/google/yapf#usage\">定制选项</a>的完整列表在这里。</p>\n<h2 id=\"toc_8\">6、 Black</h2>\n<p><a href=\"https://github.com/ambv/black\">Black</a> 在代码检查工具当中算是比较新的一个。它与 Autopep8 和 Yapf 类似，但限制较多，没有太多的自定义选项。这样的好处是你不需要去决定使用怎么样的代码风格，让 Black 来给你做决定就好。你可以在这里查阅 Black <a href=\"https://github.com/ambv/black#command-line-options\">有限的自定义选项</a>以及<a href=\"https://github.com/ambv/black#pyprojecttoml\">如何在配置文件中对其进行设置</a>。</p>\n<p>Black 依赖于 Python 3.6+，但它可以格式化用 Python 2 编写的代码。执行 <code>pip install black</code> 安装 Black，然后执行 <code>black path/to/dir</code> 或 <code>black path/to/module.py</code> 就可以使用 Black 优化你的代码。</p>\n<h1 id=\"toc_9\">检查你的测试覆盖率</h1>\n<p>如果你正在进行编写测试，你需要确保提交到代码库的新代码都已经测试通过，并且不会降低测试覆盖率。虽然测试覆盖率不是衡量测试有效性和充分性的唯一指标，但它是确保项目遵循基本测试标准的一种方法。对于计算测试覆盖率，我们推荐使用 Coverage 这个库。</p>\n<h2 id=\"toc_10\">7、 Coverage</h2>\n<p><a href=\"https://coverage.readthedocs.io/en/latest/\">Coverage</a> 有数种显示测试覆盖率的方式，包括将结果输出到控制台或 HTML 页面，并指出哪些具体哪些地方没有被覆盖到。你可以通过<a href=\"https://coverage.readthedocs.io/en/latest/config.html\">配置文件</a>自定义 Coverage 检查的内容，让你更方便使用。</p>\n<p>执行 <code>pip install coverage</code> 安装 Converage 。然后执行 <code>coverage [path/to/module.py] [args]</code> 可以运行程序并查看输出结果。如果要查看哪些代码行没有被覆盖，执行 <code>coverage report -m</code> 即可。</p>\n<h1 id=\"toc_11\">持续集成工具</h1>\n<p>持续集成Continuous integration（CI）是在合并和部署代码之前自动检查代码风格错误和测试覆盖率最小值的过程。很多免费或付费的工具都可以用于执行这项工作，具体的过程不在本文中赘述，但 CI 过程是令代码更易读和更易维护的重要步骤，关于这一部分可以参考 <a href=\"https://travis-ci.org/\">Travis CI</a> 和 <a href=\"https://jenkins.io/\">Jenkins</a>。</p>\n<p>以上这些只是用于检查 Python 代码的各种工具中的其中几个。如果你有其它喜爱的工具，欢迎分享。</p>\n<p> </p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89297\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89297votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89297\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"title": "3 个用于数据科学的顶级 Python 库", "url": "http://python.jobbole.com/89302/", "url_object_id": "ecc8b64a91e23236e7069f84cf7d8633", "create_date": "2019-06-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/02/591d8b55a524f825dd29a22b8df70000.jpg"], "praise_nums": 1, "comment_nums": 0, "fav_nums": 0, "tags": "工具与框架,数据科学", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/article/18/9/top-3-python-libraries-data-science\">Dr. Michael J. Garbade</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-10080-1.html\">Linux中国/Lv Feng</a>   </div><blockquote><p>使用这些库把 Python 变成一个科学数据分析和建模工具。</p></blockquote>\n<p>Python 的许多特性，比如开发效率、代码可读性、速度等使之成为了数据科学爱好者的首选编程语言。对于想要升级应用程序功能的数据科学家和机器学习专家来说，Python 通常是最好的选择（比如，Andrey Bulezyuk 使用 Python 语言创造了一个优秀的<a href=\"https://www.liveedu.tv/andreybu/REaxr-machine-learning-model-python-sklearn-kera/oPGdP-machine-learning-model-python-sklearn-kera/\">机器学习应用程序</a>）。</p>\n<p>由于 Python 的广泛使用，因此它拥有大量的库，使得数据科学家能够很容易地完成复杂的任务，而且不会遇到许多编码困难。下面列出 3 个用于数据科学的顶级 Python 库。如果你想在数据科学这一领域开始你的职业生涯，就去了解一下它们吧。</p>\n<h3 id=\"toc_1\">NumPy</h3>\n<p><a href=\"http://www.numpy.org/\">NumPy</a>（数值 Python 的简称）是其中一个顶级数据科学库，它拥有许多有用的资源，从而帮助数据科学家把 Python 变成一个强大的科学分析和建模工具。ＮumPy 是在 BSD 许可证的许可下开源的，它是在科学计算中执行任务的基础 Python 库。SciPy 是一个更大的基于 Python 生态系统的开源工具，而 NumPy 是 SciPy 非常重要的一部分。</p>\n<p>NumPy 为 Python 提供了大量数据结构，从而能够轻松地执行多维数组和矩阵运算。除了用于求解线性代数方程和其它数学计算之外，NumPy 还可以用做不同类型通用数据的多维容器。</p>\n<p>此外，NumPy 还可以和其他编程语言无缝集成，比如 C/C++ 和 Fortran。NumPy 的多功能性使得它可以简单而快速地与大量数据库和工具结合。比如，让我们来看一下如何使用 NumPy（缩写成 <code>np</code>）来实现两个矩阵的乘法运算。</p>\n<p>我们首先导入 NumPy 库（在这些例子中，我将使用 Jupyter notebook）：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4ae4142592222192735\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nimport numpy as np</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4ae4142592222192735-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4ae4142592222192735-1\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>接下来，使用 <code>eye()</code> 函数来生成指定维数的单位矩阵：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4ae414259b178542452\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nmatrix_one = np.eye(3)\r\nmatrix_one</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4ae414259b178542452-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ae414259b178542452-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4ae414259b178542452-1\"><span class=\"crayon-v\">matrix_one</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">eye</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ae414259b178542452-2\"><span class=\"crayon-v\">matrix_one</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>输出如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4ae414259f845610095\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\narray([[1., 0., 0.],\r\n       [0., 1., 0.],\r\n       [0., 0., 1.]])</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4ae414259f845610095-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ae414259f845610095-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4ae414259f845610095-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4ae414259f845610095-1\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ae414259f845610095-2\"> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0.</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4ae414259f845610095-3\"> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0.</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>让我们生成另一个 3×3 矩阵。</p>\n<p>我们使用 <code>arange([starting number], [stopping number])</code> 函数来排列数字。注意，函数中的第一个参数是需要列出的初始数字，而后一个数字不包含在生成的结果中。</p>\n<p>另外，使用 <code>reshape()</code> 函数把原始生成的矩阵的维度改成我们需要的维度。为了使两个矩阵“可乘”，它们需要有相同的维度。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4ae41425a4571938610\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nmatrix_two = np.arange(1,10).reshape(3,3)\r\nmatrix_two</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425a4571938610-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ae41425a4571938610-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4ae41425a4571938610-1\"><span class=\"crayon-v\">matrix_two</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">reshape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ae41425a4571938610-2\"><span class=\"crayon-v\">matrix_two</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>输出如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4ae41425a7118045744\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\narray([[1, 2, 3],\r\n       [4, 5, 6],\r\n       [7, 8, 9]])</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425a7118045744-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ae41425a7118045744-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425a7118045744-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4ae41425a7118045744-1\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ae41425a7118045744-2\"> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4ae41425a7118045744-3\"> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>接下来，使用 <code>dot()</code> 函数将两个矩阵相乘。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4ae41425aa368017226\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nmatrix_multiply = np.dot(matrix_one, matrix_two)\r\nmatrix_multiply</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425aa368017226-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ae41425aa368017226-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4ae41425aa368017226-1\"><span class=\"crayon-v\">matrix_multiply</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">dot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">matrix_one</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">matrix_two</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ae41425aa368017226-2\"><span class=\"crayon-v\">matrix_multiply</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>相乘后的输出如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4ae41425ae287894375\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\narray([[1., 2., 3.],\r\n       [4., 5., 6.],\r\n       [7., 8., 9.]])</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425ae287894375-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ae41425ae287894375-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425ae287894375-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4ae41425ae287894375-1\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ae41425ae287894375-2\"> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">4.</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6.</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4ae41425ae287894375-3\"> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">7.</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8.</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9.</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>太好了！</p>\n<p>我们成功使用 NumPy 完成了两个矩阵的相乘，而不是使用普通冗长vanilla的 Python 代码。</p>\n<p>下面是这个例子的完整代码：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4ae41425b1082526452\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nimport numpy as np\r\n#生成一个 3x3 单位矩阵\r\nmatrix_one = np.eye(3)\r\nmatrix_one\r\n#生成另一个 3x3 矩阵以用来做乘法运算\r\nmatrix_two = np.arange(1,10).reshape(3,3)\r\nmatrix_two\r\n#将两个矩阵相乘\r\nmatrix_multiply = np.dot(matrix_one, matrix_two)\r\nmatrix_multiply</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425b1082526452-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ae41425b1082526452-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425b1082526452-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ae41425b1082526452-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425b1082526452-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ae41425b1082526452-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425b1082526452-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ae41425b1082526452-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425b1082526452-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ae41425b1082526452-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4ae41425b1082526452-1\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ae41425b1082526452-2\"><span class=\"crayon-p\">#生成一个 3x3 单位矩阵</span></div><div class=\"crayon-line\" id=\"crayon-5cf4ae41425b1082526452-3\"><span class=\"crayon-v\">matrix_one</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">eye</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ae41425b1082526452-4\"><span class=\"crayon-v\">matrix_one</span></div><div class=\"crayon-line\" id=\"crayon-5cf4ae41425b1082526452-5\"><span class=\"crayon-p\">#生成另一个 3x3 矩阵以用来做乘法运算</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ae41425b1082526452-6\"><span class=\"crayon-v\">matrix_two</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">reshape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4ae41425b1082526452-7\"><span class=\"crayon-v\">matrix_two</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ae41425b1082526452-8\"><span class=\"crayon-p\">#将两个矩阵相乘</span></div><div class=\"crayon-line\" id=\"crayon-5cf4ae41425b1082526452-9\"><span class=\"crayon-v\">matrix_multiply</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">dot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">matrix_one</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">matrix_two</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ae41425b1082526452-10\"><span class=\"crayon-v\">matrix_multiply</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p></p>\n<h3 id=\"toc_2\">Pandas</h3>\n<p><a href=\"http://pandas.pydata.org/\">Pandas</a> 是另一个可以提高你的 Python 数据科学技能的优秀库。就和 NumPy 一样，它属于 SciPy 开源软件家族，可以在 BSD 自由许可证许可下使用。</p>\n<p>Pandas 提供了多能而强大的工具，用于管理数据结构和执行大量数据分析。该库能够很好的处理不完整、非结构化和无序的真实世界数据，并且提供了用于整形、聚合、分析和可视化数据集的工具</p>\n<p>Pandas 中有三种类型的数据结构：</p>\n<ul>\n<li>Series：一维、相同数据类型的数组</li>\n<li>DataFrame：二维异型矩阵</li>\n<li>Panel：三维大小可变数组</li>\n</ul>\n<p>例如，我们来看一下如何使用 Panda 库（缩写成 <code>pd</code>）来执行一些描述性统计计算。</p>\n<p>首先导入该库：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4ae41425b5543376326\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nimport pandas as pd</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425b5543376326-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4ae41425b5543376326-1\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">pandas </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>然后，创建一个序列series字典：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4ae41425b8834668163\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nd = {'Name':pd.Series(['Alfrick','Michael','Wendy','Paul','Dusan','George','Andreas',\r\n   'Irene','Sagar','Simon','James','Rose']),\r\n   'Years of Experience':pd.Series([5,9,1,4,3,4,7,9,6,8,3,1]),\r\n   'Programming Language':pd.Series(['Python','JavaScript','PHP','C++','Java','Scala','React','Ruby','Angular','PHP','Python','JavaScript'])\r\n    }</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425b8834668163-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ae41425b8834668163-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425b8834668163-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ae41425b8834668163-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425b8834668163-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4ae41425b8834668163-1\"><span class=\"crayon-v\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'Name'</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Series</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'Alfrick'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'Michael'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'Wendy'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'Paul'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'Dusan'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'George'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'Andreas'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ae41425b8834668163-2\"> <span class=\"crayon-h\"> </span> <span class=\"crayon-s\">'Irene'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'Sagar'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'Simon'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'James'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'Rose'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4ae41425b8834668163-3\"> <span class=\"crayon-h\"> </span> <span class=\"crayon-s\">'Years of Experience'</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Series</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ae41425b8834668163-4\"> <span class=\"crayon-h\"> </span> <span class=\"crayon-s\">'Programming Language'</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Series</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'Python'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'JavaScript'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'PHP'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'C++'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'Java'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'Scala'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'React'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'Ruby'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'Angular'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'PHP'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'Python'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'JavaScript'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4ae41425b8834668163-5\"> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0022 seconds] -->\r\n<p>接下来，再创建一个数据框DataFrame：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4ae41425bc989057052\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndf = pd.DataFrame(d)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425bc989057052-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4ae41425bc989057052-1\"><span class=\"crayon-v\">df</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">DataFrame</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>输出是一个非常规整的表：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4ae41425bf501352868\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n      Name Programming Language  Years of Experience\r\n0   Alfrick               Python                    5\r\n1   Michael           JavaScript                    9\r\n2     Wendy                  PHP                    1\r\n3      Paul                  C++                    4\r\n4     Dusan                 Java                    3\r\n5    George                Scala                    4\r\n6   Andreas                React                    7\r\n7     Irene                 Ruby                    9\r\n8     Sagar              Angular                    6\r\n9     Simon                  PHP                    8\r\n10    James               Python                    3\r\n11     Rose           JavaScript                    1</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425bf501352868-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ae41425bf501352868-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425bf501352868-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ae41425bf501352868-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425bf501352868-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ae41425bf501352868-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425bf501352868-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ae41425bf501352868-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425bf501352868-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ae41425bf501352868-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425bf501352868-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ae41425bf501352868-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425bf501352868-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4ae41425bf501352868-1\"> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-e\">Name </span><span class=\"crayon-e\">Programming </span><span class=\"crayon-i\">Language</span><span class=\"crayon-h\"> </span> <span class=\"crayon-e\">Years </span><span class=\"crayon-e\">of </span><span class=\"crayon-i\">Experience</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ae41425bf501352868-2\"><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-i\">Alfrick</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-i\">Python</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">5</span></div><div class=\"crayon-line\" id=\"crayon-5cf4ae41425bf501352868-3\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-i\">Michael</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-i\">JavaScript</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">9</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ae41425bf501352868-4\"><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-i\">Wendy</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-i\">PHP</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5cf4ae41425bf501352868-5\"><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-i\">Paul</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-v\">C</span><span class=\"crayon-o\">++</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">4</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ae41425bf501352868-6\"><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-i\">Dusan</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-i\">Java</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">3</span></div><div class=\"crayon-line\" id=\"crayon-5cf4ae41425bf501352868-7\"><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-i\">George</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-i\">Scala</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">4</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ae41425bf501352868-8\"><span class=\"crayon-cn\">6</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-i\">Andreas</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-i\">React</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">7</span></div><div class=\"crayon-line\" id=\"crayon-5cf4ae41425bf501352868-9\"><span class=\"crayon-cn\">7</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-i\">Irene</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-i\">Ruby</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">9</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ae41425bf501352868-10\"><span class=\"crayon-cn\">8</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-i\">Sagar</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-i\">Angular</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">6</span></div><div class=\"crayon-line\" id=\"crayon-5cf4ae41425bf501352868-11\"><span class=\"crayon-cn\">9</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-i\">Simon</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-i\">PHP</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">8</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ae41425bf501352868-12\"><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-i\">James</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-i\">Python</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">3</span></div><div class=\"crayon-line\" id=\"crayon-5cf4ae41425bf501352868-13\"><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-i\">Rose</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-i\">JavaScript</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">1</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0073 seconds] -->\r\n<p>下面是这个例子的完整代码：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4ae41425c2441273003\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nimport pandas as pd\r\n#创建一个序列字典\r\nd = {'Name':pd.Series(['Alfrick','Michael','Wendy','Paul','Dusan','George','Andreas',\r\n   'Irene','Sagar','Simon','James','Rose']),\r\n   'Years of Experience':pd.Series([5,9,1,4,3,4,7,9,6,8,3,1]),\r\n   'Programming Language':pd.Series(['Python','JavaScript','PHP','C++','Java','Scala','React','Ruby','Angular','PHP','Python','JavaScript'])\r\n    }\r\n\r\n#创建一个数据框\r\ndf = pd.DataFrame(d)\r\nprint(df)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425c2441273003-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ae41425c2441273003-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425c2441273003-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ae41425c2441273003-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425c2441273003-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ae41425c2441273003-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425c2441273003-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ae41425c2441273003-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425c2441273003-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ae41425c2441273003-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425c2441273003-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4ae41425c2441273003-1\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">pandas </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ae41425c2441273003-2\"><span class=\"crayon-p\">#创建一个序列字典</span></div><div class=\"crayon-line\" id=\"crayon-5cf4ae41425c2441273003-3\"><span class=\"crayon-v\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'Name'</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Series</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'Alfrick'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'Michael'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'Wendy'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'Paul'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'Dusan'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'George'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'Andreas'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ae41425c2441273003-4\"> <span class=\"crayon-h\"> </span> <span class=\"crayon-s\">'Irene'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'Sagar'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'Simon'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'James'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'Rose'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4ae41425c2441273003-5\"> <span class=\"crayon-h\"> </span> <span class=\"crayon-s\">'Years of Experience'</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Series</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ae41425c2441273003-6\"> <span class=\"crayon-h\"> </span> <span class=\"crayon-s\">'Programming Language'</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Series</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'Python'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'JavaScript'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'PHP'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'C++'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'Java'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'Scala'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'React'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'Ruby'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'Angular'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'PHP'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'Python'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'JavaScript'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4ae41425c2441273003-7\"> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ae41425c2441273003-8\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4ae41425c2441273003-9\"><span class=\"crayon-p\">#创建一个数据框</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ae41425c2441273003-10\"><span class=\"crayon-v\">df</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">DataFrame</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4ae41425c2441273003-11\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0026 seconds] -->\r\n<p></p>\n<h3 id=\"toc_3\">Matplotlib</h3>\n<p><a href=\"https://matplotlib.org/\">Matplotlib</a> 也是 Scipy 核心包的一部分，并且在 BSD 许可证下可用。它是一个非常流行的科学库，用于实现简单而强大的可视化。你可以使用这个 Python 数据科学框架来生成曲线图、柱状图、直方图以及各种不同形状的图表，并且不用担心需要写很多行的代码。例如，我们来看一下如何使用 Matplotlib 库来生成一个简单的柱状图。</p>\n<p>首先导入该库：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4ae41425c6378382457\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfrom matplotlib import pyplot as plt</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425c6378382457-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4ae41425c6378382457-1\"><span class=\"crayon-e\">from </span><span class=\"crayon-e\">matplotlib </span><span class=\"crayon-e\">import </span><span class=\"crayon-e\">pyplot </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>然后生成 x 轴和 y 轴的数值：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4ae41425c9901718698\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nx = [2, 4, 6, 8, 10]\r\ny = [10, 11, 6, 7, 4]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425c9901718698-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ae41425c9901718698-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4ae41425c9901718698-1\"><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ae41425c9901718698-2\"><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>接下来，调用函数来绘制柱状图：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4ae41425cd066418556\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nplt.bar(x,y)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425cd066418556-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4ae41425cd066418556-1\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">bar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>最后，显示图表：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4ae41425d0205703801\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nplt.show()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425d0205703801-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4ae41425d0205703801-1\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">show</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>柱状图如下：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/10/7d5fc6f2c2e9acaa3e99033806335ba6.png\" alt=\"\"></p>\n<p>下面是这个例子的完整代码：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4ae41425d3248585245\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#导入 Matplotlib 库\r\nfrom matplotlib import pyplot as plt\r\n#和 import matplotlib.pyplot as plt 一样\r\n \r\n#生成 x 轴的数值\r\nx = [2, 4, 6, 8, 10]\r\n \r\n#生成 y 轴的数值\r\ny = [10, 11, 6, 7, 4]\r\n \r\n#调用函数来绘制柱状图\r\nplt.bar(x,y)\r\n \r\n#显示图表\r\nplt.show()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425d3248585245-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ae41425d3248585245-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425d3248585245-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ae41425d3248585245-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425d3248585245-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ae41425d3248585245-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425d3248585245-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ae41425d3248585245-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425d3248585245-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ae41425d3248585245-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425d3248585245-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ae41425d3248585245-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425d3248585245-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ae41425d3248585245-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4ae41425d3248585245-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4ae41425d3248585245-1\"><span class=\"crayon-p\">#导入 Matplotlib 库</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ae41425d3248585245-2\"><span class=\"crayon-e\">from </span><span class=\"crayon-e\">matplotlib </span><span class=\"crayon-e\">import </span><span class=\"crayon-e\">pyplot </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span></div><div class=\"crayon-line\" id=\"crayon-5cf4ae41425d3248585245-3\"><span class=\"crayon-p\">#和 import matplotlib.pyplot as plt 一样</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ae41425d3248585245-4\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4ae41425d3248585245-5\"><span class=\"crayon-p\">#生成 x 轴的数值</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ae41425d3248585245-6\"><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4ae41425d3248585245-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ae41425d3248585245-8\"><span class=\"crayon-p\">#生成 y 轴的数值</span></div><div class=\"crayon-line\" id=\"crayon-5cf4ae41425d3248585245-9\"><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ae41425d3248585245-10\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4ae41425d3248585245-11\"><span class=\"crayon-p\">#调用函数来绘制柱状图</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ae41425d3248585245-12\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">bar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4ae41425d3248585245-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ae41425d3248585245-14\"><span class=\"crayon-p\">#显示图表</span></div><div class=\"crayon-line\" id=\"crayon-5cf4ae41425d3248585245-15\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">show</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p></p>\n<h3 id=\"toc_4\">总结</h3>\n<p>Python 编程语言非常擅长数据处理和准备，但是在科学数据分析和建模方面就没有那么优秀了。幸好有这些用于<a href=\"https://www.liveedu.tv/guides/data-science/\">数据科学</a>的顶级 Python 框架填补了这一空缺，从而你能够进行复杂的数学计算以及创建复杂模型，进而让数据变得更有意义。</p>\n<p>你还知道其它的 Python 数据挖掘库吗？你的使用经验是什么样的？请在下面的评论中和我们分享。</p>\n<div></div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89302\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89302votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89302\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"title": "简化 Django 开发的八个 Python 包", "url": "http://python.jobbole.com/89305/", "url_object_id": "82de0bcbe01170c8e81f4d7c3de5a05d", "create_date": "2019-06-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/10/bfa0d07e7eb2fac2eb80cd5df9567931.jpg"], "praise_nums": 2, "comment_nums": 0, "fav_nums": 2, "tags": "基础知识,Django", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/article/18/9/django-packages\">Jeff Triplett</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-10085-1.html\">linux中国-belitex</a>   </div><div id=\"article_content\">\n<blockquote><p>这个月的 Python 专栏将介绍一些 Django 包，它们有益于你的工作，以及你的个人或业余项目。</p></blockquote>\n<p>Django 开发者们，在这个月的 Python 专栏中，我们会介绍一些能帮助你们的软件包。这些软件包是我们最喜欢的 <a href=\"https://www.djangoproject.com/\">Django</a> 库，能够节省开发时间，减少样板代码，通常来说，这会让我们的生活更加轻松。我们为 Django 应用准备了六个包，为 Django 的 REST 框架准备了两个包。几乎所有我们的项目里，都用到了这些包，真的，不是说笑。</p>\n<p>不过在继续阅读之前，请先看看我们关于<a href=\"https://opensource.com/article/18/1/10-tips-making-django-admin-more-secure\">让 Django 管理后台更安全</a>的几个提示，以及这篇关于 <a href=\"https://opensource.com/business/15/12/5-favorite-open-source-django-packages\">5 个最受欢迎的开源 Django 包</a> 的文章。</p>\n<h1 id=\"toc_1\">有用又省时的工具集合：django-extensions</h1>\n<p><a href=\"https://django-extensions.readthedocs.io/en/latest/\">django-extensions</a> 这个 Django 包非常受欢迎，全是有用的工具，比如下面这些管理命令：</p>\n<ul>\n<li><code>shell_plus</code> 打开 Django 的管理 shell，这个 shell 已经自动导入了所有的数据库模型。在测试复杂的数据关系时，就不需要再从几个不同的应用里做导入操作了。</li>\n<li><code>clean_pyc</code> 删除项目目录下所有位置的 .pyc 文件</li>\n<li><code>create_template_tags</code> 在指定的应用下，创建模板标签的目录结构。</li>\n<li><code>describe_form</code> 输出模型的表单定义，可以粘贴到 <code>forms.py</code> 文件中。（需要注意的是，这种方法创建的是普通 Django 表单，而不是模型表单。）</li>\n<li><code>notes</code> 输出你项目里所有带 TODO、FIXME 等标记的注释。</li>\n</ul>\n<p>Django-extensions 还包括几个有用的抽象基类，在定义模型时，它们能满足常见的模式。当你需要以下模型时，可以继承这些基类：</p>\n<ul>\n<li><code>TimeStampedModel</code>：这个模型的基类包含了 <code>created</code> 字段和 <code>modified</code> 字段，还有一个 <code>save()</code> 方法，在适当的场景下，该方法自动更新 <code>created</code> 和 <code>modified</code> 字段的值。</li>\n<li><code>ActivatorModel</code>：如果你的模型需要像 <code>status</code>、<code>activate_date</code> 和 <code>deactivate_date</code> 这样的字段，可以使用这个基类。它还自带了一个启用 <code>.active()</code> 和 <code>.inactive()</code> 查询集的 manager。</li>\n<li><code>TitleDescriptionModel</code> 和 <code>TitleSlugDescriptionModel</code>：这两个模型包括了 <code>title</code> 和 <code>description</code> 字段，其中 <code>description</code> 字段还包括 <code>slug</code>，它根据 <code>title</code> 字段自动产生。</li>\n</ul>\n<p>django-extensions 还有其他更多的功能，也许对你的项目有帮助，所以，去浏览一下它的<a href=\"https://django-extensions.readthedocs.io/\">文档</a>吧！</p>\n<h1 id=\"toc_2\">12 因子应用的配置：django-environ</h1>\n<p>在 Django 项目的配置方面，<a href=\"https://django-environ.readthedocs.io/en/latest/\">django-environ</a> 提供了符合 <a href=\"https://www.12factor.net/\">12 因子应用</a> 方法论的管理方法。它是另外一些库的集合，包括 <a href=\"https://github.com/rconradharris/envparse\">envparse</a> 和 <a href=\"https://github.com/nickstenning/honcho\">honcho</a> 等。安装了 django-environ 之后，在项目的根目录创建一个 <code>.env</code> 文件，用这个文件去定义那些随环境不同而不同的变量，或者需要保密的变量。（比如 API 密钥，是否启用调试，数据库的 URL 等）</p>\n<p>然后，在项目的 <code>settings.py</code> 中引入 <code>environ</code>，并参考<a href=\"https://django-environ.readthedocs.io/\">官方文档的例子</a>设置好 <code>environ.PATH()</code> 和 <code>environ.Env()</code>。就可以通过 <code>env('VARIABLE_NAME')</code> 来获取 <code>.env</code> 文件中定义的变量值了。</p>\n<h1 id=\"toc_3\">创建出色的管理命令：django-click</h1>\n<p><a href=\"https://github.com/GaretJax/django-click\">django-click</a> 是基于 <a href=\"http://click.pocoo.org/5/\">Click</a> 的，（我们<a href=\"https://opensource.com/article/18/9/python-libraries-side-projects\">之前推荐过</a>… <a href=\"https://opensource.com/article/18/5/3-python-command-line-tools\">两次</a> Click)，它对编写 Django 管理命令很有帮助。这个库没有很多文档，但是代码仓库中有个存放<a href=\"https://github.com/GaretJax/django-click/tree/master/djclick/test/testprj/testapp/management/commands\">测试命令</a>的目录，非常有参考价值。 django-click 基本的 Hello World 命令是这样写的：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b263afa22828518330\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# app_name.management.commands.hello.py\r\nimport djclick as click\r\n@click.command()\r\n@click.argument('name')\r\ndef command(name):\r\n    click.secho(f'Hello, {name}')</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b263afa22828518330-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b263afa22828518330-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b263afa22828518330-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b263afa22828518330-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b263afa22828518330-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b263afa22828518330-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b263afa22828518330-1\"><span class=\"crayon-c\"># app_name.management.commands.hello.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b263afa22828518330-2\"><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">djclick </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">click</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b263afa22828518330-3\"><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">click</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">command</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b263afa22828518330-4\"><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">click</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">argument</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'name'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b263afa22828518330-5\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">command</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b263afa22828518330-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">click</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">secho</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">f</span><span class=\"crayon-s\">'Hello, {name}'</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>在命令行下调用它，这样执行即可：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b263afa2b009743872\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt; ./manage.py hello Lacey\r\nHello, Lacey</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b263afa2b009743872-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b263afa2b009743872-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b263afa2b009743872-1\"><span class=\"crayon-o\">&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">manage</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">py </span><span class=\"crayon-e\">hello </span><span class=\"crayon-e\">Lacey</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b263afa2b009743872-2\"><span class=\"crayon-v\">Hello</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Lacey</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p></p>\n<h1 id=\"toc_4\">处理有限状态机：django-fsm</h1>\n<p><a href=\"https://github.com/viewflow/django-fsm\">django-fsm</a> 给 Django 的模型添加了有限状态机的支持。如果你管理一个新闻网站，想用类似于“写作中”、“编辑中”、“已发布”来流转文章的状态，django-fsm 能帮你定义这些状态，还能管理状态变化的规则与限制。</p>\n<p>Django-fsm 为模型提供了 FSMField 字段，用来定义模型实例的状态。用 django-fsm 的 <code>@transition</code> 修饰符，可以定义状态变化的方法，并处理状态变化的任何副作用。</p>\n<p>虽然 django-fsm 文档很轻量，不过 <a href=\"https://gist.github.com/Nagyman/9502133\">Django 中的工作流（状态）</a> 这篇 GitHub Gist 对有限状态机和 django-fsm 做了非常好的介绍。</p>\n<h1 id=\"toc_5\">联系人表单：#django-contact-form</h1>\n<p>联系人表单可以说是网站的标配。但是不要自己去写全部的样板代码，用 <a href=\"https://django-contact-form.readthedocs.io/en/1.5/\">django-contact-form</a> 在几分钟内就可以搞定。它带有一个可选的能过滤垃圾邮件的表单类（也有不过滤的普通表单类）和一个 <code>ContactFormView</code> 基类，基类的方法可以覆盖或自定义修改。而且它还能引导你完成模板的创建，好让表单正常工作。</p>\n<h1 id=\"toc_6\">用户注册和认证：django-allauth</h1>\n<p><a href=\"https://django-allauth.readthedocs.io/en/latest/\">django-allauth</a> 是一个 Django 应用，它为用户注册、登录/注销、密码重置，还有第三方用户认证（比如 GitHub 或 Twitter）提供了视图、表单和 URL，支持邮件地址作为用户名的认证方式，而且有大量的文档记录。第一次用的时候，它的配置可能会让人有点晕头转向；请仔细阅读<a href=\"https://django-allauth.readthedocs.io/en/latest/installation.html\">安装说明</a>，在<a href=\"https://django-allauth.readthedocs.io/en/latest/configuration.html\">自定义你的配置</a>时要专注，确保启用某个功能的所有配置都用对了。</p>\n<h1 id=\"toc_7\">处理 Django REST 框架的用户认证：django-rest-auth</h1>\n<p>如果 Django 开发中涉及到对外提供 API，你很可能用到了 <a href=\"http://www.django-rest-framework.org/\">Django REST Framework</a>（DRF）。如果你在用 DRF，那么你应该试试 django-rest-auth，它提供了用户注册、登录/注销，密码重置和社交媒体认证的端点（是通过添加 django-allauth 的支持来实现的，这两个包协作得很好）。</p>\n<h1 id=\"toc_8\">Django REST 框架的 API 可视化：django-rest-swagger</h1>\n<p><a href=\"https://django-rest-swagger.readthedocs.io/en/latest/\">Django REST Swagger</a> 提供了一个功能丰富的用户界面，用来和 Django REST 框架的 API 交互。你只需要安装 Django REST Swagger，把它添加到 Django 项目的已安装应用中，然后在 <code>urls.py</code> 中添加 Swagger 的视图和 URL 模式就可以了，剩下的事情交给 API 的 docstring 处理。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/10/949bca0e47a4416ee4ae15d9aeaf6d20.png\" alt=\"\"></p>\n<p>API 的用户界面按照 app 的维度展示了所有端点和可用方法，并列出了这些端点的可用操作，而且它提供了和 API 交互的功能（比如添加/删除/获取记录）。django-rest-swagger 从 API 视图中的 docstrings 生成每个端点的文档，通过这种方法，为你的项目创建了一份 API 文档，这对你，对前端开发人员和用户都很有用。</p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89305\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89305votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89305\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"title": "数学建模三剑客 MSN", "url": "http://python.jobbole.com/89309/", "url_object_id": "2d338d3b68c3741dc1b6f1274b432e16", "create_date": "2019-06-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/02/591d8b55a524f825dd29a22b8df70000.jpg"], "praise_nums": 1, "comment_nums": 1, "fav_nums": 0, "tags": "工具与框架,,建模,数据科学", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://blog.csdn.net/xufive/article/details/52449255\">许向武</a>   </div><h1 id=\"前言\">前言</h1>\n<p>不管是不是巴萨的球迷，只要你喜欢足球，就一定听说过梅西(Messi)、苏亚雷斯(Suarez)和内马尔(Neymar)这个MSN组合。在众多的数学建模辅助工具中，也有一个犀利无比的MSN组合，他们就是python麾下大名鼎鼎的 Matplotlib + Scipy + Numpy三剑客。</p>\n<p>本文是我整理的MSN学习笔记，有些理解可能比较肤浅，甚至是错误的。如果因此误导了某位看官，在工作中造成重大失误或损失，我顶多只能赔偿一顿饭——还得是我们楼下的十元盒饭。特此声明。</p>\n<p>文中代码均从我的这台时不时出点问题、闹个情绪的Yoga 3 pro上复制而来，这意味着所有的代码均可在下面的运行环境中顺利运行：</p>\n<ul>\n<li><strong>pyhton 2.7.8</strong></li>\n<li><strong>numpy 1.11.1</strong></li>\n<li><strong>scipy 0.16.1</strong></li>\n<li><strong>matplotlib 1.5.1</strong></li>\n</ul>\n<hr>\n<h1 id=\"三剑客之numpy\">三剑客之<code>Numpy</code></h1>\n<p>numpy是一个开源的python科学计算库，包含了很多实用的数学函数，涵盖线性代数、傅里叶变换和随机数生成等功能。最初的numpy其实是scipy的一部分，后来才从scipy中分离出来。</p>\n<p>numpy不是python的标准库，需要单独安装。假定你的运行环境已经安装了python包管理工具pip，numpy的安装就非常简单：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab159964602018\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npip install numpy</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab159964602018-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab159964602018-1\"><span class=\"crayon-e\">pip </span><span class=\"crayon-e\">install </span><span class=\"crayon-v\">numpy</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p></p>\n<h2 id=\"数组对象\">数组对象</h2>\n<p>ndarray是多维数组对象，也是numpy最核心的对象。在numpy中，数组的维度(dimensions)叫做轴(axes)，轴的个数叫做秩(rank)。通常，一个numpy数组的所有元素都是同一种类型的数据，而这些数据的存储和数组的形式无关。</p>\n<p>下面的例子，创建了一个三维的数组（在导入numpy时，一般都简写成np）。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab162291469967\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nimport numpy as np\r\na = np.array([[1,2,3],[4,5,6],[7,8,9]])</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab162291469967-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab162291469967-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab162291469967-1\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">np</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab162291469967-2\"><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p></p>\n<h3 id=\"数据类型\">数据类型</h3>\n<p>numpy支持的数据类型主要有布尔型(bool)、整型(integrate)、浮点型(float)和复数型(complex)，每一种数据类型根据占用内存的字节数又分为多个不同的子类型。常见的数据类型见下表。</p>\n<table>\n<thead>\n<tr>\n<th>类型</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>bool</td>\n<td>用1位存储的布尔类型（值为TRUE或FALSE）</td>\n</tr>\n<tr>\n<td>inti</td>\n<td>由所在平台决定其精度的整数（一般为int32或int64）</td>\n</tr>\n<tr>\n<td>int8</td>\n<td>1字节整数</td>\n</tr>\n<tr>\n<td>int16</td>\n<td>2字节整数</td>\n</tr>\n<tr>\n<td>int32</td>\n<td>4字节整数</td>\n</tr>\n<tr>\n<td>int64</td>\n<td>8字节整数</td>\n</tr>\n<tr>\n<td>uint8</td>\n<td>1字节无符号整数</td>\n</tr>\n<tr>\n<td>uint16</td>\n<td>2字节无符号整数</td>\n</tr>\n<tr>\n<td>uint32</td>\n<td>4字节无符号整数</td>\n</tr>\n<tr>\n<td>uint64</td>\n<td>8字节无符号整数</td>\n</tr>\n<tr>\n<td>float16</td>\n<td>半精度浮点数（16位），1位符号，5位指数，10位尾数</td>\n</tr>\n<tr>\n<td>float32</td>\n<td>单精度浮点数（32位），1位符号，8位指数，23位尾数</td>\n</tr>\n<tr>\n<td>float64/float</td>\n<td>双精度浮点数（64位），1位符号，11位指数，52位尾数</td>\n</tr>\n<tr>\n<td>complex64</td>\n<td>复数，分别用32位表示实部和虚部</td>\n</tr>\n<tr>\n<td>complex128/complex</td>\n<td>复数，分别用64位表示实部和虚部</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"创建数组\">创建数组</h3>\n<p>通常，我们用np.array()创建数组。如果仅仅是创建一维数组，也可以使用np.arange()或者np.linspace()的方法。np.zeros()、np.ones()、np.eye()则可以构造特殊的数据。np.random.randint()和np.random.random()则可以构造随机数数组。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab167672539379\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; np.array([[1,2,3],[4,5,6]])                # 默认元素类型为int32\r\narray([[1, 2, 3],\r\n       [4, 5, 6]])\r\n&gt;&gt;&gt; np.array([[1,2,3],[4,5,6]], dtype=np.int8) # 指定元素类型为int8\r\narray([[1, 2, 3],\r\n       [4, 5, 6]], dtype=int8)\r\n&gt;&gt;&gt; np.arange(5)                               # 默认元素类型为int32\r\narray([0, 1, 2, 3, 4])\r\n&gt;&gt;&gt; np.arange(3,8, dtype=np.int8)              # 指定元素类型为int8\r\narray([3, 4, 5, 6, 7], dtype=int8)\r\n&gt;&gt;&gt; np.arange(12).reshape(3,4)                 # 改变shape\r\narray([[ 0,  1,  2,  3],\r\n       [ 4,  5,  6,  7],\r\n       [ 8,  9, 10, 11]])\r\n&gt;&gt;&gt; np.linspace(1,2,5)                        # 从1到2生成5个浮点数\r\narray([ 1.  ,  1.25,  1.5 ,  1.75,  2.  ])\r\n&gt;&gt;&gt; np.zeros((2,3))                            # 全0数组\r\narray([[ 0.,  0.,  0.],\r\n       [ 0.,  0.,  0.]])\r\n&gt;&gt;&gt; np.ones((2,3))                             # 全1数组\r\narray([[ 1.,  1.,  1.],\r\n       [ 1.,  1.,  1.]])\r\n&gt;&gt;&gt; np.eye(3)                                  # 主对角线元素为1其他元素为0\r\narray([[ 1.,  0.,  0.],\r\n       [ 0.,  1.,  0.],\r\n       [ 0.,  0.,  1.]])\r\n&gt;&gt;&gt; np.random.random((2,3))                    # 生成[0,1)之间的随机浮点数\r\narray([[ 0.84731148,  0.8222318 ,  0.85799278],\r\n       [ 0.59371558,  0.92330741,  0.04518351]])\r\n&gt;&gt;&gt; np.random.randint(0,10,(3,2))              # 生成[0,10)之间的随机整数\r\narray([[2, 4],\r\n       [8, 3],\r\n       [8, 5]])</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab167672539379-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab167672539379-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab167672539379-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab167672539379-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab167672539379-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab167672539379-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab167672539379-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab167672539379-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab167672539379-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab167672539379-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab167672539379-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab167672539379-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab167672539379-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab167672539379-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab167672539379-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab167672539379-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab167672539379-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab167672539379-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab167672539379-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab167672539379-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab167672539379-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab167672539379-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab167672539379-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab167672539379-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab167672539379-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab167672539379-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab167672539379-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab167672539379-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab167672539379-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab167672539379-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab167672539379-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab167672539379-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab167672539379-33\">33</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab167672539379-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-p\"># 默认元素类型为int32</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab167672539379-2\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab167672539379-3\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab167672539379-4\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dtype</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">int8</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># 指定元素类型为int8</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab167672539379-5\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab167672539379-6\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dtype</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">int8</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab167672539379-7\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                               </span><span class=\"crayon-p\"># 默认元素类型为int32</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab167672539379-8\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab167672539379-9\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dtype</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">int8</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-p\"># 指定元素类型为int8</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab167672539379-10\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dtype</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">int8</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab167672539379-11\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">12</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">reshape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                 </span><span class=\"crayon-p\"># 改变shape</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab167672539379-12\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab167672539379-13\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab167672539379-14\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab167672539379-15\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">linspace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                        </span><span class=\"crayon-p\"># 从1到2生成5个浮点数</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab167672539379-16\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.25</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.5</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.75</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2.</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab167672539379-17\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">zeros</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                            </span><span class=\"crayon-p\"># 全0数组</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab167672539379-18\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab167672539379-19\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab167672539379-20\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">ones</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                             </span><span class=\"crayon-p\"># 全1数组</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab167672539379-21\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab167672539379-22\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab167672539379-23\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">eye</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                                  </span><span class=\"crayon-p\"># 主对角线元素为1其他元素为0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab167672539379-24\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab167672539379-25\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab167672539379-26\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab167672539379-27\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">random</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">random</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-p\"># 生成[0,1)之间的随机浮点数</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab167672539379-28\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.84731148</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.8222318</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.85799278</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab167672539379-29\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.59371558</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.92330741</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.04518351</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab167672539379-30\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">random</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">randint</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-p\"># 生成[0,10)之间的随机整数</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab167672539379-31\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab167672539379-32\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab167672539379-33\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0093 seconds] -->\r\n<p></p>\n<h3 id=\"构造复杂数组\">构造复杂数组</h3>\n<p>很多时候，我们需要从简单的数据结构，构造出复杂的数组。例如，用一维的数据生成二维格点。</p>\n<h4 id=\"重复数组-tile\">重复数组: tile</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab16f786795908\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; a = np.arange(5)\r\n&gt;&gt;&gt; a\r\narray([0, 1, 2, 3, 4])\r\n&gt;&gt;&gt; np.tile(a, 2)\r\narray([0, 1, 2, 3, 4, 0, 1, 2, 3, 4])\r\n&gt;&gt;&gt; np.tile(a, (3,2))\r\narray([[0, 1, 2, 3, 4, 0, 1, 2, 3, 4],\r\n       [0, 1, 2, 3, 4, 0, 1, 2, 3, 4],\r\n       [0, 1, 2, 3, 4, 0, 1, 2, 3, 4]])</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab16f786795908-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab16f786795908-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab16f786795908-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab16f786795908-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab16f786795908-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab16f786795908-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab16f786795908-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab16f786795908-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab16f786795908-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab16f786795908-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab16f786795908-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">a</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab16f786795908-3\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab16f786795908-4\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">tile</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab16f786795908-5\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab16f786795908-6\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">tile</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab16f786795908-7\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab16f786795908-8\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab16f786795908-9\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0035 seconds] -->\r\n<p></p>\n<h4 id=\"一维数组网格化-meshgrid\">一维数组网格化: meshgrid</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab173805266750\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; a = np.arange(5)\r\n&gt;&gt;&gt; b = np.arange(5,10)\r\n&gt;&gt;&gt; np.meshgrid(a,b)\r\n[array([[0, 1, 2, 3, 4],\r\n       [0, 1, 2, 3, 4],\r\n       [0, 1, 2, 3, 4],\r\n       [0, 1, 2, 3, 4],\r\n       [0, 1, 2, 3, 4]]), array([[5, 5, 5, 5, 5],\r\n       [6, 6, 6, 6, 6],\r\n       [7, 7, 7, 7, 7],\r\n       [8, 8, 8, 8, 8],\r\n       [9, 9, 9, 9, 9]])]\r\n&gt;&gt;&gt; </textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab173805266750-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab173805266750-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab173805266750-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab173805266750-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab173805266750-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab173805266750-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab173805266750-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab173805266750-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab173805266750-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab173805266750-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab173805266750-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab173805266750-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab173805266750-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab173805266750-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab173805266750-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab173805266750-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">meshgrid</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab173805266750-4\"><span class=\"crayon-sy\">[</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab173805266750-5\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab173805266750-6\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab173805266750-7\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab173805266750-8\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab173805266750-9\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab173805266750-10\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab173805266750-11\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab173805266750-12\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab173805266750-13\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0040 seconds] -->\r\n<p></p>\n<h4 id=\"指定范围和分割方式的网格化-mgrid\">指定范围和分割方式的网格化: mgrid</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab177025679425\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; np.mgrid[0:1:2j, 1:2:3j]\r\narray([[[ 0. ,  0. ,  0. ],\r\n        [ 1. ,  1. ,  1. ]],\r\n\r\n       [[ 1. ,  1.5,  2. ],\r\n        [ 1. ,  1.5,  2. ]]])\r\n&gt;&gt;&gt; np.mgrid[0:1:0.3, 1:2:0.4]\r\narray([[[ 0. ,  0. ,  0. ],\r\n        [ 0.3,  0.3,  0.3],\r\n        [ 0.6,  0.6,  0.6],\r\n        [ 0.9,  0.9,  0.9]],\r\n\r\n       [[ 1. ,  1.4,  1.8],\r\n        [ 1. ,  1.4,  1.8],\r\n        [ 1. ,  1.4,  1.8],\r\n        [ 1. ,  1.4,  1.8]]])</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab177025679425-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab177025679425-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab177025679425-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab177025679425-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab177025679425-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab177025679425-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab177025679425-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab177025679425-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab177025679425-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab177025679425-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab177025679425-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab177025679425-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab177025679425-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab177025679425-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab177025679425-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab177025679425-16\">16</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab177025679425-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">mgrid</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">2j</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">3j</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab177025679425-2\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab177025679425-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab177025679425-4\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab177025679425-5\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab177025679425-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab177025679425-7\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">mgrid</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0.3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0.4</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab177025679425-8\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab177025679425-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.3</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab177025679425-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.6</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab177025679425-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.9</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab177025679425-12\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab177025679425-13\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.8</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab177025679425-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.8</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab177025679425-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.8</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab177025679425-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.8</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0039 seconds] -->\r\n<p>上面的例子中用到了虚数。构造虚数的方法如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab17d314934078\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; complex(2,5)\r\n(2+5j)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab17d314934078-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab17d314934078-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab17d314934078-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">complex</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab17d314934078-2\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">5j</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p></p>\n<h3 id=\"数组的属性\">数组的属性</h3>\n<p>numpy的数组对象除了一些常规的属性外，也有几个类似转置、扁平迭代器等看起来更像是方法的属性。扁平迭代器也许是遍历多维数组的一个简明方法，下面的代码给出了一个例子。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab180368154763\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; a = np.array([[1,2,3],[4,5,6]])\r\n&gt;&gt;&gt; a.dtype               # 数组元素的数据类型\r\ndtype('int32')\r\n&gt;&gt;&gt; a.dtype.itemsize      # 数组元素占据的内存字节数\r\n4\r\n&gt;&gt;&gt; a.itemsize            # 数组元素占据的内存字节数\r\n4\r\n&gt;&gt;&gt; a.shape               # 数组的维度\r\n(2, 3)\r\n&gt;&gt;&gt; a.size                # 数组元素个数\r\n6\r\n&gt;&gt;&gt; a.T                   # 数组行变列，类似于transpose()\r\narray([[1, 4],\r\n       [2, 5],\r\n       [3, 6]])\r\n&gt;&gt;&gt; a.flat                # 返回一个扁平迭代器，用于遍历多维数组\r\n&lt;numpy.flatiter object at 0x037188F0&gt;\r\n&gt;&gt;&gt; for item in a.flat:\r\n    print item\r\n1\r\n2\r\n... </textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab180368154763-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab180368154763-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab180368154763-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab180368154763-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab180368154763-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab180368154763-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab180368154763-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab180368154763-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab180368154763-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab180368154763-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab180368154763-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab180368154763-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab180368154763-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab180368154763-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab180368154763-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab180368154763-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab180368154763-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab180368154763-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab180368154763-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab180368154763-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab180368154763-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab180368154763-22\">22</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab180368154763-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab180368154763-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">dtype</span><span class=\"crayon-h\">               </span><span class=\"crayon-p\"># 数组元素的数据类型</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab180368154763-3\"><span class=\"crayon-e\">dtype</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'int32'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab180368154763-4\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">dtype</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">itemsize</span><span class=\"crayon-h\">      </span><span class=\"crayon-p\"># 数组元素占据的内存字节数</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab180368154763-5\"><span class=\"crayon-cn\">4</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab180368154763-6\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">itemsize</span><span class=\"crayon-h\">            </span><span class=\"crayon-p\"># 数组元素占据的内存字节数</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab180368154763-7\"><span class=\"crayon-cn\">4</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab180368154763-8\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">shape</span><span class=\"crayon-h\">               </span><span class=\"crayon-p\"># 数组的维度</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab180368154763-9\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab180368154763-10\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">size</span><span class=\"crayon-h\">                </span><span class=\"crayon-p\"># 数组元素个数</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab180368154763-11\"><span class=\"crayon-cn\">6</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab180368154763-12\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">T</span><span class=\"crayon-h\">                   </span><span class=\"crayon-p\"># 数组行变列，类似于transpose()</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab180368154763-13\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab180368154763-14\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab180368154763-15\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab180368154763-16\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">flat</span><span class=\"crayon-h\">                </span><span class=\"crayon-p\"># 返回一个扁平迭代器，用于遍历多维数组</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab180368154763-17\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">numpy</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">flatiter </span><span class=\"crayon-t\">object</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">at</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0x037188F0</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab180368154763-18\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">item </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">flat</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab180368154763-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">print </span><span class=\"crayon-i\">item</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab180368154763-20\"><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab180368154763-21\"><span class=\"crayon-cn\">2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab180368154763-22\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0033 seconds] -->\r\n<p></p>\n<h3 id=\"改变数组维度\">改变数组维度</h3>\n<p>numpy数组的存储顺序和数组的维度是不相干的，因此改变数组的维度是非常便捷的操作，除resize()外，这一类操作不会改变所操作的数组本身的存储顺序。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab184616413728\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; a = np.array([[1,2,3],[4,5,6]])\r\n&gt;&gt;&gt; a.shape                     # 查看数组维度\r\n(2, 3)\r\n&gt;&gt;&gt; a.reshape(3,2)              # 返回3行2列的数组\r\narray([[1, 2],\r\n       [3, 4],\r\n       [5, 6]])\r\n&gt;&gt;&gt; a.ravel()                   # 返回一维数组\r\narray([1, 2, 3, 4, 5, 6])\r\n&gt;&gt;&gt; a.transpose()               # 行变列（类似于矩阵转置）\r\narray([[1, 4],\r\n       [2, 5],\r\n       [3, 6]])\r\n&gt;&gt;&gt; a.resize((3,2))             # 类似于reshape，但会改变所操作的数组\r\n&gt;&gt;&gt; a\r\narray([[1, 2],\r\n       [3, 4],\r\n       [5, 6]])</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab184616413728-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab184616413728-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab184616413728-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab184616413728-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab184616413728-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab184616413728-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab184616413728-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab184616413728-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab184616413728-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab184616413728-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab184616413728-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab184616413728-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab184616413728-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab184616413728-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab184616413728-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab184616413728-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab184616413728-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab184616413728-18\">18</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab184616413728-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab184616413728-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">shape</span><span class=\"crayon-h\">                     </span><span class=\"crayon-p\"># 查看数组维度</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab184616413728-3\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab184616413728-4\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">reshape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-p\"># 返回3行2列的数组</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab184616413728-5\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab184616413728-6\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab184616413728-7\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab184616413728-8\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">ravel</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                   </span><span class=\"crayon-p\"># 返回一维数组</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab184616413728-9\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab184616413728-10\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">transpose</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-p\"># 行变列（类似于矩阵转置）</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab184616413728-11\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab184616413728-12\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab184616413728-13\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab184616413728-14\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">resize</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-p\"># 类似于reshape，但会改变所操作的数组</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab184616413728-15\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">a</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab184616413728-16\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab184616413728-17\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab184616413728-18\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0038 seconds] -->\r\n<p></p>\n<h3 id=\"索引和切片\">索引和切片</h3>\n<p>对于一维数组的索引和切片，numpy和python的list一样，甚至更灵活。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab189780614859\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\na = np.arange(9)\r\n&gt;&gt;&gt; a[-1]                            # 最后一个元素\r\n8\r\n&gt;&gt;&gt; a[2:5]                           # 返回第2到第5个元素\r\narray([2, 3, 4])\r\n&gt;&gt;&gt; a[:7:3]                          # 返回第0到第7个元素，步长为3\r\narray([0, 3, 6])\r\n&gt;&gt;&gt; a[::-1]                          # 返回逆序的数组\r\narray([8, 7, 6, 5, 4, 3, 2, 1, 0])</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab189780614859-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab189780614859-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab189780614859-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab189780614859-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab189780614859-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab189780614859-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab189780614859-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab189780614859-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab189780614859-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab189780614859-1\"><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab189780614859-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">                            </span><span class=\"crayon-p\"># 最后一个元素</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab189780614859-3\"><span class=\"crayon-cn\">8</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab189780614859-4\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">                           </span><span class=\"crayon-p\"># 返回第2到第5个元素</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab189780614859-5\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab189780614859-6\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">7</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">                          </span><span class=\"crayon-p\"># 返回第0到第7个元素，步长为3</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab189780614859-7\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab189780614859-8\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">::</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">                          </span><span class=\"crayon-p\"># 返回逆序的数组</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab189780614859-9\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0022 seconds] -->\r\n<p>假设有一栋2层楼，每层楼内的房间都是3排4列，那我们可以用一个三维数组来保存每个房间的居住人数（当然，也可以是房间面积等其他数值信息）。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab18d359491039\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; a = np.arange(24).reshape(2,3,4)    # 2层3排4列\r\n&gt;&gt;&gt; a\r\narray([[[ 0,  1,  2,  3],\r\n        [ 4,  5,  6,  7],\r\n        [ 8,  9, 10, 11]],\r\n\r\n       [[12, 13, 14, 15],\r\n        [16, 17, 18, 19],\r\n        [20, 21, 22, 23]]])\r\n&gt;&gt;&gt; a[1][2][3]                          # 虽然可以这样\r\n23\r\n&gt;&gt;&gt; a[1,2,3]                            # 但这才是规范的用法\r\n23\r\n&gt;&gt;&gt; a[:,0,0]                            # 所有楼层的第1排第1列\r\narray([ 0, 12])\r\n&gt;&gt;&gt; a[0,:,:]                            # 1楼的所有房间，等价与a[0]或a[0,...]\r\narray([[ 0,  1,  2,  3],\r\n       [ 4,  5,  6,  7],\r\n       [ 8,  9, 10, 11]])\r\n&gt;&gt;&gt; a[:,:,1:3]                          # 所有楼层所有排的第2到4列\r\narray([[[ 1,  2],\r\n        [ 5,  6],\r\n        [ 9, 10]],\r\n\r\n       [[13, 14],\r\n        [17, 18],\r\n        [21, 22]]])\r\n&gt;&gt;&gt; a[1,:,-1]                           # 2层每一排的最后一个房间\r\narray([15, 19, 23])</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab18d359491039-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab18d359491039-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab18d359491039-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab18d359491039-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab18d359491039-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab18d359491039-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab18d359491039-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab18d359491039-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab18d359491039-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab18d359491039-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab18d359491039-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab18d359491039-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab18d359491039-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab18d359491039-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab18d359491039-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab18d359491039-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab18d359491039-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab18d359491039-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab18d359491039-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab18d359491039-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab18d359491039-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab18d359491039-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab18d359491039-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab18d359491039-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab18d359491039-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab18d359491039-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab18d359491039-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab18d359491039-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab18d359491039-29\">29</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab18d359491039-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">24</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">reshape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># 2层3排4列</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab18d359491039-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">a</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab18d359491039-3\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab18d359491039-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab18d359491039-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab18d359491039-6\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab18d359491039-7\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">12</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab18d359491039-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">16</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">19</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab18d359491039-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">20</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">21</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab18d359491039-10\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">                          </span><span class=\"crayon-p\"># 虽然可以这样</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab18d359491039-11\"><span class=\"crayon-cn\">23</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab18d359491039-12\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">                            </span><span class=\"crayon-p\"># 但这才是规范的用法</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab18d359491039-13\"><span class=\"crayon-cn\">23</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab18d359491039-14\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">                            </span><span class=\"crayon-p\"># 所有楼层的第1排第1列</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab18d359491039-15\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab18d359491039-16\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">,</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">                            </span><span class=\"crayon-p\"># 1楼的所有房间，等价与a[0]或a[0,...]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab18d359491039-17\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab18d359491039-18\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab18d359491039-19\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab18d359491039-20\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">,</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">                          </span><span class=\"crayon-p\"># 所有楼层所有排的第2到4列</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab18d359491039-21\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab18d359491039-22\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab18d359491039-23\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab18d359491039-24\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab18d359491039-25\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">13</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab18d359491039-26\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">17</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab18d359491039-27\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">21</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab18d359491039-28\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">,</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">                           </span><span class=\"crayon-p\"># 2层每一排的最后一个房间</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab18d359491039-29\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">19</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0061 seconds] -->\r\n<p></p>\n<h3 id=\"数组合并\">数组合并</h3>\n<p>数组合并除了下面介绍的水平合并、垂直合并、深度合并外，还有行合并、列合并，以及concatenate()等方式。假如你比我还懒，那就只了解前三种方法吧，足够用了。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab194332227808\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; a = np.arange(9).reshape(3,3)\r\n&gt;&gt;&gt; b = np.arange(9,18).reshape(3,3)\r\n&gt;&gt;&gt; a\r\narray([[0, 1, 2],\r\n       [3, 4, 5],\r\n       [6, 7, 8]])\r\n&gt;&gt;&gt; b\r\narray([[ 9, 10, 11],\r\n       [12, 13, 14],\r\n       [15, 16, 17]])\r\n&gt;&gt;&gt; np.hstack((a,b))                        # 水平合并\r\narray([[ 0,  1,  2,  9, 10, 11],\r\n       [ 3,  4,  5, 12, 13, 14],\r\n       [ 6,  7,  8, 15, 16, 17]])\r\n&gt;&gt;&gt; np.vstack((a,b))                        # 垂直合并\r\narray([[ 0,  1,  2],\r\n       [ 3,  4,  5],\r\n       [ 6,  7,  8],\r\n       [ 9, 10, 11],\r\n       [12, 13, 14],\r\n       [15, 16, 17]])\r\n&gt;&gt;&gt; np.dstack((a,b))                        # 深度合并\r\narray([[[ 0,  9],\r\n        [ 1, 10],\r\n        [ 2, 11]],\r\n\r\n       [[ 3, 12],\r\n        [ 4, 13],\r\n        [ 5, 14]],\r\n\r\n       [[ 6, 15],\r\n        [ 7, 16],\r\n        [ 8, 17]]])</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab194332227808-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab194332227808-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab194332227808-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab194332227808-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab194332227808-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab194332227808-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab194332227808-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab194332227808-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab194332227808-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab194332227808-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab194332227808-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab194332227808-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab194332227808-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab194332227808-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab194332227808-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab194332227808-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab194332227808-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab194332227808-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab194332227808-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab194332227808-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab194332227808-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab194332227808-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab194332227808-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab194332227808-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab194332227808-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab194332227808-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab194332227808-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab194332227808-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab194332227808-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab194332227808-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab194332227808-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab194332227808-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab194332227808-33\">33</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab194332227808-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">reshape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab194332227808-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">18</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">reshape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab194332227808-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">a</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab194332227808-4\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab194332227808-5\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab194332227808-6\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab194332227808-7\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">b</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab194332227808-8\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab194332227808-9\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">12</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab194332227808-10\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab194332227808-11\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">hstack</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                        </span><span class=\"crayon-p\"># 水平合并</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab194332227808-12\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab194332227808-13\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab194332227808-14\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab194332227808-15\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">vstack</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                        </span><span class=\"crayon-p\"># 垂直合并</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab194332227808-16\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab194332227808-17\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab194332227808-18\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab194332227808-19\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab194332227808-20\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">12</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab194332227808-21\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab194332227808-22\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">dstack</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                        </span><span class=\"crayon-p\"># 深度合并</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab194332227808-23\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab194332227808-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab194332227808-25\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab194332227808-26\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab194332227808-27\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab194332227808-28\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab194332227808-29\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab194332227808-30\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab194332227808-31\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab194332227808-32\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab194332227808-33\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0072 seconds] -->\r\n<p></p>\n<h3 id=\"数组拆分\">数组拆分</h3>\n<p>拆分是合并的逆过程，概念是一样的，但稍微有一点不同：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab19a884958610\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; a = np.arange(9).reshape(3,3)\r\n&gt;&gt;&gt; np.hsplit(a, 3)                        # 水平拆分，返回list\r\n[array([[0],\r\n       [3],\r\n       [6]]), array([[1],\r\n       [4],\r\n       [7]]), array([[2],\r\n       [5],\r\n       [8]])]\r\n&gt;&gt;&gt; np.vsplit(a, 3)                        # 垂直拆分，返回list\r\n[array([[0, 1, 2]]), array([[3, 4, 5]]), array([[6, 7, 8]])]\r\n&gt;&gt;&gt; a = np.arange(27).reshape(3,3,3)\r\n&gt;&gt;&gt; np.dsplit(a, 3)                        # 深度拆分，返回list\r\n[array([[[ 0],\r\n        [ 3],\r\n        [ 6]],\r\n\r\n       [[ 9],\r\n        [12],\r\n        [15]],\r\n\r\n       [[18],\r\n        [21],\r\n        [24]]]), array([[[ 1],\r\n        [ 4],\r\n        [ 7]],\r\n\r\n       [[10],\r\n        [13],\r\n        [16]],\r\n\r\n       [[19],\r\n        [22],\r\n        [25]]]), array([[[ 2],\r\n        [ 5],\r\n        [ 8]],\r\n\r\n       [[11],\r\n        [14],\r\n        [17]],\r\n\r\n       [[20],\r\n        [23],\r\n        [26]]])]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab19a884958610-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab19a884958610-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab19a884958610-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab19a884958610-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab19a884958610-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab19a884958610-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab19a884958610-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab19a884958610-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab19a884958610-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab19a884958610-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab19a884958610-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab19a884958610-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab19a884958610-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab19a884958610-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab19a884958610-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab19a884958610-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab19a884958610-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab19a884958610-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab19a884958610-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab19a884958610-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab19a884958610-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab19a884958610-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab19a884958610-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab19a884958610-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab19a884958610-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab19a884958610-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab19a884958610-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab19a884958610-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab19a884958610-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab19a884958610-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab19a884958610-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab19a884958610-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab19a884958610-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab19a884958610-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab19a884958610-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab19a884958610-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab19a884958610-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab19a884958610-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab19a884958610-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab19a884958610-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab19a884958610-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab19a884958610-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab19a884958610-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab19a884958610-44\">44</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab19a884958610-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">reshape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab19a884958610-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">hsplit</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                        </span><span class=\"crayon-p\"># 水平拆分，返回list</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab19a884958610-3\"><span class=\"crayon-sy\">[</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab19a884958610-4\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab19a884958610-5\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab19a884958610-6\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab19a884958610-7\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab19a884958610-8\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab19a884958610-9\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab19a884958610-10\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">vsplit</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                        </span><span class=\"crayon-p\"># 垂直拆分，返回list</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab19a884958610-11\"><span class=\"crayon-sy\">[</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab19a884958610-12\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">27</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">reshape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab19a884958610-13\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">dsplit</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                        </span><span class=\"crayon-p\"># 深度拆分，返回list</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab19a884958610-14\"><span class=\"crayon-sy\">[</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab19a884958610-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab19a884958610-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab19a884958610-17\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab19a884958610-18\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab19a884958610-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">12</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab19a884958610-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab19a884958610-21\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab19a884958610-22\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">18</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab19a884958610-23\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">21</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab19a884958610-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">24</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab19a884958610-25\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab19a884958610-26\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab19a884958610-27\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab19a884958610-28\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab19a884958610-29\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">13</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab19a884958610-30\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">16</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab19a884958610-31\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab19a884958610-32\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">19</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab19a884958610-33\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">22</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab19a884958610-34\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">25</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab19a884958610-35\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab19a884958610-36\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab19a884958610-37\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab19a884958610-38\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab19a884958610-39\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">14</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab19a884958610-40\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">17</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab19a884958610-41\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab19a884958610-42\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">20</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab19a884958610-43\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">23</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab19a884958610-44\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">26</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0068 seconds] -->\r\n<p></p>\n<h3 id=\"数组运算\">数组运算</h3>\n<p>数组和常数的四则运算，是数组的每一个元素分别和常数运算；数组和数组的四则运算则是两个数组对应元素的运算（两个数组有相同的shape，否则抛出异常）。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab1a2977554614\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; a = np.arange(4, dtype=np.float32).reshape(2,2)\r\n&gt;&gt;&gt; b = np.arange(4, 8, dtype=np.float32).reshape(2,2)\r\n&gt;&gt;&gt; a+2                # 数组和常数可以进行四则运算\r\narray([[ 2.,  3.],\r\n       [ 4.,  5.]], dtype=float32)\r\n&gt;&gt;&gt; a/b                # 数组和数组可以进行四则运算\r\narray([[ 0.        ,  0.2       ],\r\n       [ 0.33333334,  0.42857143]], dtype=float32) \r\n&gt;&gt;&gt; a == b             # 最神奇的是，数组可以判断对应元素是否相等\r\narray([[False, False],\r\n       [False, False]], dtype=bool)\r\n&gt;&gt;&gt; (a == b).all()     # 判断数组是否相等\r\nFalse</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1a2977554614-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1a2977554614-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1a2977554614-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1a2977554614-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1a2977554614-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1a2977554614-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1a2977554614-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1a2977554614-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1a2977554614-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1a2977554614-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1a2977554614-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1a2977554614-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1a2977554614-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1a2977554614-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dtype</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">float32</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">reshape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1a2977554614-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dtype</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">float32</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">reshape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1a2977554614-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">                </span><span class=\"crayon-p\"># 数组和常数可以进行四则运算</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1a2977554614-4\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">3.</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1a2977554614-5\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4.</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">5.</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dtype</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">float32</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1a2977554614-6\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">b</span><span class=\"crayon-h\">                </span><span class=\"crayon-p\"># 数组和数组可以进行四则运算</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1a2977554614-7\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.</span><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.2</span><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1a2977554614-8\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.33333334</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.42857143</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dtype</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">float32</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1a2977554614-9\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-h\">             </span><span class=\"crayon-p\"># 最神奇的是，数组可以判断对应元素是否相等</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1a2977554614-10\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-t\">False</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">False</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1a2977554614-11\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-t\">False</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">False</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dtype</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">bool</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1a2977554614-12\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">all</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">     </span><span class=\"crayon-p\"># 判断数组是否相等</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1a2977554614-13\"><span class=\"crayon-t\">False</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0035 seconds] -->\r\n<p><strong>特别提示</strong>：如果想对数组内符合特定条件的元素做特殊处理，下面的代码也许有用。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab1a6963008369\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; a = np.arange(6).reshape((2,3))\r\n&gt;&gt;&gt; a\r\narray([[0, 1, 2],\r\n       [3, 4, 5]])\r\n&gt;&gt;&gt; (a&gt;2)&amp;(a&lt;=4)\r\narray([[False, False, False],\r\n       [ True,  True, False]], dtype=bool)\r\n&gt;&gt;&gt; a[(a&gt;2)&amp;(a&lt;=4)]\r\narray([3, 4])\r\n&gt;&gt;&gt; a[(a&gt;2)&amp;((a&lt;=4))] += 10\r\n&gt;&gt;&gt; a\r\narray([[ 0,  1,  2],\r\n       [13, 14,  5]])</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1a6963008369-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1a6963008369-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1a6963008369-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1a6963008369-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1a6963008369-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1a6963008369-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1a6963008369-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1a6963008369-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1a6963008369-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1a6963008369-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1a6963008369-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1a6963008369-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1a6963008369-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1a6963008369-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">reshape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1a6963008369-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">a</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1a6963008369-3\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1a6963008369-4\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1a6963008369-5\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1a6963008369-6\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-t\">False</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">False</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">False</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1a6963008369-7\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">True</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-t\">True</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">False</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dtype</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">bool</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1a6963008369-8\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1a6963008369-9\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1a6963008369-10\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1a6963008369-11\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">a</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1a6963008369-12\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1a6963008369-13\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">13</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0033 seconds] -->\r\n<p></p>\n<h3 id=\"数组方法和常用函数\">数组方法和常用函数</h3>\n<p>数组对象本身提供了计算算数平均值、求最大最小值等内置方法，numpy也提供了很多实用的函数。为了缩减篇幅，下面的代码仅以一维数组为例，展示了这些方法和函数用法。事实上，大多数情况下这些方法和函数对于多维数组同样有效，只有少数例外，比如compress函数。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab1aa428487571\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; a = np.array([3,2,4])\r\n&gt;&gt;&gt; a.sum()                   # 所有元素的和\r\n9\r\n&gt;&gt;&gt; a.prod()                  # 所有元素的乘积\r\n24\r\n&gt;&gt;&gt; a.mean()                  # 所有元素的算数平均值\r\n3.0\r\n&gt;&gt;&gt; a.max()                   # 所有元素的最大值\r\n4\r\n&gt;&gt;&gt; a.min()                   # 所有元素的最小值\r\n2\r\n&gt;&gt;&gt; a.clip(3,4)               # 小于3的元素替换为3，大于4的元素替换为4\r\narray([3, 3, 4])\r\n&gt;&gt;&gt; a.compress(a&gt;2)           # 返回大于2的元素组成的数组\r\narray([3, 4])\r\n&gt;&gt;&gt; a.tolist()                # 返回python的list\r\n[3, 2, 4]\r\n&gt;&gt;&gt; a.var()                   # 计算方差（元素与均值之差的平方的均值）\r\n0.66666666666666663\r\n&gt;&gt;&gt; a.std()                   # 计算标准差（方差的算术平方根）\r\n0.81649658092772603\r\n&gt;&gt;&gt; a.ptp()                   # 返回数组的最大值和最小值之差\r\n2\r\n&gt;&gt;&gt; a.argmin()                # 返回最小值在扁平数组中的索引\r\n1\r\n&gt;&gt;&gt; a.argmax()                # 返回最大值在扁平数组中的索引\r\n2\r\n&gt;&gt;&gt; np.where(a == 2)          # 返回所有值为2的元素的索引\r\n(array([1]),)\r\n&gt;&gt;&gt; np.diff(a)                # 返回相邻元素的差\r\narray([-1,  2])\r\n&gt;&gt;&gt; np.log(a)                 # 返回对数数组\r\narray([ 1.09861229,  0.69314718,  1.38629436])\r\n&gt;&gt;&gt; np.exp(a)                 # 返回指数数组\r\narray([ 20.08553692,   7.3890561 ,  54.59815003])\r\n&gt;&gt;&gt; np.sqrt(a)                # 返回开方数组\r\narray([ 1.73205081,  1.41421356,  2.        ])\r\n&gt;&gt;&gt; np.msort(a)               # 数组排序\r\narray([2, 3, 4])\r\n&gt;&gt;&gt; a = np.array([1,4,7])\r\n&gt;&gt;&gt; b = np.array([8,5,2])\r\n&gt;&gt;&gt; np.maximum(a, b)          # 返回多个数组中对应位置元素的最大值数组\r\narray([8, 5, 7])\r\n&gt;&gt;&gt; np.minimum(a, b)          # 返回多个数组中对应位置元素的最小值数组\r\narray([1, 4, 2])\r\n&gt;&gt;&gt; np.true_divide(a, b)      # 对整数实现真正的数学除法运算\r\narray([ 0.125,  0.8  ,  3.5  ])</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1aa428487571-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1aa428487571-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1aa428487571-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1aa428487571-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1aa428487571-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1aa428487571-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1aa428487571-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1aa428487571-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1aa428487571-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1aa428487571-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1aa428487571-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1aa428487571-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1aa428487571-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1aa428487571-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1aa428487571-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1aa428487571-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1aa428487571-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1aa428487571-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1aa428487571-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1aa428487571-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1aa428487571-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1aa428487571-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1aa428487571-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1aa428487571-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1aa428487571-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1aa428487571-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1aa428487571-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1aa428487571-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1aa428487571-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1aa428487571-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1aa428487571-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1aa428487571-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1aa428487571-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1aa428487571-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1aa428487571-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1aa428487571-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1aa428487571-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1aa428487571-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1aa428487571-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1aa428487571-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1aa428487571-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1aa428487571-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1aa428487571-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1aa428487571-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1aa428487571-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1aa428487571-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1aa428487571-47\">47</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1aa428487571-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1aa428487571-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sum</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                   </span><span class=\"crayon-p\"># 所有元素的和</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1aa428487571-3\"><span class=\"crayon-cn\">9</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1aa428487571-4\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">prod</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                  </span><span class=\"crayon-p\"># 所有元素的乘积</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1aa428487571-5\"><span class=\"crayon-cn\">24</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1aa428487571-6\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">mean</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                  </span><span class=\"crayon-p\"># 所有元素的算数平均值</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1aa428487571-7\"><span class=\"crayon-cn\">3.0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1aa428487571-8\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">max</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                   </span><span class=\"crayon-p\"># 所有元素的最大值</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1aa428487571-9\"><span class=\"crayon-cn\">4</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1aa428487571-10\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">min</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                   </span><span class=\"crayon-p\"># 所有元素的最小值</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1aa428487571-11\"><span class=\"crayon-cn\">2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1aa428487571-12\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">clip</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-p\"># 小于3的元素替换为3，大于4的元素替换为4</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1aa428487571-13\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1aa428487571-14\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">compress</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">           </span><span class=\"crayon-p\"># 返回大于2的元素组成的数组</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1aa428487571-15\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1aa428487571-16\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">tolist</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-p\"># 返回python的list</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1aa428487571-17\"><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1aa428487571-18\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-t\">var</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                   </span><span class=\"crayon-p\"># 计算方差（元素与均值之差的平方的均值）</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1aa428487571-19\"><span class=\"crayon-cn\">0.66666666666666663</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1aa428487571-20\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">std</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                   </span><span class=\"crayon-p\"># 计算标准差（方差的算术平方根）</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1aa428487571-21\"><span class=\"crayon-cn\">0.81649658092772603</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1aa428487571-22\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">ptp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                   </span><span class=\"crayon-p\"># 返回数组的最大值和最小值之差</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1aa428487571-23\"><span class=\"crayon-cn\">2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1aa428487571-24\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">argmin</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-p\"># 返回最小值在扁平数组中的索引</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1aa428487571-25\"><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1aa428487571-26\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">argmax</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-p\"># 返回最大值在扁平数组中的索引</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1aa428487571-27\"><span class=\"crayon-cn\">2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1aa428487571-28\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">where</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">          </span><span class=\"crayon-p\"># 返回所有值为2的元素的索引</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1aa428487571-29\"><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1aa428487571-30\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">diff</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-p\"># 返回相邻元素的差</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1aa428487571-31\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1aa428487571-32\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                 </span><span class=\"crayon-p\"># 返回对数数组</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1aa428487571-33\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.09861229</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.69314718</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.38629436</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1aa428487571-34\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">exp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                 </span><span class=\"crayon-p\"># 返回指数数组</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1aa428487571-35\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20.08553692</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">7.3890561</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">54.59815003</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1aa428487571-36\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sqrt</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-p\"># 返回开方数组</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1aa428487571-37\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.73205081</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.41421356</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2.</span><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1aa428487571-38\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">msort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">               </span><span class=\"crayon-p\"># 数组排序</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1aa428487571-39\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1aa428487571-40\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1aa428487571-41\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1aa428487571-42\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">maximum</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">          </span><span class=\"crayon-p\"># 返回多个数组中对应位置元素的最大值数组</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1aa428487571-43\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1aa428487571-44\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">minimum</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">          </span><span class=\"crayon-p\"># 返回多个数组中对应位置元素的最小值数组</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1aa428487571-45\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1aa428487571-46\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">true_divide</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">      </span><span class=\"crayon-p\"># 对整数实现真正的数学除法运算</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1aa428487571-47\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.125</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.8</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">3.5</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0087 seconds] -->\r\n<p></p>\n<h2 id=\"矩阵对象\">矩阵对象</h2>\n<p>matrix是矩阵对象，继承自ndarray类型，因此含有ndarray的所有数据属性和方法。不过，当你把矩阵对象当数组操作时，需要注意以下几点：</p>\n<ul>\n<li><strong>matrix对象总是二维的，即使是展平（ravel函数）操作或是成员选择，返回值也是二维的</strong></li>\n<li><strong>matrix对象和ndarray对象混合的运算总是返回matrix对象</strong></li>\n</ul>\n<h3 id=\"创建矩阵\">创建矩阵</h3>\n<p>matrix对象可以使用一个Matlab风格的字符串来创建（以空格分隔列，以分号分隔行的字符串），也可以用数组来创建。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab1b1251828741\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; np.mat('1 4 7; 2 5 8; 3 6 9')\r\nmatrix([[1, 4, 7],\r\n        [2, 5, 8],\r\n        [3, 6, 9]])\r\n&gt;&gt;&gt; np.mat(np.arange(1,10).reshape(3,3))\r\nmatrix([[1, 2, 3],\r\n        [4, 5, 6],\r\n        [7, 8, 9]])</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1b1251828741-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1b1251828741-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1b1251828741-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1b1251828741-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1b1251828741-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1b1251828741-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1b1251828741-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1b1251828741-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1b1251828741-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">mat</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'1 4 7; 2 5 8; 3 6 9'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1b1251828741-2\"><span class=\"crayon-e\">matrix</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1b1251828741-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1b1251828741-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1b1251828741-5\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">mat</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">reshape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1b1251828741-6\"><span class=\"crayon-e\">matrix</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1b1251828741-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1b1251828741-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0021 seconds] -->\r\n<p></p>\n<h3 id=\"矩阵的特有属性\">矩阵的特有属性</h3>\n<p>矩阵有几个特有的属性使得计算更加容易，这些属性有：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab1b5038032359\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; m = np.mat(np.arange(1,10).reshape(3,3))\r\n&gt;&gt;&gt; m\r\nmatrix([[1, 2, 3],\r\n        [4, 5, 6],\r\n        [7, 8, 9]])\r\n&gt;&gt;&gt; m.T             # 返回自身的转置\r\nmatrix([[1, 4, 7],\r\n        [2, 5, 8],\r\n        [3, 6, 9]])\r\n&gt;&gt;&gt; m.H             # 返回自身的共轭转置\r\nmatrix([[1, 4, 7],\r\n        [2, 5, 8],\r\n        [3, 6, 9]])\r\n&gt;&gt;&gt; m.I             # 返回自身的逆矩阵\r\nmatrix([[ -4.50359963e+15,   9.00719925e+15,  -4.50359963e+15],\r\n        [  9.00719925e+15,  -1.80143985e+16,   9.00719925e+15],\r\n        [ -4.50359963e+15,   9.00719925e+15,  -4.50359963e+15]])\r\n&gt;&gt;&gt; m.A             # 返回自身数据的二维数组的一个视图\r\narray([[1, 2, 3],\r\n       [4, 5, 6],\r\n       [7, 8, 9]])</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1b5038032359-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1b5038032359-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1b5038032359-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1b5038032359-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1b5038032359-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1b5038032359-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1b5038032359-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1b5038032359-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1b5038032359-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1b5038032359-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1b5038032359-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1b5038032359-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1b5038032359-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1b5038032359-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1b5038032359-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1b5038032359-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1b5038032359-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1b5038032359-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1b5038032359-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1b5038032359-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1b5038032359-21\">21</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1b5038032359-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">mat</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">reshape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1b5038032359-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">m</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1b5038032359-3\"><span class=\"crayon-e\">matrix</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1b5038032359-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1b5038032359-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1b5038032359-6\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">m</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">T</span><span class=\"crayon-h\">             </span><span class=\"crayon-p\"># 返回自身的转置</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1b5038032359-7\"><span class=\"crayon-e\">matrix</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1b5038032359-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1b5038032359-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1b5038032359-10\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">m</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">H</span><span class=\"crayon-h\">             </span><span class=\"crayon-p\"># 返回自身的共轭转置</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1b5038032359-11\"><span class=\"crayon-e\">matrix</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1b5038032359-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1b5038032359-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1b5038032359-14\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">m</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">I</span><span class=\"crayon-h\">             </span><span class=\"crayon-p\"># 返回自身的逆矩阵</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1b5038032359-15\"><span class=\"crayon-e\">matrix</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.50359963e</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">9.00719925e</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.50359963e</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1b5038032359-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">9.00719925e</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.80143985e</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">16</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">9.00719925e</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1b5038032359-17\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.50359963e</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">9.00719925e</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4.50359963e</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1b5038032359-18\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">m</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">A</span><span class=\"crayon-h\">             </span><span class=\"crayon-p\"># 返回自身数据的二维数组的一个视图</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1b5038032359-19\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1b5038032359-20\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1b5038032359-21\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0050 seconds] -->\r\n<p></p>\n<h3 id=\"矩阵乘法\">矩阵乘法</h3>\n<p>对ndarray对象而言，星号是按元素相乘，dot()函数则当作矩阵相乘。对于matrix对象来说，星号和dot()函数都是矩阵相乘。特别的，对于一维数组，dot()函数实现的是向量点乘（结果是标量），但星号实现的却不是差乘。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab1ba987026584\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; a = np.array([1,2,3])\r\n&gt;&gt;&gt; b = np.array([4,5,6])\r\n&gt;&gt;&gt; a*b               # 一维数组，元素相乘\r\narray([ 4, 10, 18])\r\n&gt;&gt;&gt; np.dot(a,b)       # 一维数组，元素相乘再求和\r\n32\r\n&gt;&gt;&gt; a = np.array([[1,2],[3,4]])\r\n&gt;&gt;&gt; b = np.array([[5,6],[7,8]])\r\n&gt;&gt;&gt; a*b               # 多维数组，元素相乘\r\narray([[ 5, 12],\r\n       [21, 32]])\r\n&gt;&gt;&gt; np.dot(a,b)       # 多维数组，实现的是矩阵相乘\r\narray([[19, 22],\r\n       [43, 50]])\r\n&gt;&gt;&gt; m = np.mat(a)\r\n&gt;&gt;&gt; n = np.mat(b)\r\n&gt;&gt;&gt; np.dot(m,n)       # 矩阵相乘\r\nmatrix([[19, 22],\r\n        [43, 50]])\r\n&gt;&gt;&gt; m*n               # 矩阵相乘\r\nmatrix([[19, 22],\r\n        [43, 50]])</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1ba987026584-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1ba987026584-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1ba987026584-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1ba987026584-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1ba987026584-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1ba987026584-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1ba987026584-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1ba987026584-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1ba987026584-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1ba987026584-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1ba987026584-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1ba987026584-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1ba987026584-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1ba987026584-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1ba987026584-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1ba987026584-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1ba987026584-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1ba987026584-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1ba987026584-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1ba987026584-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1ba987026584-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1ba987026584-22\">22</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1ba987026584-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1ba987026584-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1ba987026584-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">a*</span><span class=\"crayon-v\">b</span><span class=\"crayon-h\">               </span><span class=\"crayon-p\"># 一维数组，元素相乘</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1ba987026584-4\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1ba987026584-5\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">dot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">       </span><span class=\"crayon-p\"># 一维数组，元素相乘再求和</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1ba987026584-6\"><span class=\"crayon-cn\">32</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1ba987026584-7\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1ba987026584-8\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1ba987026584-9\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">a*</span><span class=\"crayon-v\">b</span><span class=\"crayon-h\">               </span><span class=\"crayon-p\"># 多维数组，元素相乘</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1ba987026584-10\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1ba987026584-11\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">21</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">32</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1ba987026584-12\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">dot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">       </span><span class=\"crayon-p\"># 多维数组，实现的是矩阵相乘</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1ba987026584-13\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">19</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1ba987026584-14\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">43</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">50</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1ba987026584-15\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">mat</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1ba987026584-16\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">mat</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1ba987026584-17\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">dot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">m</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">       </span><span class=\"crayon-p\"># 矩阵相乘</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1ba987026584-18\"><span class=\"crayon-e\">matrix</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">19</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1ba987026584-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">43</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">50</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1ba987026584-20\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">m*</span><span class=\"crayon-v\">n</span><span class=\"crayon-h\">               </span><span class=\"crayon-p\"># 矩阵相乘</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1ba987026584-21\"><span class=\"crayon-e\">matrix</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">19</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1ba987026584-22\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">43</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">50</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0049 seconds] -->\r\n<p></p>\n<h2 id=\"线性代数模块\">线性代数模块</h2>\n<p>numpy.linalg 是numpy的线性代数模块，可以用来解决逆矩阵、特征值、线性方程组以及行列式等问题。</p>\n<h3 id=\"计算逆矩阵\">计算逆矩阵</h3>\n<p>尽管matrix对象本身有逆矩阵的属性，但用numpy.linalg模块求解矩阵的逆，也是非常简单的。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab1bf730836747\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nm = np.mat('0 1 2; 1 0 3; 4 -3 8')\r\nmi = np.linalg.inv(m)           # mi即为m的逆矩阵。何以证明？\r\nm * mi                          # 矩阵与其逆矩阵相乘，结果为单位矩阵\r\nmatrix([[ 1.,  0.,  0.],\r\n        [ 0.,  1.,  0.],\r\n        [ 0.,  0.,  1.]])</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1bf730836747-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1bf730836747-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1bf730836747-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1bf730836747-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1bf730836747-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1bf730836747-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1bf730836747-1\"><span class=\"crayon-v\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">mat</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'0 1 2; 1 0 3; 4 -3 8'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1bf730836747-2\"><span class=\"crayon-v\">mi</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">linalg</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">inv</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">m</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">           </span><span class=\"crayon-p\"># mi即为m的逆矩阵。何以证明？</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1bf730836747-3\"><span class=\"crayon-e \">m *</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mi</span><span class=\"crayon-h\">                          </span><span class=\"crayon-p\"># 矩阵与其逆矩阵相乘，结果为单位矩阵</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1bf730836747-4\"><span class=\"crayon-e\">matrix</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1bf730836747-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1bf730836747-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p></p>\n<h3 id=\"计算行列式\">计算行列式</h3>\n<p>如何计算行列式，我早已经不记得了，但手工计算行列式的痛苦，我依然记忆犹新。现在好了，你在手机上都可以用numpy轻松搞定（前提是你的手机上安装了python + numpy）。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab1c3306302518\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nm = np.mat('0 1 2; 1 0 3; 4 -3 8')\r\nnp.linalg.det(m)                # 什么？这就成了？\r\n2.0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1c3306302518-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1c3306302518-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1c3306302518-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1c3306302518-1\"><span class=\"crayon-v\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">mat</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'0 1 2; 1 0 3; 4 -3 8'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1c3306302518-2\"><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">linalg</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">det</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">m</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                </span><span class=\"crayon-p\"># 什么？这就成了？</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1c3306302518-3\"><span class=\"crayon-cn\">2.0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p></p>\n<h3 id=\"计算特征值和特征向量\">计算特征值和特征向量</h3>\n<p>截至目前，我的工作和特征值、特征向量还有没任何关联。记录这一节，纯粹是为了我女儿，她正在读数学专业。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab1c6503328385\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nm = np.mat('0 1 2; 1 0 3; 4 -3 8')\r\n&gt;&gt;&gt; np.linalg.eigvals(m)        # 计算特征值\r\narray([ 7.96850246, -0.48548592,  0.51698346])\r\n&gt;&gt;&gt; np.linalg.eig(m)            # 返回特征值及其对应特征向量的元组\r\n(array([ 7.96850246, -0.48548592,  0.51698346]), matrix([[ 0.26955165,  0.90772191, -0.74373492],\r\n        [ 0.36874217,  0.24316331, -0.65468206],\r\n        [ 0.88959042, -0.34192476,  0.13509171]]))</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1c6503328385-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1c6503328385-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1c6503328385-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1c6503328385-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1c6503328385-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1c6503328385-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1c6503328385-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1c6503328385-1\"><span class=\"crayon-v\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">mat</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'0 1 2; 1 0 3; 4 -3 8'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1c6503328385-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">linalg</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">eigvals</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">m</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">        </span><span class=\"crayon-p\"># 计算特征值</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1c6503328385-3\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7.96850246</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.48548592</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.51698346</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1c6503328385-4\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">linalg</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">eig</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">m</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">            </span><span class=\"crayon-p\"># 返回特征值及其对应特征向量的元组</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1c6503328385-5\"><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7.96850246</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.48548592</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.51698346</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">matrix</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.26955165</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.90772191</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.74373492</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1c6503328385-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.36874217</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.24316331</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.65468206</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1c6503328385-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.88959042</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.34192476</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.13509171</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0023 seconds] -->\r\n<p></p>\n<h3 id=\"求解线性方程组\">求解线性方程组</h3>\n<p>有线性方程组如下：</p>\n<blockquote><p>x – 2y + z = 0<br>\n2y -8z = 8<br>\n-4x + 5y + 9z = -9</p></blockquote>\n<p>求解过程如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab1ca565848646\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; A = np.mat('1 -2 1; 0 2 -8; -4 5 9')\r\n&gt;&gt;&gt; b = np.array([0, 8, -9])\r\n&gt;&gt;&gt; np.linalg.solve(A, b)\r\narray([ 29.,  16.,   3.])  # x = 29, y = 16, z = 3</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1ca565848646-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1ca565848646-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1ca565848646-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1ca565848646-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1ca565848646-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">mat</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'1 -2 1; 0 2 -8; -4 5 9'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1ca565848646-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1ca565848646-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">linalg</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">solve</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1ca565848646-4\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">29.</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">16.</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">3.</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span><span class=\"crayon-p\"># x = 29, y = 16, z = 3</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p></p>\n<h1 id=\"三剑客之matplotlib\">三剑客之<code>Matplotlib</code></h1>\n<p>matplotlib 是python最著名的绘图库，它提供了一整套和Matlab相似的命令API，十分适合交互式地进行制图。而且也可以方便地将它作为绘图控件，嵌入GUI应用程序中。matplotlib 可以绘制多种形式的图形包括普通的线图，直方图，饼图，散点图以及误差线图等；可以比较方便的定制图形的各种属性比如图线的类型，颜色，粗细，字体的大小等；它能够很好地支持一部分 TeX 排版命令，可以比较美观地显示图形中的数学公式。</p>\n<p><img title=\"\" src=\"https://img-blog.csdn.net/20170216101013169?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVmaXZl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"Demo\"></p>\n<h2 id=\"pylot介绍\">pylot介绍</h2>\n<p>Matplotlib 包含了几十个不同的模块， 如 matlab、mathtext、finance、dates 等，而 pylot 则是我们最常用的绘图模块，这也是本文介绍的重点。</p>\n<h3 id=\"中文显示问题的解决方案\">中文显示问题的解决方案</h3>\n<p>有很多方法可以解决此问题，但下面的方法恐怕是最简单的解决方案了（我只在windows平台上测试过，其他平台请看官自测）。如果想了解更多，也可以参考我N年前的一片博文：<a href=\"http://xufive.blog.163.com/blog/static/172326168201063111370141/\" target=\"_blank\" rel=\"nofollow\">matplotlib显示中文的解决方案</a></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab1ce806672525\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; from pylab import mpl\r\n&gt;&gt;&gt; mpl.rcParams['font.sans-serif'] = ['FangSong'] # 指定默认字体\r\n&gt;&gt;&gt; mpl.rcParams['axes.unicode_minus'] = False     # 解决保存图像时'-'显示为方块的问题</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1ce806672525-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1ce806672525-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1ce806672525-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1ce806672525-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">pylab </span><span class=\"crayon-e\">import </span><span class=\"crayon-v\">mpl</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1ce806672525-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mpl</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rcParams</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'font.sans-serif'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'FangSong'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># 指定默认字体</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1ce806672525-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mpl</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rcParams</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'axes.unicode_minus'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">False</span><span class=\"crayon-h\">     </span><span class=\"crayon-p\"># 解决保存图像时'-'显示为方块的问题</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p></p>\n<h3 id=\"绘制最简单的图形\">绘制最简单的图形</h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab1d2585603234\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; import numpy as np\r\n&gt;&gt;&gt; import matplotlib.pyplot as plt\r\n&gt;&gt;&gt; x = np.arange(0, 2*np.pi, 0.01)\r\n&gt;&gt;&gt; y = np.sin(x)\r\n&gt;&gt;&gt; plt.plot(x, y)\r\n&gt;&gt;&gt; plt.show()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1d2585603234-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1d2585603234-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1d2585603234-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1d2585603234-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1d2585603234-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1d2585603234-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1d2585603234-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1d2585603234-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-v\">matplotlib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pyplot </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1d2585603234-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">pi</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.01</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1d2585603234-4\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sin</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1d2585603234-5\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">plot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1d2585603234-6\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">show</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p><img title=\"\" src=\"https://img-blog.csdn.net/20170215110111687?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVmaXZl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"最简单的正弦曲线\"></p>\n<h3 id=\"设置标题坐标轴名称坐标轴范围\">设置标题、坐标轴名称、坐标轴范围</h3>\n<p>如果你在python的shell中运行下面的代码，而shell的默认编码又不是utf-8的话，中文可能仍然会显示为乱码。你可以尝试着把 <strong>u’正弦曲线’</strong> 写成 <strong>‘正弦曲线’.decode(‘gbk’)</strong>或者<strong>‘正弦曲线’.decode(‘utf-8’)</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab1d6057211010\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; import numpy as np\r\n&gt;&gt;&gt; import matplotlib.pyplot as plt\r\n&gt;&gt;&gt; from pylab import mpl\r\n&gt;&gt;&gt; mpl.rcParams['font.sans-serif'] = ['FangSong']\r\n&gt;&gt;&gt; mpl.rcParams['axes.unicode_minus'] = False\r\n&gt;&gt;&gt; x = np.arange(0, 2*np.pi, 0.01)\r\n&gt;&gt;&gt; y = np.sin(x)\r\n&gt;&gt;&gt; plt.plot(x, y)\r\n&gt;&gt;&gt; plt.title(u'正弦曲线', fontdict={'size':20})      # 设置标题\r\n&gt;&gt;&gt; plt.xlabel(u'弧度', fontdict={'size':16})         # 显示横轴名称\r\n&gt;&gt;&gt; plt.ylabel(u'正弦值', fontdict={'size':16})       # 显示纵轴名称\r\n&gt;&gt;&gt; plt.axis([-0.1*np.pi, 2.1*np.pi, -1.1, 1.1])     # 设置坐标轴范围\r\n&gt;&gt;&gt; plt.show()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1d6057211010-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1d6057211010-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1d6057211010-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1d6057211010-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1d6057211010-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1d6057211010-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1d6057211010-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1d6057211010-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1d6057211010-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1d6057211010-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1d6057211010-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1d6057211010-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1d6057211010-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1d6057211010-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1d6057211010-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-v\">matplotlib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pyplot </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1d6057211010-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">pylab </span><span class=\"crayon-e\">import </span><span class=\"crayon-v\">mpl</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1d6057211010-4\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mpl</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rcParams</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'font.sans-serif'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'FangSong'</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1d6057211010-5\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mpl</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rcParams</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'axes.unicode_minus'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">False</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1d6057211010-6\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">pi</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.01</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1d6057211010-7\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sin</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1d6057211010-8\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">plot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1d6057211010-9\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">title</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">u</span><span class=\"crayon-s\">'正弦曲线'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fontdict</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'size'</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">20</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">      </span><span class=\"crayon-p\"># 设置标题</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1d6057211010-10\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">xlabel</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">u</span><span class=\"crayon-s\">'弧度'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fontdict</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'size'</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">16</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">         </span><span class=\"crayon-p\"># 显示横轴名称</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1d6057211010-11\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">ylabel</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">u</span><span class=\"crayon-s\">'正弦值'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fontdict</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'size'</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">16</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">       </span><span class=\"crayon-p\"># 显示纵轴名称</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1d6057211010-12\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">axis</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.1</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">pi</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.1</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">pi</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">     </span><span class=\"crayon-p\"># 设置坐标轴范围</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1d6057211010-13\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">show</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0038 seconds] -->\r\n<p><img title=\"\" src=\"https://img-blog.csdn.net/20170215110140921?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVmaXZl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"设置标题和坐标轴\"></p>\n<h3 id=\"设置点和线的样式宽度颜色\">设置点和线的样式、宽度、颜色</h3>\n<p>plt.plot函数的调用形式如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab1da565042395\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nplot(x, y, color='green', linestyle='dashed', linewidth=1, marker='o', markerfacecolor='blue', markersize=6)\r\nplot(x, y, c='g', ls='--', lw=1, marker='o', mfc='blue', ms=6)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1da565042395-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1da565042395-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1da565042395-1\"><span class=\"crayon-e\">plot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">color</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'green'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">linestyle</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'dashed'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">linewidth</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">marker</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'o'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">markerfacecolor</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'blue'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">markersize</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1da565042395-2\"><span class=\"crayon-e\">plot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'g'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ls</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'--'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lw</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">marker</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'o'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mfc</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'blue'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ms</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p></p>\n<ol>\n<li>color指定线的颜色，可简写为“c”。颜色的选项为：\n<ul>\n<li>蓝色： ‘b’ (blue)</li>\n<li>绿色： ‘g’ (green)</li>\n<li>红色： ‘r’ (red)</li>\n<li>墨绿： ‘c’ (cyan)</li>\n<li>洋红： ‘m’ (magenta)</li>\n<li>黄色： ‘y’ (yellow)</li>\n<li>黑色： ‘k’ (black)</li>\n<li>白色： ‘w’ (white)</li>\n<li>灰度表示： e.g. 0.75 ([0,1]内任意浮点数)</li>\n<li>RGB表示法： e.g. ‘#2F4F4F’ 或 (0.18, 0.31, 0.31)</li>\n</ul>\n</li>\n<li>linestyle指定线型，可简写为“ls”。线型的选项为：\n<ul>\n<li>实线： ‘-’ (solid line)</li>\n<li>虚线： ‘–’ (dashed line)</li>\n<li>虚点线： ‘-.’ (dash-dot line)</li>\n<li>点线： ‘:’ (dotted line)</li>\n<li>无： ”或’ ‘或’None’</li>\n</ul>\n</li>\n<li>linewidth指定线宽，可简写为“lw”。</li>\n<li>marker描述数据点的形状\n<ul>\n<li>点线： ‘.’</li>\n<li>点线： ‘o’</li>\n<li>加号： ‘+</li>\n<li>叉号： ‘x’</li>\n<li>上三角： ‘^’</li>\n<li>上三角： ‘v’</li>\n</ul>\n</li>\n<li>markerfacecolor指定数据点标记的表面颜色，可 简写为“ mfc”。</li>\n<li>markersize指定数据点标记的大小，可 简写为“ ms”。</li>\n</ol>\n<h3 id=\"文本标注和图例\">文本标注和图例</h3>\n<p>我们分别使用不同的线型、颜色来绘制以10、e、2为基的一组幂函数曲线，演示文本标注和图例的使用。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab1de138534993\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; import numpy as np\r\n&gt;&gt;&gt; import matplotlib.pyplot as plt\r\n&gt;&gt;&gt; from pylab import mpl\r\n&gt;&gt;&gt; mpl.rcParams['font.sans-serif'] = ['FangSong']\r\n&gt;&gt;&gt; mpl.rcParams['axes.unicode_minus'] = False\r\n&gt;&gt;&gt; x = np.linspace(-4, 4, 200)\r\n&gt;&gt;&gt; f1 = np.power(10, x)\r\n&gt;&gt;&gt; f2 = np.power(np.e, x)\r\n&gt;&gt;&gt; f3 = np.power(2, x)\r\n&gt;&gt;&gt; plt.plot(x, f1, 'r', ls='-', linewidth=2, label='$10^x$')\r\n&gt;&gt;&gt; plt.plot(x, f2, 'b', ls='--', linewidth=2, label='$e^x$')\r\n&gt;&gt;&gt; plt.plot(x, f3, 'g', ls=':', linewidth=2, label='$2^x$')\r\n&gt;&gt;&gt; plt.axis([-4, 4, -0.5, 8])\r\n&gt;&gt;&gt; plt.text(1, 7.5, r'$10^x$', fontsize=16)\r\n&gt;&gt;&gt; plt.text(2.2, 7.5, r'$e^x$', fontsize=16)\r\n&gt;&gt;&gt; plt.text(3.2, 7.5, r'$2^x$', fontsize=16)\r\n&gt;&gt;&gt; plt.title('幂函数曲线', fontsize=16)\r\n&gt;&gt;&gt; plt.legend(loc='upper left')\r\n&gt;&gt;&gt; plt.show()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1de138534993-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1de138534993-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1de138534993-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1de138534993-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1de138534993-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1de138534993-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1de138534993-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1de138534993-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1de138534993-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1de138534993-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1de138534993-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1de138534993-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1de138534993-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1de138534993-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1de138534993-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1de138534993-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1de138534993-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1de138534993-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1de138534993-19\">19</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1de138534993-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1de138534993-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-v\">matplotlib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pyplot </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1de138534993-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">pylab </span><span class=\"crayon-e\">import </span><span class=\"crayon-v\">mpl</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1de138534993-4\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mpl</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rcParams</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'font.sans-serif'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'FangSong'</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1de138534993-5\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mpl</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rcParams</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'axes.unicode_minus'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">False</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1de138534993-6\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">linspace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">200</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1de138534993-7\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">power</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1de138534993-8\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">power</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1de138534993-9\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f3</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">power</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1de138534993-10\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">plot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'r'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ls</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'-'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">linewidth</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">label</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'$10^x$'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1de138534993-11\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">plot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'b'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ls</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'--'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">linewidth</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">label</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'$e^x$'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1de138534993-12\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">plot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'g'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ls</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">':'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">linewidth</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">label</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'$2^x$'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1de138534993-13\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">axis</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1de138534993-14\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">text</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7.5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">r</span><span class=\"crayon-s\">'$10^x$'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fontsize</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">16</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1de138534993-15\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">text</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2.2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7.5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">r</span><span class=\"crayon-s\">'$e^x$'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fontsize</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">16</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1de138534993-16\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">text</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3.2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7.5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">r</span><span class=\"crayon-s\">'$2^x$'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fontsize</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">16</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1de138534993-17\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">title</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'幂函数曲线'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fontsize</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">16</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1de138534993-18\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">legend</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">loc</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'upper left'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1de138534993-19\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">show</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0060 seconds] -->\r\n<p><img title=\"\" src=\"https://img-blog.csdn.net/20170215144857840?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVmaXZl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"></p>\n<p>在绘制图例时，loc用于指定图例的位置，可用的选项有：</p>\n<ul>\n<li>best</li>\n<li>upper right</li>\n<li>upper left</li>\n<li>lower left</li>\n<li>lower right</li>\n</ul>\n<h2 id=\"绘制多轴图\">绘制多轴图</h2>\n<p>在介绍如何将多幅子图绘制在同一画板的同时，顺便演示如何绘制直线和矩形。我们可以使用subplot函数快速绘制有多个轴的图表。subplot函数的调用形式如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab1e2966893168\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsubplot(numRows, numCols, plotNum)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1e2966893168-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1e2966893168-1\"><span class=\"crayon-e\">subplot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">numRows</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">numCols</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plotNum</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>subplot将整个绘图区域等分为numRows行 * numCols列个子区域，然后按照从左到右，从上到下的顺序对每个子区域进行编号，左上的子区域的编号为1。如果numRows，numCols和plotNum这三个数都小于10的话，可以把它们缩写为一个整数，例如subplot(323)和subplot(3,2,3)是相同的。subplot在plotNum指定的区域中创建一个轴对象。如果新创建的轴和之前创建的轴重叠的话，之前的轴将被删除。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab1e6089942853\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; import matplotlib.pyplot as plt\r\n&gt;&gt;&gt; plt.subplot(221) # 两行两列的第1个位置\r\n&gt;&gt;&gt; plt.axis([-1, 2, -1, 2])\r\n&gt;&gt;&gt; plt.axhline(y=0.5, color='b')\r\n&gt;&gt;&gt; plt.axhline(y=0.5, xmin=0.25, xmax=0.75, color='r')\r\n&gt;&gt;&gt; plt.subplot(222) # 两行两列的第2个位置\r\n&gt;&gt;&gt; plt.axis([-1, 2, -1, 2])\r\n&gt;&gt;&gt; plt.axvline(x=0, ymin=0, linewidth=4, color='r')\r\n&gt;&gt;&gt; plt.axvline(x=1.0, ymin=-0.5, ymax=0.5, linewidth=4, color='g')\r\n&gt;&gt;&gt; plt.subplot(212) # 两行一列的第2个位置\r\n&gt;&gt;&gt; plt.axis([-1, 2, -1, 2])\r\n&gt;&gt;&gt; plt.axvspan(1.25, 1.55, facecolor='g', alpha=0.5)\r\n&gt;&gt;&gt; plt.axhspan(0.25, 0.75, facecolor='0.5', alpha=0.5)\r\n&gt;&gt;&gt; plt.show()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1e6089942853-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1e6089942853-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1e6089942853-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1e6089942853-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1e6089942853-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1e6089942853-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1e6089942853-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1e6089942853-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1e6089942853-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1e6089942853-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1e6089942853-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1e6089942853-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1e6089942853-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1e6089942853-14\">14</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1e6089942853-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-v\">matplotlib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pyplot </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1e6089942853-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">subplot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">221</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># 两行两列的第1个位置</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1e6089942853-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">axis</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1e6089942853-4\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">axhline</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">y</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0.5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">color</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'b'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1e6089942853-5\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">axhline</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">y</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0.5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">xmin</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0.25</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">xmax</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0.75</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">color</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'r'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1e6089942853-6\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">subplot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">222</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># 两行两列的第2个位置</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1e6089942853-7\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">axis</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1e6089942853-8\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">axvline</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ymin</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">linewidth</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">color</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'r'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1e6089942853-9\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">axvline</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ymin</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ymax</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0.5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">linewidth</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">color</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'g'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1e6089942853-10\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">subplot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">212</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># 两行一列的第2个位置</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1e6089942853-11\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">axis</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1e6089942853-12\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">axvspan</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1.25</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.55</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">facecolor</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'g'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">alpha</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0.5</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1e6089942853-13\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">axhspan</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0.25</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.75</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">facecolor</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'0.5'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">alpha</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0.5</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1e6089942853-14\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">show</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0048 seconds] -->\r\n<p><img title=\"\" src=\"https://img-blog.csdn.net/20170215152531638?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVmaXZl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"绘制多轴图\"></p>\n<h2 id=\"常用绘图类型\">常用绘图类型</h2>\n<h3 id=\"直方图\">直方图</h3>\n<p>用numpy随机生成一个符合正态分布的数据集，统计分段区域内数据的个数。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab1ea188495603\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; import numpy as np\r\n&gt;&gt;&gt; import matplotlib.pyplot as plt\r\n&gt;&gt;&gt; data = np.random.normal(5.0, 3.0, 1000)\r\n&gt;&gt;&gt; plt.hist(data)\r\n&gt;&gt;&gt; bins = np.arange(-5, 16, 1)\r\n&gt;&gt;&gt; plt.hist(data, bins) # 使用自定义的分段区域\r\n&gt;&gt;&gt; plt.show()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1ea188495603-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1ea188495603-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1ea188495603-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1ea188495603-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1ea188495603-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1ea188495603-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1ea188495603-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1ea188495603-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1ea188495603-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-v\">matplotlib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pyplot </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1ea188495603-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">random</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">normal</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1ea188495603-4\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">hist</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1ea188495603-5\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bins</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1ea188495603-6\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">hist</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bins</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># 使用自定义的分段区域</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1ea188495603-7\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">show</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n<p><img title=\"\" src=\"https://img-blog.csdn.net/20170215154347043?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVmaXZl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"直方图\"></p>\n<h3 id=\"散点图\">散点图</h3>\n<p>使用plot()绘图时，如果指定样式参数为仅绘制数据点（linestyle=’None’），那么所绘制的就是一幅散列图。这种方法所绘制的点无法单独指定数据点的颜色和大小，而使用scatter()绘制散列图就可以指定每个点的颜色和大小。</p>\n<p>plt.scatter函数的调用形式如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab1ed815523204\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nscatter(x, y, s=None, c=None, marker=None, cmap=None, norm=None, vmin=None, vmax=None, alpha=None, linewidths=None, verts=None, edgecolors=None, hold=None, data=None, **kwargs)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1ed815523204-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1ed815523204-1\"><span class=\"crayon-e\">scatter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">None</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">None</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">marker</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">None</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cmap</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">None</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">norm</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">None</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">vmin</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">None</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">vmax</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">None</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">alpha</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">None</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">linewidths</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">None</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">verts</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">None</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">edgecolors</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">None</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">hold</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">None</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">None</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">kwargs</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p>scatter()的前两个参数是数组，分别指定每个点的X轴和Y轴的坐标。s参数指定点的大 小，值和点的面积成正比，它可以是一个数，指定所有点的大小，也可以是数组，分别对每个点指定大小。c参数指定每个点的颜色，可以是数值或数组。这里使用一维数组为每个点指定了一个数值。通过颜色映射表，每个数值都会与一个颜色相对应。默认的颜色映射表中蓝色与最小值对应，红色与最大值对应。当c参数是形状为(N,3)或(N,4)的二维数组时，则直接表示每个点的RGB颜色。marker参数设置点的形状，可以是个表示形状的字符串，也可以是表示多边形的两个元素的元组，第一个元素表示多边形的边数，第二个元素表示多边形的样式，取值范围为0、1、2、3。0表示多边形，1表示星形，2表示放射形，3表示忽略边数而显示为圆形。alpha参数设置点的透明度。facecolors参数为“none”时，表示散列点没有填充色。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab1f1024790972\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; import numpy as np\r\n&gt;&gt;&gt; import matplotlib.pyplot as plt\r\n&gt;&gt;&gt; x = np.random.rand(50)\r\n&gt;&gt;&gt; y = np.random.rand(50)\r\n&gt;&gt;&gt; area = np.pi * (15 * np.random.rand(50))**2\r\n&gt;&gt;&gt; color = 2 * np.pi * np.random.rand(50)\r\n&gt;&gt;&gt; plt.scatter(x, y, s=area, c=color, alpha=0.5, cmap=plt.cm.hsv)\r\n&gt;&gt;&gt; plt.show()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1f1024790972-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1f1024790972-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1f1024790972-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1f1024790972-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1f1024790972-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1f1024790972-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1f1024790972-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1f1024790972-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1f1024790972-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1f1024790972-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-v\">matplotlib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pyplot </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1f1024790972-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">random</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">rand</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">50</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1f1024790972-4\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">random</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">rand</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">50</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1f1024790972-5\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">area</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e \">pi *</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">random</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">rand</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">50</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-cn\">2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1f1024790972-6\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e \">pi *</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">random</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">rand</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">50</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1f1024790972-7\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">scatter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">area</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">color</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">alpha</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0.5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cmap</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">cm</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">hsv</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1f1024790972-8\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">show</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0028 seconds] -->\r\n<p><img title=\"\" src=\"https://img-blog.csdn.net/20170215160439304?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVmaXZl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"散点图\"></p>\n<h3 id=\"梯形图柱状图填充图\">梯形图、柱状图、填充图</h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab1f5498495843\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; import numpy as np\r\n&gt;&gt;&gt; import matplotlib.pyplot as plt\r\n&gt;&gt;&gt; n = np.array([0,1,2,3,4,5])\r\n&gt;&gt;&gt; x = np.linspace(-0.75, 1., 100)\r\n&gt;&gt;&gt; plt.subplot(131)\r\n&gt;&gt;&gt; plt.step(n, n**2, lw=2)\r\n&gt;&gt;&gt; plt.subplot(132)\r\n&gt;&gt;&gt; plt.bar(n, n**2, align=\"center\", width=0.5, alpha=0.5)\r\n&gt;&gt;&gt; plt.subplot(133)\r\n&gt;&gt;&gt; plt.fill_between(x, x**2, x**3, color=\"green\", alpha=0.5)\r\n&gt;&gt;&gt; plt.show()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1f5498495843-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1f5498495843-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1f5498495843-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1f5498495843-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1f5498495843-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1f5498495843-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1f5498495843-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1f5498495843-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1f5498495843-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1f5498495843-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1f5498495843-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1f5498495843-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1f5498495843-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-v\">matplotlib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pyplot </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1f5498495843-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1f5498495843-4\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">linspace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.75</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1f5498495843-5\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">subplot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">131</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1f5498495843-6\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">step</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">n*</span><span class=\"crayon-o\">*</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lw</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1f5498495843-7\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">subplot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">132</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1f5498495843-8\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">bar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">n*</span><span class=\"crayon-o\">*</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">align</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"center\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">width</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0.5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">alpha</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0.5</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1f5498495843-9\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">subplot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">133</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1f5498495843-10\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">fill_between</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">x*</span><span class=\"crayon-o\">*</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">x*</span><span class=\"crayon-o\">*</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">color</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"green\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">alpha</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0.5</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1f5498495843-11\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">show</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0033 seconds] -->\r\n<p><img title=\"\" src=\"https://img-blog.csdn.net/20170215161124219?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVmaXZl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"梯形图、柱状图、填充图\"></p>\n<h3 id=\"对数坐标\">对数坐标</h3>\n<p>plot()所绘制图表的X-Y轴坐标都是算术坐标。绘制对数坐标图的函数有三个：semilogx()、semilogy()和loglog(),它们分别绘制X轴为对数坐标、Y轴为对数坐标以及两个轴都为对数坐标时的图表。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab1f8515066495\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; import numpy as np\r\n&gt;&gt;&gt; import matplotlib.pyplot as plt\r\n&gt;&gt;&gt; x = np.linspace(0, 3, 100)\r\n&gt;&gt;&gt; y = np.power(2, np.power(2,x))\r\n&gt;&gt;&gt; plt.subplot(121)\r\n&gt;&gt;&gt; plt.semilogy(x, y , '-r')\r\n&gt;&gt;&gt; plt.subplot(122)\r\n&gt;&gt;&gt; plt.plot(x,y, '--g')\r\n&gt;&gt;&gt; plt.show()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1f8515066495-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1f8515066495-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1f8515066495-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1f8515066495-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1f8515066495-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1f8515066495-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1f8515066495-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1f8515066495-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1f8515066495-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1f8515066495-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1f8515066495-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-v\">matplotlib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pyplot </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1f8515066495-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">linspace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1f8515066495-4\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">power</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">power</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1f8515066495-5\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">subplot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">121</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1f8515066495-6\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">semilogy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'-r'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1f8515066495-7\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">subplot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">122</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1f8515066495-8\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">plot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'--g'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1f8515066495-9\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">show</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0023 seconds] -->\r\n<p><img title=\"\" src=\"https://img-blog.csdn.net/20170215163317092?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVmaXZl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"对数坐标\"></p>\n<h3 id=\"极坐标绘图\">极坐标绘图</h3>\n<p>极坐标系是和笛卡尔(X-Y)坐标系完全不同的坐标系，极坐标系中的点由一个夹角和一段相对中心点的距离来表示。polar(theta, r, **kwargs)可以直接创建极坐标子图并在其中绘制曲线。也可以使用程序中调用subplot()创建子图时通过设 polar参数为True,创建一个极坐标子图，然后调用plot()在极坐标子图中绘图。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab1fc657663492\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; import numpy as np\r\n&gt;&gt;&gt; import matplotlib.pyplot as plt\r\n&gt;&gt;&gt; theta = np.arange(0, 2*np.pi, 0.02)\r\n&gt;&gt;&gt; plt.polar(theta, 1.4*np.cos(5*theta), \"--\", linewidth=2)\r\n&gt;&gt;&gt; plt.polar(theta, 1.8*np.cos(4*theta), linewidth=2)\r\n&gt;&gt;&gt; plt.rgrids(np.arange(0.5, 2, 0.5), angle=45)\r\n&gt;&gt;&gt; plt.thetagrids([0, 45])thetagridlabel objects&gt;)\r\n&gt;&gt;&gt; plt.show()\r\n&gt;&gt;&gt; </textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1fc657663492-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1fc657663492-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1fc657663492-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1fc657663492-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1fc657663492-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1fc657663492-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1fc657663492-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab1fc657663492-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab1fc657663492-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1fc657663492-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1fc657663492-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-v\">matplotlib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pyplot </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1fc657663492-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">theta</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">pi</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.02</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1fc657663492-4\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">polar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">theta</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.4</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">cos</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">theta</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"--\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">linewidth</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1fc657663492-5\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">polar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">theta</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.8</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">cos</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">theta</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">linewidth</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1fc657663492-6\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">rgrids</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0.5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.5</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">angle</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">45</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1fc657663492-7\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">thetagrids</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">45</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-e\">thetagridlabel </span><span class=\"crayon-v\">objects</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab1fc657663492-8\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">show</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab1fc657663492-9\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0029 seconds] -->\r\n<p><img title=\"\" src=\"https://img-blog.csdn.net/20170215165300929?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVmaXZl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"极坐标绘图\"></p>\n<h2 id=\"2d绘图\">2D绘图</h2>\n<h3 id=\"等值线图\">等值线图</h3>\n<p>所谓等值线，是指由函数值相等的各点连成的平滑曲线。等值线可以直观地表示二元函数值的变化趋势，例如等值线密集的地方表示函数值在此处的变化较大。matplotlib中可以使用contour()和contourf()描绘等值线，它们的区别是：contourf()所得到的是带填充效果的等值线。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab200260942598\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; import numpy as np\r\n&gt;&gt;&gt; import matplotlib.pyplot as plt\r\n&gt;&gt;&gt; y, x = np.ogrid[-2:2:200j, -3:3:300j]\r\n&gt;&gt;&gt; z = x * np.exp( - x**2 - y**2)\r\n&gt;&gt;&gt; extent = [np.min(x), np.max(x), np.min(y), np.max(y)]\r\n&gt;&gt;&gt; plt.subplot(121)\r\n&gt;&gt;&gt; cs = plt.contour(z, 10, extent=extent)\r\n&gt;&gt;&gt; plt.clabel(cs)\r\n&lt;a&gt;&lt;a list of 8 text.Text objects&gt;\r\n&gt;&gt;&gt; plt.subplot(122)\r\n&gt;&gt;&gt; plt.contourf(x.reshape(-1), y.reshape(-1), z, 20)\r\n&gt;&gt;&gt; plt.show()&lt;/a&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab200260942598-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab200260942598-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab200260942598-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab200260942598-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab200260942598-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab200260942598-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab200260942598-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab200260942598-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab200260942598-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab200260942598-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab200260942598-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab200260942598-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab200260942598-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab200260942598-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-v\">matplotlib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pyplot </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab200260942598-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">ogrid</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">200j</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">3</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">3</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">300j</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab200260942598-4\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">z</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">x *</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">exp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">x*</span><span class=\"crayon-o\">*</span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">y*</span><span class=\"crayon-o\">*</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab200260942598-5\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">extent</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">min</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">max</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">min</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">max</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab200260942598-6\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">subplot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">121</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab200260942598-7\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cs</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">contour</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">z</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">extent</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">extent</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab200260942598-8\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">clabel</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cs</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab200260942598-9\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">list </span><span class=\"crayon-i\">of</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">text</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Text </span><span class=\"crayon-v\">objects</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab200260942598-10\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">subplot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">122</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab200260942598-11\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">contourf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">reshape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">reshape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">z</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab200260942598-12\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">show</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0041 seconds] -->\r\n<p>为了更淸楚地区分X轴和Y轴，这里让它们的取值范围和等分次数均不相同.这样得 到的数组z的形状为(200, 300),它的第0轴对应Y轴、第1轴对应X轴。</p>\n<p>调用contour()绘制数组z的等值线图，第二个参数为10,表示将整个函数的取值范围等分为10个区间,即显示的等值线图中将有9条等值线。可以使用extent参数指定等值线图的X轴和Y轴的数据范围。</p>\n<p>contour()所返回的是一个QuadContourSet对象， 将它传递给clabel()，为其中的等值线标上对应的值。</p>\n<p>调用contourf(),绘制将取值范围等分为20份、带填充效果的等值线图。这里演示了另外一种设置X、Y轴取值范围的方法，它的前两个参数分别是计算数组z时所使用的X轴和Y轴上的取样点,这两个数组必须是一维的。</p>\n<p><img title=\"\" src=\"https://img-blog.csdn.net/20170215170051897?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVmaXZl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"等值线图\"></p>\n<h3 id=\"二维数据的平面色彩显示\">二维数据的平面色彩显示</h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab204767251810\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; import numpy as np\r\n&gt;&gt;&gt; import matplotlib.pyplot as plt\r\n&gt;&gt;&gt; data=np.clip(np.random.randn(5,5),-1,1)\r\n&gt;&gt;&gt; plt.subplot(221)\r\n&gt;&gt;&gt; plt.imshow(data)\r\n&gt;&gt;&gt; plt.subplot(222)\r\n&gt;&gt;&gt; plt.imshow(data,cmap=plt.cm.cool)\r\n&gt;&gt;&gt; plt.subplot(223)\r\n&gt;&gt;&gt; plt.imshow(data,cmap=plt.cm.hot)\r\n&gt;&gt;&gt; plt.colorbar()\r\n&gt;&gt;&gt; plt.subplot(224)\r\n&gt;&gt;&gt; im = plt.imshow(data,cmap=plt.cm.winter)\r\n&gt;&gt;&gt; plt.colorbar(im, cmap=plt.cm.winter, ticks=[-1,0,1])\r\n&gt;&gt;&gt; plt.show()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab204767251810-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab204767251810-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab204767251810-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab204767251810-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab204767251810-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab204767251810-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab204767251810-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab204767251810-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab204767251810-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab204767251810-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab204767251810-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab204767251810-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab204767251810-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab204767251810-14\">14</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab204767251810-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab204767251810-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-v\">matplotlib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pyplot </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab204767251810-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">clip</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">random</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">randn</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab204767251810-4\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">subplot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">221</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab204767251810-5\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">imshow</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab204767251810-6\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">subplot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">222</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab204767251810-7\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">imshow</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">cmap</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">cm</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">cool</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab204767251810-8\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">subplot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">223</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab204767251810-9\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">imshow</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">cmap</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">cm</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">hot</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab204767251810-10\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">colorbar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab204767251810-11\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">subplot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">224</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab204767251810-12\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">im</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">imshow</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">cmap</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">cm</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">winter</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab204767251810-13\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">colorbar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">im</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cmap</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">cm</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">winter</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ticks</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab204767251810-14\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">show</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0036 seconds] -->\r\n<p><img title=\"\" src=\"https://img-blog.csdn.net/20170215171958192?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVmaXZl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"二维数据的平面色彩显示\"></p>\n<h2 id=\"3d绘图\">3D绘图</h2>\n<p>虽然matplotlib主要专注于绘图，并且主要是二维的图形，但是它也有一些不同的扩展，能让我们在地理图上绘图，让我们把Excel和3D图表结合起来。在matplotlib的世界里，这些扩展叫做工具包（toolkits）。工具包是一些关注在某个话题（如3D绘图）的特定函数的集合。</p>\n<p>比较流行的工具包有Basemap、GTK 工具、Excel工具、Natgrid、AxesGrid和mplot3d。</p>\n<p>mpl_toolkits.mplot3工具包提供了一些基本的3D绘图功能，其支持的图表类型包括散点图（scatter）、曲面图（surf）、线图（line）和网格图（mesh）。虽然mplot3d不是一个最好的3D图形绘制库，但是它是伴随着matplotlib产生的，因此我们对其接口已经很熟悉了。</p>\n<p>下面是一个使用plot_surface绘制3d曲面图的例子。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab208769562019\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; import numpy as np\r\n&gt;&gt;&gt; import matplotlib.pyplot as plt\r\n&gt;&gt;&gt; import mpl_toolkits.mplot3d\r\n&gt;&gt;&gt; x, y = np.mgrid[-2:2:50j,-2:2:50j]\r\n&gt;&gt;&gt; z = x*np.exp(-x**2-y**2)\r\n&gt;&gt;&gt; ax = plt.subplot(111,projection='3d')\r\n&gt;&gt;&gt; ax.plot_surface(x,y,z,rstride=2,cstride=1,cmap=plt.cm.coolwarm,alpha=0.8)\r\n&gt;&gt;&gt; ax.set_xlabel('x')\r\n&gt;&gt;&gt; ax.set_ylabel('y')\r\n&gt;&gt;&gt; ax.set_zlabel('z')\r\n&gt;&gt;&gt; plt.show()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab208769562019-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab208769562019-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab208769562019-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab208769562019-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab208769562019-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab208769562019-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab208769562019-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab208769562019-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab208769562019-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab208769562019-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab208769562019-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab208769562019-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab208769562019-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-v\">matplotlib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pyplot </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab208769562019-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-v\">mpl_toolkits</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">mplot3d</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab208769562019-4\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">mgrid</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">50j</span><span class=\"crayon-sy\">,</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">50j</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab208769562019-5\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">z</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">x*</span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">exp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">-</span><span class=\"crayon-e \">x*</span><span class=\"crayon-o\">*</span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">-</span><span class=\"crayon-e \">y*</span><span class=\"crayon-o\">*</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab208769562019-6\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ax</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">subplot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">111</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">projection</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'3d'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab208769562019-7\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ax</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">plot_surface</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">z</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">rstride</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">cstride</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">cmap</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">cm</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">coolwarm</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">alpha</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0.8</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab208769562019-8\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ax</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">set_xlabel</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'x'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab208769562019-9\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ax</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">set_ylabel</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'y'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab208769562019-10\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ax</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">set_zlabel</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'z'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab208769562019-11\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">show</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0031 seconds] -->\r\n<p><img title=\"\" src=\"https://img-blog.csdn.net/20170215174159483?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVmaXZl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"></p>\n<h1 id=\"三剑客之scipy\">三剑客之<code>Scipy</code></h1>\n<p>前面已经说过，最初的numpy其实是scipy的一部分，后来才从scipy中分离出来。scipy函数库在numpy库的基础上增加了众多的数学、科学以及工程计算中常用的库函数。例如线性代数、常微分方程数值求解、信号处理、图像处理、稀疏矩阵等等。由于其涉及的领域众多，我之于scipy，就像盲人摸大象，只能是摸到哪儿算哪儿。</p>\n<h2 id=\"插值\">插值</h2>\n<p>一维插值和二维插值，是我最常用的scipy的功能之一，也是最容易上手的。</p>\n<h3 id=\"一维插值和样条插值\">一维插值和样条插值</h3>\n<p>下面的例子清楚地展示了线性插值和样条插值之后的数据形态。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab20c985827743\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; import numpy as np\r\n&gt;&gt;&gt; from scipy import interpolate\r\n&gt;&gt;&gt; x = np.arange(0,10)\r\n&gt;&gt;&gt; y = np.exp(-x/3.0)\r\n&gt;&gt;&gt; x\r\narray([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])\r\n&gt;&gt;&gt; y\r\narray([ 1.        ,  0.71653131,  0.51341712,  0.36787944,  0.26359714,\r\n        0.1888756 ,  0.13533528,  0.09697197,  0.06948345,  0.04978707])\r\n&gt;&gt;&gt; f_line = interpolate.interp1d(x, y)\r\n&gt;&gt;&gt; x_new = np.arange(0,9,0.2)\r\n&gt;&gt;&gt; f_line(x_new)\r\narray([ 1.        ,  0.94330626,  0.88661252,  0.82991879,  0.77322505,\r\n        0.71653131,  0.67590847,  0.63528563,  0.5946628 ,  0.55403996,\r\n        0.51341712,  0.48430958,  0.45520205,  0.42609451,  0.39698698,\r\n        0.36787944,  0.34702298,  0.32616652,  0.30531006,  0.2844536 ,\r\n        0.26359714,  0.24865283,  0.23370852,  0.21876422,  0.20381991,\r\n        0.1888756 ,  0.17816754,  0.16745947,  0.15675141,  0.14604335,\r\n        0.13533528,  0.12766262,  0.11998996,  0.11231729,  0.10464463,\r\n        0.09697197,  0.09147426,  0.08597656,  0.08047886,  0.07498115,\r\n        0.06948345,  0.06554417,  0.0616049 ,  0.05766562,  0.05372634])\r\n&gt;&gt;&gt; bs = interpolate.splrep(x, y)\r\n&gt;&gt;&gt; interpolate.splev(x_new, bs)\r\narray([ 1.        ,  0.93571489,  0.8754193 ,  0.8189194 ,  0.76602135,\r\n        0.71653131,  0.67025545,  0.62699994,  0.58657094,  0.54877461,\r\n        0.51341712,  0.48031625,  0.44933621,  0.42035284,  0.39324198,\r\n        0.36787944,  0.34414628,  0.32194438,  0.30118082,  0.28176271,\r\n        0.26359714,  0.24659576,  0.23068846,  0.2158097 ,  0.20189393,\r\n        0.1888756 ,  0.17669225,  0.16529366,  0.15463272,  0.1446623 ,\r\n        0.13533528,  0.1266067 ,  0.11844022,  0.11080172,  0.10365702,\r\n        0.09697197,  0.09071432,  0.0848594 ,  0.07938446,  0.07426673,\r\n        0.06948345,  0.06501185,  0.06082918,  0.05691267,  0.05323955])</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab20c985827743-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab20c985827743-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab20c985827743-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab20c985827743-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab20c985827743-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab20c985827743-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab20c985827743-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab20c985827743-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab20c985827743-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab20c985827743-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab20c985827743-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab20c985827743-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab20c985827743-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab20c985827743-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab20c985827743-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab20c985827743-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab20c985827743-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab20c985827743-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab20c985827743-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab20c985827743-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab20c985827743-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab20c985827743-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab20c985827743-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab20c985827743-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab20c985827743-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab20c985827743-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab20c985827743-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab20c985827743-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab20c985827743-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab20c985827743-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab20c985827743-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab20c985827743-32\">32</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab20c985827743-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab20c985827743-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">scipy </span><span class=\"crayon-e\">import </span><span class=\"crayon-v\">interpolate</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab20c985827743-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab20c985827743-4\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">exp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">3.0</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab20c985827743-5\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">x</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab20c985827743-6\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab20c985827743-7\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">y</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab20c985827743-8\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.</span><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.71653131</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.51341712</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.36787944</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.26359714</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab20c985827743-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">0.1888756</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.13533528</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.09697197</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.06948345</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.04978707</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab20c985827743-10\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f_line</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">interpolate</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">interp1d</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab20c985827743-11\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x_new</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0.2</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab20c985827743-12\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">f_line</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x_new</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab20c985827743-13\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.</span><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.94330626</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.88661252</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.82991879</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.77322505</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab20c985827743-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">0.71653131</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.67590847</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.63528563</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.5946628</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.55403996</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab20c985827743-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">0.51341712</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.48430958</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.45520205</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.42609451</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.39698698</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab20c985827743-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">0.36787944</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.34702298</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.32616652</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.30531006</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.2844536</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab20c985827743-17\"><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">0.26359714</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.24865283</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.23370852</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.21876422</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.20381991</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab20c985827743-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">0.1888756</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.17816754</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.16745947</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.15675141</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.14604335</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab20c985827743-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">0.13533528</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.12766262</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.11998996</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.11231729</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.10464463</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab20c985827743-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">0.09697197</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.09147426</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.08597656</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.08047886</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.07498115</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab20c985827743-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">0.06948345</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.06554417</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.0616049</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.05766562</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.05372634</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab20c985827743-22\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bs</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">interpolate</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">splrep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab20c985827743-23\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">interpolate</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">splev</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x_new</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bs</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab20c985827743-24\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.</span><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.93571489</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.8754193</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.8189194</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.76602135</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab20c985827743-25\"><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">0.71653131</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.67025545</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.62699994</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.58657094</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.54877461</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab20c985827743-26\"><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">0.51341712</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.48031625</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.44933621</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.42035284</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.39324198</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab20c985827743-27\"><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">0.36787944</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.34414628</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.32194438</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.30118082</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.28176271</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab20c985827743-28\"><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">0.26359714</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.24659576</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.23068846</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.2158097</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.20189393</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab20c985827743-29\"><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">0.1888756</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.17669225</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.16529366</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.15463272</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.1446623</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab20c985827743-30\"><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">0.13533528</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.1266067</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.11844022</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.11080172</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.10365702</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab20c985827743-31\"><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">0.09697197</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.09071432</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.0848594</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.07938446</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.07426673</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab20c985827743-32\"><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">0.06948345</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.06501185</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.06082918</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.05691267</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.05323955</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0090 seconds] -->\r\n<p>将原始数据以及线性插值和样条插值之后的数据绘制在一起，效果会比较明显：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/10/39fd74ccaf1dacffa49c7da9f7b8f8cc.png\"><img class=\"alignnone size-full wp-image-89311\" src=\"http://jbcdn2.b0.upaiyun.com/2018/10/39fd74ccaf1dacffa49c7da9f7b8f8cc.png\" alt=\"20170214134535169\"></a></p>\n<p>代码如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab211617764999\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nimport numpy as np\r\nfrom scipy import interpolate\r\nimport matplotlib.pyplot as plt\r\n\r\nfrom pylab import mpl\r\nmpl.rcParams['font.sans-serif'] = ['FangSong'] # 指定默认字体\r\nmpl.rcParams['axes.unicode_minus'] = False     # 解决保存图像时'-'显示为方块的问题\r\n\r\nx = np.arange(0,10)\r\ny = np.exp(-x/3.0)\r\n\r\nx_new = np.arange(0,9,0.2)\r\nf_linear = interpolate.interp1d(x, y)\r\nbs = interpolate.splrep(x, y)\r\n\r\nplt.plot(x, y, \"o\",  label=u\"原始数据\")\r\nplt.plot(x_new, f_linear(x_new), label=u\"线性插值\")\r\nplt.plot(x_new, interpolate.splev(x_new, bs), label=u\"B-spline插值\")\r\nplt.legend()\r\nplt.show()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab211617764999-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab211617764999-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab211617764999-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab211617764999-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab211617764999-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab211617764999-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab211617764999-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab211617764999-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab211617764999-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab211617764999-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab211617764999-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab211617764999-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab211617764999-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab211617764999-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab211617764999-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab211617764999-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab211617764999-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab211617764999-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab211617764999-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab211617764999-20\">20</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab211617764999-1\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">np</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab211617764999-2\"><span class=\"crayon-e\">from </span><span class=\"crayon-e\">scipy </span><span class=\"crayon-e\">import </span><span class=\"crayon-e\">interpolate</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab211617764999-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">matplotlib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pyplot </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">plt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab211617764999-4\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab211617764999-5\"><span class=\"crayon-e\">from </span><span class=\"crayon-e\">pylab </span><span class=\"crayon-e\">import </span><span class=\"crayon-e\">mpl</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab211617764999-6\"><span class=\"crayon-v\">mpl</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rcParams</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'font.sans-serif'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'FangSong'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># 指定默认字体</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab211617764999-7\"><span class=\"crayon-v\">mpl</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rcParams</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'axes.unicode_minus'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">False</span><span class=\"crayon-h\">     </span><span class=\"crayon-p\"># 解决保存图像时'-'显示为方块的问题</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab211617764999-8\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab211617764999-9\"><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab211617764999-10\"><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">exp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">3.0</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab211617764999-11\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab211617764999-12\"><span class=\"crayon-v\">x_new</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0.2</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab211617764999-13\"><span class=\"crayon-v\">f_linear</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">interpolate</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">interp1d</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab211617764999-14\"><span class=\"crayon-v\">bs</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">interpolate</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">splrep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab211617764999-15\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab211617764999-16\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">plot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"o\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">label</span><span class=\"crayon-o\">=</span><span class=\"crayon-i\">u</span><span class=\"crayon-s\">\"原始数据\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab211617764999-17\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">plot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x_new</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">f_linear</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x_new</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">label</span><span class=\"crayon-o\">=</span><span class=\"crayon-i\">u</span><span class=\"crayon-s\">\"线性插值\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab211617764999-18\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">plot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x_new</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">interpolate</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">splev</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x_new</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bs</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">label</span><span class=\"crayon-o\">=</span><span class=\"crayon-i\">u</span><span class=\"crayon-s\">\"B-spline插值\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab211617764999-19\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">legend</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab211617764999-20\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">show</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0036 seconds] -->\r\n<p><strong>特别说明</strong>：样条插值附带了很多默认参数，下面是简单的说明。详情请自行搜索。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab215648572255\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nscipy.interpolate.splrep(x, y, w=None, xb=None, xe=None, k=3, task=0, s=None, t=None, full_output=0, per=0, quiet=1)\r\n# 参数s用来确定平滑点数，通常是m-SQRT(2m),m是曲线点数。如果在插值中不需要平滑应该设定s=0。splrep()输出的是一个3元素的元胞数组（t,c,k）,其中t是曲线点，c是计算出来的系数，k是样条阶数，通常是3阶，但可以通过k改变。\r\nscipy.interpolate.splev(x, tck, der=0)\r\n# 其中的der是进行样条计算是需要实际计算到的阶数，必须满足条件der&lt;=k</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab215648572255-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab215648572255-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab215648572255-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab215648572255-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab215648572255-1\"><span class=\"crayon-v\">scipy</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">interpolate</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">splrep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">w</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">None</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">xb</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">None</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">xe</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">None</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">k</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">task</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">None</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">t</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">None</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">full_output</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">per</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">quiet</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab215648572255-2\"><span class=\"crayon-p\"># 参数s用来确定平滑点数，通常是m-SQRT(2m),m是曲线点数。如果在插值中不需要平滑应该设定s=0。splrep()输出的是一个3元素的元胞数组（t,c,k）,其中t是曲线点，c是计算出来的系数，k是样条阶数，通常是3阶，但可以通过k改变。</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab215648572255-3\"><span class=\"crayon-v\">scipy</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">interpolate</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">splev</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tck</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">der</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab215648572255-4\"><span class=\"crayon-p\"># 其中的der是进行样条计算是需要实际计算到的阶数，必须满足条件der&lt;=k</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n<p></p>\n<h3 id=\"二维插值\">二维插值</h3>\n<p>在一个房间的地板上按九宫格的位置放置9个温度传感器，测得温度如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab219092782336\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; import numpy as np\r\n&gt;&gt;&gt; temp = np.random.randint(20,30,(3,3))\r\n&gt;&gt;&gt; temp\r\narray([[21, 29, 21],\r\n       [24, 27, 20],\r\n       [25, 28, 22]])</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab219092782336-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab219092782336-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab219092782336-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab219092782336-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab219092782336-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab219092782336-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab219092782336-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab219092782336-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">temp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">random</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">randint</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">20</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">30</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab219092782336-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">temp</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab219092782336-4\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">21</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">29</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">21</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab219092782336-5\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">24</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">27</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab219092782336-6\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">25</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">28</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>在不增加传感器的前提下，我们采用二维插值的方法，可以使得数据变化较为平滑：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab21c981472510\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; import numpy as np\r\n&gt;&gt;&gt; temp = np.random.randint(20,30,(3,3))\r\n&gt;&gt;&gt; temp\r\narray([[21, 29, 21],\r\n       [24, 27, 20],\r\n       [25, 28, 22]])\r\n&gt;&gt;&gt; x = np.arange(3)\r\n&gt;&gt;&gt; y = np.arange(3)\r\n&gt;&gt;&gt; ip = interpolate.interp2d(x,y,temp)\r\n&gt;&gt;&gt; x_new = np.linspace(0,2,9)\r\n&gt;&gt;&gt; x_new = np.linspace(0,2,5)\r\n&gt;&gt;&gt; y_new = np.linspace(0,2,5)\r\n&gt;&gt;&gt; temp_new = ip(x_new,y_new)\r\n&gt;&gt;&gt; temp_new\r\narray([[ 21.  ,  25.  ,  29.  ,  25.  ,  21.  ],\r\n       [ 22.5 ,  25.25,  28.  ,  24.25,  20.5 ],\r\n       [ 24.  ,  25.5 ,  27.  ,  23.5 ,  20.  ],\r\n       [ 24.5 ,  26.  ,  27.5 ,  24.25,  21.  ],\r\n       [ 25.  ,  26.5 ,  28.  ,  25.  ,  22.  ]])</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab21c981472510-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab21c981472510-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab21c981472510-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab21c981472510-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab21c981472510-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab21c981472510-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab21c981472510-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab21c981472510-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab21c981472510-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab21c981472510-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab21c981472510-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab21c981472510-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab21c981472510-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab21c981472510-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab21c981472510-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab21c981472510-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab21c981472510-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab21c981472510-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab21c981472510-19\">19</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab21c981472510-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab21c981472510-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">temp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">random</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">randint</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">20</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">30</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab21c981472510-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">temp</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab21c981472510-4\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">21</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">29</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">21</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab21c981472510-5\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">24</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">27</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab21c981472510-6\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">25</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">28</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab21c981472510-7\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab21c981472510-8\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab21c981472510-9\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ip</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">interpolate</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">interp2d</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">temp</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab21c981472510-10\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x_new</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">linspace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab21c981472510-11\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x_new</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">linspace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab21c981472510-12\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y_new</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">linspace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab21c981472510-13\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">temp_new</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ip</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x_new</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">y_new</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab21c981472510-14\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">temp_new</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab21c981472510-15\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">21.</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">25.</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">29.</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">25.</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">21.</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab21c981472510-16\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22.5</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">25.25</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">28.</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">24.25</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">20.5</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab21c981472510-17\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">24.</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">25.5</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">27.</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">23.5</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">20.</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab21c981472510-18\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">24.5</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">26.</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">27.5</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">24.25</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">21.</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab21c981472510-19\"><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">25.</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">26.5</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">28.</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">25.</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">22.</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0054 seconds] -->\r\n<p>下图是根据原始数据和插值数据绘制的该房间温度平面图。</p>\n<p><img title=\"\" src=\"https://img-blog.csdn.net/20170214154158733?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVmaXZl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"根据原始数据和插值数据绘制的该房间温度平面图\"></p>\n<h2 id=\"拟合\">拟合</h2>\n<p>在工作中，我们常常需要在图中描绘某些实际数据观察的同时，使用一个曲线来拟合这些实际数据。所谓拟合，就是找出符合数据变化趋势的曲线方程，或者直接绘制出拟合曲线。</p>\n<h3 id=\"使用numpypolyfit拟合\">使用numpy.polyfit拟合</h3>\n<p>下面这段代码，基于Numpy模块，可以直接绘制出拟合曲线，但我无法得到曲线方程（尽管输出了一堆曲线参数）。这是一个值得继续深入研究的问题。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab221372664294\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#! python2\r\n# coding: utf-8\r\n\r\nimport numpy  \r\nimport pylab  \r\n\r\ndef plot_polynomail_fit(y, *deg): \r\n    ''''' \r\n        这个函数一次只拟合一组数据。但是可以对这一组数据同时拟合多条曲线并显示 \r\n        y是一个list，存放的是需要拟合的数据\r\n        *deg是一个元组，长度不定,里面存放拟合的次数，可以对一组数据拟合出多条直线进行比较\r\n    '''  \r\n\r\n    x = xrange(len(y))\r\n    COLOR = ['c','m','y','k','r','p','o','g','b']  \r\n    temp = []  \r\n    numOfLineToFit = len(deg) # 需要拟合的次数列表  \r\n    for index,item in enumerate (deg):      \r\n        param = numpy.polyfit(x,y,item) # 曲线的参数  \r\n        equation = numpy.poly1d(param)   # 曲线方程  \r\n        temp.extend(param[:])  # 提取曲线参数  \r\n        print param  \r\n        pylab.subplot(numOfLineToFit,1,index+1)  \r\n        pylab.plot(x, equation(x),'%s--'%COLOR[index])  \r\n        pylab.plot(x,y,'b--') \r\n\r\n    pylab.show()  \r\n    return temp  \r\n\r\nif __name__ == '__main__':\r\n    y = [17, 19, 21, 28, 33, 38, 37, 37, 31, 23, 19, 18]\r\n    plot_polynomail_fit(y, 2, 3, 4)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab221372664294-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab221372664294-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab221372664294-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab221372664294-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab221372664294-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab221372664294-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab221372664294-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab221372664294-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab221372664294-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab221372664294-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab221372664294-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab221372664294-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab221372664294-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab221372664294-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab221372664294-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab221372664294-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab221372664294-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab221372664294-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab221372664294-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab221372664294-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab221372664294-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab221372664294-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab221372664294-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab221372664294-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab221372664294-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab221372664294-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab221372664294-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab221372664294-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab221372664294-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab221372664294-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab221372664294-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab221372664294-32\">32</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab221372664294-1\"><span class=\"crayon-p\">#! python2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab221372664294-2\"><span class=\"crayon-p\"># coding: utf-8</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab221372664294-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab221372664294-4\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">numpy  </span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab221372664294-5\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">pylab  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab221372664294-6\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab221372664294-7\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">plot_polynomail_fit</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">deg</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab221372664294-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">''</span><span class=\"crayon-s\">''</span><span class=\"crayon-s\">' </span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab221372664294-9\"><span class=\"crayon-s\">        这个函数一次只拟合一组数据。但是可以对这一组数据同时拟合多条曲线并显示 </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab221372664294-10\"><span class=\"crayon-s\">        y是一个list，存放的是需要拟合的数据</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab221372664294-11\"><span class=\"crayon-s\">        *deg是一个元组，长度不定,里面存放拟合的次数，可以对一组数据拟合出多条直线进行比较</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab221372664294-12\"><span class=\"crayon-s\">    '</span><span class=\"crayon-s\">''</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab221372664294-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab221372664294-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">xrange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab221372664294-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">COLOR</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'c'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'m'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'y'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'k'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'r'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'p'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'o'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'g'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'b'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab221372664294-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">temp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab221372664294-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">numOfLineToFit</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">deg</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># 需要拟合的次数列表  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab221372664294-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">item </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">enumerate</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">deg</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">      </span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab221372664294-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">param</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">numpy</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">polyfit</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">item</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># 曲线的参数  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab221372664294-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">equation</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">numpy</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">poly1d</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">param</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">   </span><span class=\"crayon-p\"># 曲线方程  </span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab221372664294-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">temp</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">extend</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">param</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span><span class=\"crayon-p\"># 提取曲线参数  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab221372664294-22\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">print </span><span class=\"crayon-e\">param  </span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab221372664294-23\"><span class=\"crayon-e\">        </span><span class=\"crayon-v\">pylab</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">subplot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">numOfLineToFit</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">index</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab221372664294-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">pylab</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">plot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">equation</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'%s--'</span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">COLOR</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab221372664294-25\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">pylab</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">plot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'b--'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab221372664294-26\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab221372664294-27\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">pylab</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">show</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab221372664294-28\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">temp  </span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab221372664294-29\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab221372664294-30\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">__name__</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'__main__'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab221372664294-31\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">17</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">19</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">21</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">28</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">33</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">38</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">37</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">37</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">31</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">19</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab221372664294-32\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">plot_polynomail_fit</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0051 seconds] -->\r\n<p>3个拟合结果显示在下图中。</p>\n<p><img title=\"\" src=\"https://img-blog.csdn.net/20170214164438236?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVmaXZl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"这里写图片描述\"></p>\n<h3 id=\"使用scipyoptimizeoptimizecurvefit拟合\">使用scipy.optimize.optimize.curve_fit拟合</h3>\n<p>scipy提供的拟合，貌似需要先确定带参数的曲线方程，然后由scipy求解方程，返回曲线参数。我们还是以上面的一组数据为例使用scipy拟合曲线。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab226311281147\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; import numpy as np\r\n&gt;&gt;&gt; import matplotlib.pyplot as plt\r\n&gt;&gt;&gt; from scipy import optimize\r\n&gt;&gt;&gt; x = np.arange(1,13,1)\r\n&gt;&gt;&gt; y = np.array([17,19,21,28,33,38,37,37,31,23,19,18 ])\r\n&gt;&gt;&gt; plt.plot(x, y)\r\n[&lt;matplotlib.lines.Line2D object at 0x04799D10&gt;]\r\n&gt;&gt;&gt; plt.show()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab226311281147-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab226311281147-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab226311281147-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab226311281147-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab226311281147-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab226311281147-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab226311281147-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab226311281147-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab226311281147-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab226311281147-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-v\">matplotlib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pyplot </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab226311281147-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">scipy </span><span class=\"crayon-e\">import </span><span class=\"crayon-v\">optimize</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab226311281147-4\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">13</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab226311281147-5\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">17</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">19</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">21</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">28</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">33</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">38</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">37</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">37</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">31</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">23</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">19</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">18</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab226311281147-6\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">plot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab226311281147-7\"><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">matplotlib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">lines</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Line2D </span><span class=\"crayon-t\">object</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">at</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0x04799D10</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab226311281147-8\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">show</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0023 seconds] -->\r\n<p><img title=\"\" src=\"https://img-blog.csdn.net/20170214220517370?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVmaXZl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"原始数据折线图\"></p>\n<p>可以看出，曲线近似正弦函数。构建函数y=a*sin(x*pi/6+b)+c，使用scipy的optimize.curve_fit函数求出a、b、c的值：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab229208531787\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; def fmax(x,a,b,c):\r\n    return a*np.sin(x*np.pi/6+b)+c\r\n\r\n&gt;&gt;&gt; fita, fitb = optimize.curve_fit(fmax, x, y, [1,1,1])\r\n&gt;&gt;&gt; print fita\r\n[ 10.93254951  -1.9496096   26.75      ]\r\n&gt;&gt;&gt; xn = np.arange(1,13,0.1)\r\n&gt;&gt;&gt; plt.plot(x, y)\r\n[&lt;matplotlib.lines.Line2D object at 0x04B160B0&gt;]\r\n&gt;&gt;&gt; plt.plot(xn, fmax(xn, fita[0],fita[1],fita[2]))\r\n[&lt;matplotlib.lines.Line2D object at 0x04B16510&gt;]\r\n&gt;&gt;&gt; plt.show()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab229208531787-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab229208531787-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab229208531787-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab229208531787-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab229208531787-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab229208531787-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab229208531787-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab229208531787-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab229208531787-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab229208531787-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab229208531787-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab229208531787-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab229208531787-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">def </span><span class=\"crayon-e\">fmax</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab229208531787-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">a*</span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sin</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e \">x*</span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">pi</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">6</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">c</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab229208531787-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab229208531787-4\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fita</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fitb</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">optimize</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">curve_fit</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">fmax</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab229208531787-5\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">print </span><span class=\"crayon-i\">fita</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab229208531787-6\"><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10.93254951</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.9496096</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">26.75</span><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab229208531787-7\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">xn</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">13</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0.1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab229208531787-8\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">plot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab229208531787-9\"><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">matplotlib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">lines</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Line2D </span><span class=\"crayon-t\">object</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">at</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0x04B160B0</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab229208531787-10\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">plot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">xn</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fmax</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">xn</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fita</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">fita</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">fita</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab229208531787-11\"><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">matplotlib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">lines</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Line2D </span><span class=\"crayon-t\">object</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">at</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0x04B16510</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab229208531787-12\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">show</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0035 seconds] -->\r\n<p><img class=\"aligncenter\" title=\"\" src=\"https://img-blog.csdn.net/20170214221535016?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVmaXZl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"拟合后的对比图\"></p>\n<h2 id=\"求解非线性方程组\">求解非线性方程（组）</h2>\n<p>在数学建模中，需要对一些稀奇古怪的方程（组）求解，Matlab自然是首选，但Matlab不是免费的，scipy则为我们提供了免费的午餐！scipy.optimize库中的fsolve函数可以用来对非线性方程（组）进行求解。它的基本调用形式如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab22e531442746\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfsolve(func, x0)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab22e531442746-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab22e531442746-1\"><span class=\"crayon-e\">fsolve</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">func</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x0</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>func(x)是计算方程组误差的函数，它的参数x是一个矢量，表示方程组的各个未知数的一组可能解，func返回将x代入方程组之后得到的误差；x0为未知数矢量的初始值。</p>\n<p>我们先来求解一个简单的方程：<span id=\"MathJax-Element-49-Frame\"><span id=\"MathJax-Span-553\"><span id=\"MathJax-Span-554\"><span id=\"MathJax-Span-555\">sin</span><span id=\"MathJax-Span-556\"></span><span id=\"MathJax-Span-557\">(</span><span id=\"MathJax-Span-558\">x</span><span id=\"MathJax-Span-559\">)</span><span id=\"MathJax-Span-560\">−</span><span id=\"MathJax-Span-561\">cos</span><span id=\"MathJax-Span-562\"></span><span id=\"MathJax-Span-563\">(</span><span id=\"MathJax-Span-564\">x</span><span id=\"MathJax-Span-565\">)</span><span id=\"MathJax-Span-566\">=</span><span id=\"MathJax-Span-567\">0.2</span></span></span></span></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab231697521923\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; from scipy.optimize import fsolve\r\n&gt;&gt;&gt; import numpy as np\r\n&gt;&gt;&gt; def f(A):\r\n    x = float(A[0])\r\n    return [np.sin(x) - np.cos(x) - 0.2]\r\n\r\n&gt;&gt;&gt; result = fsolve(f, [1])\r\narray([ 0.92729522])\r\n&gt;&gt;&gt; print result\r\n[0.92729522]\r\n&gt;&gt;&gt; print f(result)\r\n[2.7977428707082197e-09]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab231697521923-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab231697521923-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab231697521923-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab231697521923-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab231697521923-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab231697521923-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab231697521923-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab231697521923-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab231697521923-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab231697521923-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab231697521923-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab231697521923-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab231697521923-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-v\">scipy</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">optimize </span><span class=\"crayon-e\">import </span><span class=\"crayon-v\">fsolve</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab231697521923-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab231697521923-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">f</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab231697521923-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">float</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab231697521923-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sin</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">cos</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.2</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab231697521923-6\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab231697521923-7\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">result</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fsolve</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab231697521923-8\"><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.92729522</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab231697521923-9\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">print </span><span class=\"crayon-i\">result</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab231697521923-10\"><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0.92729522</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab231697521923-11\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">f</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">result</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab231697521923-12\"><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2.7977428707082197e</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">09</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0023 seconds] -->\r\n<p>哈哈，易如反掌！再来一个方程组：</p>\n<p><span id=\"MathJax-Element-50-Frame\"><span id=\"MathJax-Span-568\"><span id=\"MathJax-Span-569\"><span id=\"MathJax-Span-570\">4</span><span id=\"MathJax-Span-571\"><span id=\"MathJax-Span-572\">x</span><span id=\"MathJax-Span-573\">2</span></span><span id=\"MathJax-Span-574\">−</span><span id=\"MathJax-Span-575\">2</span><span id=\"MathJax-Span-576\">sin</span><span id=\"MathJax-Span-577\"></span><span id=\"MathJax-Span-578\">(</span><span id=\"MathJax-Span-579\">y</span><span id=\"MathJax-Span-580\">z</span><span id=\"MathJax-Span-581\">)</span><span id=\"MathJax-Span-582\">=</span><span id=\"MathJax-Span-583\">0</span></span></span></span><br>\n<span id=\"MathJax-Element-51-Frame\"><span id=\"MathJax-Span-584\"><span id=\"MathJax-Span-585\"><span id=\"MathJax-Span-586\">5</span><span id=\"MathJax-Span-587\">y</span><span id=\"MathJax-Span-588\">+</span><span id=\"MathJax-Span-589\">3</span><span id=\"MathJax-Span-590\">=</span><span id=\"MathJax-Span-591\">0</span></span></span></span><br>\n<span id=\"MathJax-Element-52-Frame\"><span id=\"MathJax-Span-592\"><span id=\"MathJax-Span-593\"><span id=\"MathJax-Span-594\">y</span><span id=\"MathJax-Span-595\">z</span><span id=\"MathJax-Span-596\">−</span><span id=\"MathJax-Span-597\">1.5</span><span id=\"MathJax-Span-598\">=</span><span id=\"MathJax-Span-599\">0</span></span></span></span></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab236514954904\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; from scipy.optimize import fsolve\r\n&gt;&gt;&gt; import numpy as np\r\n&gt;&gt;&gt; def f(A):\r\n    x = float(A[0])\r\n    y = float(A[1])\r\n    z = float(A[2])\r\n    return [4*x*x - 2*np.sin(y*z), 5*y + 3, y*z - 1.5]\r\n\r\n&gt;&gt;&gt; result = fsolve(f, [1, 1, 1])\r\n&gt;&gt;&gt; print result\r\n[-0.70622057 -0.6        -2.5       ]\r\n&gt;&gt;&gt; print f(result)\r\n[-9.1260332624187868e-14, 0.0, 5.329070518200751e-15]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab236514954904-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab236514954904-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab236514954904-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab236514954904-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab236514954904-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab236514954904-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab236514954904-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab236514954904-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab236514954904-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab236514954904-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab236514954904-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab236514954904-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab236514954904-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab236514954904-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-v\">scipy</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">optimize </span><span class=\"crayon-e\">import </span><span class=\"crayon-v\">fsolve</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab236514954904-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab236514954904-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">f</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab236514954904-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">float</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab236514954904-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">float</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab236514954904-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">z</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">float</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab236514954904-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">*</span><span class=\"crayon-e \">x*</span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sin</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e \">y*</span><span class=\"crayon-v\">z</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">y*</span><span class=\"crayon-v\">z</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.5</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab236514954904-8\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab236514954904-9\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">result</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fsolve</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab236514954904-10\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">print </span><span class=\"crayon-i\">result</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab236514954904-11\"><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.70622057</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.6</span><span class=\"crayon-h\">        </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.5</span><span class=\"crayon-h\">       </span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab236514954904-12\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">f</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">result</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab236514954904-13\"><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">9.1260332624187868e</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">14</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.329070518200751e</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0033 seconds] -->\r\n<p></p>\n<h2 id=\"数值积分\">数值积分</h2>\n<p>数值积分是对定积分的数值求解，例如可以利用数值积分计算某个形状的面积。我们知道，半径为1的圆的方程可写成：</p>\n<p> </p>\n<div><span id=\"MathJax-Element-53-Frame\"><span id=\"MathJax-Span-600\"><span id=\"MathJax-Span-601\"><span id=\"MathJax-Span-602\"><span id=\"MathJax-Span-603\">x</span><span id=\"MathJax-Span-604\">2</span></span><span id=\"MathJax-Span-605\">+</span><span id=\"MathJax-Span-606\"><span id=\"MathJax-Span-607\">y</span><span id=\"MathJax-Span-608\">2</span></span><span id=\"MathJax-Span-609\">=</span><span id=\"MathJax-Span-610\">1</span></span></span></span></div>\n<p>下面让我们来考虑一下如何计算半径为1的半圆的面积，根据圆的面积公式，其面积应该等于PI/2。单位半圆曲线可以用下面的函数表示：</p>\n<p> </p>\n<div><span id=\"MathJax-Element-54-Frame\"><span id=\"MathJax-Span-611\"><span id=\"MathJax-Span-612\"><span id=\"MathJax-Span-613\">y</span><span id=\"MathJax-Span-614\">=</span><span id=\"MathJax-Span-615\"><span id=\"MathJax-Span-616\"><span id=\"MathJax-Span-617\">1</span><span id=\"MathJax-Span-618\">−</span><span id=\"MathJax-Span-619\"><span id=\"MathJax-Span-620\">x</span><span id=\"MathJax-Span-621\">2</span></span></span>−−−−−√</span></span></span></span></div>\n<p>我们先定义一个计算根据x计算y的函数：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab23b053040702\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; def half_circle(x):\r\n    return (1-x**2)**0.5</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab23b053040702-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab23b053040702-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab23b053040702-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">def </span><span class=\"crayon-e\">half_circle</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab23b053040702-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">-</span><span class=\"crayon-e \">x*</span><span class=\"crayon-o\">*</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-cn\">0.5</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p></p>\n<h3 id=\"经典微分法\">经典微分法</h3>\n<p>下面的程序使用经典的分小矩形计算面积总和的方式，计算出单位半圆的面积：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab23e230256058\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; N = 10000\r\n&gt;&gt;&gt; x = np.linspace(-1, 1, N)\r\n&gt;&gt;&gt; dx = 2.0/N\r\n&gt;&gt;&gt; y = half_circle(x)\r\n&gt;&gt;&gt; dx * np.sum(y[:-1] + y[1:]) # 面积的两倍\r\n3.1412751679988937</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab23e230256058-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab23e230256058-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab23e230256058-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab23e230256058-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab23e230256058-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab23e230256058-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab23e230256058-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">N</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10000</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab23e230256058-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">linspace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">N</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab23e230256058-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dx</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.0</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">N</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab23e230256058-4\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">half_circle</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab23e230256058-5\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">dx *</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sum</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># 面积的两倍</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab23e230256058-6\"><span class=\"crayon-cn\">3.1412751679988937</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p></p>\n<h3 id=\"使用定积分求解函数\">使用定积分求解函数</h3>\n<p>如果我们调用scipy.integrate库中的quad函数的话，将会得到非常精确的结果：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab241442677283\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; from scipy import integrate\r\n&gt;&gt;&gt; pi_half, err = integrate.quad(half_circle, -1, 1)\r\n&gt;&gt;&gt; pi_half*2\r\n3.1415926535897984</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab241442677283-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab241442677283-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab241442677283-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab241442677283-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab241442677283-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">scipy </span><span class=\"crayon-e\">import </span><span class=\"crayon-v\">integrate</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab241442677283-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pi_half</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">err</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">integrate</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">quad</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">half_circle</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab241442677283-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">pi_half*</span><span class=\"crayon-cn\">2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab241442677283-4\"><span class=\"crayon-cn\">3.1415926535897984</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p></p>\n<h2 id=\"图像处理\">图像处理</h2>\n<p>在scipy.misc模块中，有一个函数可以载入Lena图像——这副图像是被用作图像处理的经典示范图像。我只是简单展示一下在该图像上的几个操作。</p>\n<ol>\n<li>载入Lena图像，并显示灰度图像</li>\n<li>应用中值滤波扫描信号的每一个数据点，并替换为相邻数据点的中值</li>\n<li>旋转图像</li>\n<li>应用Prewitt滤波器（基于图像强度的梯度计算）</li>\n</ol>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b68dab245070640708\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; from scipy import misc\r\n&gt;&gt;&gt; from scipy import ndimage\r\n&gt;&gt;&gt; img = misc.lena().astype(np.float32)\r\n&gt;&gt;&gt; plt.subplot(221)\r\n&gt;&gt;&gt; plt.title('Original Image')\r\n&gt;&gt;&gt; plt.imshow(img, cmap=plt.cm.gray)\r\n&gt;&gt;&gt; plt.subplot(222)\r\n&gt;&gt;&gt; plt.title('Median Filter')\r\n&gt;&gt;&gt; filtered = ndimage.median_filter(img, size=(42,42))\r\n&gt;&gt;&gt; plt.imshow(filtered, cmap=plt.cm.gray)\r\n&gt;&gt;&gt; plt.subplot(223)\r\n&gt;&gt;&gt; plt.title('Rotated')\r\n&gt;&gt;&gt; rotated = ndimage.rotate(img, 90)\r\n&gt;&gt;&gt; plt.imshow(rotated, cmap=plt.cm.gray)\r\n&gt;&gt;&gt; plt.subplot(224)\r\n&gt;&gt;&gt; plt.title('Prewitt Filter')\r\n&gt;&gt;&gt; filtered = ndimage.prewitt(img)\r\n&gt;&gt;&gt; plt.imshow(filtered, cmap=plt.cm.gray)\r\n&gt;&gt;&gt; plt.show()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab245070640708-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab245070640708-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab245070640708-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab245070640708-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab245070640708-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab245070640708-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab245070640708-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab245070640708-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab245070640708-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab245070640708-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab245070640708-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab245070640708-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab245070640708-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab245070640708-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab245070640708-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab245070640708-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab245070640708-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b68dab245070640708-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b68dab245070640708-19\">19</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b68dab245070640708-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">scipy </span><span class=\"crayon-e\">import </span><span class=\"crayon-v\">misc</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab245070640708-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">scipy </span><span class=\"crayon-e\">import </span><span class=\"crayon-v\">ndimage</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab245070640708-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">img</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">misc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">lena</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">astype</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">float32</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab245070640708-4\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">subplot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">221</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab245070640708-5\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">title</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Original Image'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab245070640708-6\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">imshow</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">img</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cmap</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">cm</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">gray</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab245070640708-7\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">subplot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">222</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab245070640708-8\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">title</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Median Filter'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab245070640708-9\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">filtered</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ndimage</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">median_filter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">img</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">42</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">42</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab245070640708-10\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">imshow</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">filtered</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cmap</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">cm</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">gray</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab245070640708-11\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">subplot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">223</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab245070640708-12\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">title</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Rotated'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab245070640708-13\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rotated</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ndimage</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">rotate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">img</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">90</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab245070640708-14\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">imshow</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">rotated</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cmap</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">cm</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">gray</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab245070640708-15\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">subplot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">224</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab245070640708-16\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">title</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Prewitt Filter'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab245070640708-17\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">filtered</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ndimage</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">prewitt</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">img</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b68dab245070640708-18\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">imshow</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">filtered</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cmap</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">cm</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">gray</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b68dab245070640708-19\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">show</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0045 seconds] -->\r\n<p><img title=\"\" src=\"https://img-blog.csdn.net/20170214232451064?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHVmaXZl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" alt=\"Lena\"></p>\n<h1 id=\"后记\">后记</h1>\n<p>这篇博文自2016年9月初动笔，断断续续写了5个多月。延宕这么久，除了自身懒惰的原因外，主要是因为MSN这个主题涉及的内容太过繁杂，又极其晦涩，无论怎么努力，总怕挂一漏万、贻笑大方。</p>\n<p>现在好了，终于写完了。倘若哪位看官发现了谬误，请自行修改，顺便通知我一声；若因此文受益而想约饭、约酒，请发邮件至：xufive@gmail.com</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89309\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89309votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89309\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"title": "网易云音乐评论爬虫(1)：全部热门歌曲及其 id 号", "url": "http://python.jobbole.com/89313/", "url_object_id": "179e4545fd99f94efdc95eae20f8d1ee", "create_date": "2019-06-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/11/8ef4df4888b257b5ea7bbd4b033a519c.png"], "praise_nums": 2, "comment_nums": 1, "fav_nums": 4, "tags": "实践项目,,爬虫", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.zhouzying.cn/34.html\">志颖</a>   </div><p>今天我给大家介绍一下用Python爬取网易云音乐全部歌手的热门歌曲.由于歌手个人主页的网页源代码中还嵌入了一个子网页(框架源代码里面包含了我们需要的信息),因此我们不能使用requests库来爬取,而使用selenium,接下来,让我详细讲解整个爬取过程.</p>\n<article>\n<h1>一,构造歌手个人主页的URL</h1>\n<p>前段时间我们获取了<a href=\"https://music.163.com\" target=\"_blank\" rel=\"noopener\">网易云音乐</a>全部歌手的id号,今天我们就利用全部歌手的id号来构造歌手个人主页的URL,从而实现用爬取全部歌手的热门歌曲及其id号的目的.以歌手 <a href=\"https://music.163.com/#/artist?id=5781\" target=\"_blank\" rel=\"noopener\">薛之谦的个人主页</a> 为例,来看一下他的主页的URL为:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b33dc61e6340333437\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nhttps://music.163.com/#/artist?id=5781</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b33dc61e6340333437-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b33dc61e6340333437-1\"><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//music.163.com/#/artist?id=5781</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>因此只需要根据歌手对应的id就可以构造出歌手的个人主页,在歌手的个人主页我们能看到热门作品这一栏.<a href=\"https://github.com/zyingzhou/wangyiyue_music/blob/master/files/music163_artists.csv\" target=\"_blank\" rel=\"noopener\">网易云音乐全部歌手id号点击获取(csv文件)</a></p>\n<h1>二,分析网页源代码</h1>\n<p>现在我们就要用Python爬虫去爬取这些内容.如果你用requests库去爬取的话,返回的网页源代码中根本就没有这些信息.这时我们打开<a href=\"https://music.163.com/#/artist?id=5781\" target=\"_blank\" rel=\"noopener\">薛之谦的个人主页</a>鼠标右键分别查看网页的源代码和查看框架的源代码.你会发现网页源代码和用requests库请求返回的源代码一摸一样(里面没有我们要爬取的信息),而在框架源代码中有我们要爬取的热门作品的信息,因此我们只需要将框架源代码爬取下来,然后再解析即可得到我们需要的歌手的热门作品的信息.</p>\n<h1>三,网页源代码和框架源代码的区别</h1>\n<p><strong>网页源代码</strong>是指父级网页的源代码.另外网页中还有一种节点叫iframe，也就是子Frame，相当于网页的子页面，它的结构和外部网页的结构完全一致，<strong>框架源代码</strong>就是这个子网页的源代码.</p>\n<h1>四,获取框架源代码</h1>\n<div>\n<div>\n<p>这里我们使用selenium库来爬取,在selenium打开页面后，默认是在父级frame里面进行操作，而此时页面中还有子frame，它是不能获取到子frame里面的节点的，因此这时我们需要使用swith_to.frame()方法来切换到子frame中去，这时请求得到的代码就从网页源代码切换到了框架源代码，于是我们便能够提取我们需要的热门作品的信息了.通过歌手的个人主页的URL来爬取其框架源代码,具体爬取框架源代码的函数:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b33dc61f0283491398\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef get_html_src(url):\r\n    # 可以任意选择浏览器,前提是要配置好相关环境,更多请参考selenium官方文档\r\n    driver = webdriver.Chrome()\r\n    driver.get(url)\r\n    # 切换成frame\r\n    driver.switch_to_frame(\"g_iframe\")\r\n    # 休眠3秒,等待加载完成!\r\n    time.sleep(3)\r\n    page_src = driver.page_source\r\n    driver.close()\r\n    return page_src</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b33dc61f0283491398-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b33dc61f0283491398-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b33dc61f0283491398-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b33dc61f0283491398-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b33dc61f0283491398-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b33dc61f0283491398-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b33dc61f0283491398-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b33dc61f0283491398-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b33dc61f0283491398-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b33dc61f0283491398-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b33dc61f0283491398-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b33dc61f0283491398-1\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">get_html_src</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b33dc61f0283491398-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># 可以任意选择浏览器,前提是要配置好相关环境,更多请参考selenium官方文档</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b33dc61f0283491398-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">driver</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">webdriver</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Chrome</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b33dc61f0283491398-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">driver</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b33dc61f0283491398-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># 切换成frame</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b33dc61f0283491398-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">driver</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">switch_to_frame</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"g_iframe\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b33dc61f0283491398-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># 休眠3秒,等待加载完成!</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b33dc61f0283491398-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">time</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sleep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b33dc61f0283491398-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">page_src</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">driver</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">page_source</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b33dc61f0283491398-10\"><span class=\"crayon-e\">    </span><span class=\"crayon-v\">driver</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b33dc61f0283491398-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">page_src</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>\n</p></div>\n</div>\n<p>返回结果为歌手个人主页的框架源代码,里面包含了我们需要的信息.</p>\n<h1>五,解析源代码</h1>\n<p>我们使用bs4库进行解析,需要的信息包含在HTML5的下面代码片段中:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b33dc61f5285832818\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;span class=\"txt\"&gt;&lt;a href=\"/song?id=(\\d*)\"&gt;&lt;b title=\"(.*?)\"&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b33dc61f5285832818-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b33dc61f5285832818-1\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">span </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"txt\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">href</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"/song?id=(\\d*)\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">title</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"(.*?)\"</span><span class=\"crayon-o\">&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>因此可定义下面函数对其进行解析:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b33dc61f9506398579\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef parse_html_page(html):\r\n    \r\n    # pattern = '&lt;span class=\"txt\"&gt;&lt;a href=\"/song?id=(\\d*)\"&gt;&lt;b title=\"(.*?)\"&gt;'\r\n    # 这里是使用lxml解析器进行解析,lxml速度快,文档容错能力强,也能使用html5lib\r\n    soup = BeautifulSoup(html, 'lxml')\r\n    items = soup.find_all('span', 'txt')\r\n    return items</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b33dc61f9506398579-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b33dc61f9506398579-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b33dc61f9506398579-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b33dc61f9506398579-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b33dc61f9506398579-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b33dc61f9506398579-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b33dc61f9506398579-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b33dc61f9506398579-1\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">parse_html_page</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">html</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b33dc61f9506398579-2\"><span class=\"crayon-h\">    </span></div><div class=\"crayon-line\" id=\"crayon-5cf4b33dc61f9506398579-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># pattern = '&lt;span class=\"txt\"&gt;&lt;a href=\"/song?id=(\\d*)\"&gt;&lt;b title=\"(.*?)\"&gt;'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b33dc61f9506398579-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># 这里是使用lxml解析器进行解析,lxml速度快,文档容错能力强,也能使用html5lib</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b33dc61f9506398579-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">soup</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">BeautifulSoup</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">html</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'lxml'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b33dc61f9506398579-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">items</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">soup</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find_all</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'span'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'txt'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b33dc61f9506398579-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">items</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p></p>\n<h1> 六,写入csv文件</h1>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b33dc61fc364106428\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef write_to_csv(items, artist_name):\r\n \r\n    with open(\"music163_songs.csv\", \"a\") as csvfile:\r\n        writer = csv.writer(csvfile)\r\n        writer.writerow([\"歌手名字\", artist_name])\r\n \r\n        for item in items:\r\n            writer.writerow([item.a['href'].replace('/song?id=', ''), item.b['title']])\r\n \r\n            print('歌曲id:', item.a['href'].replace('/song?id=', ''))\r\n            song_name = item.b['title']\r\n            print('歌曲名字:', song_name)\r\n \r\n    csvfile.close()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b33dc61fc364106428-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b33dc61fc364106428-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b33dc61fc364106428-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b33dc61fc364106428-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b33dc61fc364106428-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b33dc61fc364106428-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b33dc61fc364106428-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b33dc61fc364106428-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b33dc61fc364106428-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b33dc61fc364106428-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b33dc61fc364106428-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b33dc61fc364106428-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b33dc61fc364106428-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b33dc61fc364106428-14\">14</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b33dc61fc364106428-1\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">write_to_csv</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">items</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">artist_name</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b33dc61fc364106428-2\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5cf4b33dc61fc364106428-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">with </span><span class=\"crayon-e\">open</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"music163_songs.csv\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"a\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">csvfile</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b33dc61fc364106428-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">writer</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">csv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">writer</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">csvfile</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b33dc61fc364106428-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">writer</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">writerow</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"歌手名字\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">artist_name</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b33dc61fc364106428-6\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5cf4b33dc61fc364106428-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">item </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">items</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b33dc61fc364106428-8\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">writer</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">writerow</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">item</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'href'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">replace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'/song?id='</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">item</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'title'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b33dc61fc364106428-9\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b33dc61fc364106428-10\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'歌曲id:'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">item</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'href'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">replace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'/song?id='</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b33dc61fc364106428-11\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">song_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">item</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'title'</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b33dc61fc364106428-12\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'歌曲名字:'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">song_name</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b33dc61fc364106428-13\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b33dc61fc364106428-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">csvfile</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">close</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0027 seconds] -->\r\n<p></p>\n<h1> 七,读取csv文件,构造全部歌手的个人主页</h1>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b33dc6200921820822\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# 获取歌手id和歌手姓名\r\ndef read_csv():\r\n \r\n    with open(\"music163_artists.csv\", \"r\", encoding=\"utf-8\") as csvfile:\r\n \r\n        reader = csv.reader(csvfile)\r\n        for row in reader:\r\n            artist_id, artist_name = row\r\n            if str(artist_id) is \"artist_id\":\r\n                continue\r\n            else:\r\n                yield artist_id, artist_name\r\n    # 当程序的控制流程离开with语句块后, 文件将自动关闭</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b33dc6200921820822-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b33dc6200921820822-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b33dc6200921820822-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b33dc6200921820822-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b33dc6200921820822-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b33dc6200921820822-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b33dc6200921820822-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b33dc6200921820822-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b33dc6200921820822-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b33dc6200921820822-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b33dc6200921820822-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b33dc6200921820822-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b33dc6200921820822-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b33dc6200921820822-1\"><span class=\"crayon-p\"># 获取歌手id和歌手姓名</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b33dc6200921820822-2\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">read_csv</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b33dc6200921820822-3\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b33dc6200921820822-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">with </span><span class=\"crayon-e\">open</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"music163_artists.csv\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"r\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">encoding</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"utf-8\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">csvfile</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b33dc6200921820822-5\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b33dc6200921820822-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">reader</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">csv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">reader</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">csvfile</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b33dc6200921820822-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">row </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">reader</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b33dc6200921820822-8\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">artist_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">artist_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">row</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b33dc6200921820822-9\"><span class=\"crayon-e\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">str</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">artist_id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"artist_id\"</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b33dc6200921820822-10\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">continue</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b33dc6200921820822-11\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b33dc6200921820822-12\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">yield </span><span class=\"crayon-v\">artist_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">artist_name</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b33dc6200921820822-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># 当程序的控制流程离开with语句块后, 文件将自动关闭</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n<p></p>\n<h1> 八,程序主函数</h1>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b33dc6204465765683\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# 主函数\r\ndef main():\r\n    for readcsv in read_csv():\r\n        artist_id, artist_name = readcsv\r\n        url = \"https://music.163.com/#/artist?id=\" + str(artist_id)\r\n        print(\"正在获取{}的热门歌曲...\".format(artist_name))\r\n        html = get_html_src(url)\r\n        items = parse_html_page(html)\r\n        print(\"{}的热门歌曲获取完成!\".format(artist_name))\r\n        print(\"开始将{}的热门歌曲写入文件\".format(artist_name))\r\n        write_to_csv(items, artist_name)\r\n        print(\"{}的热门歌曲写入到本地成功!\".format(artist_name))</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b33dc6204465765683-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b33dc6204465765683-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b33dc6204465765683-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b33dc6204465765683-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b33dc6204465765683-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b33dc6204465765683-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b33dc6204465765683-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b33dc6204465765683-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b33dc6204465765683-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b33dc6204465765683-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b33dc6204465765683-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b33dc6204465765683-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b33dc6204465765683-1\"><span class=\"crayon-p\"># 主函数</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b33dc6204465765683-2\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b33dc6204465765683-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">readcsv </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">read_csv</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b33dc6204465765683-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">artist_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">artist_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">readcsv</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b33dc6204465765683-5\"><span class=\"crayon-e\">        </span><span class=\"crayon-v\">url</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"https://music.163.com/#/artist?id=\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">str</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">artist_id</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b33dc6204465765683-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"正在获取{}的热门歌曲...\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">artist_name</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b33dc6204465765683-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">html</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">get_html_src</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b33dc6204465765683-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">items</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">parse_html_page</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">html</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b33dc6204465765683-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"{}的热门歌曲获取完成!\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">artist_name</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b33dc6204465765683-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"开始将{}的热门歌曲写入文件\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">artist_name</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b33dc6204465765683-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">write_to_csv</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">items</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">artist_name</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b33dc6204465765683-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"{}的热门歌曲写入到本地成功!\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">artist_name</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0023 seconds] -->\r\n<p></p>\n<h1> 九,总结</h1>\n<p><a href=\"https://github.com/zyingzhou/wangyiyue_music/blob/master/get_hot_songs.py\" target=\"_blank\" rel=\"noopener\">获取全部代码请上我的github</a>,爬取过程中有任何问题欢迎留言!</p>\n<p><strong>作者简介：志颖，一个狂热的 python 爬虫爱好者。</strong></p>\n</article>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89313\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89313votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89313\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"title": "网易云音乐评论爬虫（2）：歌曲的全部评论", "url": "http://python.jobbole.com/89316/", "url_object_id": "022c03e340aaa67e76159f290915e32b", "create_date": "2019-06-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/02/591d8b55a524f825dd29a22b8df70000.jpg"], "praise_nums": 1, "comment_nums": 1, "fav_nums": 4, "tags": "实践项目,,爬虫", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.zhouzying.cn/58.html\">志颖</a>   </div><p>用过网易云音乐听歌的朋友都知道，网易云音乐每首歌曲后面都有很多评论，热门歌曲的评论更是接近百万或者是超过百万条．现在我就来分享一下如何爬取网易云音乐歌曲的全部评论，由于网易云音乐的评论都做了混淆加密处理，因此我们需要深入了解它的加密过程之后才能爬取到网易云音乐歌曲的全部评论．</p>\n<article>\n<h1>一，首先分析数据的请求方式</h1>\n<p>网易云音乐歌曲页面的URL形式为https://music.163.com/#/song?id=歌曲id号,这里我用Delacey的<a href=\"https://music.163.com/#/song?id=38592976\" target=\"_blank\" rel=\"noopener\">Dream it possible</a> 为例进行讲解,它的URL为https://music.163.com/#/song?id=38592976.接下来开始分析数据的请求方式.</p>\n<p>由于网易云音乐的评论是通过Ajax传输，我们打开浏览器的开发者工具(检查元素)，选中控制面板中的Network,再点击XHR(捕获ajax数据)，然后点击左上角的重新加载，会看到下面图片中的数据请求列表</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/10/7f8c36aa8854bd7c85b1329ce188af88.png\" alt=\"\" width=\"840\" height=\"437\"></p>\n<p>点击R_SO_4_38592976?csrf_token=cdee144903c5a32e6752f50180329fc9这一行,再点击Preview</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/10/78a18a9f20dd3b2c370fb5c3e8ed6423.png\" alt=\"\" width=\"741\" height=\"195\"></p>\n<p>发现我们所需要的数据就在这json格式的数据中,其中comments中是第一页的全部评论,一共20条,hotcomments是精彩评论一共有15条,每首歌曲只有第一页评论才有精彩评论.接着看一下它的请求头,点击Headers</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/10/bb4b5c0c518e1209ef3e9a47df592c6c.png\" alt=\"\" width=\"866\" height=\"104\"></p>\n<p>我们发现的它是个post请求,向下滑你会发现这个post请求还带有数据</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/10/a8fbd643bcd4abbc7602fb6a132591c8.png\" alt=\"\" width=\"1354\" height=\"104\"></p>\n<p>这些数据都是经过加密处理的,因此我们需要分析它的加密过程来生成相应的参数,然后把加密后的参数加到post请求中才能获取到我们需要的评论数据.</p>\n<h1>二,分析加密过程</h1>\n<p>通过断点调试发现params和encSecKey是由js脚本中的window.asrsea()函数生成的.</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/10/06473cf7991d3f526d664116eb8cec79.png\" alt=\"\" width=\"1193\" height=\"70\"></p>\n<p>我们发现window.asrsea()函数有4个参数,在浏览器的js控制台分别对这四个参数进行调试:</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/10/7edf5566977d91e6c6a63bada6cc7a23.png\" alt=\"\" width=\"1831\" height=\"133\"></p>\n<p>后面三个参数是定值,只有第一个参数是控制评论页面偏移量的参数,它是一个变量.笔者经过分析发现第一个参数的形式是:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4c88b37223476918063\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n{\"rid\":\"R_SO_4_38592976\",\"offset\":\"0\",\"total\":\"True\",\"limit\":\"20\",\"csrf_token\":\"\"}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37223476918063-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4c88b37223476918063-1\"><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">\"rid\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">\"R_SO_4_38592976\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"offset\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">\"0\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"total\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">\"True\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"limit\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">\"20\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"csrf_token\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p></p>\n<h3>下面我来详细讲解这个变量的发现过程:</h3>\n<p>首先找到core_dfe56728795d119e4d476fd09ea2dc51.js这个js脚本,然后将断点打在第12973行,点击第一页评论,页面加载到断点处便停止了</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/10/b9b6947d6e1fc2120543353592271031.png\" alt=\"\" width=\"1323\" height=\"214\"></p>\n<p>然后按下电脑的Esc键打开js控制台,输入i1x,查看第一个变量:</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/10/3f88f1de0fcd7600a6f68425ef879559.png\" alt=\"\" width=\"377\" height=\"37\"></p>\n<p>这是第一页的i1x的值,接下来看第二页的(需要点击第2页,然后输入i1x的值):</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/10/5d15f3198a5b8f9fa9230d64b3f4365f.png\" alt=\"\" width=\"860\" height=\"36\"></p>\n<p>再看第3页:</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/10/cc76e8b145c07312b7b1579c2bc2b9e3.png\" alt=\"\" width=\"863\" height=\"40\"></p>\n<p>再看第4页:</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/10/5c6f79724aa573c7a60a299992a19958.png\" alt=\"\" width=\"861\" height=\"35\"></p>\n<p>通过这几页的分析,我们可以得到i1x值的变化规律,且可以得到它的一般形式:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4c88b3722d773795838\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n{\"rid\":\"R_SO_4_38592976\",\"offset\":\"0\",\"total\":\"True\",\"limit\":\"20\",\"csrf_token\":\"\"}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b3722d773795838-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4c88b3722d773795838-1\"><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">\"rid\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">\"R_SO_4_38592976\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"offset\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">\"0\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"total\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">\"True\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"limit\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">\"20\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"csrf_token\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>offset和limit是必选参数,其他参数是可选的,其他参数不影响data数据的生成,offset (页面偏移量) = (页数-1) * 20, 注意limit最大值为100,当设为100时,获取第二页时,默认前一页是20个评论,也就是说第二页最新评论有80个,有20个是第一页显示的.因此我们可以构造第一个参数为:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4c88b37232386416432\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# 偏移量,page是页数\r\noffset = (page-1) * 20\r\nmsg = '{\"offset\":' + str(offset) + ',\"total\":\"True\",\"limit\":\"20\",\"csrf_token\":\"\"}'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37232386416432-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37232386416432-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37232386416432-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4c88b37232386416432-1\"><span class=\"crayon-p\"># 偏移量,page是页数</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37232386416432-2\"><span class=\"crayon-v\">offset</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">page</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b37232386416432-3\"><span class=\"crayon-v\">msg</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'{\"offset\":'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">str</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">offset</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">',\"total\":\"True\",\"limit\":\"20\",\"csrf_token\":\"\"}'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p><strong>接下来,我们来看一下window.asrsea()函数的整个加密过程:</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4c88b37235679111441\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n!function() {\r\n    // 函数a生成长度为16的随机字符串\r\n    function a(a) {\r\n        var d, e, b = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\", c = \"\";\r\n        for (d = 0; a &gt; d; d += 1)\r\n            e = Math.random() * b.length,\r\n            e = Math.floor(e),\r\n            c += b.charAt(e);\r\n        return c\r\n    }\r\n    // 函数b实现AES加密\r\n    function b(a, b) {\r\n        var c = CryptoJS.enc.Utf8.parse(b)\r\n          , d = CryptoJS.enc.Utf8.parse(\"0102030405060708\")\r\n          , e = CryptoJS.enc.Utf8.parse(a)\r\n          , f = CryptoJS.AES.encrypt(e, c, {\r\n            iv: d,\r\n            mode: CryptoJS.mode.CBC\r\n        });\r\n        return f.toString()\r\n    }\r\n    // 函数c实现RSA加密\r\n    function c(a, b, c) {\r\n        var d, e;\r\n        return setMaxDigits(131),\r\n        d = new RSAKeyPair(b,\"\",c),\r\n        e = encryptedString(d, a)\r\n    }\r\n    function d(d, e, f, g) {\r\n        var h = {}\r\n          , i = a(16);\r\n        return h.encText = b(d, g),\r\n        h.encText = b(h.encText, i),\r\n        h.encSecKey = c(i, e, f),\r\n        h\r\n    }\r\n    function e(a, b, d, e) {\r\n        var f = {};\r\n        return f.encText = c(a + e, b, d),\r\n        f\r\n    }\r\n    window.asrsea = d,\r\n    window.ecnonasr = e\r\n}();</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37235679111441-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37235679111441-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37235679111441-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37235679111441-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37235679111441-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37235679111441-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37235679111441-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37235679111441-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37235679111441-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37235679111441-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37235679111441-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37235679111441-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37235679111441-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37235679111441-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37235679111441-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37235679111441-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37235679111441-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37235679111441-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37235679111441-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37235679111441-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37235679111441-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37235679111441-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37235679111441-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37235679111441-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37235679111441-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37235679111441-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37235679111441-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37235679111441-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37235679111441-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37235679111441-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37235679111441-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37235679111441-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37235679111441-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37235679111441-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37235679111441-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37235679111441-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37235679111441-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37235679111441-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37235679111441-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37235679111441-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37235679111441-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37235679111441-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37235679111441-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37235679111441-44\">44</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4c88b37235679111441-1\"><span class=\"crayon-o\">!</span><span class=\"crayon-t\">function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37235679111441-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 函数a生成长度为16的随机字符串</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b37235679111441-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">a</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37235679111441-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b37235679111441-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37235679111441-6\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Math</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">random</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b37235679111441-7\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Math</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">floor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37235679111441-8\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">charAt</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b37235679111441-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">c</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37235679111441-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b37235679111441-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 函数b实现AES加密</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37235679111441-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">b</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b37235679111441-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CryptoJS</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">enc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Utf8</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">parse</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37235679111441-14\"><span class=\"crayon-h\">          </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CryptoJS</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">enc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Utf8</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">parse</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"0102030405060708\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b37235679111441-15\"><span class=\"crayon-h\">          </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CryptoJS</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">enc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Utf8</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">parse</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37235679111441-16\"><span class=\"crayon-h\">          </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CryptoJS</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">AES</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">encrypt</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b37235679111441-17\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">iv</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37235679111441-18\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">mode</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CryptoJS</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">mode</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">CBC</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b37235679111441-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37235679111441-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">toString</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b37235679111441-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37235679111441-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 函数c实现RSA加密</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b37235679111441-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">c</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37235679111441-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b37235679111441-25\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">setMaxDigits</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">131</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37235679111441-26\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">RSAKeyPair</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b37235679111441-27\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">encryptedString</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37235679111441-28\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b37235679111441-29\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">d</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37235679111441-30\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">h</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b37235679111441-31\"><span class=\"crayon-h\">          </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">a</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">16</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37235679111441-32\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">h</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">encText</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">b</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b37235679111441-33\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">h</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">encText</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">b</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">h</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">encText</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37235679111441-34\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">h</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">encSecKey</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">c</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b37235679111441-35\"><span class=\"crayon-h\">        </span><span class=\"crayon-i\">h</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37235679111441-36\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b37235679111441-37\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">e</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37235679111441-38\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b37235679111441-39\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">encText</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">c</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37235679111441-40\"><span class=\"crayon-h\">        </span><span class=\"crayon-i\">f</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b37235679111441-41\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37235679111441-42\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">window</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">asrsea</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b37235679111441-43\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">window</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">ecnonasr</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">e</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37235679111441-44\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0088 seconds] -->\r\n<p>window.asrsea()函数就是上面的d函数,现在我们来看函数d:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4c88b37239476003481\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfunction d(d, e, f, g) {\r\n        var h = {}\r\n          , i = a(16);\r\n        return h.encText = b(d, g),   // 第一次AES加密\r\n        h.encText = b(h.encText, i),    // 第二次AES加密\r\n        h.encSecKey = c(i, e, f),    // RSA加密\r\n        h\r\n    }</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37239476003481-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37239476003481-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37239476003481-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37239476003481-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37239476003481-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37239476003481-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37239476003481-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37239476003481-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4c88b37239476003481-1\"><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">d</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37239476003481-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">h</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b37239476003481-3\"><span class=\"crayon-h\">          </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">a</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">16</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37239476003481-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">h</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">encText</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">b</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">   </span><span class=\"crayon-c\">// 第一次AES加密</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b37239476003481-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">h</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">encText</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">b</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">h</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">encText</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 第二次AES加密</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37239476003481-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">h</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">encSecKey</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">c</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// RSA加密</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b37239476003481-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-i\">h</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37239476003481-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0021 seconds] -->\r\n<p>参数h.encText是经过两次AES加密得到的,h.encSecKey是经过一次RSA加密得到的,其中i是随机生成的长度为16的随机字符串.</p>\n<h1>三,生成加密参数</h1>\n<p>首先我们需要生成长度为16的随机字符串,这里我们仿照上面的javascript的实现,用Python生成16位长的随机字符串:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4c88b3723d741361922\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# 生成随机字符串\r\ndef generate_random_strs(length):\r\n    string = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\"\r\n    # 控制次数参数i\r\n    i = 0\r\n    # 初始化随机字符串\r\n    random_strs  = \"\"\r\n    while i &lt; length:\r\n        e = random.random() * len(string)\r\n        # 向下取整\r\n        e = math.floor(e)\r\n        random_strs = random_strs + list(string)[e]\r\n        i = i + 1\r\n    return random_strs</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b3723d741361922-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b3723d741361922-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b3723d741361922-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b3723d741361922-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b3723d741361922-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b3723d741361922-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b3723d741361922-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b3723d741361922-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b3723d741361922-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b3723d741361922-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b3723d741361922-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b3723d741361922-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b3723d741361922-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b3723d741361922-14\">14</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4c88b3723d741361922-1\"><span class=\"crayon-p\"># 生成随机字符串</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b3723d741361922-2\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">generate_random_strs</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">length</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b3723d741361922-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">string</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b3723d741361922-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># 控制次数参数i</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b3723d741361922-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b3723d741361922-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># 初始化随机字符串</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b3723d741361922-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">random_strs</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b3723d741361922-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">length</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b3723d741361922-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">random</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">random</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">string</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b3723d741361922-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-p\"># 向下取整</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b3723d741361922-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">math</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">floor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b3723d741361922-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">random_strs</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">random_strs</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">list</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">string</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b3723d741361922-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b3723d741361922-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">random_strs</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0022 seconds] -->\r\n<p>接着用Python实现AES加密,这里要用到pycrypto库,先安装好这个库:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4c88b37240479068062\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npip   install   pycrypto</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37240479068062-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4c88b37240479068062-1\"><span class=\"crayon-e\">pip   </span><span class=\"crayon-e\">install   </span><span class=\"crayon-v\">pycrypto</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>然后导入加密模块:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4c88b37243037344448\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfrom Crypto.Cipher import AES</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37243037344448-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4c88b37243037344448-1\"><span class=\"crayon-e\">from </span><span class=\"crayon-v\">Crypto</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Cipher </span><span class=\"crayon-e\">import </span><span class=\"crayon-v\">AES</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>由于AES加密的明文长度必须是16的倍数,因此我们需要对明文进行必要的填充,以满足它的长度是16的倍数:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4c88b37247301012246\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# msg是需要加密的明文,如果不是16的倍数则进行填充(paddiing)\r\npadding = 16 - len(msg) % 16\r\n# 这里使用padding对应的单字符进行填充\r\nmsg = msg + padding * chr(padding)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37247301012246-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37247301012246-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37247301012246-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37247301012246-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4c88b37247301012246-1\"><span class=\"crayon-p\"># msg是需要加密的明文,如果不是16的倍数则进行填充(paddiing)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37247301012246-2\"><span class=\"crayon-v\">padding</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">msg</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b37247301012246-3\"><span class=\"crayon-p\"># 这里使用padding对应的单字符进行填充</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37247301012246-4\"><span class=\"crayon-v\">msg</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">msg</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">padding *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">chr</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">padding</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>AES加密的模式是AES.MODE_CBC,初始化向量iv=’0102030405060708′,具体的AES加密:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4c88b3724a823192146\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# AES加密\r\ndef AESencrypt(msg, key):\r\n    # 如果不是16的倍数则进行填充(paddiing)\r\n    padding = 16 - len(msg) % 16\r\n    # 这里使用padding对应的单字符进行填充\r\n    msg = msg + padding * chr(padding)\r\n    # 用来加密或者解密的初始向量(必须是16位)\r\n    iv = '0102030405060708'\r\n \r\n    cipher = AES.new(key, AES.MODE_CBC, iv)\r\n    # 加密后得到的是bytes类型的数据\r\n    encryptedbytes = cipher.encrypt(msg)\r\n    # 使用Base64进行编码,返回byte字符串\r\n    encodestrs = base64.b64encode(encryptedbytes)\r\n    # 对byte字符串按utf-8进行解码\r\n    enctext = encodestrs.decode('utf-8')\r\n \r\n    return enctext</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b3724a823192146-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b3724a823192146-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b3724a823192146-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b3724a823192146-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b3724a823192146-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b3724a823192146-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b3724a823192146-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b3724a823192146-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b3724a823192146-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b3724a823192146-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b3724a823192146-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b3724a823192146-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b3724a823192146-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b3724a823192146-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b3724a823192146-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b3724a823192146-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b3724a823192146-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b3724a823192146-18\">18</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4c88b3724a823192146-1\"><span class=\"crayon-p\"># AES加密</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b3724a823192146-2\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">AESencrypt</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">msg</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b3724a823192146-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># 如果不是16的倍数则进行填充(paddiing)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b3724a823192146-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">padding</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">msg</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b3724a823192146-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># 这里使用padding对应的单字符进行填充</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b3724a823192146-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">msg</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">msg</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">padding *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">chr</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">padding</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b3724a823192146-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># 用来加密或者解密的初始向量(必须是16位)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b3724a823192146-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">iv</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0102030405060708'</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b3724a823192146-9\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b3724a823192146-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">cipher</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AES</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">new</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AES</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">MODE_CBC</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iv</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b3724a823192146-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># 加密后得到的是bytes类型的数据</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b3724a823192146-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">encryptedbytes</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cipher</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">encrypt</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">msg</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b3724a823192146-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># 使用Base64进行编码,返回byte字符串</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b3724a823192146-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">encodestrs</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">base64</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">b64encode</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">encryptedbytes</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b3724a823192146-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># 对byte字符串按utf-8进行解码</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b3724a823192146-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">enctext</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">encodestrs</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">decode</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'utf-8'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b3724a823192146-17\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b3724a823192146-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">enctext</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0027 seconds] -->\r\n<p>然后是RSA加密.首先我简单介绍一下RSA的加密过程.在RSA中,明文,密钥和密文都是数字.RSA的加密过程可以用下列的公式来表达,这个公式非常的重要,你只有理解了这个公式,才能用Python实现RSA加密.</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4c88b3724e536389524\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n密文    =    明文E mod  N           (RSA加密)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b3724e536389524-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4c88b3724e536389524-1\">密文<span class=\"crayon-h\">    </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\">    </span>明文<span class=\"crayon-i\">E</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">mod</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">N</span><span class=\"crayon-h\">           </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">RSA</span>加密<span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>RSA的密文是对代表明文的数字的E次方求mod N 的结果, 通俗的讲就是将明文和自己做E次乘法,然后将其结果除以N 求余数,这个余数就是密文.</p>\n<p>下面来看具体的RSA加密代码实现:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4c88b37251035699630\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# RSA加密\r\ndef RSAencrypt(randomstrs, key, f):\r\n    # 随机字符串逆序排列\r\n    string = randomstrs[::-1]\r\n    # 将随机字符串转换成byte类型数据\r\n    text = bytes(string, 'utf-8')\r\n    seckey = int(codecs.encode(text, encoding='hex'), 16)**int(key, 16) % int(f, 16)\r\n    return format(seckey, 'x').zfill(256)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37251035699630-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37251035699630-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37251035699630-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37251035699630-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37251035699630-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37251035699630-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37251035699630-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37251035699630-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4c88b37251035699630-1\"><span class=\"crayon-p\"># RSA加密</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37251035699630-2\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">RSAencrypt</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">randomstrs</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b37251035699630-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># 随机字符串逆序排列</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37251035699630-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">string</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">randomstrs</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">::</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b37251035699630-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># 将随机字符串转换成byte类型数据</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37251035699630-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">text</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">bytes</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">string</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'utf-8'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b37251035699630-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">seckey</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">codecs</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">encode</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">text</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">encoding</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'hex'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37251035699630-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">seckey</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'x'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">zfill</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">256</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0022 seconds] -->\r\n<p>RSA加密后得到的字符串长为256,这里不够长我们用x字符填充.</p>\n<p>最后就是获取那两个加密参数:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4c88b37255216131578\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# 获取参数\r\ndef get_params(page):\r\n    # msg也可以写成msg = {\"offset\":\"页面偏移量=(页数-1) *　20\", \"limit\":\"20\"},offset和limit这两个参数必须有(js)\r\n    # limit最大值为100,当设为100时,获取第二页时,默认前一页是20个评论,也就是说第二页最新评论有80个,有20个是第一页显示的\r\n    # 偏移量\r\n    offset = (page-1) * 20\r\n    # offset和limit是必选参数,其他参数是可选的,其他参数不影响data数据的生成,最好还是保留\r\n    msg = '{\"offset\":' + str(offset) + ',\"total\":\"True\",\"limit\":\"20\",\"csrf_token\":\"\"}'\r\n    key = '0CoJUm6Qyw8W8jud'\r\n    f = '00e0b509f6259df8642dbc35662901477df22677ec152b5ff68ace615bb7b725152b3ab17a876aea8a5aa76d2e417629ec4ee341f56135fccf695280104e0312ecbda92557c93870114af6c9d05c4f7f0c3685b7a46bee255932575cce10b424d813cfe4875d3e82047b97ddef52741d546b8e289dc6935b3ece0462db0a22b8e7'\r\n    e = '010001'\r\n    enctext = AESencrypt(msg, key)\r\n    # 生成长度为16的随机字符串\r\n    i = generate_random_strs(16)\r\n \r\n    # 两次AES加密之后得到params的值\r\n    encText = AESencrypt(enctext, i)\r\n    # RSA加密之后得到encSecKey的值\r\n    encSecKey = RSAencrypt(i, e, f)\r\n    return encText, encSecKey</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37255216131578-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37255216131578-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37255216131578-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37255216131578-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37255216131578-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37255216131578-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37255216131578-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37255216131578-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37255216131578-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37255216131578-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37255216131578-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37255216131578-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37255216131578-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37255216131578-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37255216131578-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37255216131578-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37255216131578-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37255216131578-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37255216131578-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37255216131578-20\">20</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4c88b37255216131578-1\"><span class=\"crayon-p\"># 获取参数</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37255216131578-2\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">get_params</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">page</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b37255216131578-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># msg也可以写成msg = {\"offset\":\"页面偏移量=(页数-1) *　20\", \"limit\":\"20\"},offset和limit这两个参数必须有(js)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37255216131578-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># limit最大值为100,当设为100时,获取第二页时,默认前一页是20个评论,也就是说第二页最新评论有80个,有20个是第一页显示的</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b37255216131578-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># 偏移量</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37255216131578-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">offset</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">page</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b37255216131578-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># offset和limit是必选参数,其他参数是可选的,其他参数不影响data数据的生成,最好还是保留</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37255216131578-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">msg</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'{\"offset\":'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">str</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">offset</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">',\"total\":\"True\",\"limit\":\"20\",\"csrf_token\":\"\"}'</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b37255216131578-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">key</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'0CoJUm6Qyw8W8jud'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37255216131578-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">f</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'00e0b509f6259df8642dbc35662901477df22677ec152b5ff68ace615bb7b725152b3ab17a876aea8a5aa76d2e417629ec4ee341f56135fccf695280104e0312ecbda92557c93870114af6c9d05c4f7f0c3685b7a46bee255932575cce10b424d813cfe4875d3e82047b97ddef52741d546b8e289dc6935b3ece0462db0a22b8e7'</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b37255216131578-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'010001'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37255216131578-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">enctext</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AESencrypt</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">msg</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b37255216131578-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># 生成长度为16的随机字符串</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37255216131578-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">generate_random_strs</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">16</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b37255216131578-15\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37255216131578-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># 两次AES加密之后得到params的值</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b37255216131578-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">encText</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AESencrypt</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">enctext</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37255216131578-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># RSA加密之后得到encSecKey的值</span></div><div class=\"crayon-line\" id=\"crayon-5cf4c88b37255216131578-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">encSecKey</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">RSAencrypt</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37255216131578-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">encText</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">encSecKey</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0030 seconds] -->\r\n<p></p>\n<h1>四,获取全部评论</h1>\n<p>上面我们获取到了两个参数encText和encSecKey,利用这两个参数来构造post表单数据(Form Data),即data的值:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4c88b37259474948015\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nparams, encSecKey = get_params(page)\r\ndata = {'params': params, 'encSecKey': encSecKey}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b37259474948015-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4c88b37259474948015-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4c88b37259474948015-1\"><span class=\"crayon-v\">params</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">encSecKey</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">get_params</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">page</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4c88b37259474948015-2\"><span class=\"crayon-v\">data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'params'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">params</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'encSecKey'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">encSecKey</span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>歌曲评论的URL为:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4c88b3725c829351317\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nurl = 'https://music.163.com/weapi/v1/resource/comments/R_SO_4_' + str(songid) + '?csrf_token='</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b3725c829351317-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4c88b3725c829351317-1\"><span class=\"crayon-v\">url</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'https://music.163.com/weapi/v1/resource/comments/R_SO_4_'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">str</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">songid</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'?csrf_token='</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>然后把data加到post的参数中去就能获取到json格式的评论数据.</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4c88b3725f635632455\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nhtml = requests.post(url, headers=headers, data=data)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4c88b3725f635632455-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4c88b3725f635632455-1\"><span class=\"crayon-v\">html</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">requests</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">post</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">headers</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">headers</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>至此,获取网易云音乐全部评论的Python爬虫实现原理分析全部完成!若想获取全部代码请上我的Github:<a href=\"https://github.com/zyingzhou/wangyiyun_music/blob/master/get_comments.py\" target=\"_blank\" rel=\"noopener\">获取网易云音乐歌曲全部评论代码</a></p>\n<p><strong>作者简介：志颖，一个狂热的 python 爬虫爱好者</strong></p>\n</article>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89316\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89316votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89316\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"title": "手把手教你写网络爬虫（5）：PhantomJS实战", "url": "http://python.jobbole.com/89123/", "url_object_id": "06d8d3d2a9ed1381ab62b8d630b3d037", "create_date": "2019-06-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/02/591d8b55a524f825dd29a22b8df70000.jpg"], "praise_nums": 1, "comment_nums": 2, "fav_nums": 4, "tags": "系列教程,,phantomjs,爬虫", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/tuohai666/p/8901370.html\">拓海</a>   </div><div id=\"cnblogs_post_body\">\n<p>大家好！从今天开始，我要与大家一起打造一个属于我们自己的分布式爬虫平台，同时也会对涉及到的技术进行详细介绍。大家如果有什么好的想法请多留言，多提意见，一起来完善我们的爬虫平台。在正式介绍平台之前，先用一些篇幅对基础篇做一点补充。模拟滚动</p>\n<p>这次的目标是爬一个众筹网站的所有项目，项目列表页如下：<a href=\"https://www.kaistart.com/project/more.html\">https://www.kaistart.com/project/more.html</a>。打开后进行分析，页面显示出10个项目：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/6d8d96b4d5f4a09d16f2f7774a54551b.jpg\" alt=\"\"></p>\n<p>如果想看到更多项目，并不能像网易云音乐那样点“下一页”翻页，而是需要向下拉滚动条或者向下滚动鼠标滚轮来触发异步请求。爬虫该如何应对这种情况呢？我们可以使用selenium的api执行js代码将屏幕内容滚动到指定位置。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/cb1982e04d7e377f2cb46500b80c1cc9.jpg\" alt=\"\"></p>\n<p>下面这段代码会一直向下滚动项目页，一直到滚不动为止：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b499b16b6519335852\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# 一直滚动到最底部\r\njs1 = 'return document.body.scrollHeight'\r\njs2 = 'window.scrollTo(0, document.body.scrollHeight)'\r\nold_scroll_height = 0\r\nwhile browser.execute_script(js1) &gt;= old_scroll_height:\r\n    old_scroll_height = browser.execute_script(js1)\r\n    browser.execute_script(js2) \r\n    time.sleep(1)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b499b16b6519335852-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b499b16b6519335852-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b499b16b6519335852-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b499b16b6519335852-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b499b16b6519335852-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b499b16b6519335852-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b499b16b6519335852-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b499b16b6519335852-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b499b16b6519335852-1\"><span class=\"crayon-p\"># 一直滚动到最底部</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b499b16b6519335852-2\"><span class=\"crayon-v\">js1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'return document.body.scrollHeight'</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b499b16b6519335852-3\"><span class=\"crayon-v\">js2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'window.scrollTo(0, document.body.scrollHeight)'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b499b16b6519335852-4\"><span class=\"crayon-v\">old_scroll_height</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b499b16b6519335852-5\"><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">browser</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">execute_script</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">js1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">old_scroll_height</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b499b16b6519335852-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">old_scroll_height</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">browser</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">execute_script</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">js1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b499b16b6519335852-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">browser</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">execute_script</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">js2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b499b16b6519335852-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">time</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sleep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0027 seconds] -->\r\n\n</div>\n<p>scrollTo() 方法可把内容滚动到指定的坐标:</p>\n<table cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td valign=\"top\" width=\"132\">参数</td>\n<td valign=\"top\" width=\"421\">描述</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"132\">xpos</td>\n<td valign=\"top\" width=\"421\">必需。要在窗口文档显示区左上角显示的文档的 x 坐标。</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"132\">ypos</td>\n<td valign=\"top\" width=\"421\">必需。要在窗口文档显示区左上角显示的文档的 y 坐标。</td>\n</tr>\n</tbody>\n</table>\n<p>这里用到了scrollHeight，它和ClientHeight还有OffsetHeight有什么区别呢？</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/790ed6fb77c1c3c6ec9ae5dff14b33eb.jpg\" alt=\"\"></p>\n<p><strong>offsetHeight</strong>： 包括内容可见部分的高度，border，可见的padding，水平方向的scrollbar（如果存在）；不包括margin。</p>\n<p><strong>clientHeight</strong>： 包括内容可见部分的高度，可见的padding；不包括border，水平方向的scrollbar，margin。</p>\n<p><strong>scrollHeight</strong>： 包括内容的高度（可见与不可见），padding（可见与不可见）；不包括border，margin。</p>\n<h3>Chrome</h3>\n<p>代码写好了，接下来就用selenium+phantomJs大法实验一下！滚到底后把项目列表提取出来看一下：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b499b16c0474911157\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nbrowser = webdriver.PhantomJs()\r\nurl = 'https://www.kaistart.com/project/more.html'\r\ntry:\r\n    browser.get(url)\r\n    wait = ui.WebDriverWait(browser, 20)\r\n    wait.until(lambda dr: dr.find_element_by_class_name('project-detail').is_displayed())\r\n\r\n    # 一直滚动到最底部\r\n    js1 = 'return document.body.scrollHeight'\r\n    js2 = 'window.scrollTo(0, document.body.scrollHeight)'\r\n    old_scroll_height = 0\r\n    while browser.execute_script(js1) &gt;= old_scroll_height:\r\n        old_scroll_height = browser.execute_script(js1)\r\n        browser.execute_script(js2) \r\n        time.sleep(1)\r\n    sel = Selector(text=browser.page_source)\r\n    proj_list = sel.xpath('//li[@class=\"project-li\"]')</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b499b16c0474911157-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b499b16c0474911157-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b499b16c0474911157-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b499b16c0474911157-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b499b16c0474911157-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b499b16c0474911157-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b499b16c0474911157-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b499b16c0474911157-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b499b16c0474911157-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b499b16c0474911157-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b499b16c0474911157-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b499b16c0474911157-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b499b16c0474911157-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b499b16c0474911157-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b499b16c0474911157-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b499b16c0474911157-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b499b16c0474911157-17\">17</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b499b16c0474911157-1\"><span class=\"crayon-v\">browser</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">webdriver</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">PhantomJs</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b499b16c0474911157-2\"><span class=\"crayon-v\">url</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'https://www.kaistart.com/project/more.html'</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b499b16c0474911157-3\"><span class=\"crayon-st\">try</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b499b16c0474911157-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">browser</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b499b16c0474911157-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">wait</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ui</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">WebDriverWait</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">browser</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b499b16c0474911157-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">wait</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">until</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">lambda </span><span class=\"crayon-v\">dr</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dr</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find_element_by_class_name</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'project-detail'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">is_displayed</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b499b16c0474911157-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b499b16c0474911157-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># 一直滚动到最底部</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b499b16c0474911157-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">js1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'return document.body.scrollHeight'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b499b16c0474911157-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">js2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'window.scrollTo(0, document.body.scrollHeight)'</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b499b16c0474911157-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">old_scroll_height</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b499b16c0474911157-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">browser</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">execute_script</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">js1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">old_scroll_height</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b499b16c0474911157-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">old_scroll_height</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">browser</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">execute_script</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">js1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b499b16c0474911157-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">browser</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">execute_script</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">js2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5cf4b499b16c0474911157-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">time</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sleep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b499b16c0474911157-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">sel</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Selector</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">text</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">browser</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">page_source</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b499b16c0474911157-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">proj_list</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">xpath</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'//li[@class=\"project-li\"]'</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0041 seconds] -->\r\n\n</div>\n<p>程序运行结束后，显示proje_list里面只有25个元素，而我们自己手动滚的话却有100多个，明显有bug。想定位这个问题很简单，截图即可，看看为什么停在第25个项目。对，phantomJs虽然没有图形界面，但是可以截图。</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b499b16c5865877938\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nbrowser.save_screenshot(debug.png')</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b499b16c5865877938-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b499b16c5865877938-1\"><span class=\"crayon-v\">browser</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">save_screenshot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">debug</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">png</span>'<span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n\n</div>\n<p>这样就会把图片保存在项目目录，打开看看：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/7e4908162f31303c3998cbb4690c73a8.png\" alt=\"\"></p>\n<p>发现项目页只能显示一行，这说明网页不兼容phantomJs，这倒不是什么新鲜事，换一个浏览器试试呗。第一期介绍过，selenium是支持所有主流浏览器的。比如换成Chrome，只需改一行代码：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b499b16c9224481348\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nbrowser = webdriver.Chrome()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b499b16c9224481348-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b499b16c9224481348-1\"><span class=\"crayon-v\">browser</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">webdriver</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Chrome</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n\n</div>\n<p>再次运行程序，不出所料，Chrome浏览器弹出来，不仅能够正确显示页面，还一直在滚动：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/08916942069b29e91ae20ca8bdcbcecc.jpg\" alt=\"\"></p>\n<p>项目全都刷出来了，想爬什么就爬吧！什么？你问我在Linux服务器上怎么爬？纯命令行的那种吗？</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/a7087ea55409fa050fca3edc9cd2f120.jpg\" alt=\"\"></p>\n<h3>虚拟X Server</h3>\n<p>PhantomJs是无界面浏览器，可以在Linux服务器上正常运行，但Chrome会在调用GUI接口时报错。既然Linux服务器没有图形接口服务，也就是X Server，我们就要虚拟出来一个，才能让Chrome正常运行。于是找到了Xvfb（X virtual frame buffer）,它可以用来作为完整X服务程序的替代。Xvfb有一个Python的封装叫PyVirtualDisplay，我们就用它来解决这个问题。</p>\n<p>安装：</p>\n<p>pip install pyvirtualdisplay</p>\n<p>用法：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b499b16cc277730838\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfrom selenium import webdriver\r\nfrom pyvirtualdisplay import Display\r\n\r\ndisplay = Display(visible=0, size=(800, 600))\r\ndisplay.start()\r\ndriver = webdriver.Chrome()\r\ndriver.get(\"http://www.baidu.com\")\r\nprint (driver.page_source.encode('utf-8'))\r\ndriver.quit()\r\ndisplay.stop()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b499b16cc277730838-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b499b16cc277730838-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b499b16cc277730838-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b499b16cc277730838-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b499b16cc277730838-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b499b16cc277730838-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b499b16cc277730838-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b499b16cc277730838-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b499b16cc277730838-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b499b16cc277730838-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b499b16cc277730838-1\"><span class=\"crayon-e\">from </span><span class=\"crayon-e\">selenium </span><span class=\"crayon-e\">import </span><span class=\"crayon-e\">webdriver</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b499b16cc277730838-2\"><span class=\"crayon-e\">from </span><span class=\"crayon-e\">pyvirtualdisplay </span><span class=\"crayon-e\">import </span><span class=\"crayon-e\">Display</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b499b16cc277730838-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b499b16cc277730838-4\"><span class=\"crayon-v\">display</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Display</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">visible</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">800</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">600</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b499b16cc277730838-5\"><span class=\"crayon-v\">display</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">start</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b499b16cc277730838-6\"><span class=\"crayon-v\">driver</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">webdriver</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Chrome</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b499b16cc277730838-7\"><span class=\"crayon-v\">driver</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"http://www.baidu.com\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b499b16cc277730838-8\"><span class=\"crayon-e\">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">driver</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">page_source</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">encode</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'utf-8'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b499b16cc277730838-9\"><span class=\"crayon-v\">driver</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">quit</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b499b16cc277730838-10\"><span class=\"crayon-v\">display</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">stop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n\n</div>\n<p>运行程序后打印出了baidu的页面内容，现在可以完美运行Chrome了。需要补充的是，在Linux上运行Chrome需要额外安装一个ChromeDriver，比较简单，就不详细介绍了。</p>\n<h3>分布式系统</h3>\n<p>既然我们要打造自己的分布式爬虫平台，就要先知道什么是分布式系统，百度百科是这样定义的：</p>\n<p><em>分布式系统（distributed system）是建立在网络之上的软件系统。正是因为软件的特性，所以分布式系统具有高度的内聚性和透明性。因此，网络和分布式系统之间的区别更多的在于高层软件（特别是操作系统），而不是硬件。内聚性是指每一个数据库分布节点高度自治，有本地的数据库管理系统。透明性是指每一个数据库分布节点对用户的应用来说都是透明的，看不出是本地还是远程。在分布式数据库系统中，用户感觉不到数据是分布的，即用户不须知道关系是否分割、有无副本、数据存于哪个站点以及事务在哪个站点上执行等。</em></p>\n<p>这个定义不太好理解，看看书上怎么说。《分布式系统概念与设计》一书中对分布式系统做了如下定义：</p>\n<p><em>分布式系统是一个硬件或软件组件分布在不同的网络计算机上，彼此之间仅仅通过消息传递进行通信和协调的系统。</em></p>\n<p>《分布式系统原理和范型》一书中是这样定义分布式系统的：</p>\n<p><em>分布式系统是若干独立计算机的集合，这些计算机对于用户来说就像是单个相关系统。</em></p>\n<p>简单来说就是一群独立计算机集合共同对外提供服务，但是对于系统的用户来说，就像是一台计算机在提供服务一样。分布式意味着可以采用更多的普通计算机（相对于昂贵的大型机）组成分布式集群对外提供服务。计算机越多，CPU、内存、存储资源等也就越多，能够处理的并发访问量也就越大。</p>\n<p>从分布式系统的概念中我们知道，各个主机之间通信和协调主要通过网络进行，所以，分布式系统中的计算机在空间上几乎没有任何限制，这些计算机可能被放在不同的机柜上，也可能被部署在不同的机房中，还可能在不同的城市中，对于大型的网站甚至可能分布在不同的国家。但是，无论空间上如何分布，一个标准的分布式系统应该具有以下几个主要特征：</p>\n<p><strong>透明性</strong></p>\n<p>系统资源被所有计算机共享。每台计算机的用户不仅可以使用本机的资源，还可以使用本分布式系统中其他计算机的资源。</p>\n<p><strong>同一性</strong></p>\n<p>系统中的若干台计算机可以互相协作来完成一个共同的任务，或者说一个程序可以分布在几台计算机上并行地运行。</p>\n<p><strong>通信性</strong></p>\n<p>系统中的计算机都可以通过通信来交换信息。</p>\n<h3>下一步</h3>\n<p>今天先了解下基本概念，热热身。整个系统的架构及流程留到下次一起奉上。下期再见！</p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89123\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89123votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89123\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"title": "用 Plumbum 开发 Python 命令行工具", "url": "http://python.jobbole.com/89132/", "url_object_id": "da80fb712b60f4406bdce4907bef760a", "create_date": "2019-06-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/05/bcc8c14d726eefb31b713beff135cf4b.png"], "praise_nums": 1, "comment_nums": 0, "fav_nums": 1, "tags": "实践项目,Plumbum", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://plumbum.readthedocs.io/en/latest/cli.html\">Tomer Filiba</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9604-1.html\">qhh0205</a>   </div><div id=\"article_content\">\n<blockquote><p><strong>摘要</strong>：本文翻译自 Python <a href=\"https://plumbum.readthedocs.io/en/latest/\">Plumbum</a> 开源库的官方文档 <a href=\"https://plumbum.readthedocs.io/en/latest/cli.html\">Plumbum CLI</a> 部分，主要介绍如何使用 <a href=\"https://plumbum.readthedocs.io/en/latest/cli.html\">Plumbum CLI</a> 工具包来开发 Python 命令行应用程序，这是一个非常 Pythonic、容易使用、功能强大的工具包，非常值得广大 Python 程序员掌握并使用。</p></blockquote>\n<p>轻松执行程序的另一方面是轻松编写 CLI 程序。Python 脚本一般使用 <code>optparse</code> 或者最新的 <code>argparse</code> 及其衍生品来开发命令行工具，但是所有这些表现力有限，而且非常不直观（甚至不够 Pythonic）。Plumbum 的 CLI 工具包提供了一个程序化的方法来构建命令行应用程序，不需要创建一个解析器对象，然后填充一系列“选项”，该 CLI 工具包使用内省机制将这些原语转义成 Pythonic 结构。</p>\n<p>总体来看，Plumbum CLI 应用程序是一个继承自 <code>plumbum.cli.Application</code> 的类。这些类定义了一个 <code>main()</code> 方法，并且可选地公开出方法和属性来作为命令行的选项。这些选项可能需要参数，而任何剩余的位置参数会根据 <code>main</code> 函数的声明来将其赋予 <code>main</code> 方法。一个简单的 CLI 应用程序看起来像如下这样：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d0dbe7dcf785600820\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfrom plumbum import cli\r\nclass MyApp(cli.Application):\r\n    verbose = cli.Flag([\"v\", \"verbose\"], help = \"If given, I will be very talkative\")\r\n    def main(self, filename):\r\n        print(\"I will now read {0}\".format(filename))\r\n        if self.verbose:\r\n            print(\"Yadda \" * 200)\r\nif __name__ == \"__main__\":\r\n    MyApp.run()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7dcf785600820-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7dcf785600820-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7dcf785600820-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7dcf785600820-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7dcf785600820-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7dcf785600820-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7dcf785600820-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7dcf785600820-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7dcf785600820-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7dcf785600820-1\"><span class=\"crayon-st\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">plumbum </span><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cli</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7dcf785600820-2\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyApp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Application</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7dcf785600820-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">verbose</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Flag</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"v\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"verbose\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">help</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"If given, I will be very talkative\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7dcf785600820-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">filename</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7dcf785600820-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"I will now read {0}\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">filename</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7dcf785600820-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">verbose</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7dcf785600820-7\"><span class=\"crayon-h\">            </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Yadda \"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">200</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7dcf785600820-8\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">__name__</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"__main__\"</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7dcf785600820-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">MyApp</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">run</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0024 seconds] -->\r\n<p>你可以运行该程序：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d0dbe7dd9251156770\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ python example.py foo\r\nI will now read foo\r\n$ python example.py --help\r\nexample.py v1.0\r\nUsage: example.py [SWITCHES] filename\r\nMeta-switches:\r\n    -h, --help                 Prints this help message and quits\r\n    --version                  Prints the program's version and quits\r\nSwitches:\r\n    -v, --verbose              If given, I will be very talkative</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7dd9251156770-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7dd9251156770-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7dd9251156770-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7dd9251156770-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7dd9251156770-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7dd9251156770-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7dd9251156770-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7dd9251156770-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7dd9251156770-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7dd9251156770-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7dd9251156770-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">python </span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">py </span><span class=\"crayon-i\">foo</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7dd9251156770-2\"><span class=\"crayon-i\">I</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">will </span><span class=\"crayon-e\">now </span><span class=\"crayon-e\">read </span><span class=\"crayon-i\">foo</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7dd9251156770-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">python </span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-k \">help</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7dd9251156770-4\"><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">py </span><span class=\"crayon-v\">v1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7dd9251156770-5\"><span class=\"crayon-v\">Usage</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">SWITCHES</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">filename</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7dd9251156770-6\"><span class=\"crayon-v\">Meta</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">switches</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7dd9251156770-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">h</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-k \">help</span><span class=\"crayon-h\">                 </span><span class=\"crayon-e\">Prints </span><span class=\"crayon-e\">this </span><span class=\"crayon-k \">help</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">message </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">quits</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7dd9251156770-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">version                  </span><span class=\"crayon-e\">Prints </span><span class=\"crayon-e\">the </span><span class=\"crayon-i\">program</span>'<span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">version </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">quits</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7dd9251156770-9\"><span class=\"crayon-v\">Switches</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7dd9251156770-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">v</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">verbose              </span><span class=\"crayon-st\">If</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">given</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">I</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">will </span><span class=\"crayon-e\">be </span><span class=\"crayon-e\">very </span><span class=\"crayon-v\">talkative</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0027 seconds] -->\r\n<p>到现在为止，你只看到了非常基本的使用。我们现在开始探索该库。</p>\n<p><em>新版本 1.6.1：</em> 你可以直接运行应用程序 <code>MyApp()</code>，不需要参数，也不需要调用 <code>.main()</code>。</p>\n<h1 id=\"toc_1\">应用程序</h1>\n<p><strong>Application</strong> 类是你的应用程序的“容器”，该“容器”由一个你需要实现的<code>main()</code>方法和任何数量公开选项函数和属性。你的应用程序的入口是类方法 <code>run</code>，该方法实例化你的类、解析参数、调用所有的选项函数，然后使用给的位置参数来调用<code>main()</code>函数。为了从命令行运行你的应用程序，你所要做的是：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d0dbe7dde087807863\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nif __name__ == \"__main__\":\r\n    MyApp.run()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7dde087807863-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7dde087807863-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7dde087807863-1\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">__name__</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"__main__\"</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7dde087807863-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">MyApp</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">run</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>除了 <code>run()</code> 和 <code>main()</code>，<code>Application</code> 类还公开了两个内置的选项函数：<code>help()</code> 和 <code>version()</code>，分别用于显示帮助和程序的版本。默认情况下，<code>--hep</code> 和 <code>-h</code> 会调用 <code>help()</code>，<code>--version</code> 和 <code>-v</code> 会调用 <code>version()</code>，这些函数被调用后会显示相应的信息然后退出（没有处理任何其他选项）。</p>\n<p>你可以通过定义类属性来自定义 <code>help()</code> 和 <code>version()</code> 显示的信息，比如 <code>PROGNAME</code>、 <code>VERSION</code> 和 <code>DESCRIPTION</code>。举例：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d0dbe7de2693684421\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass MyApp(cli.Application):\r\n    PROGNAME = \"Foobar\"\r\n    VERSION = \"7.3\"</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7de2693684421-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7de2693684421-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7de2693684421-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7de2693684421-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyApp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Application</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7de2693684421-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">PROGNAME</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Foobar\"</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7de2693684421-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">VERSION</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"7.3\"</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p></p>\n<h2 id=\"toc_2\">颜色</h2>\n<p><em>新版本 1.6</em></p>\n<p>该库也支持终端字符颜色控制。你可以直接将 <code>PROGNAME</code>, <code>VERSION</code> 和 <code>DESCRIPTION</code> 变为带颜色的字符串。如果你给 <code>PROGNAME</code> 设置了颜色，你会得到自定义的程序名字和颜色。使用方法字符串的颜色可以通过设置 <code>COLOR_USAGE</code> 来生效，不同选项组的颜色可以通过设置 <code>COLOR_GROUPS</code> 字典来生效。</p>\n<p>举例如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d0dbe7de6704489815\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass MyApp(cli.Application):\r\n    PROGNAME = colors.green\r\n    VERSION = colors.blue | \"1.0.2\"\r\n    COLOR_GROUPS = {\"Meta-switches\" : colors.bold &amp; colors.yellow}\r\n    opts =  cli.Flag(\"--ops\", help=colors.magenta | \"This is help\")</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7de6704489815-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7de6704489815-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7de6704489815-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7de6704489815-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7de6704489815-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7de6704489815-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyApp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Application</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7de6704489815-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">PROGNAME</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">colors</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">green</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7de6704489815-3\"><span class=\"crayon-e\">    </span><span class=\"crayon-v\">VERSION</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">colors</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">blue</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"1.0.2\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7de6704489815-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">COLOR_GROUPS</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">\"Meta-switches\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">colors</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">bold</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">colors</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">yellow</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7de6704489815-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">opts</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Flag</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"--ops\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">help</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">colors</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">magenta</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"This is help\"</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d0dbe7de9225103235\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSimpleColorCLI.py 1.0.2\r\nUsage:\r\n    SimpleColorCLI.py [SWITCHES]\r\nMeta-switches\r\n    -h, --help         Prints this help message and quits\r\n    --help-all         Print help messages of all subcommands and quit\r\n    -v, --version      Prints the program's version and quits\r\nSwitches\r\n    --ops              This is help</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7de9225103235-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7de9225103235-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7de9225103235-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7de9225103235-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7de9225103235-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7de9225103235-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7de9225103235-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7de9225103235-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7de9225103235-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7de9225103235-1\"><span class=\"crayon-v\">SimpleColorCLI</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.0.2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7de9225103235-2\"><span class=\"crayon-v\">Usage</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7de9225103235-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">SimpleColorCLI</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">SWITCHES</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7de9225103235-4\"><span class=\"crayon-v\">Meta</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">switches</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7de9225103235-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">h</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-k \">help</span><span class=\"crayon-h\">         </span><span class=\"crayon-e\">Prints </span><span class=\"crayon-e\">this </span><span class=\"crayon-k \">help</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">message </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">quits</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7de9225103235-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">--</span><span class=\"crayon-k \">help</span><span class=\"crayon-o\">-</span><span class=\"crayon-k \">all</span><span class=\"crayon-h\">         </span><span class=\"crayon-k \">Print</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">help</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">messages </span><span class=\"crayon-e\">of </span><span class=\"crayon-k \">all</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">subcommands </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">quit</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7de9225103235-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">v</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">version      </span><span class=\"crayon-e\">Prints </span><span class=\"crayon-e\">the </span><span class=\"crayon-i\">program</span>'<span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">version </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">quits</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7de9225103235-8\"><span class=\"crayon-v\">Switches</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7de9225103235-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">ops              </span><span class=\"crayon-e\">This </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">help</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0022 seconds] -->\r\n<p></p>\n<h1 id=\"toc_3\">选项函数</h1>\n<p><code>switch</code> 装饰器是该 CLI 开发工具包的“灵魂”，它会公开你的 CLI 应用程序的方法来作为 CLI 命令行选项，这些方法运行通过命令行来调用。我们测试下如下应用：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d0dbe7ded506779605\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass MyApp(cli.Application):\r\n    _allow_root = False       # provide a default\r\n    @cli.switch(\"--log-to-file\", str)\r\n    def log_to_file(self, filename):\r\n        \"\"\"Sets the file into which logs will be emitted\"\"\"\r\n        logger.addHandler(FileHandle(filename))\r\n    @cli.switch([\"-r\", \"--root\"])\r\n    def allow_as_root(self):\r\n        \"\"\"If given, allow running as root\"\"\"\r\n        self._allow_root = True\r\n    def main(self):\r\n        if os.geteuid() == 0 and not self._allow_root:\r\n            raise ValueError(\"cannot run as root\")</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7ded506779605-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7ded506779605-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7ded506779605-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7ded506779605-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7ded506779605-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7ded506779605-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7ded506779605-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7ded506779605-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7ded506779605-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7ded506779605-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7ded506779605-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7ded506779605-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7ded506779605-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7ded506779605-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyApp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Application</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7ded506779605-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">_allow_root</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">False</span><span class=\"crayon-h\">       </span><span class=\"crayon-c\"># provide a default</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7ded506779605-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">switch</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"--log-to-file\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">str</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7ded506779605-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">log_to_file</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">filename</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7ded506779605-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"\"\"Sets the file into which logs will be emitted\"\"\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7ded506779605-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">logger</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">addHandler</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">FileHandle</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">filename</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7ded506779605-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">switch</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"-r\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"--root\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7ded506779605-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">allow_as_root</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7ded506779605-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"\"\"If given, allow running as root\"\"\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7ded506779605-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_allow_root</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">True</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7ded506779605-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7ded506779605-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">os</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">geteuid</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_allow_root</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7ded506779605-13\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">raise</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">ValueError</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"cannot run as root\"</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0032 seconds] -->\r\n<p>当程序运行时，选项函数通过相应的参数被调用。比如，<code>$ ./myapp.py --log-to-file=/tmp/log</code> 将被转化成调用 <code>app.log_to_file(\"/tmp/log\")</code>。在选项函数被执行后，程序的控制权会被传递到 <code>main</code> 方法。</p>\n<blockquote><p><strong>注意</strong></p>\n<p>方法的文档字符串和参数名字会被用来渲染帮助信息，尽量保持你的代码 <a href=\"https://www.wikiwand.com/en/Don't_repeat_yourself\"><strong>DRY</strong></a>。</p>\n<p><code>autoswitch</code> 可以从函数名字中推断出选项的名称，举例如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d0dbe7df0715511079\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n@cli.autoswitch(str)\r\ndef log_to_file(self, filename):\r\n    pass</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7df0715511079-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7df0715511079-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7df0715511079-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7df0715511079-1\"><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">autoswitch</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">str</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7df0715511079-2\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">log_to_file</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">filename</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7df0715511079-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">pass</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>这会将选项函数和 <code>--log-to-file</code> 绑定。</p></blockquote>\n<h2 id=\"toc_4\">选项参数</h2>\n<p>如上面例子所示，选项函数可能没有参数（不包括 <code>self</code>）或者有一个参数。如果选项函数接受一个参数，必须指明该参数的<em>类型</em>。如果你不需要特殊的验证，只需传递 <code>str</code>，否则，您可能会传递任何类型（或实际上可调用的任何类型），该类型将接收一个字符串并将其转换为有意义的对象。如果转换是不可行的，那么会抛出 <code>TypeError</code> 或者 <code>ValueError</code> 异常。</p>\n<p>举例：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d0dbe7df4402546655\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass MyApp(cli.Application):\r\n    _port = 8080\r\n    @cli.switch([\"-p\"], int)\r\n    def server_port(self, port):\r\n        self._port = port\r\n    def main(self):\r\n        print(self._port)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7df4402546655-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7df4402546655-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7df4402546655-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7df4402546655-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7df4402546655-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7df4402546655-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7df4402546655-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7df4402546655-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyApp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Application</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7df4402546655-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">_port</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8080</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7df4402546655-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">switch</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"-p\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">int</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7df4402546655-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">server_port</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">port</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7df4402546655-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_port</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">port</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7df4402546655-6\"><span class=\"crayon-e\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7df4402546655-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_port</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0037 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d0dbe7df7396332004\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ./example.py -p 17\r\n17\r\n$ ./example.py -p foo\r\nArgument of -p expected to be &lt;type 'int'&gt;, not 'foo':\r\n    ValueError(\"invalid literal for int() with base 10: 'foo'\",)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7df7396332004-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7df7396332004-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7df7396332004-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7df7396332004-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7df7396332004-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7df7396332004-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7df7396332004-2\"><span class=\"crayon-cn\">17</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7df7396332004-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">foo</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7df7396332004-4\"><span class=\"crayon-e\">Argument </span><span class=\"crayon-v\">of</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">expected </span><span class=\"crayon-e\">to </span><span class=\"crayon-v\">be</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-k \">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'int'</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'foo'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7df7396332004-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">ValueError</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"invalid literal for int() with base 10: 'foo'\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p>工具包包含两个额外的“类型”（或者是是验证器）：<code>Range</code> 和 <code>Set</code>。<code>Range</code> 指定一个最小值和最大值，限定一个整数在该范围内（闭区间）。<code>Set</code> 指定一组允许的值，并且期望参数匹配这些值中的一个。示例如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d0dbe7dfb239552453\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass MyApp(cli.Application):\r\n    _port = 8080\r\n    _mode = \"TCP\"\r\n    @cli.switch(\"-p\", cli.Range(1024,65535))\r\n    def server_port(self, port):\r\n        self._port = port\r\n    @cli.switch(\"-m\", cli.Set(\"TCP\", \"UDP\", case_sensitive = False))\r\n    def server_mode(self, mode):\r\n        self._mode = mode\r\n    def main(self):\r\n        print(self._port, self._mode)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7dfb239552453-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7dfb239552453-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7dfb239552453-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7dfb239552453-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7dfb239552453-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7dfb239552453-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7dfb239552453-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7dfb239552453-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7dfb239552453-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7dfb239552453-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7dfb239552453-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7dfb239552453-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyApp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Application</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7dfb239552453-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">_port</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8080</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7dfb239552453-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">_mode</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"TCP\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7dfb239552453-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">switch</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"-p\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">Range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1024</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">65535</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7dfb239552453-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">server_port</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">port</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7dfb239552453-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_port</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">port</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7dfb239552453-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">switch</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"-m\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">Set</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"TCP\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"UDP\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">case_sensitive</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">False</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7dfb239552453-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">server_mode</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mode</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7dfb239552453-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_mode</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">mode</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7dfb239552453-10\"><span class=\"crayon-e\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7dfb239552453-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_port</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_mode</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0035 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d0dbe7dfe146836179\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ./example.py -p 17\r\nArgument of -p expected to be [1024..65535], not '17':\r\n    ValueError('Not in range [1024..65535]',)\r\n$ ./example.py -m foo\r\nArgument of -m expected to be Set('udp', 'tcp'), not 'foo':\r\n    ValueError(\"Expected one of ['UDP', 'TCP']\",)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7dfe146836179-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7dfe146836179-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7dfe146836179-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7dfe146836179-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7dfe146836179-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7dfe146836179-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7dfe146836179-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7dfe146836179-2\"><span class=\"crayon-e\">Argument </span><span class=\"crayon-v\">of</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">expected </span><span class=\"crayon-e\">to </span><span class=\"crayon-i\">be</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1024..65535</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'17'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7dfe146836179-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">ValueError</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Not in range [1024..65535]'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7dfe146836179-4\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">foo</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7dfe146836179-5\"><span class=\"crayon-e\">Argument </span><span class=\"crayon-v\">of</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">expected </span><span class=\"crayon-e\">to </span><span class=\"crayon-e\">be </span><span class=\"crayon-k \">Set</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'udp'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'tcp'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'foo'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7dfe146836179-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">ValueError</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Expected one of ['UDP', 'TCP']\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0022 seconds] -->\r\n<p></p>\n<blockquote><p><strong>注意</strong> 工具包中还有其他有用的验证器：<code>ExistingFile</code>（确保给定的参数是一个存在的文件），<code>ExistingDirectory</code>（确保给定的参数是一个存在的目录），<code>NonexistentPath</code>（确保给定的参数是一个不存在的路径）。所有这些将参数转换为<a href=\"https://plumbum.readthedocs.io/en/latest/paths.html#guide-paths\">本地路径</a>。</p></blockquote>\n<h2>可重复的选项</h2>\n<p>很多时候，你需要在同一个命令行中多次指定某个选项。比如，在 <code>gcc</code> 中，你可能使用 <code>-I</code> 参数来引入多个目录。默认情况下，选项只能指定一次，除非你给 <code>switch</code> 装饰器传递 <code>list = True</code> 参数。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d0dbe7e02116460561\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass MyApp(cli.Application):\r\n    _dirs = []\r\n    @cli.switch(\"-I\", str, list = True)\r\n    def include_dirs(self, dirs):\r\n        self._dirs = dirs\r\n    def main(self):\r\n        print(self._dirs)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e02116460561-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e02116460561-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e02116460561-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e02116460561-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e02116460561-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e02116460561-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e02116460561-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e02116460561-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyApp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Application</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e02116460561-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">_dirs</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e02116460561-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">switch</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"-I\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">str</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">list</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">True</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e02116460561-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">include_dirs</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dirs</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e02116460561-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_dirs</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">dirs</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e02116460561-6\"><span class=\"crayon-e\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e02116460561-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_dirs</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d0dbe7e06938202253\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ./example.py -I/foo/bar -I/usr/include\r\n['/foo/bar', '/usr/include']</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e06938202253-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e06938202253-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e06938202253-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">I</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">foo</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bar</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">I</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">include</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e06938202253-2\"><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'/foo/bar'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'/usr/include'</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p></p>\n<blockquote><p><strong>注意</strong> 选项函数只被调用一次，它的参数将会变成一个列表。</p></blockquote>\n<h2 id=\"toc_6\">强制的选项</h2>\n<p>如果某个选项是必须的，你可以给 <code>switch</code> 装饰器传递 <code>mandatory = True</code> 来实现。这样的话，如果用户不指定该选项，那么程序是无法运行的。</p>\n<h2 id=\"toc_7\">选项依赖</h2>\n<p>很多时候，一个选项的出现依赖另一个选项，比如，如果不给定 <code>-y</code> 选项，那么 <code>-x</code> 选项是无法给定的。这种限制可以通过给 <code>switch</code> 装饰器传递 <code>requires</code> 参数来实现，该参数是一个当前选项所依赖的选项名称列表。如果不指定某个选项所依赖的其他选项，那么用户是无法运行程序的。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d0dbe7e09460241422\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass MyApp(cli.Application):\r\n    @cli.switch(\"--log-to-file\", str)\r\n    def log_to_file(self, filename):\r\n        logger.addHandler(logging.FileHandler(filename))\r\n    @cli.switch(\"--verbose\", requires = [\"--log-to-file\"])\r\n    def verbose(self):\r\n        logger.setLevel(logging.DEBUG)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e09460241422-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e09460241422-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e09460241422-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e09460241422-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e09460241422-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e09460241422-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e09460241422-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e09460241422-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyApp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Application</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e09460241422-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">switch</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"--log-to-file\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">str</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e09460241422-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">log_to_file</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">filename</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e09460241422-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">logger</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">addHandler</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">logging</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">FileHandler</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">filename</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e09460241422-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">switch</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"--verbose\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">requires</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"--log-to-file\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e09460241422-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">verbose</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e09460241422-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">logger</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setLevel</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">logging</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">DEBUG</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0024 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d0dbe7e0d966384121\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ./example --verbose\r\nGiven --verbose, the following are missing ['log-to-file']</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e0d966384121-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e0d966384121-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e0d966384121-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">example</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">verbose</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e0d966384121-2\"><span class=\"crayon-v\">Given</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">verbose</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">following </span><span class=\"crayon-e\">are </span><span class=\"crayon-i\">missing</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'log-to-file'</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p></p>\n<blockquote><p><strong>警告</strong> 选项函数的调用顺序和命令行指定的选项的顺序是一致的。目前不支持在程序运行时计算选项函数调用的拓扑顺序，但是将来会改进。</p></blockquote>\n<h2 id=\"toc_8\">选项互斥</h2>\n<p>有些选项依赖其他选项，但是有些选项是和其他选项互斥的。比如，<code>--verbose</code> 和 <code>--terse</code> 同时存在是不合理的。为此，你可以给 <code>switch</code> 装饰器指定 <code>excludes</code> 列表来实现。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d0dbe7e10480962682\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass MyApp(cli.Application):\r\n    @cli.switch(\"--log-to-file\", str)\r\n    def log_to_file(self, filename):\r\n        logger.addHandler(logging.FileHandler(filename))\r\n    @cli.switch(\"--verbose\", requires = [\"--log-to-file\"], excludes = [\"--terse\"])\r\n    def verbose(self):\r\n        logger.setLevel(logging.DEBUG)\r\n    @cli.switch(\"--terse\", requires = [\"--log-to-file\"], excludes = [\"--verbose\"])\r\n    def terse(self):\r\n        logger.setLevel(logging.WARNING)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e10480962682-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e10480962682-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e10480962682-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e10480962682-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e10480962682-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e10480962682-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e10480962682-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e10480962682-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e10480962682-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e10480962682-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e10480962682-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyApp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Application</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e10480962682-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">switch</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"--log-to-file\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">str</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e10480962682-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">log_to_file</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">filename</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e10480962682-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">logger</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">addHandler</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">logging</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">FileHandler</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">filename</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e10480962682-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">switch</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"--verbose\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">requires</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"--log-to-file\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">excludes</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"--terse\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e10480962682-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">verbose</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e10480962682-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">logger</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setLevel</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">logging</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">DEBUG</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e10480962682-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">switch</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"--terse\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">requires</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"--log-to-file\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">excludes</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"--verbose\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e10480962682-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">terse</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e10480962682-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">logger</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setLevel</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">logging</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">WARNING</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0034 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d0dbe7e19613176170\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ./example --log-to-file=log.txt --verbose --terse\r\nGiven --verbose, the following are invalid ['--terse']</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e19613176170-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e19613176170-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e19613176170-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">example</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">log</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">to</span><span class=\"crayon-o\">-</span><span class=\"crayon-k \">file</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">log</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">txt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">verbose</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">terse</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e19613176170-2\"><span class=\"crayon-v\">Given</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">verbose</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">following </span><span class=\"crayon-e\">are </span><span class=\"crayon-i\">invalid</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'--terse'</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p></p>\n<h2 id=\"toc_9\">选项分组</h2>\n<p>如果你希望在帮助信息中将某些选项组合在一起，你可以给 <code>switch</code> 装饰器指定 <code>group = \"Group Name\"</code>, <code>Group Name</code> 可以是任意字符串。当显示帮助信息的时候，所有属于同一个组的选项会被聚合在一起。注意，分组不影响选项的处理，但是可以增强帮助信息的可读性。</p>\n<h1 id=\"toc_10\">选项属性</h1>\n<p>很多时候只需要将选项的参数存储到类的属性中，或者当某个属性给定后设置一个标志。为此，工具包提供了 <code>SwitchAttr</code>，这是一个<a href=\"https://docs.python.org/3/howto/descriptor.html\">数据描述符</a>，用来存储参数。 该工具包还提供了两个额外的 <code>SwitchAttr</code>:<code>Flag</code>（如果选项给定后，会给其赋予默认值）和 <code>CountOf</code> （某个选项出现的次数）。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d0dbe7e1e772609458\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass MyApp(cli.Application):\r\n    log_file = cli.SwitchAttr(\"--log-file\", str, default = None)\r\n    enable_logging = cli.Flag(\"--no-log\", default = True)\r\n    verbosity_level = cli.CountOf(\"-v\")\r\n    def main(self):\r\n        print(self.log_file, self.enable_logging, self.verbosity_level)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e1e772609458-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e1e772609458-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e1e772609458-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e1e772609458-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e1e772609458-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e1e772609458-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e1e772609458-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyApp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Application</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e1e772609458-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">log_file</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">SwitchAttr</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"--log-file\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">str</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">default</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">None</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e1e772609458-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">enable_logging</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Flag</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"--no-log\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">default</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">True</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e1e772609458-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">verbosity_level</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">CountOf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"-v\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e1e772609458-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e1e772609458-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">log_file</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">enable_logging</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">verbosity_level</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0024 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d0dbe7e21083752905\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ./example.py -v --log-file=log.txt -v --no-log -vvv\r\nlog.txt False 5</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e21083752905-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e21083752905-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e21083752905-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">v</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">log</span><span class=\"crayon-o\">-</span><span class=\"crayon-k \">file</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">log</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">txt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">v</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">no</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">log</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">vvv</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e21083752905-2\"><span class=\"crayon-v\">log</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">txt </span><span class=\"crayon-t\">False</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p></p>\n<h2 id=\"toc_11\">环境变量</h2>\n<p><em>新版本 1.6</em></p>\n<p>你可以使用 <code>envname</code> 参数将环境变量作为 <code>SwitchAttr</code> 的输入。举例如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d0dbe7e24045533694\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass MyApp(cli.Application):\r\n    log_file = cli.SwitchAttr(\"--log-file\", str, envname=\"MY_LOG_FILE\")\r\n    def main(self):\r\n        print(self.log_file)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e24045533694-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e24045533694-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e24045533694-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e24045533694-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e24045533694-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyApp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Application</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e24045533694-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">log_file</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">SwitchAttr</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"--log-file\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">str</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">envname</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"MY_LOG_FILE\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e24045533694-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e24045533694-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">log_file</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d0dbe7e28786127955\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ MY_LOG_FILE=this.log ./example.py\r\nthis.log</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e28786127955-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e28786127955-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e28786127955-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">MY_LOG_FILE</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">log</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e28786127955-2\"><span class=\"crayon-v\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">log</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>在命令行给定变量值会覆盖相同环境变量的值。</p>\n<h1 id=\"toc_12\">Main</h1>\n<p>一旦当所有命令行参数被处理后 ，<code>main()</code> 方法会获取程序的控制，并且可以有任意数量的位置参数，比如，在 <code>cp -r /foo /bar</code> 中, <code>/foo</code> 和 <code>/bar</code> 是位置参数。程序接受位置参数的数量依赖于 <code>main()</code> 函数的声明：如果 <code>main</code> 方法有 5 个参数，2 个是有默认值的，那么用户最少需要提供 3 个位置参数并且总数量不能多于 5 个。如果 <code>main</code> 方法的声明中使用的是可变参数（<code>*args</code>），那么位置参数的个数是没有限制的。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d0dbe7e2b182907475\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass MyApp(cli.Application):\r\n    def main(self, src, dst, mode = \"normal\"):\r\n        print(src, dst, mode)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e2b182907475-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e2b182907475-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e2b182907475-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e2b182907475-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyApp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Application</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e2b182907475-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">src</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dst</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mode</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"normal\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e2b182907475-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">src</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dst</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mode</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d0dbe7e2e880179124\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ./example.py /foo /bar\r\n/foo /bar normal\r\n$ ./example.py /foo /bar spam\r\n/foo /bar spam\r\n$ ./example.py /foo\r\nExpected at least 2 positional arguments, got ['/foo']\r\n$ ./example.py /foo /bar spam bacon\r\nExpected at most 3 positional arguments, got ['/foo', '/bar', 'spam', 'bacon']</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e2e880179124-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e2e880179124-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e2e880179124-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e2e880179124-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e2e880179124-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e2e880179124-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e2e880179124-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e2e880179124-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e2e880179124-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">foo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bar</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e2e880179124-2\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">foo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">bar </span><span class=\"crayon-i\">normal</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e2e880179124-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">foo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">bar </span><span class=\"crayon-v\">spam</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e2e880179124-4\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">foo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">bar </span><span class=\"crayon-i\">spam</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e2e880179124-5\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">foo</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e2e880179124-6\"><span class=\"crayon-e\">Expected </span><span class=\"crayon-e\">at </span><span class=\"crayon-i\">least</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">positional </span><span class=\"crayon-v\">arguments</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">got</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'/foo'</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e2e880179124-7\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">foo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">bar </span><span class=\"crayon-e\">spam </span><span class=\"crayon-e\">bacon</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e2e880179124-8\"><span class=\"crayon-e\">Expected </span><span class=\"crayon-e\">at </span><span class=\"crayon-i\">most</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">positional </span><span class=\"crayon-v\">arguments</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">got</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'/foo'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'/bar'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'spam'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'bacon'</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0029 seconds] -->\r\n<p></p>\n<blockquote><p><strong>注意</strong> 该方法的声明也用于生成帮助信息，例如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d0dbe7e32521218817\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nUsage:  [SWITCHES] src dst [mode='normal']</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e32521218817-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e32521218817-1\"><span class=\"crayon-v\">Usage</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">SWITCHES</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">src </span><span class=\"crayon-i\">dst</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">mode</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'normal'</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>\n</p></blockquote>\n<p>使用可变参数：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d0dbe7e35928074006\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass MyApp(cli.Application):\r\n    def main(self, src, dst, *eggs):\r\n        print(src, dst, eggs)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e35928074006-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e35928074006-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e35928074006-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e35928074006-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyApp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Application</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e35928074006-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">src</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dst</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">eggs</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e35928074006-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">src</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dst</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">eggs</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d0dbe7e38883735005\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ./example.py a b c d\r\na b ('c', 'd')\r\n$ ./example.py --help\r\nUsage:  [SWITCHES] src dst eggs...\r\nMeta-switches:\r\n    -h, --help                 Prints this help message and quits\r\n    -v, --version              Prints the program's version and quits</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e38883735005-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e38883735005-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e38883735005-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e38883735005-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e38883735005-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e38883735005-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e38883735005-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e38883735005-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">d</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e38883735005-2\"><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'c'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'d'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e38883735005-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-k \">help</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e38883735005-4\"><span class=\"crayon-v\">Usage</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">SWITCHES</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">src </span><span class=\"crayon-e\">dst </span><span class=\"crayon-v\">eggs</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e38883735005-5\"><span class=\"crayon-v\">Meta</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">switches</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e38883735005-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">h</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-k \">help</span><span class=\"crayon-h\">                 </span><span class=\"crayon-e\">Prints </span><span class=\"crayon-e\">this </span><span class=\"crayon-k \">help</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">message </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">quits</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e38883735005-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">v</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">version              </span><span class=\"crayon-e\">Prints </span><span class=\"crayon-e\">the </span><span class=\"crayon-i\">program</span>'<span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">version </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">quits</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0024 seconds] -->\r\n<p></p>\n<h2 id=\"toc_13\">位置验证</h2>\n<p><em>新版本 1.6</em></p>\n<p>你可以使用 <code>cli.positional</code> 装饰器提供的验证器来验证位置参数。只需在装饰器中传递与 <code>main</code> 函数中的相匹配的验证器即可。例如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d0dbe7e3c186582720\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass MyApp(cli.Application):\r\n    @cli.positional(cli.ExistingFile, cli.NonexistentPath)\r\n    def main(self, infile, *outfiles):\r\n        \"infile is a path, outfiles are a list of paths, proper errors are given\"</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e3c186582720-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e3c186582720-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e3c186582720-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e3c186582720-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e3c186582720-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyApp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Application</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e3c186582720-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">positional</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">ExistingFile</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">NonexistentPath</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e3c186582720-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">infile</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">outfiles</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e3c186582720-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"infile is a path, outfiles are a list of paths, proper errors are given\"</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>如果你的程序只在 Python 3 中运行，你可以使用注解来指定验证器，例如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d0dbe7e3f498349444\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass MyApp(cli.Application):\r\n    def main(self, infile : cli.ExistingFile, *outfiles : cli.NonexistentPath):\r\n    \"Identical to above MyApp\"</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e3f498349444-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e3f498349444-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e3f498349444-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e3f498349444-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyApp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Application</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e3f498349444-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">infile</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">ExistingFile</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">outfiles</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">NonexistentPath</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e3f498349444-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"Identical to above MyApp\"</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>如果 <code>positional</code> 装饰器存在，那么注解会被忽略。</p>\n<h1 id=\"toc_14\">子命令</h1>\n<p><em>新版本 1.1</em></p>\n<p>随着 CLI 应用程序的扩展，功能变的越来越多，一个通常的做法是将其逻辑分成多个子应用（或者子命令）。一个典型的例子是版本控制系统，比如 <a href=\"https://git-scm.com/\"><strong>git</strong></a>，<code>git</code> 是根命令，在这之下的子命令比如 <code>commit</code> 或者 <code>push</code> 是嵌套的。<code>git</code> 甚至支持命令别名，这运行用户自己创建一些子命令。Plumbum 写类似这样的程序是很轻松的。</p>\n<p>在我们开始了解代码之前，先强调两件事情：</p>\n<ul>\n<li>在 Plumbum 中，每个子命令都是一个完整的 <code>cli.Application</code> 应用，你可以单独执行它，或者从所谓的根命令中分离出来。当应用程序单独执行是，它的父属性是 <code>None</code>，当以子命令运行时，它的父属性指向父应用程序。同样，当父应用使用子命令执行时，它的内嵌命令被设置成内嵌应用。</li>\n<li>每个子命令只负责它自己的选项参数（直到下一个子命令）。这允许应用在内嵌应用调用之前来处理它自己的选项和位置参数。例如 <code>git --foo=bar spam push origin --tags</code>：根应用 <code>git</code> 负责选项 <code>--foo</code> 和位置选项 <code>spam</code> ，内嵌应用 <code>push</code> 负责在它之后的参数。从理论上讲，你可以将多个子应用程序嵌套到另一个应用程序中，但在实践中，通常嵌套层级只有一层。</li>\n</ul>\n<p>这是一个模仿版本控制系统的例子 <code>geet</code>。我们有一个根应用 <code>Geet</code> ，它有两个子命令 <code>GeetCommit</code> 和 <code>GeetPush</code>：这两个子命令通过 <code>subcommand</code> 装饰器来将其附加到根应用。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d0dbe7e43637182456\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass Geet(cli.Application):\r\n    \"\"\"The l33t version control\"\"\"\r\n    VERSION = \"1.7.2\"\r\n    def main(self, *args):\r\n        if args:\r\n            print(\"Unknown command {0!r}\".format(args[0]))\r\n            return 1   # error exit code\r\n        if not self.nested_command:           # will be ``None`` if no sub-command follows\r\n            print(\"No command given\")\r\n            return 1   # error exit code\r\n@Geet.subcommand(\"commit\")                    # attach 'geet commit'\r\nclass GeetCommit(cli.Application):\r\n    \"\"\"creates a new commit in the current branch\"\"\"\r\n    auto_add = cli.Flag(\"-a\", help = \"automatically add changed files\")\r\n    message = cli.SwitchAttr(\"-m\", str, mandatory = True, help = \"sets the commit message\")\r\n    def main(self):\r\n        print(\"doing the commit...\")\r\n@Geet.subcommand(\"push\")                      # attach 'geet push'\r\nclass GeetPush(cli.Application):\r\n    \"\"\"pushes the current local branch to the remote one\"\"\"\r\n    def main(self, remote, branch = None):\r\n        print(\"doing the push...\")\r\nif __name__ == \"__main__\":\r\n    Geet.run()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e43637182456-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e43637182456-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e43637182456-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e43637182456-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e43637182456-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e43637182456-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e43637182456-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e43637182456-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e43637182456-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e43637182456-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e43637182456-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e43637182456-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e43637182456-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e43637182456-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e43637182456-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e43637182456-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e43637182456-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e43637182456-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e43637182456-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e43637182456-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e43637182456-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e43637182456-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e43637182456-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e43637182456-24\">24</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e43637182456-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Geet</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Application</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e43637182456-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"\"\"The l33t version control\"\"\"</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e43637182456-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">VERSION</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"1.7.2\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e43637182456-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">args</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e43637182456-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">args</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e43637182456-6\"><span class=\"crayon-h\">            </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Unknown command {0!r}\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">args</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e43637182456-7\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">   </span><span class=\"crayon-c\"># error exit code</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e43637182456-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">nested_command</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">           </span><span class=\"crayon-c\"># will be ``None`` if no sub-command follows</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e43637182456-9\"><span class=\"crayon-h\">            </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"No command given\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e43637182456-10\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">   </span><span class=\"crayon-c\"># error exit code</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e43637182456-11\"><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">Geet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">subcommand</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"commit\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-c\"># attach 'geet commit'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e43637182456-12\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">GeetCommit</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Application</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e43637182456-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"\"\"creates a new commit in the current branch\"\"\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e43637182456-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">auto_add</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Flag</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"-a\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">help</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"automatically add changed files\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e43637182456-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">message</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">SwitchAttr</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"-m\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">str</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mandatory</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">True</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">help</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"sets the commit message\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e43637182456-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e43637182456-17\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"doing the commit...\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e43637182456-18\"><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">Geet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">subcommand</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"push\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                      </span><span class=\"crayon-c\"># attach 'geet push'</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e43637182456-19\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">GeetPush</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Application</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e43637182456-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"\"\"pushes the current local branch to the remote one\"\"\"</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e43637182456-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">remote</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">branch</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">None</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e43637182456-22\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"doing the push...\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e43637182456-23\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">__name__</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"__main__\"</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e43637182456-24\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">Geet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">run</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0061 seconds] -->\r\n<p></p>\n<blockquote><p><strong>注意</strong></p>\n<ul>\n<li>由于 <code>GeetCommit</code> 也是一个 <code>cli.Application</code>，因此你可以直接调用 <code>GeetCommit.run()</code> （这在应用的上下文是合理的）</li>\n<li>你也可以不用装饰器而使用 <code>subcommand</code> 方法来附加子命令：<code>Geet.subcommand(\"push\", GeetPush)</code></li>\n</ul>\n</blockquote>\n<p>以下是运行该应用程序的示例：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d0dbe7e47962903603\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ python geet.py --help\r\ngeet v1.7.2\r\nThe l33t version control\r\nUsage: geet.py [SWITCHES] [SUBCOMMAND [SWITCHES]] args...\r\nMeta-switches:\r\n    -h, --help                 Prints this help message and quits\r\n    -v, --version              Prints the program's version and quits\r\nSubcommands:\r\n    commit                     creates a new commit in the current branch; see\r\n                               'geet commit --help' for more info\r\n    push                       pushes the current local branch to the remote\r\n                               one; see 'geet push --help' for more info\r\n$ python geet.py commit --help\r\ngeet commit v1.7.2\r\ncreates a new commit in the current branch\r\nUsage: geet commit [SWITCHES]\r\nMeta-switches:\r\n    -h, --help                 Prints this help message and quits\r\n    -v, --version              Prints the program's version and quits\r\nSwitches:\r\n    -a                         automatically add changed files\r\n    -m VALUE:str               sets the commit message; required\r\n$ python geet.py commit -m \"foo\"\r\ndoing the commit...</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e47962903603-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e47962903603-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e47962903603-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e47962903603-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e47962903603-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e47962903603-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e47962903603-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e47962903603-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e47962903603-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e47962903603-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e47962903603-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e47962903603-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e47962903603-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e47962903603-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e47962903603-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e47962903603-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e47962903603-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e47962903603-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e47962903603-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e47962903603-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e47962903603-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e47962903603-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e47962903603-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e47962903603-24\">24</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e47962903603-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">python </span><span class=\"crayon-v\">geet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-k \">help</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e47962903603-2\"><span class=\"crayon-e\">geet </span><span class=\"crayon-v\">v1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">7.2</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e47962903603-3\"><span class=\"crayon-e\">The </span><span class=\"crayon-e\">l33t </span><span class=\"crayon-e\">version </span><span class=\"crayon-e\">control</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e47962903603-4\"><span class=\"crayon-v\">Usage</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">geet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">SWITCHES</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-i\">SUBCOMMAND</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">SWITCHES</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">args</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e47962903603-5\"><span class=\"crayon-v\">Meta</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">switches</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e47962903603-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">h</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-k \">help</span><span class=\"crayon-h\">                 </span><span class=\"crayon-e\">Prints </span><span class=\"crayon-e\">this </span><span class=\"crayon-k \">help</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">message </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">quits</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e47962903603-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">v</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">version              </span><span class=\"crayon-e\">Prints </span><span class=\"crayon-e\">the </span><span class=\"crayon-i\">program</span><span class=\"crayon-s\">'s version and quits</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e47962903603-8\"><span class=\"crayon-s\">Subcommands:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e47962903603-9\"><span class=\"crayon-s\">    commit                     creates a new commit in the current branch; see</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e47962903603-10\"><span class=\"crayon-s\">                               '</span><span class=\"crayon-e\">geet </span><span class=\"crayon-v\">commit</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-k \">help</span><span class=\"crayon-s\">' for more info</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e47962903603-11\"><span class=\"crayon-s\">    push                       pushes the current local branch to the remote</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e47962903603-12\"><span class=\"crayon-s\">                               one; see '</span><span class=\"crayon-e\">geet </span><span class=\"crayon-v\">push</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-k \">help</span><span class=\"crayon-s\">' for more info</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e47962903603-13\"><span class=\"crayon-s\">$ python geet.py commit --help</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e47962903603-14\"><span class=\"crayon-s\">geet commit v1.7.2</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e47962903603-15\"><span class=\"crayon-s\">creates a new commit in the current branch</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e47962903603-16\"><span class=\"crayon-s\">Usage: geet commit [SWITCHES]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e47962903603-17\"><span class=\"crayon-s\">Meta-switches:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e47962903603-18\"><span class=\"crayon-s\">    -h, --help                 Prints this help message and quits</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e47962903603-19\"><span class=\"crayon-s\">    -v, --version              Prints the program'</span><span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">version </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">quits</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e47962903603-20\"><span class=\"crayon-v\">Switches</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e47962903603-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\">                         </span><span class=\"crayon-e\">automatically </span><span class=\"crayon-e\">add </span><span class=\"crayon-e\">changed </span><span class=\"crayon-v\">files</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e47962903603-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">VALUE</span><span class=\"crayon-o\">:</span><span class=\"crayon-k \">str</span><span class=\"crayon-h\">               </span><span class=\"crayon-k \">sets</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">commit </span><span class=\"crayon-v\">message</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">required</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e47962903603-23\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">python </span><span class=\"crayon-v\">geet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">py </span><span class=\"crayon-v\">commit</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"foo\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e47962903603-24\"><span class=\"crayon-e\">doing </span><span class=\"crayon-e\">the </span><span class=\"crayon-v\">commit</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0043 seconds] -->\r\n<p></p>\n<h1 id=\"toc_15\">配置解析器</h1>\n<p>应用程序的另一个常见的功能是配置文件解析器，解析后台 INI 配置文件：<code>Config</code> （或者 <code>ConfigINI</code>）。使用示例：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d0dbe7e4c689839128\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfrom plumbum import cli\r\nwith cli.Config('~/.myapp_rc') as conf:\r\n    one = conf.get('one', '1')\r\n    two = conf.get('two', '2')</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e4c689839128-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e4c689839128-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e4c689839128-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e4c689839128-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e4c689839128-1\"><span class=\"crayon-st\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">plumbum </span><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cli</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e4c689839128-2\"><span class=\"crayon-st\">with</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Config</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'~/.myapp_rc'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">conf</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e4c689839128-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">one</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">conf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'one'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'1'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e4c689839128-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">two</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">conf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'two'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2'</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>如果配置文件不存在，那么将会以当前的 <code>key</code> 和默认的 <code>value</code> 来创建一个配置文件，在调用 <code>.get</code> 方法时会得到默认值，当上下文管理器存在时，文件会被创建。如果配置文件存在，那么该文件将会被读取并且没有任何改变。你也可以使用 <code>[]</code> 语法来强制设置一个值或者当变量不存在时获取到一个 <code>ValueError</code>。如果你想避免上下文管理器，你也可以使用 <code>.read</code> 和 <code>.write</code>。</p>\n<p>ini 解析器默认使用 <code>[DEFAULT]</code> 段，就像 Python 的 ConfigParser。如果你想使用一个不同的段，只需要在 key 中通过 <code>.</code> 将段和标题分隔开。比如 <code>conf['section.item']</code> 会将 <code>item</code> 放置在 <code>[section]</code> 下。所有存储在 <code>ConfigINI</code> 中的条目会被转化成 <code>str</code>，<code>str</code> 是经常返回的。</p>\n<h1 id=\"toc_16\">终端实用程序</h1>\n<p>在 <code>plumbum.cli.terminal</code> 中有多个终端实用程序，用来帮助制作终端应用程序。</p>\n<p><code>get_terminal_size(default=(80,25))</code> 允许跨平台访问终端屏幕大小，返回值是一个元组 <code>(width, height)</code>。还有几个方法可以用来询问用户输入，比如 <code>readline</code>, <code>ask</code>, <code>choose</code> 和 <code>prompt</code> 都是可用的。</p>\n<p><code>Progress(iterator)</code> 可以使你快速地从迭代器来创建一个进度条。简单地打包一个 slow 迭代器并迭代就会生成一个不错的基于用户屏幕宽度的文本进度条，同时会显示剩余时间。如果你想给 fast 迭代器创建一个进度条，并且在循环中包含代码，那么请使用 <code>Progress.wrap</code> 或者 <code>Progress.range</code>。例如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d0dbe7e51459974479\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfor i in Progress.range(10):\r\n    time.sleep(1)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e51459974479-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4d0dbe7e51459974479-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e51459974479-1\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Progress</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4d0dbe7e51459974479-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">time</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sleep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>如果在终端中有其他输出，但是仍然需要一个进度条，请传递 <code>has_output=True</code> 参数来禁止进度条清除掉历史输出。</p>\n<p>在 <code>plumbum.cli.image</code> 中提供了一个命令行绘图器（<code>Image</code>）。它可以绘制一个类似 PIL 的图像：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4d0dbe7e54408819241\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nImage().show_pil(im)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4d0dbe7e54408819241-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4d0dbe7e54408819241-1\"><span class=\"crayon-e\">Image</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">show_pil</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">im</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>Image 构造函数接受一个可选的 size 参数（如果是 None，那么默认是当前终端大小）和一个字符比例，该比例来自当前字符的高度和宽度的度量，默认值是 2.45。如果设置为 None，ratio 将会被忽略，图像不再被限制成比例缩放。要直接绘制一个图像，<code>show</code> 需要一个文件名和一对参数。<code>show_pil</code> 和 <code>show_pil_double</code> 方法直接接受一个 PIL-like 对象。为了从命令行绘制图像，该模块可以直接被运行：<code>python -m plumbum.cli.image myimage.png</code>。</p>\n<p>要获取帮助列表和更多的信息请参见 <a href=\"https://plumbum.readthedocs.io/en/latest/api/cli.html#api-cli\"><strong>api docs</strong></a>。</p>\n<h1 id=\"toc_17\">请参阅</h1>\n<ul>\n<li><a href=\"https://github.com/tomerfiliba/plumbum/blob/master/examples/filecopy.py\">filecopy.py</a> 示例</li>\n<li><a href=\"https://github.com/tomerfiliba/plumbum/blob/master/examples/geet.py\">geet.py</a> – 一个可运行的使用子命令的示例</li>\n<li><a href=\"http://rpyc.readthedocs.io/en/latest/\">RPyC</a> 已经将基于 bash 的编译脚本换成了 Plumbum CLI。这是多么<a href=\"https://github.com/tomerfiliba/rpyc/blob/c457a28d689df7605838334a437c6b35f9a94618/build.py\">简短和具有可读性</a></li>\n<li>一篇<a href=\"http://tomerfiliba.com/blog/Plumbum/\">博客</a>，讲述 CLI 模块的理论</li>\n</ul>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89132\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89132votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89132\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"title": "手把手教你写网络爬虫（6）：分布式爬虫", "url": "http://python.jobbole.com/89137/", "url_object_id": "c6cf9dca74918cb90f6351c7f155c6a5", "create_date": "2019-06-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/05/7d334a17c5a68693bdf337458bd8fe1e.jpg"], "praise_nums": 1, "comment_nums": 0, "fav_nums": 5, "tags": "实践项目,爬虫", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/tuohai666/p/8939637.html\">拓海</a>   </div><div id=\"cnblogs_post_body\">\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/fda0befc7df897e15c31f9e9ee9a6cf4.jpg\" alt=\"\"></p>\n<p>下面是一个超级计算机的排行榜，如果我们能拥有其中任意一个，那么我们就不需要搞什么分布式系统。可是我们买不起，即使买得起，也交不起电费，所以我们只好费脑子搞分布式。</p>\n<table cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td valign=\"top\" width=\"47\">Rank</td>\n<td valign=\"top\" width=\"122\">System</td>\n<td valign=\"top\" width=\"115\">Cores</td>\n<td valign=\"top\" width=\"93\">Rmax</td>\n<td valign=\"top\" width=\"93\">Rpeak</td>\n<td valign=\"top\" width=\"84\">Power (kW)</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"47\"><strong>1</strong></td>\n<td valign=\"top\" width=\"122\"><strong><a href=\"https://www.top500.org/system/177999\">Tianhe-2</a>  </strong>China</td>\n<td valign=\"top\" width=\"115\">3,120,000</td>\n<td valign=\"top\" width=\"93\">33,862.7</td>\n<td valign=\"top\" width=\"93\">54,902.4</td>\n<td valign=\"top\" width=\"84\">17,808</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"47\"><strong>2</strong></td>\n<td valign=\"top\" width=\"122\"><strong><a href=\"https://www.top500.org/system/177975\">Titan</a>  </strong>US</td>\n<td valign=\"top\" width=\"115\">560,640</td>\n<td valign=\"top\" width=\"93\">17,590.0</td>\n<td valign=\"top\" width=\"93\">27,112.5</td>\n<td valign=\"top\" width=\"84\">8,209</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"47\"><strong>3</strong></td>\n<td valign=\"top\" width=\"122\"><strong><a href=\"https://www.top500.org/system/177556\">Sequoia</a>  </strong>US</td>\n<td valign=\"top\" width=\"115\">1,572,864</td>\n<td valign=\"top\" width=\"93\">17,173.2</td>\n<td valign=\"top\" width=\"93\">20,132.7</td>\n<td valign=\"top\" width=\"84\">7,890</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"47\"><strong>4</strong></td>\n<td valign=\"top\" width=\"122\"><a href=\"https://www.top500.org/system/177232\">K </a>  Japan</td>\n<td valign=\"top\" width=\"115\">705,024</td>\n<td valign=\"top\" width=\"93\">10,510.0</td>\n<td valign=\"top\" width=\"93\">11,280.4</td>\n<td valign=\"top\" width=\"84\">12,660</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"47\"><strong>5</strong></td>\n<td valign=\"top\" width=\"122\"><strong><a href=\"https://www.top500.org/system/177718\">Mira</a>  </strong>US</td>\n<td valign=\"top\" width=\"115\">786,432</td>\n<td valign=\"top\" width=\"93\">8,586.6</td>\n<td valign=\"top\" width=\"93\">10,066.3</td>\n<td valign=\"top\" width=\"84\">3,945</td>\n</tr>\n</tbody>\n</table>\n<p>分布式的本质就如上期提到的一个概念：<em>分布式系统是若干独立计算机的集合，这些计算机对于用户来说就像是单个相关系统。</em>这就是在说，把廉价的计算机堆到一起，通过程序控制，使其整体用起来像个高性能计算机，目的就是节约成本。</p>\n<p>对于分布式爬虫系统来说，假设1台机器能10天爬完一个任务，如果部署10台机器，那么1天就会完成这个任务。这样就用可以接受的成本，让系统的效率提高了十倍。之前介绍的单机架构是达不到这种效果的，是时候介绍新的架构了！</p>\n<h1>架构概述</h1>\n<p>与第二期介绍的通用爬虫架构不同，下面是一个聚焦爬虫的架构图，与前者相比，它不仅要保存网页，还要提取出网页中的指定内容。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/d7574e8081ce57c5df2dc7b59e0ff21b.jpg\" alt=\"\"></p>\n<p><strong>Crawler_core  </strong>从任务队列获取爬虫任务，请求网页并将其存储到Mongodb，同时解析出网页中的URLs并缓存到Redis。最后通知Common-clean-platform抽取网页的指定字段。</p>\n<p><strong>Common-clean-platform  </strong>收到Crawler_core的通知后，从Mongodb中取出网页，根据配置进行数据抽取，形成结构化的数据，保存到Mongodb。</p>\n<p><strong>Scheduler_manager</strong>  负责任务调度（如启停），状态控制（如爬取数量），redis资源清理等。</p>\n<p><strong>Resource_manager</strong>  封装Mysql、Mongodb、Redis接口。Mysql存储任务基本信息、配置文件、任务实时状态等。Mongodb存储网页、结构化数据。Redis缓存队列、集合等数据结构。</p>\n<p><strong>Proxy</strong>  代理服务器。建立网络爬虫的第一原则是：所有信息都可以伪造。你可以用非本人的邮箱发送邮件，或者通过命令行自动化鼠标的行为。但是有一件事情是不能作假的，那就是你的IP地址。如果你在爬取的过程中不想被人发现，或者不想IP被封杀，那么就需要使用代理。</p>\n<p>笔者以前看过一个电影叫《Who Am I – No System Is Safe》，剧中的黑客老大“Who Am I”就用代理来隐藏自己，躲避FBI和其他黑客组织的追踪。</p>\n<p><img src=\"https://images2018.cnblogs.com/blog/1368640/201804/1368640-20180425081303373-1240931039.jpg\" alt=\"\"></p>\n<p>不过最终他还是被抓了，看来即使用了炫酷的技术，也不是绝对安全的。</p>\n<p>如果你也想体验一下匿名访问网络，可以试试Tor代理服务器。洋葱路由（The Onion Router）网络，常用缩写为Tor，是一种IP 地址匿名手段。由网络志愿者服务器构建的洋葱路由器网络，通过不同服务器构成多个层（就像洋葱）把客户端包在最里面。数据进入网络之前会被加密，因此任何服务器都不能偷取通信数据。另外，虽然每一个服务器的入站和出站通信都可以被查到，但是要想查出通信的真正起点和终点，必须知道整个通信链路上所有服务器的入站和出站通信细节，而这基本是不可能实现的。</p>\n<p>Tor 是人权工作者和政治避难人员与记者通信的常用手段，得到了美国政府的大力支持。当然，它经常也被用于非法活动，所以也是政府盯防的目标（虽然目前盯防得并不是很成功）。</p>\n<h1>流程控制 – 任务</h1>\n<p>Scheduler_manager定时读取Mysql中的任务信息，根据任务的周期等配置进行调度，下面是一个最基本的任务启停流程。</p>\n<p><img src=\"https://images2018.cnblogs.com/blog/1368640/201804/1368640-20180425081353710-110143442.jpg\" alt=\"\"></p>\n<ol>\n<li>当一个任务可以开始时，Scheduler_manager会将其基本信息(包括task_id，种子url，启动时间等)插入Reids的任务队列中。如果任务结束，就从队列中删除。</li>\n<li>每个Crawler_core实例定时读取Redis任务队列中的任务，插入到本地的内存任务队列中。</li>\n<li>相同的任务可以存在于不同的Crawler_core实例中，一个Crawler_core实例中也可以有相同的任务。</li>\n<li>Crawler_core的抓取线程从内存队列中获得可执行的任务，依次抓取和解析。</li>\n</ol>\n<h1>流程控制 – 数据</h1>\n<p>现在每个Crawler_core实例都有了待处理的任务，接下来就要对每个任务的url进行处理了。继续使用Redis作为公共缓存来存放URLs，多个Crawler_core实例并行存取todo集合。</p>\n<p><img src=\"https://images2018.cnblogs.com/blog/1368640/201804/1368640-20180425081436514-731777584.jpg\" alt=\"\"></p>\n<ol>\n<li><strong>Todo</strong><strong>集合</strong>  Crawler_core从集合中取出url进行处理，并将解析得到的url添加到todo集合中。</li>\n<li><strong>Doing</strong><strong>集合</strong>  Crawler_core从todo中取出url，都同时保存到doing中，url处理完成时被从doing中删除。主要用于恢复数据。</li>\n<li><strong>Parser todo</strong><strong>队列</strong>  Crawler_core将已经保存到mongodb的页面的url发送到parser todo队列，Parser读取数据后进行解析。</li>\n<li><strong>Filter todo</strong><strong>队列</strong>  Parser将已经保存到mongodb的解析结果的url发送到filter todo队列，Filter读取数据后进行清洗。</li>\n</ol>\n<h1>流程控制 – 状态</h1>\n<p><img src=\"https://images2018.cnblogs.com/blog/1368640/201804/1368640-20180425081454157-591158989.jpg\" alt=\"\"></p>\n<p><strong>蓝色箭头</strong>  业务模块实时更新任务状态到Redis，StateObserver读取到Redis状态后，更新到mysql。</p>\n<p><strong>红色箭头</strong>  ClearObserver定时读取Mysql状态，若任务完成或中止，则清除任务所有的Redis key。</p>\n<p>Redis中的任务信息如下表所示：</p>\n<table style=\"height: 744px\" width=\"940\" cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td colspan=\"3\" valign=\"top\"><strong>taskId:flag:crawler:info</strong></td>\n</tr>\n<tr>\n<td valign=\"top\">F<strong>iled</strong></td>\n<td valign=\"top\"><strong>value</strong></td>\n<td valign=\"top\"><strong>说明</strong></td>\n</tr>\n<tr>\n<td valign=\"top\"><strong>totalCnt</strong></td>\n<td valign=\"top\">10000</td>\n<td valign=\"top\">抓取的url总数：抓取完成，不管成功失败，都加1</td>\n</tr>\n<tr>\n<td valign=\"top\"><strong>failCnt</strong></td>\n<td valign=\"top\">0</td>\n<td valign=\"top\">抓取的url失败数：抓取失败，加1</td>\n</tr>\n<tr>\n<td valign=\"top\"><strong>switch</strong></td>\n<td valign=\"top\">1</td>\n<td valign=\"top\">任务状态：0：停止，1：启动，2：暂停，3：暂停启动</td>\n</tr>\n<tr>\n<td valign=\"top\"><strong>priority</strong></td>\n<td valign=\"top\">1</td>\n<td valign=\"top\">任务优先级</td>\n</tr>\n<tr>\n<td valign=\"top\"><strong>retryCnt</strong></td>\n<td valign=\"top\">0</td>\n<td valign=\"top\">重试次数</td>\n</tr>\n<tr>\n<td valign=\"top\"><strong>status</strong></td>\n<td valign=\"top\">0</td>\n<td valign=\"top\">任务执行状态：1：进行中，2：完成</td>\n</tr>\n<tr>\n<td valign=\"top\"><strong>Ref</strong></td>\n<td valign=\"top\">0</td>\n<td valign=\"top\">url引用数：每消费一个url，减1；生成一个url，加1。等于0则任务完成</td>\n</tr>\n<tr>\n<td valign=\"top\"><strong>maxThreadCnt</strong></td>\n<td valign=\"top\">100</td>\n<td valign=\"top\">任务的最大线程数</td>\n</tr>\n<tr>\n<td valign=\"top\"><strong>remainThreadCnt</strong></td>\n<td valign=\"top\">10</td>\n<td valign=\"top\">剩余可用线程数</td>\n</tr>\n<tr>\n<td valign=\"top\"><strong>lastFetchTime</strong></td>\n<td valign=\"top\">1496404451532</td>\n<td valign=\"top\">上一次抓取时间</td>\n</tr>\n</tbody>\n</table>\n<table cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td colspan=\"3\" valign=\"top\">\n<p style=\"text-align: center\"><strong>taskId:flag:parser:info</strong></p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"113\">F<strong>iled</strong></td>\n<td valign=\"top\" width=\"104\"><strong>value</strong></td>\n<td valign=\"top\" width=\"337\"><strong>说明</strong></td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"113\"><strong>totalCnt</strong></td>\n<td valign=\"top\" width=\"104\">10000</td>\n<td valign=\"top\" width=\"337\">解析总数：解析完成，不管成功失败，都加1</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"113\"><strong>failCnt</strong></td>\n<td valign=\"top\" width=\"104\">0</td>\n<td valign=\"top\" width=\"337\">解析失败数：解析失败，加1</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"113\"><strong>crawlerStatus</strong></td>\n<td valign=\"top\" width=\"104\">0</td>\n<td valign=\"top\" width=\"337\">爬取状态：0：进行中，2：完成</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"113\"><strong>ref</strong></td>\n<td valign=\"top\" width=\"104\">10</td>\n<td valign=\"top\" width=\"337\">url引用数：crawler每保存一个网页，加1；parser每解析完成一个网页，减1。等于0不说明任务完成。若crawlerStatus等于2，ref等于0，则任务完成。</td>\n</tr>\n</tbody>\n</table>\n<table cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td colspan=\"3\" valign=\"top\">\n<p style=\"text-align: center\"><strong>taskId:flag:filter:info</strong></p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"113\">F<strong>iled</strong></td>\n<td valign=\"top\" width=\"104\"><strong>value</strong></td>\n<td valign=\"top\" width=\"337\"><strong>说明</strong></td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"113\"><strong>totalCnt</strong></td>\n<td valign=\"top\" width=\"104\">10000</td>\n<td valign=\"top\" width=\"337\">清洗总数：清洗完成，不管成功失败，都加1</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"113\"><strong>failCnt</strong></td>\n<td valign=\"top\" width=\"104\">0</td>\n<td valign=\"top\" width=\"337\">清洗失败数：清洗失败，加1</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"113\"><strong>crawlerStatus</strong></td>\n<td valign=\"top\" width=\"104\">0</td>\n<td valign=\"top\" width=\"337\">解析状态：0：进行中，2：完成</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"113\"><strong>ref</strong></td>\n<td valign=\"top\" width=\"104\">10</td>\n<td valign=\"top\" width=\"337\">url引用数：parser每保存一条数据，加1；filter每清洗完成一条数据，减1。等于0不说明任务完成。若parserStatus等于2，ref等于0，则任务完成。</td>\n</tr>\n</tbody>\n</table>\n<h1>流程控制 – failover</h1>\n<p>如果一个Crawler_core的机器挂掉了，就会开始数据恢复程序，把这台机器所有未完成的任务恢复到公共缓存中。</p>\n<p><img src=\"https://images2018.cnblogs.com/blog/1368640/201804/1368640-20180425081515365-856056424.jpg\" alt=\"\"></p>\n<ol>\n<li>监控到192.168.0.1心跳停止。</li>\n<li>Master遍历正在运行的任务: task_jdjr:1489050240345等。</li>\n<li>得到doing和todo集合：\n<ol>\n<li>task_jdjr:1489050240345:crawler:doing: 192.168.0.1</li>\n<li>task_jdjr:1489050240345:crawler:todo</li>\n</ol>\n</li>\n<li>将doing中的数据全部移动到todo中。</li>\n</ol>\n<h1>下一步</h1>\n<p>今天对架构和流程进行了一个概要的介绍，细节问题以后会慢慢说。下期我们就先聊聊URL去重那些事儿。</p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89137\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89137votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89137\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 5 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"title": "手把手教你写网络爬虫（7）：URL去重", "url": "http://python.jobbole.com/89140/", "url_object_id": "0393183126b85e4c1d582f196d94c2e3", "create_date": "2019-06-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/05/54dd234f4e132436240c22b5c0b1f7db.jpg"], "praise_nums": 1, "comment_nums": 0, "fav_nums": 4, "tags": "实践项目,爬虫", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/tuohai666/p/8949393.html\">拓海</a>   </div><p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/05/54dd234f4e132436240c22b5c0b1f7db.jpg\"><img class=\"aligncenter size-full wp-image-89145\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/54dd234f4e132436240c22b5c0b1f7db.jpg\" alt=\"Yosemite National Park, California\"></a></p>\n<p>本期我们来聊聊URL去重那些事儿。以前我们曾使用Python的字典来保存抓取过的URL，目的是将重复抓取的URL去除，避免多次抓取同一网页。爬虫会将待抓取的URL放在todo队列中，从抓取到的网页中提取到新的URL，在它们被放入队列之前，首先要确定这些新的URL是否被抓取过，如果之前已经抓取过了，就不再放入队列。</p>\n<p>有别于单机系统，在分布式系统中，这些URL应该存放在公共缓存中，才能让多个爬虫实例共享，我们继续使用Redis缓存这些数据。URL既可以存储在Redis的Set数据结构中，也可以将URL作为Key存储为Redis的String类型。至于这两种方案各有什么优缺点，就留给读者自己去思考了。</p>\n<h1>直接存储URL</h1>\n<p>将URL以字符串的形式直接存储到内存中。保守估计一下URL的平均长度是100字节，那么1亿个URL所占的内存是: 100000000 * 0.0001MB = 10000MB，约等于10G。这也不是不能用，占用的空间再大都能通过扩容来解决。</p>\n<p>问题是，如果一个服务器存不下这么多URL该怎么办呢？其实也简单，明确每台服务器的分工，也就是说得到一个URL就知道要交给哪台服务器存储，每台服务器只存储一类URL，比较简单的实现方式就是对URL先哈希再取模。虽然能用，但还是有很大优化空间的。</p>\n<h1>存储消息摘要</h1>\n<p>MD5是一个消息摘要算法，它的用途很广泛，我们这里用它来压缩URL。</p>\n<p>消息摘要算法的特点：</p>\n<ol>\n<li>无论输入的消息有多长，计算出来的消息摘要的长度总是固定的。</li>\n<li>只要输入的消息不同，对其进行摘要以后产生的摘要消息也必不相同；但相同的输入必会产生相同的输出。</li>\n<li>消息摘要是单向、不可逆的。只能进行正向的信息摘要，而无法从摘要中恢复出任何的原始消息。</li>\n</ol>\n<p>以上特点说明我们可以通过存储URL的MD5来实现去重功能，因为不同的URL，MD5不同，相同的URL，MD5相同嘛。</p>\n<p>以前我们要存的URL是这样的：<a href=\"http://news.baidu.com/ns?ct=1&amp;rn=20&amp;ie=utf-8&amp;bs=%E4%BA%AC%E4%B8%9C%E9%87%91%E8%9E%8D&amp;rsv_bp=1&amp;sr=0&amp;cl=2&amp;f=8&amp;prevct=no&amp;tn=news&amp;word=%E4%BA%AC%E4%B8%9C%E9%87%91%E8%9E%8D&amp;rsv_sug3=1&amp;rsv_sug4=6&amp;rsv_sug1=1&amp;rsv_sug=1\">http://news.baidu.com/ns?ct=1&amp;rn=20&amp;ie=utf-8&amp;bs=%E4%BA%AC%E4%B8%9C%E9%87%91%E8%9E%8D&amp;rsv_bp=1&amp;sr=0&amp;cl=2&amp;f=8&amp;prevct=no&amp;tn=news&amp;word=%E4%BA%AC%E4%B8%9C%E9%87%91%E8%9E%8D&amp;rsv_sug3=1&amp;rsv_sug4=6&amp;rsv_sug1=1&amp;rsv_sug=1</a></p>\n<p>对应的MD5值是这样的：d552b0b40e21d06d73a1a0938635eb1a</p>\n<p>怎么样？省了不少空间吧？</p>\n<p>有人说，拓海你不要骗我，这个算法的输入是个无穷集合，而输出是一个有限集合，必然会存在碰撞的，也就是存在不同的URL算出相同的MD5。这会导致去重时误判，少抓数据！</p>\n<p>好吧，从理论上来说，必然会出现这种情况。可是出现这种情况的概率是多少呢？下面就算算两个不同URL产生相同消息摘要的概率。</p>\n<p>以下是三种常见的消息摘要算法，分别是32、64、128字节，每个字节是十六进制数字的字符，它们的可能值数量分别是：</p>\n<p>md5:   16^32  = 2^128 = 3.4 * 10^38</p>\n<p>sha256: 16^64  = 2^256 = 1.2 × 10^77</p>\n<p>sha512: 16^128 = 2^512 = 1.3 × 10^154</p>\n<p>你可能会说，我是数字盲，我不知道这个数大不大。好吧，我为你找到了两个直观的参照物：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/05/3428b6829af3cede765160e8e935c545.jpg\"><img class=\"aligncenter size-full wp-image-89147\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/3428b6829af3cede765160e8e935c545.jpg\" alt=\"1368640-20180426083108287-1201983270\"></a></p>\n<p>IPv6编码地址数：2^128（约3.4×10^38）</p>\n<p>IPv6是IETF设计的用于替代现行版本IP协议（IPv4）的下一代IP协议，号称可以为全世界的每一粒沙子编上一个网址。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/05/b528572c8d4aa5fcb2fb7b2db61546d5.jpg\"><img class=\"aligncenter size-full wp-image-89150\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/b528572c8d4aa5fcb2fb7b2db61546d5.jpg\" alt=\"1368640-20180426083145237-797515647\"></a></p>\n<p>可观测宇宙中的原子总数：10^80</p>\n<p>上图是哈勃望远镜对准天球上一个特定的区域（相当于整个天球面积的1/12700000）进行长时间的图像拍摄，最后在这个区域里面找到了约有10000个星系。这样可以合理的推测，目前我们能用天文望远镜观测到的宇宙范围内有1.27×10^11个星系。</p>\n<p>一个星系的恒星数(行星忽略不计了)目前普遍接受的一个数量级是4×10^11个。</p>\n<p>像太阳这样的恒星的质量是1.96×10^30kg。</p>\n<p>这就可以算出宇宙的总质量为9.96×10^55kg。</p>\n<p>一个氢原子的质量是1.66×10^-24g。</p>\n<p>用宇宙质量除以一个氢原子的质量就得出了目前可观测宇宙中的近似原子个数是10^80个。</p>\n<p>可见，不同URL产生相同消息摘要的可能性非常小，简直像大海捞针。。。不是，简直像宇宙中捞原子一样难，所以就放心使用吧。</p>\n<p>消息摘要实现了对URL的压缩，但压缩后的大小还是和原来在一个数量级，空间效率并没有质的提升。有没有办法只用几个bit来唯一标识一个URL呢？有！布隆过滤器就是专门解决这类问题的。</p>\n<h1>布隆过滤器</h1>\n<p>Bloom Filter是一种空间效率很高的随机数据结构，它利用bit数组很简洁地表示一个集合，并能判断一个元素是否属于这个集合。Bloom Filter的这种高效是有一定代价的：在判断一个元素是否属于某个集合时，有可能会把不属于这个集合的元素误认为属于这个集合（false positive）。因此，Bloom Filter不适合那些“零错误”的应用场合。而在能容忍低错误率的应用场合下，Bloom Filter通过极少的错误换取了存储空间的极大节省。</p>\n<p>它的原理很简单，首先需要准bit数组（所有位初始化为0）和k个独立hash函数。将hash函数对应的值的位数组置1，查找时如果发现所有hash函数对应位都是1说明存在，否则不存在。很明显这个过程并不保证查找的结果是100%正确的。</p>\n<p>如何根据输入元素个数n，确定bit数组m的大小及hash函数个数呢？当hash函数个数k=(ln2)*(m/n)时错误率最小。在错误率不大于E的情况下，m至少要等于n*lg(1/E)才能表示任意n个元素的集合。但m还应该更大些，因为还要保证bit数组里至少一半为0，则m应该&gt;=nlg(1/E)*lge ，大概就是nlg(1/E)的1.44倍。假设错误率为0.01，则此时m应是n的13倍。这样k大概是8个。</p>\n<p>Google的Guava基础库里有布隆过滤器的实现，非常的简洁和有深度，我们一起来学习一下这段java代码。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4ec2ee7d5e066881707\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npublic &lt;T&gt; boolean put(T object, Funnel&lt;? super T&gt; funnel, int numHashFunctions, BitArray bits) {\r\n    long bitSize = bits.bitSize();\r\n    long hash64 = Hashing.murmur3_128().hashObject(object, funnel).asLong();\r\n    int hash1 = (int) hash64;\r\n    int hash2 = (int) (hash64 &gt;&gt;&gt; 32);\r\n\r\n    boolean bitsChanged = false;\r\n    for (int i = 1; i &lt;= numHashFunctions; i++) {\r\n        int combinedHash = hash1 + (i * hash2);\r\n        // Flip all the bits if it's negative (guaranteed positive number)\r\n        if (combinedHash &lt; 0) {\r\n            combinedHash = ~combinedHash;\r\n        }\r\n        bitsChanged |= bits.set(combinedHash % bitSize);\r\n    }\r\n    return bitsChanged;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4ec2ee7d5e066881707-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ec2ee7d5e066881707-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4ec2ee7d5e066881707-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ec2ee7d5e066881707-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4ec2ee7d5e066881707-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ec2ee7d5e066881707-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4ec2ee7d5e066881707-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ec2ee7d5e066881707-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4ec2ee7d5e066881707-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ec2ee7d5e066881707-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4ec2ee7d5e066881707-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ec2ee7d5e066881707-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4ec2ee7d5e066881707-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ec2ee7d5e066881707-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4ec2ee7d5e066881707-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ec2ee7d5e066881707-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cf4ec2ee7d5e066881707-17\">17</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4ec2ee7d5e066881707-1\"><span class=\"crayon-v\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">boolean </span><span class=\"crayon-e\">put</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">T</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">object</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Funnel</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">super</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">funnel</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">numHashFunctions</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">BitArray </span><span class=\"crayon-v\">bits</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ec2ee7d5e066881707-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bitSize</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bits</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">bitSize</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5cf4ec2ee7d5e066881707-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">hash64</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Hashing</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">murmur3_128</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">hashObject</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">object</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">funnel</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">asLong</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ec2ee7d5e066881707-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">hash1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">int</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">hash64</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5cf4ec2ee7d5e066881707-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">hash2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">int</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">hash64</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">32</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ec2ee7d5e066881707-6\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4ec2ee7d5e066881707-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">boolean </span><span class=\"crayon-v\">bitsChanged</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ec2ee7d5e066881707-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">numHashFunctions</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5cf4ec2ee7d5e066881707-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">combinedHash</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">hash1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">hash2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ec2ee7d5e066881707-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Flip </span><span class=\"crayon-k \">all</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">bits </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">it</span>'<span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">negative</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">guaranteed </span><span class=\"crayon-e\">positive </span><span class=\"crayon-v\">number</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4ec2ee7d5e066881707-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">combinedHash</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ec2ee7d5e066881707-12\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">combinedHash</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-v\">combinedHash</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5cf4ec2ee7d5e066881707-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ec2ee7d5e066881707-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">bitsChanged</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bits</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">set</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">combinedHash</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bitSize</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5cf4ec2ee7d5e066881707-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ec2ee7d5e066881707-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bitsChanged</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5cf4ec2ee7d5e066881707-17\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0057 seconds] -->\r\n<p><strong>01</strong> 函数的功能是把一条数据hash后保存到BitArray中，如果BitArray有变化则返回true，否则返回false。参数是数据、hash函数个数、BitArray地址。</p>\n<p><strong>03</strong> 使用murmur3 hash出一个long型的值。为什么是一个，不应该是numHashFunctions个吗？请往下看。</p>\n<p><strong>04 05</strong> 把hash64切成两半，变成hash1和hash2。</p>\n<p><strong>08 09</strong> 重点来了，numHashFunctions个hash函数原来是这么来的：hash1+(i*hash2)。Excuse me? 这种操作太随意了吧？不用担心，请看《Less Hashing, Same Performance: Building a Better Bloom Filter》，里面论述了这种操作不会影响布隆过滤器的性能：A standard technique from the hashing literature is to use two hash functions h<sub>1</sub>(x) and h<sub>2</sub>(x) to simulate additional hash functions of the form <strong>g<sub>i</sub>(x) = h<sub>1</sub>(x) + ih<sub>2</sub>(x)</strong>. We demonstrate that this technique can be usefully applied to Bloom filters and related data structures. Specifically, only two hash functions are necessary to effectively implement a Bloom filter without any loss in the asymptotic false positive probability.这个优化非常有用，毕竟hash的代价还是很大的。</p>\n<p><strong>11 12</strong> 是负的就取反（这里的操作都很粗暴）。</p>\n<p><strong>14</strong> 设置BitArray里对应的bit，下面进入set()里看看。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4ec2ee7d6a076984092\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nboolean set(long index) {\r\n    if (!get(index)) {\r\n        data[(int) (index &gt;&gt;&gt; 6)] |= (1L &lt;&lt; index);\r\n        bitCount++;\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n  \r\nboolean get(long index) {\r\n    return (data[(int) (index &gt;&gt;&gt; 6)] &amp; (1L &lt;&lt; index)) != 0;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4ec2ee7d6a076984092-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ec2ee7d6a076984092-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4ec2ee7d6a076984092-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ec2ee7d6a076984092-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4ec2ee7d6a076984092-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ec2ee7d6a076984092-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4ec2ee7d6a076984092-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ec2ee7d6a076984092-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4ec2ee7d6a076984092-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ec2ee7d6a076984092-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4ec2ee7d6a076984092-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4ec2ee7d6a076984092-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4ec2ee7d6a076984092-1\"><span class=\"crayon-e\">boolean </span><span class=\"crayon-k \">set</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ec2ee7d6a076984092-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">!</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5cf4ec2ee7d6a076984092-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">int</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">index</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1L</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ec2ee7d6a076984092-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">bitCount</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5cf4ec2ee7d6a076984092-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ec2ee7d6a076984092-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5cf4ec2ee7d6a076984092-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ec2ee7d6a076984092-8\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5cf4ec2ee7d6a076984092-9\"><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ec2ee7d6a076984092-10\"><span class=\"crayon-e\">boolean </span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5cf4ec2ee7d6a076984092-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">int</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">index</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1L</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4ec2ee7d6a076984092-12\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0027 seconds] -->\r\n<p><strong>02</strong> 先get()一下，看看是不是已经置为1。</p>\n<p><strong>03</strong> index右移6位就是除以64，说明data是long型的数组，除以64就定位到了bit所在的数组下标。1L左移index位，定位到了bit在long中的位置。</p>\n<h1>下一步</h1>\n<p>以上就是URL去重的一点思路，希望对大家有帮助。下期打算为大家介绍下字符编解码，以及乱码的完美解决方案。再见！</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89140\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89140votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89140\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"title": "手把手教你写网络爬虫（8）：彻底解决乱码问题", "url": "http://python.jobbole.com/89138/", "url_object_id": "d46bda670adbb5e7786ca75d9979bc8a", "create_date": "2019-06-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/05/76b3926a3cb1335786bafbec805abaa6.jpg"], "praise_nums": 1, "comment_nums": 0, "fav_nums": 4, "tags": "实践项目,乱码,爬虫", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/tuohai666/p/8960736.html\">拓海</a>   </div><div id=\"cnblogs_post_body\">\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/05/76b3926a3cb1335786bafbec805abaa6.jpg\"><img class=\"aligncenter size-full wp-image-89152\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/76b3926a3cb1335786bafbec805abaa6.jpg\" alt=\"1368640-20180426083108287-1201983270\"></a></p>\n<p>字符编解码是爬虫里必学的一项知识，在我们的爬虫生涯中早晚会爬到乱码的网页，与其遇到时惊慌失措，不如早学早好，彻底避免乱码问题。</p>\n<h1>字符编码简介</h1>\n<p><strong>什么是字符集</strong></p>\n<p>在介绍字符编码之前，我们先了解下什么是字符集。</p>\n<p>字符(Character)是各种文字和符号的总称，包括各国家文字、标点符号、图形符号、数字等。字符集(Character set)是多个字符的集合，字符集种类较多，每个字符集包含的字符个数不同，常见字符集：ASCII字符集、GBK字符集、Unicode字符集等。</p>\n<p><strong>什么是字符编码</strong></p>\n<p>字符编码和字符集不同。字符集只是字符的集合，无法进行网络传送、处理，必须经编码后才能使用。如Unicode字符集可依不同需求以UTF-8、UTF-16、UTF-32等方式编码。</p>\n<p>字符编码就是以二进制的数字来对应字符集的字符。各个国家和地区在制定编码标准的时候，“字符的集合”和“编码”一般都是同时制定的。因此，平常我们所说的“字符集”，除了有“字符的集合”这层含义外，同时也包含了“编码”的含义。</p>\n<p><strong>常用字符集</strong></p>\n<p>简单介绍几个常见的。</p>\n<p>ASCII：</p>\n<p>ASCII是学计算机同学的启蒙字符集，一般是从这本书里学到的：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/05/01b9b725034a65cc5cc138e51495ec73.jpg\"><img class=\"aligncenter size-full wp-image-89154\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/01b9b725034a65cc5cc138e51495ec73.jpg\" alt=\"1368640-20180427084222299-735009224\"></a></p>\n<p>请允许我怀旧一下，以下引用谭浩强老师的讲解：</p>\n</div>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/05/1c57eb3fba64fc51255b5ff4cdccfa93.jpg\"><img class=\"aligncenter size-full wp-image-89155\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/1c57eb3fba64fc51255b5ff4cdccfa93.jpg\" alt=\"1368640-20180427084222299-735009224\"></a></p>\n<p>中文字符集：</p>\n<p>GB2312：包含6763个汉字。</p>\n<p>GBK：包含21003个汉字。GBK兼容GB2312，也就是说用GB2312编码的汉字可以用GBK来解码。</p>\n<p>GB18030：收录了70000个汉字，这么多是因为包含了少数民族文字。同样兼容GBK和GB2312。</p>\n<p>Unicode：Unicode 是为了解决传统的字符编码方案的局限而产生的，它为每种语言中的每个字符设定了统一并且唯一的二进制编码，以满足跨语言、跨平台进行文本转换、处理的要求。具有多种编码方式，如UTF-7、 UTF-8、UTF-16、UTF-32等。</p>\n<h1>为什么会产生乱码</h1>\n<p>简单的说乱码的出现是因为：编码和解码时用了不同的字符集。对应到真实生活中，就好比是一个英国人为了表示祝福在纸上写了bless（编码）。而一个法国人拿到了这张纸，由于在法语中bless表示受伤的意思，所以认为他想表达的是受伤（解码）。同理，在计算机中，一个用UTF-8编码后的字符，用GBK去解码。由于两个字符集的字库表不一样，同一个汉字在两个字符表的位置也不同，最终就会出现乱码。</p>\n<p>那么，爬虫中的乱码是怎么产生的，又该如何解决呢？</p>\n<h1>爬虫中的乱码</h1>\n<p>假设我们的爬虫是java开发的，网络请求库使用OkHttp，网页存储到MongoDB中。乱码产生的过程如下：</p>\n<ol>\n<li>OkHttp请求指定url，返回了一个GBK编码的网页字节流；</li>\n<li>OkHttp以默认UTF-8进行解码（此时已乱），并以UTF-16方式编码为Java的String类型，返回给处理程序。（为什么以UTF-16方式编码？因为Java的数据在内存中的编码是UTF-16）；</li>\n<li>爬虫拿到这个编码错误的String类型的网页，调用MongoDB的API，将数据编码为UTF-8存储到数据库中。所以最后在数据库看到的数据是乱的。</li>\n</ol>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/05/f5c1da5b7e3c912393447904e0bb8f83.jpg\"><img class=\"aligncenter size-full wp-image-89156\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/f5c1da5b7e3c912393447904e0bb8f83.jpg\" alt=\"1368640-20180427084222299-735009224\"></a></p>\n<p>显然，导致乱码的根本原因就是OkHttp在最初使用了错误的解码方式进行解码。所以要解决这个问题，就要让OkHttp知道网页的编码类型，进行正确的解码。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/05/19560587cba2e5ee16985e2eacc5844a.jpg\"><img class=\"aligncenter size-full wp-image-89157\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/19560587cba2e5ee16985e2eacc5844a.jpg\" alt=\"1368640-20180427084222299-735009224\"></a></p>\n<p>网页有两种约定的方式告诉爬虫自己使用的是什么编码方式：</p>\n<p>1. Http协议的响应头中的约定：</p>\n<p>Content-Type: text/html;<strong>charset=utf-8</strong></p>\n<p>2. Html中meta标签中的约定：</p>\n<p>&lt;meta http-equiv=”Content-Type” content=”text/html; <strong>charset=UTF-8</strong>“/&gt;</p>\n<p>从约定中获取网页的编码后，Okhttp就可以正确的解码了。然而实际情况却并不乐观，很多网页并不遵守约定，缺少这两个信息。有人通过Alexa统计各国遵守这个约定的网页数：</p>\n<div align=\"center\">\n<table border=\"1\" cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td valign=\"top\" width=\"86\">\n<p align=\"center\"><strong>语言</strong></p>\n</td>\n<td valign=\"top\">\n<p align=\"center\"><strong>URL</strong><strong>后缀</strong></p>\n</td>\n<td valign=\"top\">\n<p align=\"center\"><strong>URL</strong><strong>数</strong></p>\n</td>\n<td valign=\"top\" width=\"143\">\n<p align=\"center\"><strong>HTTP</strong><strong>头中包含</strong></p>\n<p align=\"center\"><strong>charset</strong><strong>的URL数</strong></p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"86\">\n<p align=\"center\">Chinese</p>\n</td>\n<td valign=\"top\">\n<p align=\"center\">.cn</p>\n</td>\n<td valign=\"top\">\n<p align=\"center\">10086</p>\n</td>\n<td valign=\"top\" width=\"143\">\n<p align=\"center\">3776</p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"86\">\n<p align=\"center\">English</p>\n</td>\n<td valign=\"top\">\n<p align=\"center\">.us/.uk</p>\n</td>\n<td valign=\"top\">\n<p align=\"center\">21565</p>\n</td>\n<td valign=\"top\" width=\"143\">\n<p align=\"center\">13223</p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"86\">\n<p align=\"center\">Russian</p>\n</td>\n<td valign=\"top\">\n<p align=\"center\">.ru</p>\n</td>\n<td valign=\"top\">\n<p align=\"center\">39453</p>\n</td>\n<td valign=\"top\" width=\"143\">\n<p align=\"center\">28257</p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"86\">\n<p align=\"center\">Japanese</p>\n</td>\n<td valign=\"top\">\n<p align=\"center\">.jp</p>\n</td>\n<td valign=\"top\">\n<p align=\"center\">20339</p>\n</td>\n<td valign=\"top\" width=\"143\">\n<p align=\"center\">6833</p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"86\">\n<p align=\"center\">Arabic</p>\n</td>\n<td valign=\"top\">\n<p align=\"center\">.iq</p>\n</td>\n<td valign=\"top\">\n<p align=\"center\">1904</p>\n</td>\n<td valign=\"top\" width=\"143\">\n<p align=\"center\">1093</p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"86\">\n<p align=\"center\">German</p>\n</td>\n<td valign=\"top\">\n<p align=\"center\">.de</p>\n</td>\n<td valign=\"top\">\n<p align=\"center\">35318</p>\n</td>\n<td valign=\"top\" width=\"143\">\n<p align=\"center\">23225</p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"86\">\n<p align=\"center\">Persian</p>\n</td>\n<td valign=\"top\">\n<p align=\"center\">.ir</p>\n</td>\n<td valign=\"top\">\n<p align=\"center\">7396</p>\n</td>\n<td valign=\"top\" width=\"143\">\n<p align=\"center\">4018</p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"86\">\n<p align=\"center\">Indian</p>\n</td>\n<td valign=\"top\">\n<p align=\"center\">.in</p>\n</td>\n<td valign=\"top\">\n<p align=\"center\">12236</p>\n</td>\n<td valign=\"top\" width=\"143\">\n<p align=\"center\">4867</p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"86\">\n<p align=\"center\">Total</p>\n</td>\n<td valign=\"top\">\n<p align=\"center\">all</p>\n</td>\n<td valign=\"top\">\n<p align=\"center\">148297</p>\n</td>\n<td valign=\"top\" width=\"143\">\n<p align=\"center\">85292</p>\n</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>结果表明我们不能被动的依赖网页告诉我们，而要根据网页内容来主动探测其编码类型。</p>\n<h3>探测字符编码</h3>\n<p><strong>什么是字符编码自动检测?</strong></p>\n<p>它是指当面对一串不知道编码信息的字节流的时候，尝试着确定一种编码方式以使我们能够读懂其中的文本内容。它就像我们没有解密钥匙的时候，尝试破解出编码。</p>\n<p><strong>那不是不可能的吗?</strong></p>\n<p>通常来说，是的，不可能。但是，有一些编码方式为特定的语言做了优化，而语言并非随机存在的。有一些字符序列在某种语言中总是会出现，而其他一些序列对该语言来说则毫无意义。一个熟练掌握英语的人翻开报纸，然后发现“txzqJv 2!dasd0a QqdKjvz”这样一些序列，他会马上意识到这不是英语（即使它完全由英语中的字母组成）。通过研究许多具有“代表性(typical)”的文本，计算机算法可以模拟人的这种对语言的感知，并且对一段文本的语言做出启发性的猜测。换句话说就是，检测编码信息就是检测语言的类型，并辅之一些额外信息，比如每种语言通常会使用哪些编码方式。</p>\n<p><strong>这样的算法存在吗?</strong></p>\n<p>结果证明，是的，它存在。所有主流的浏览器都有字符编码自动检测的功能，因为互联网上总是充斥着大量缺乏编码信息的页面。Mozilla Firefox包含有一个自动检测字符编码的库，已经移植到Python中，叫做chardet。</p>\n<p><strong>chardet</strong><strong>使用</strong></p>\n<p>安装：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b606b242c398979471\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npip install chardet</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b606b242c398979471-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b606b242c398979471-1\"><span class=\"crayon-e\">pip </span><span class=\"crayon-e\">install </span><span class=\"crayon-v\">chardet</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>使用：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b606b2437080099399\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; import urllib\r\n\r\n&gt;&gt;&gt; rawdata = urllib.urlopen('http://www.jd.com/').read()\r\n\r\n&gt;&gt;&gt; import chardet\r\n\r\n&gt;&gt;&gt; chardet.detect(rawdata)\r\n\r\n{'confidence': 0.98999999999999999, 'language': '', 'encoding': 'utf-8'}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b606b2437080099399-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b606b2437080099399-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b606b2437080099399-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b606b2437080099399-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b606b2437080099399-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b606b2437080099399-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b606b2437080099399-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b606b2437080099399-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b606b2437080099399-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b606b2437080099399-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">urllib</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b606b2437080099399-2\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4b606b2437080099399-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rawdata</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">urllib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">urlopen</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'http://www.jd.com/'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">read</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b606b2437080099399-4\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4b606b2437080099399-5\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">chardet</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b606b2437080099399-6\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4b606b2437080099399-7\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">chardet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">detect</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">rawdata</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b606b2437080099399-8\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4b606b2437080099399-9\"><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'confidence'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.98999999999999999</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'language'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'encoding'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'utf-8'</span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>注意：返回结果中有confidence，即置信度，这说明探测结果不是100%准确的。</p>\n<p>使用其他语言的小伙伴不用担心，chardet在很多语言中都有移植版。不过C++好像没有太好的选择，可以考虑使用IBM的ICU(<a href=\"http://site.icu-project.org/\">http://site.icu-project.org/</a>)。</p>\n<h1>扩展阅读</h1>\n<p>《A composite approach to language/encoding detection》</p>\n<p>(<a href=\"https://www-archive.mozilla.org/projects/intl/UniversalCharsetDetection.html\">https://www-archive.mozilla.org/projects/intl/UniversalCharsetDetection.html</a>)</p>\n<p>这篇论文解释了Chardet背后使用的探测算法，分别是“编码模式方法”、“字符分布方法”和“双字符序列分布方法”。最后说明了三种方法组合使用的必要性，并举例说明如何组合使用。</p>\n<p>《Charset Encoding Detection of HTML Documents A Practical Experience》</p>\n<p>(<a href=\"https://github.com/shabanali-faghani/IUST-HTMLCharDet/blob/master/wiki/Charset-Encoding-Detection-of-HTML-Documents.pdf\">https://github.com/shabanali-faghani/IUST-HTMLCharDet/blob/master/wiki/Charset-Encoding-Detection-of-HTML-Documents.pdf</a>)</p>\n<p>利用现有的探测技术，通过一些技巧来提高探测的准确性。主要原理是组合使用Mozilla CharDet和IBM ICU，并在探测前巧妙的去掉了HTML标签。虽然这是伊朗大学发的Paper，但据说这种方法已经在生产环境取得了很好的效果，目前正应用在一个10亿级别数据量的大型爬虫上。</p>\n<h1>下一步</h1>\n<p>最近聊的话题越来越沉重，想必大家也累了。下期打算带大家一起放松一下，聊点轻松的话题。从系列的开篇到现在也有半年了，技术领域有了不小的更新，出现了一些好用的工具，我们需要替换哪些工具呢？请听下回分解！</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89138\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89138votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89138\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"title": "爬取豆瓣短评之《后来的我们》", "url": "http://python.jobbole.com/89161/", "url_object_id": "20a892567a5320f755b57b6473760af6", "create_date": "2019-06-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/02/591d8b55a524f825dd29a22b8df70000.jpg"], "praise_nums": 1, "comment_nums": 1, "fav_nums": 2, "tags": "实践项目,,爬虫", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://blog.csdn.net/stormdony/article/details/80143024\">stormdony</a>   </div><p>《后来的我们》上映了，或许大家有点小期待吧。毕竟，影片的主题曲《我们》，早就虐哭了不少人。电影能否跟歌曲一样深入人心？怀着这样的一种心情，下面就来看一下它的影评如何吧。</p>\n<h5 id=\"1抓数据\">1.抓数据</h5>\n<p>通过试探知道：豆瓣影评设置权限，没有登陆的话，只能够看到前面的几十条短评，并且登录的时候需要输入验证码。所以考虑使用<code>selenium</code>来获取数据。<br>\n登录时需要的验证码，通过保存图片，然后手动输入<br>\n<img class=\"aligncenter\" title=\"\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/51bc12eb18a1679d3b0baa0c1b1bbe3a.png\" alt=\"后来的我们\"><br>\n所以构造两个方法</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bf80ab599282052066\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# 登录\r\ndef login(url,username,password):\r\n    brower.get(url)\r\n    brower.find_element_by_css_selector('[class=\"nav-login\"]').click()\r\n    name = brower.find_element_by_id('email')\r\n    name.clear()\r\n    name.send_keys(username)\r\n    pwd = brower.find_element_by_id('password')\r\n    pwd.clear()\r\n    pwd.send_keys(password)\r\n    pic_src = brower.find_element_by_id('captcha_image').get_attribute('src')\r\n    #调用获取验证码的方法\r\n    cap_value = get_yzm(pic_src)\r\n    yan_zheng_ma = brower.find_element_by_id('captcha_field')\r\n    yan_zheng_ma.clear()\r\n    yan_zheng_ma.send_keys(cap_value)\r\n    brower.find_element_by_css_selector('[class=\"btn-submit\"]').click()\r\n    print('登陆成功')\r\n\r\n\r\n# 获取验证码\r\ndef get_yzm(src):\r\n    print(\"正在保存验证码图片\")\r\n    captchapicfile = \"D:/pycharm/PycharmProjects/next_our/captcha.png\"\r\n    urllib.request.urlretrieve(src, filename=captchapicfile)\r\n    print(\"请打开图片文件，查看验证码，输入单词......\")\r\n    captcha_value = input()\r\n    return captcha_value\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab599282052066-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab599282052066-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab599282052066-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab599282052066-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab599282052066-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab599282052066-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab599282052066-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab599282052066-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab599282052066-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab599282052066-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab599282052066-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab599282052066-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab599282052066-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab599282052066-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab599282052066-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab599282052066-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab599282052066-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab599282052066-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab599282052066-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab599282052066-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab599282052066-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab599282052066-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab599282052066-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab599282052066-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab599282052066-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab599282052066-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab599282052066-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab599282052066-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab599282052066-29\">29</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab599282052066-1\"><span class=\"crayon-p\"># 登录</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab599282052066-2\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">login</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">username</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">password</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab599282052066-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">brower</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab599282052066-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">brower</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find_element_by_css_selector</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'[class=\"nav-login\"]'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">click</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab599282052066-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">brower</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find_element_by_id</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'email'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab599282052066-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">clear</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab599282052066-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">send_keys</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">username</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab599282052066-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">pwd</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">brower</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find_element_by_id</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'password'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab599282052066-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">pwd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">clear</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab599282052066-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">pwd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">send_keys</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">password</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab599282052066-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">pic_src</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">brower</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find_element_by_id</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'captcha_image'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get_attribute</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'src'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab599282052066-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#调用获取验证码的方法</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab599282052066-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">cap_value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">get_yzm</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">pic_src</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab599282052066-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">yan_zheng_ma</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">brower</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find_element_by_id</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'captcha_field'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab599282052066-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">yan_zheng_ma</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">clear</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab599282052066-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">yan_zheng_ma</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">send_keys</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cap_value</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab599282052066-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">brower</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find_element_by_css_selector</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'[class=\"btn-submit\"]'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">click</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab599282052066-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'登陆成功'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab599282052066-19\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab599282052066-20\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab599282052066-21\"><span class=\"crayon-p\"># 获取验证码</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab599282052066-22\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">get_yzm</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">src</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab599282052066-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"正在保存验证码图片\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab599282052066-24\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">captchapicfile</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"D:/pycharm/PycharmProjects/next_our/captcha.png\"</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab599282052066-25\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">urllib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">request</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">urlretrieve</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">src</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">filename</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">captchapicfile</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab599282052066-26\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"请打开图片文件，查看验证码，输入单词......\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab599282052066-27\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">captcha_value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">input</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab599282052066-28\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">captcha</span><span class=\"crayon-sy\">_</span>value</div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab599282052066-29\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0040 seconds] -->\r\n<p>登陆成功之后，通过搜索框搜索《后来的我们》，进入详情页，随后进入短评列表<br>\n<img title=\"\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/3d54bd61ce5fbfd942073dc61a828a10.png\" alt=\"这里写图片描述\"><br>\n<img title=\"\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/0bd7314ace43d3081d0f3397e37dc5d9.png\" alt=\"这里写图片描述\"><br>\n需要获取昵称,短评和赞同数<br>\n<img title=\"\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/a1ba40b0d5f4055df7c408c5a57f4dd4.png\" alt=\"这里写图片描述\"><br>\n每一个步骤我们都构建一个方法</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bf80ab5a3851307430\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# 搜索电影\r\ndef seach(movie_name):\r\n    inp_query = brower.find_element_by_id('inp-query')\r\n    inp_query.clear()\r\n    inp_query.send_keys(movie_name)\r\n    submit = brower.find_element_by_css_selector('[type=\"submit\"]')\r\n    submit.click()\r\n    sleep(1)\r\n    brower.find_element_by_xpath('//*[@id=\"root\"]/div/div[2]/div[1]/div[1]/div[1]/div[1]/div/div[1]/a').click()\r\n    print(\"进入详情页\")\r\n\r\n# 进入短评列表\r\ndef into_comment():\r\n    brower.find_element_by_xpath('//*[@id=\"comments-section\"]/div[1]/h2/span/a').click()\r\n    print(\"进入短评列表\")\r\n\r\n# 获取短评\r\ndef get_comment():\r\n    wait.until(lambda brower : brower.find_element_by_css_selector('[class=\"next\"]'))\r\n    sleep(1)\r\n    for i in range(1,21):\r\n        comment = brower.find_element_by_xpath('//*[@id=\"comments\"]/div[{}]/div[2]/p'.format(str(i))).text\r\n        comment_name = brower.find_element_by_xpath('//*[@id=\"comments\"]/div[{}]/div[2]/h3/span[2]/a'.format(str(i))).text\r\n        votes = brower.find_element_by_xpath('//*[@id=\"comments\"]/div[{}]/div[2]/h3/span[1]/span'.format(str(i))).text\r\n        #构建字典\r\n        data = {\r\n            'comment': comment,\r\n            'comment_name': comment_name,\r\n            'votes': int(votes)\r\n        }\r\n        comments.insert_one(data)\r\n        print('*'*100)\r\n        print(data)\r\n        print('成功存入数据库')\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5a3851307430-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab5a3851307430-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5a3851307430-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab5a3851307430-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5a3851307430-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab5a3851307430-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5a3851307430-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab5a3851307430-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5a3851307430-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab5a3851307430-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5a3851307430-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab5a3851307430-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5a3851307430-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab5a3851307430-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5a3851307430-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab5a3851307430-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5a3851307430-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab5a3851307430-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5a3851307430-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab5a3851307430-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5a3851307430-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab5a3851307430-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5a3851307430-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab5a3851307430-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5a3851307430-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab5a3851307430-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5a3851307430-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab5a3851307430-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5a3851307430-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab5a3851307430-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5a3851307430-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab5a3851307430-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5a3851307430-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab5a3851307430-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5a3851307430-35\">35</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5a3851307430-1\"><span class=\"crayon-p\"># 搜索电影</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab5a3851307430-2\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">seach</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">movie_name</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5a3851307430-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">inp_query</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">brower</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find_element_by_id</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'inp-query'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab5a3851307430-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">inp_query</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">clear</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5a3851307430-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">inp_query</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">send_keys</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">movie_name</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab5a3851307430-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">submit</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">brower</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find_element_by_css_selector</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'[type=\"submit\"]'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5a3851307430-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">submit</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">click</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab5a3851307430-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">sleep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5a3851307430-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">brower</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find_element_by_xpath</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'//*[@id=\"root\"]/div/div[2]/div[1]/div[1]/div[1]/div[1]/div/div[1]/a'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">click</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab5a3851307430-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"进入详情页\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5a3851307430-11\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab5a3851307430-12\"><span class=\"crayon-p\"># 进入短评列表</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5a3851307430-13\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">into_comment</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab5a3851307430-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">brower</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find_element_by_xpath</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'//*[@id=\"comments-section\"]/div[1]/h2/span/a'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">click</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5a3851307430-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"进入短评列表\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab5a3851307430-16\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5a3851307430-17\"><span class=\"crayon-p\"># 获取短评</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab5a3851307430-18\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">get_comment</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5a3851307430-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">wait</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">until</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">lambda </span><span class=\"crayon-v\">brower</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">brower</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find_element_by_css_selector</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'[class=\"next\"]'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab5a3851307430-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">sleep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5a3851307430-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">21</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab5a3851307430-22\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">comment</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">brower</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find_element_by_xpath</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'//*[@id=\"comments\"]/div[{}]/div[2]/p'</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">str</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">text</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5a3851307430-23\"><span class=\"crayon-e\">        </span><span class=\"crayon-v\">comment_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">brower</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find_element_by_xpath</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'//*[@id=\"comments\"]/div[{}]/div[2]/h3/span[2]/a'</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">str</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">text</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab5a3851307430-24\"><span class=\"crayon-e\">        </span><span class=\"crayon-v\">votes</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">brower</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find_element_by_xpath</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'//*[@id=\"comments\"]/div[{}]/div[2]/h3/span[1]/span'</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">str</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">text</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5a3851307430-25\"><span class=\"crayon-h\">        </span><span class=\"crayon-p\">#构建字典</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab5a3851307430-26\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5a3851307430-27\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'comment'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">comment</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab5a3851307430-28\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'comment_name'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">comment_name</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5a3851307430-29\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'votes'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">votes</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab5a3851307430-30\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5a3851307430-31\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">comments</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">insert_one</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab5a3851307430-32\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'*'</span><span class=\"crayon-o\">*</span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5a3851307430-33\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab5a3851307430-34\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'成功存入数据库'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5a3851307430-35\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0049 seconds] -->\r\n<p>还有最重要的一步就是，需要进行翻页，然后重新获取短评信息</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bf80ab5a9679339419\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#翻页\r\ndef next_page():\r\n    next = brower.find_element_by_css_selector('[class=\"next\"]')\r\n    try:\r\n        next.click()\r\n    except:\r\n        logging.info(\"全部完成了\")</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5a9679339419-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab5a9679339419-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5a9679339419-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab5a9679339419-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5a9679339419-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab5a9679339419-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5a9679339419-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5a9679339419-1\"><span class=\"crayon-p\">#翻页</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab5a9679339419-2\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">next_page</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5a9679339419-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">next</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">brower</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find_element_by_css_selector</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'[class=\"next\"]'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab5a9679339419-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">try</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5a9679339419-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">next</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">click</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab5a9679339419-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">except</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5a9679339419-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">logging</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">info</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"全部完成了\"</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>ps:由于技术较渣,所以直接跳到最后一页,发现只有24页,所以直接使用循环了&lt;~_~&gt;</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bf80ab5ad083444543\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#使用PhantomJS\r\nbrower = webdriver.PhantomJS(executable_path=\"D:/phantomjs-2.1.1-windows/bin/phantomjs.exe\")\r\nwait = ui.WebDriverWait(brower,10)\r\n# 数据库\r\nclient = pymongo.MongoClient('localhost',27017)\r\nnext_our = client['next_our']\r\ncomments = next_our['comments']\r\n\r\nURL = 'https://movie.douban.com/'\r\nusername = '你的豆瓣账号'\r\npassword = '你的密码'\r\nmovie = '后来的我们‎'\r\nif __name__==\"__main__\":\r\n    login(URL,username,password)\r\n    seach(movie)\r\n    into_comment()\r\n    for page in range(24):\r\n        get_comment()\r\n        next_page()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5ad083444543-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab5ad083444543-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5ad083444543-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab5ad083444543-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5ad083444543-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab5ad083444543-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5ad083444543-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab5ad083444543-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5ad083444543-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab5ad083444543-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5ad083444543-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab5ad083444543-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5ad083444543-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab5ad083444543-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5ad083444543-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab5ad083444543-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5ad083444543-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab5ad083444543-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5ad083444543-19\">19</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5ad083444543-1\"><span class=\"crayon-p\">#使用PhantomJS</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab5ad083444543-2\"><span class=\"crayon-v\">brower</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">webdriver</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">PhantomJS</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">executable_path</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"D:/phantomjs-2.1.1-windows/bin/phantomjs.exe\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5ad083444543-3\"><span class=\"crayon-v\">wait</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ui</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">WebDriverWait</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">brower</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab5ad083444543-4\"><span class=\"crayon-p\"># 数据库</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5ad083444543-5\"><span class=\"crayon-v\">client</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pymongo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">MongoClient</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'localhost'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">27017</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab5ad083444543-6\"><span class=\"crayon-v\">next_our</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">client</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'next_our'</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5ad083444543-7\"><span class=\"crayon-v\">comments</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">next_our</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'comments'</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab5ad083444543-8\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5ad083444543-9\"><span class=\"crayon-v\">URL</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'https://movie.douban.com/'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab5ad083444543-10\"><span class=\"crayon-v\">username</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'你的豆瓣账号'</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5ad083444543-11\"><span class=\"crayon-v\">password</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'你的密码'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab5ad083444543-12\"><span class=\"crayon-v\">movie</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'后来的我们‎'</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5ad083444543-13\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">__name__</span><span class=\"crayon-o\">==</span><span class=\"crayon-s\">\"__main__\"</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab5ad083444543-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">login</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">URL</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">username</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">password</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5ad083444543-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">seach</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">movie</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab5ad083444543-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">into_comment</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5ad083444543-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">page </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">24</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab5ad083444543-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">get_comment</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5ad083444543-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">next_page</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0024 seconds] -->\r\n<p></p>\n<h5 id=\"2数据处理\">2.数据处理</h5>\n<p>在获取到数据之后,制作成图表,让我们更加直观的看到大体情况</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bf80ab5b1645281941\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nseries =[\r\n    {\r\n    'name':'评论点赞数',\r\n    'data':[i for i in vote_list],\r\n    'type':'column'\r\n    }\r\n]\r\ncharts.plot(series,show='inline',options=dict(title=dict(text='评论点赞数')))</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5b1645281941-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab5b1645281941-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5b1645281941-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab5b1645281941-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5b1645281941-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab5b1645281941-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5b1645281941-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab5b1645281941-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5b1645281941-1\"><span class=\"crayon-v\">series</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab5b1645281941-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5b1645281941-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">'name'</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">'评论点赞数'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab5b1645281941-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">'data'</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">[</span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">vote_list</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5b1645281941-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">'type'</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">'column'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab5b1645281941-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5b1645281941-7\"><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab5b1645281941-8\"><span class=\"crayon-v\">charts</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">plot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">series</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">show</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'inline'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">options</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">dict</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">title</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">dict</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">text</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'评论点赞数'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p><img title=\"\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/e64b46ff7912bfdf019c79e32852871b.png\" alt=\"这里写图片描述\"><br>\n从图中可以看出短评中最受欢迎的大概有2500票,并且大部分集中在前排,(这是后面没有多少人看,所以点赞少?)<br>\n<strong>咳咳。。。前排很重要呀</strong></p>\n<p>接下来把所有的评论制作成云图</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4bf80ab5b4746265930\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ntext=open('comment_list.txt', 'r',encoding='utf-8')\r\nmytext=text.read()\r\ncut = jieba.cut(mytext,cut_all=True)\r\nsplit_cut ='/'.join(cut)\r\nwc = WordCloud(background_color = \"white\", #设置背景颜色  \r\n               max_words = 2000, #设置最大显示的字数  \r\n               margin=5,\r\n               font_path=\"C:\\\\Windows\\\\Fonts\\\\STFANGSO.ttf\",#不加这一句显示口字形乱码\r\n               max_font_size = 80,  #设置字体最大值  \r\n               random_state = 40, #设置有多少种随机生成状态，即有多少种配色方案  \r\n    )  \r\nmword =wc.generate(split_cut)\r\nplt.imshow(mword)\r\nplt.axis(\"off\")\r\nplt.show()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5b4746265930-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab5b4746265930-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5b4746265930-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab5b4746265930-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5b4746265930-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab5b4746265930-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5b4746265930-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab5b4746265930-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5b4746265930-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab5b4746265930-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5b4746265930-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab5b4746265930-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5b4746265930-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4bf80ab5b4746265930-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4bf80ab5b4746265930-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5b4746265930-1\"><span class=\"crayon-v\">text</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">open</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'comment_list.txt'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'r'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">encoding</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'utf-8'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab5b4746265930-2\"><span class=\"crayon-v\">mytext</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">text</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">read</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5b4746265930-3\"><span class=\"crayon-v\">cut</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">jieba</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">cut</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">mytext</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">cut_all</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">True</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab5b4746265930-4\"><span class=\"crayon-v\">split_cut</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'/'</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">join</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cut</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5b4746265930-5\"><span class=\"crayon-v\">wc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WordCloud</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">background_color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"white\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#设置背景颜色  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab5b4746265930-6\"><span class=\"crayon-h\">               </span><span class=\"crayon-v\">max_words</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2000</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#设置最大显示的字数  </span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5b4746265930-7\"><span class=\"crayon-h\">               </span><span class=\"crayon-v\">margin</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab5b4746265930-8\"><span class=\"crayon-h\">               </span><span class=\"crayon-v\">font_path</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"C:\\\\Windows\\\\Fonts\\\\STFANGSO.ttf\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-p\">#不加这一句显示口字形乱码</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5b4746265930-9\"><span class=\"crayon-h\">               </span><span class=\"crayon-v\">max_font_size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">80</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-p\">#设置字体最大值  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab5b4746265930-10\"><span class=\"crayon-h\">               </span><span class=\"crayon-v\">random_state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">40</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#设置有多少种随机生成状态，即有多少种配色方案  </span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5b4746265930-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab5b4746265930-12\"><span class=\"crayon-v\">mword</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">wc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">generate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">split_cut</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5b4746265930-13\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">imshow</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">mword</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4bf80ab5b4746265930-14\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">axis</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"off\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4bf80ab5b4746265930-15\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">show</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0026 seconds] -->\r\n<p>得到下面的云图:<br>\n<img class=\"aligncenter\" title=\"\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/fd350e72550cbd04ba26e9009086a07f.jpeg\" alt=\"这里写图片描述\"><br>\n从图中看到,大部分在<strong>评论周冬雨</strong>、感慨<strong>我们后来没有故事</strong>的<br>\n<em>ps:数据是4/29晚所爬取的</em></p>\n<p>接下来统计一下赞同数前十的评论</p>\n<table>\n<thead>\n<tr>\n<th>昵称</th>\n<th>获赞数</th>\n<th>短评</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Magic</td>\n<td>2475</td>\n<td>台词矫情的令人发指！</td>\n</tr>\n<tr>\n<td>华盛顿樱桃树</td>\n<td>2230</td>\n<td>最好的是演员，周冬雨完全开辟出自己的戏路。小井进步惊人，已长出美丽。最差的是编剧，没有一场完全连贯的戏，几乎都是攒的。</td>\n</tr>\n<tr>\n<td>痴痴的钟灵</td>\n<td>1784</td>\n<td>希望奶茶好好演戏唱歌,矫情的青春片已经没有市场了。吃完瓜回来，劝眼善良,中国的电影市场要被你们搞的烂透了。在工作日首日票房近3亿，把自己当妇联了么,【把没有市场收回，有,眼在何愁没有100亿.</td>\n</tr>\n<tr>\n<td>昵称过期作废</td>\n<td>1785</td>\n<td>毫无看点可言。剧情处处是硬伤！这是电影吗？这是PPT，刘小姐，还是回去唱歌吧。</td>\n</tr>\n<tr>\n<td>末药煎肉塔</td>\n<td>1601</td>\n<td>现在还把北京设定为梦想之城的，大概受众也是瞄准了小镇青年吧（多次冲北京喊话真是挺尴尬的）。剧情拖太长，唯一的泪点还是田壮壮演的老爸，周冬雨老演这种角色不会腻吗？</td>\n</tr>\n<tr>\n<td>xiaoning</td>\n<td>1373</td>\n<td>真的很讨厌卖情怀的电影，而且还有一个不是很有才华的歌手做导演，要不是主题曲我应该都不会想看。（留言说我收钱黑的，老子收了一分黑钱我多的钱都亏出去行了吧，就这尴尬的台词乱拼凑的故事是在看ppt吗还用收钱黑，我真是谢你们大爷了，你不用管我觉得谁有才华，反正这位文青女导演还真不是）</td>\n</tr>\n<tr>\n<td>张无B</td>\n<td>1508</td>\n<td>刘若英对着镜头唱一遍后来我都觉得比这片子感动。</td>\n</tr>\n<tr>\n<td>葡萄猪不爱睡觉</td>\n<td>1238</td>\n<td>从形式内容到档期营销，统统都是模仿当年的致青春，致青春票房年度第二，这部最终估计也不会差</td>\n</tr>\n<tr>\n<td>糖炒荔枝</td>\n<td>1146</td>\n<td>在我眼里第二个无问西东，投机取巧，毫无才华，对不起</td>\n</tr>\n<tr>\n<td>尼克Lui</td>\n<td>995</td>\n<td>垃圾做作的电影 这么多年了还在不断的重复搞这种烂片 大晚上被抓住票房造假 哈哈哈哈哈哈 垃圾怎么包装也是垃圾！</td>\n</tr>\n</tbody>\n</table>\n<p>ps:以上评论均来自豆瓣影评</p>\n<h5 id=\"3总结\">3.总结</h5>\n<p>或许是主题曲提前预热了市场,让观众的期望值变高了，《后来的我们》在豆瓣上的评分只有6.2分，并且现在又出现了退票事件。<br>\n单就电影来说，感觉还是可以的。或许是豆瓣的用户眼光有点高了。</p>\n<p>爱情有一种结局，是后来的我们，只能从情侣变成爱了很久的朋友。<br>\n电影有句很扎心的文案，<strong>“再后来，我什么都有了，却独独没有了我们”</strong>。<br>\n希望我们好好珍惜。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89161\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89161votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89161\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"title": "5 个用 Python 编写 web 爬虫的方法", "url": "http://python.jobbole.com/89164/", "url_object_id": "13c76f46dff51efba86e5e4da283eae9", "create_date": "2019-06-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/05/f593a3d018db14d76993745211fb616b.jpeg"], "praise_nums": 1, "comment_nums": 0, "fav_nums": 6, "tags": "实践项目,爬虫", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"http://blog.adnansiddiqi.me/5-strategies-to-write-unblock-able-web-scrapers-in-python/\">ADNAN</a>   译文出处：<a target=\"_blank\" href=\"https://www.oschina.net/translate/write-web-scrapers-in-python\">oschina</a>   </div><p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/05/f593a3d018db14d76993745211fb616b.jpeg\"><img class=\"aligncenter size-full wp-image-89165\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/f593a3d018db14d76993745211fb616b.jpeg\" alt=\"112834_QWiv_2896879\"></a></p>\n<p>大家在读<a href=\"http://blog.adnansiddiqi.me/tag/scraping/\" target=\"_blank\" rel=\"nofollow\">爬虫系列</a>的帖子时常常问我怎样写出不阻塞的爬虫，这很难，但可行。通过实现一些小策略可以让你的网页爬虫活得更久。那么今天我就将和大家讨论这方面的话题。</p>\n<h1 id=\"content_h3_2_5\"><strong>用户代理</strong></h1>\n<p>你需要关心的第一件事是设置用户代理。 用户代理是用户访问的工具，并告知服务器用户正在使用哪个网络浏览器访问网站。 如果未设置用户代理，许多网站不会让你查看内容。 如果你正在使用rquests库，可以执行如下操作：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b838b88dc980030949\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nheaders = {\r\n        'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36',\r\n    }\r\nr = requests.get('example.com',headers=headers)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b838b88dc980030949-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b838b88dc980030949-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b838b88dc980030949-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b838b88dc980030949-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b838b88dc980030949-1\"><span class=\"crayon-v\">headers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b838b88dc980030949-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'user-agent'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b838b88dc980030949-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b838b88dc980030949-4\"><span class=\"crayon-v\">r</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">requests</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'example.com'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">headers</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">headers</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>你可以通过在 Google 搜索栏中输入 User-Agent 来获取用户代理的信息，并且它会返回你当前的用户代理信息。</p>\n<p>现在，你已经有了一个用户代理，但如何去使用它？ 那么，最好的方法是从文本文件、数据库、Python 的列表中选择一个随机的 User-Agent 。 <a href=\"https://udger.com/resources/ua-list\" target=\"_blank\" rel=\"nofollow\">Udger</a> 分享了大量的 UA w.r.t 浏览器。 比如，对于 Chrome 而言，它看起来像<a href=\"https://udger.com/resources/ua-list/browser-detail?browser=Chrome\" target=\"_blank\" rel=\"nofollow\">这样</a>，对 Firefox 来说，又像<a href=\"https://udger.com/resources/ua-list/browser-detail?browser=FIREFOX\" target=\"_blank\" rel=\"nofollow\">这样</a>。 现在让我们来创建一个函数，它将返回一个随机 UA ，你可以在请求中使用：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b838b88e7280970588\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nimport numpy as np\r\ndef get_random_ua():\r\n    random_ua = ''\r\n    ua_file = 'ua_file.txt'\r\n    try:\r\n        with open(ua_file) as f:\r\n            lines = f.readlines()\r\n        if len(lines) &gt; 0:\r\n            prng = np.random.RandomState()\r\n            index = prng.permutation(len(lines) - 1)\r\n            idx = np.asarray(index, dtype=np.integer)[0]\r\n            random_proxy = lines[int(idx)]\r\n    except Exception as ex:\r\n        print('Exception in random_ua')\r\n        print(str(ex))\r\n    finally:\r\n        return random_ua</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b838b88e7280970588-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b838b88e7280970588-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b838b88e7280970588-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b838b88e7280970588-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b838b88e7280970588-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b838b88e7280970588-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b838b88e7280970588-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b838b88e7280970588-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b838b88e7280970588-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b838b88e7280970588-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b838b88e7280970588-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b838b88e7280970588-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b838b88e7280970588-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b838b88e7280970588-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b838b88e7280970588-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b838b88e7280970588-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b838b88e7280970588-17\">17</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b838b88e7280970588-1\"><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">np</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b838b88e7280970588-2\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">get_random_ua</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b838b88e7280970588-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">random_ua</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b838b88e7280970588-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">ua_file</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'ua_file.txt'</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b838b88e7280970588-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">try</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b838b88e7280970588-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">with</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">open</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ua_file</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b838b88e7280970588-7\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">lines</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">readlines</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b838b88e7280970588-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">lines</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b838b88e7280970588-9\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">prng</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">random</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">RandomState</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b838b88e7280970588-10\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">index</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">prng</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">permutation</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">lines</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b838b88e7280970588-11\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">idx</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">asarray</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dtype</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">integer</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b838b88e7280970588-12\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">random_proxy</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lines</span><span class=\"crayon-sy\">[</span><span class=\"crayon-k \">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">idx</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b838b88e7280970588-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">except</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">Exception</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ex</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b838b88e7280970588-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Exception in random_ua'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b838b88e7280970588-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">str</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ex</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b838b88e7280970588-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">finally</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b838b88e7280970588-17\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">random_ua</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0042 seconds] -->\r\n<p>ua_file.txt 包含一个来自我上面共享的网站的每行 UA 。 函数 get_random_ua 将始终从该文件中返回唯一的 UA 。 你现在可以调用如下函数：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b838b88ec120450809\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nuser_agent = get_random_ua()\r\nheaders = {\r\n        'user-agent': user_agent,\r\n    }\r\nr = requests.get('example.com',headers=headers)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b838b88ec120450809-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b838b88ec120450809-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b838b88ec120450809-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b838b88ec120450809-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b838b88ec120450809-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b838b88ec120450809-1\"><span class=\"crayon-v\">user_agent</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">get_random_ua</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b838b88ec120450809-2\"><span class=\"crayon-v\">headers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b838b88ec120450809-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'user-agent'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">user_agent</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b838b88ec120450809-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b838b88ec120450809-5\"><span class=\"crayon-v\">r</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">requests</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'example.com'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">headers</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">headers</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p></p>\n<h1 id=\"content_h3_3_5\"><strong>Referrers</strong></h1>\n<p>接下来你需要设置的是引用。 一般的规则是，如果它是一个列表页面或主页，那么你可以设置该国家的 Google 主页网址。 例如，如果我正在爬取 olx.com.pk ，那么我会设置 https://google.com.pk 而不是 https://google.ca。</p>\n<p>如果你要抓取各个产品页面，可以在引用中设置相关类别的网址，或者可以找到要抓取的域的<a href=\"https://en.wikipedia.org/wiki/Backlink\" target=\"_blank\" rel=\"nofollow\">反向链接</a>。 我通常使用 SEMRush 来这么做。针对链接 https://www.olx.com.pk/furniture-home-decor/categories/  通过 SEMRush 会返回如下所示的内容：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/05/e89baf6b56738f7dd038eac8e04df1c5.png\"><img class=\"aligncenter size-full wp-image-89166\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/e89baf6b56738f7dd038eac8e04df1c5.png\" alt=\"113036_HEC2_2896879\"></a></p>\n<p>如果你点击查看放大的图像，你可以看到一些链接指向我所需的类别。一旦你收集所有这些真实的反向链接，你可以通过复制逻辑 insideget_random_ua（）返回随机引用，并将它们用作引用。 如下所示：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b838b88f0585113349\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nheaders = {\r\n        'user-agent': user_agent,\r\n        'referer':referer\r\n    }</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b838b88f0585113349-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b838b88f0585113349-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b838b88f0585113349-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b838b88f0585113349-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b838b88f0585113349-1\"><span class=\"crayon-v\">headers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b838b88f0585113349-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'user-agent'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">user_agent</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b838b88f0585113349-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'referer'</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">referer</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b838b88f0585113349-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p></p>\n<h1 id=\"content_h3_4_5\">代理 IP</h1>\n<p>我不得不强调这一点。如果认真研究，那么你必须使用多个代理 IP 来避免阻塞。 大多数网站会根据你的服务器或主机提供商的静态 IP 来阻止抓取工具。 这些网站使用智能的工具来确定某个 IP 或 IP 池的方式，并简单地阻止它们。 这也是为什么建议购买几个 IP 地址，50-100个至少要避免阻塞。有许多可用的服务，但我对 Shaders（现在称为 <a href=\"https://oxylabs.io/pricing\" target=\"_blank\" rel=\"nofollow\">OxyLabs</a> ）感到满意。 它们虽然很贵，但服务质量很好。 确保你在订购多个 IP 时，要求提供随机 IP 或至少不遵循 1.2.3.4 到 1.2.3.100 等特定模式。站点管理员将很简单的设置 IP 地址不全部为 1.2.3.* 。 就这么简单。</p>\n<p>如果你正在使用请求，你可以像下面这样使用它：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b838b88f4677961858\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nr = requests.get('example.com',headers=headers,proxies={'https': proxy_url})</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b838b88f4677961858-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b838b88f4677961858-1\"><span class=\"crayon-v\">r</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">requests</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'example.com'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">headers</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">headers</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">proxies</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'https'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">proxy_url</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>如果你在 Selenium 使用代理 IP ，那么这将有点棘手。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b838b88f7371345599\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nr = requests.get('example.com',headers=headers,proxies={'https': proxy_url})\r\nproxy = get_random_proxy().replace('\\n', '')\r\n        service_args = [\r\n            '--proxy={0}'.format(proxy),\r\n            '--proxy-type=http',\r\n            '--proxy-auth=user:path'\r\n        ]\r\n        print('Processing..' + url)\r\n        driver = webdriver.PhantomJS(service_args=service_args)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b838b88f7371345599-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b838b88f7371345599-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b838b88f7371345599-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b838b88f7371345599-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b838b88f7371345599-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b838b88f7371345599-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b838b88f7371345599-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b838b88f7371345599-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b838b88f7371345599-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b838b88f7371345599-1\"><span class=\"crayon-v\">r</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">requests</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'example.com'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">headers</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">headers</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">proxies</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'https'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">proxy_url</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b838b88f7371345599-2\"><span class=\"crayon-v\">proxy</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">get_random_proxy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">replace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'\\n'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b838b88f7371345599-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">service_args</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b838b88f7371345599-4\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'--proxy={0}'</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">proxy</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b838b88f7371345599-5\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'--proxy-type=http'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b838b88f7371345599-6\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'--proxy-auth=user:path'</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b838b88f7371345599-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b838b88f7371345599-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Processing..'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b838b88f7371345599-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">driver</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">webdriver</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">PhantomJS</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">service_args</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">service_args</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0021 seconds] -->\r\n<p>不用说，get_random_proxy() 是返回一个唯一且随机代理的方法，就像上面获得唯一且随机的 UA 和 Referer 一样。</p>\n<p>你可以思考一个这样的系统，在系统中你可以设置一个 IP 每天或每小时访问网站频率，如果它超过了，那么它将被放入一个笼子里直到第二天。 我所在的公司设计了一个这样的系统，不仅设置了 IP 访问频率，还记录了哪个 IP 被阻止。 最后，我只是使用代理服务提供者仅替换这些代理。 由于这超出了本文的范围，所以我不会详细介绍它。</p>\n<h1 id=\"content_h3_5_5\">Request Headers</h1>\n<p>到目前为止，事情你都已经做得很好，但是仍然有些狡猾的网站要求你做更多的事情。当你访问页面的时候他们会查找特定的请求响应头信息，如果特定的头信息没有被发现，他们会阻止内容显示或者展示一个虚假的内容。模拟一个你想访问的网站的请求是非常简单的。例如，比如你正准备访问一个 Craigslist URL ，并且想知道哪个头部信息是需要的。进入 Chrome/Firefox 浏览器，检查正在访问的页面，你应该会看到下面这些内容：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/05/4f5f113a894dd81933759d0a88d2f973.png\"><img class=\"aligncenter size-full wp-image-89167\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/4f5f113a894dd81933759d0a88d2f973.png\" alt=\"113036_HEC2_2896879\"></a></p>\n<p>如果你点击了图标并查看，你能找到除了 referer 和 user-agent 之外的大量信息。你能一次性全都实现也可以一个个的实现并测试。无论访问哪个网站，我总是去设置这些信息。请确保你不只是复制粘贴这些信息去访问所有网站，因为这些信息通常会因网站不同而改变。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b838b88fc930892958\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nheaders = {\r\n        'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36',\r\n        'referrer': 'https://google.com',\r\n        'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',\r\n        'Accept-Encoding': 'gzip, deflate, br',\r\n        'Accept-Language': 'en-US,en;q=0.9',\r\n        'Pragma': 'no-cache',\r\n    }</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b838b88fc930892958-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b838b88fc930892958-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b838b88fc930892958-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b838b88fc930892958-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b838b88fc930892958-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b838b88fc930892958-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b838b88fc930892958-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b838b88fc930892958-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b838b88fc930892958-1\"><span class=\"crayon-v\">headers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b838b88fc930892958-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'user-agent'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b838b88fc930892958-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'referrer'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'https://google.com'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b838b88fc930892958-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'Accept'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b838b88fc930892958-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'Accept-Encoding'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'gzip, deflate, br'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b838b88fc930892958-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'Accept-Language'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'en-US,en;q=0.9'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b838b88fc930892958-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'Pragma'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'no-cache'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b838b88fc930892958-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p></p>\n<h1 id=\"content_h3_6_5\">延时</h1>\n<p>在请求之间放置一些延迟总是很好的。我使用 numpy.random.choice() 来实现这一目标，该函数将在我想延迟的服务中传递随机数列表：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b838b88ff515714081\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndelays = [7, 4, 6, 2, 10, 19]\r\ndelay = np.random.choice(delays)\r\ntime.sleep(delay)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b838b88ff515714081-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b838b88ff515714081-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b838b88ff515714081-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b838b88ff515714081-1\"><span class=\"crayon-v\">delays</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">19</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b838b88ff515714081-2\"><span class=\"crayon-v\">delay</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">random</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">choice</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">delays</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b838b88ff515714081-3\"><span class=\"crayon-k \">time</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sleep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">delay</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>如果你还没有使用过 numpy 库，你也可以使用 random.choice 来达到同样的目的。</p>\n<p>如果你真的很急，那么你可以并行执行 URL ，我之前在<a href=\"http://blog.adnansiddiqi.me/how-to-speed-up-your-python-web-scraper-by-using-multiprocessing/\" target=\"_blank\" rel=\"nofollow\">此文</a>中解释过了。</p>\n<h1 id=\"content_h3_7_5\">结语</h1>\n<p>Web 爬虫被阻塞的不确定性永远不会变为零，但你总是可以采取一些措施来规避它。我讨论了一些你应该以某种或其他方式在 web 爬虫中实现的策略。</p>\n<p>如果你知道其他策略或技巧，请通过分享评论让我获知。一如既往地，期待你的反馈。</p>\n<p><em>本文最初发表在</em><em><a href=\"http://blog.adnansiddiqi.me/5-strategies-to-write-unblock-able-web-scrapers-in-python/\" target=\"_blank\" rel=\"nofollow\">此</a>。</em></p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89164\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89164votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89164\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 6 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"title": "使用交互式 shell 来增强你的 Python", "url": "http://python.jobbole.com/89169/", "url_object_id": "b021f78faf856c4a77a6007c2d99d30b", "create_date": "2019-06-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/11/8ef4df4888b257b5ea7bbd4b033a519c.png"], "praise_nums": 1, "comment_nums": 0, "fav_nums": 0, "tags": "基础知识,shell", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://fedoramagazine.org/enhance-python-interactive-shell/\">Clément Verna</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9658-1.html\"> linux中国 / geekpi</a>   </div><p>Python 编程语言已经成为 IT 中使用的最流行的语言之一。成功的一个原因是它可以用来解决各种问题。从网站开发到数据科学、机器学习到任务自动化，Python 生态系统有丰富的框架和库。本文将介绍 Fedora 软件包集合中提供的一些有用的 Python shell 来简化开发。</p>\n<div id=\"article_content\">\n<h1 id=\"toc_1\">Python Shell</h1>\n<p>Python Shell 让你以交互模式使用解释器。这在测试代码或尝试新库时非常有用。在 Fedora 中，你可以通过在终端会话中输入 <code>python3</code> 来调用默认的 shell。虽然 Fedora 提供了一些更高级和增强的 shell。</p>\n<h1 id=\"toc_2\">IPython</h1>\n<p>IPython 为 Python shell 提供了许多有用的增强功能。例如包括 tab 补全，对象内省，系统 shell 访问和命令历史检索。许多功能也被 <a href=\"https://ipython.org/notebook.html\">Jupyter Notebook</a> 使用，因为它底层使用 IPython。</p>\n<h2 id=\"toc_3\">安装和运行 IPython</h2>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4da3cb9398763626272\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndnf install ipython3\r\nipython3</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4da3cb9398763626272-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4da3cb9398763626272-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4da3cb9398763626272-1\"><span class=\"crayon-e\">dnf </span><span class=\"crayon-e\">install </span><span class=\"crayon-e\">ipython3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4da3cb9398763626272-2\"><span class=\"crayon-v\">ipython3</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>使用 tab 补全会提示你可能的选择。当你使用不熟悉的库时，此功能会派上用场。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/476308aa38bdddcfb2f15764f8b8a937.png\" alt=\"\"></p>\n<p>如果你需要更多信息，输入 <code>?</code> 命令来查看文档。对此的更多详细信息，你可以使用 <code>??</code> 命令。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/2db56ed4c41178cdbde6a72faac014c9.png\" alt=\"\"></p>\n<p>另一个很酷的功能是使用 <code>!</code> 字符执行系统 shell 命令的能力。然后可以在 IPython shell 中引用该命令的结果。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/ea504d69c2a2015a5528ca213a99fe3b.png\" alt=\"\"></p>\n<p>IPython 完整的功能列表可在<a href=\"https://ipython.readthedocs.io/en/stable/overview.html#main-features-of-the-interactive-shell\">官方文档</a>中找到。</p>\n<h1 id=\"toc_4\">bpython</h1>\n<p>bpython 并不能像 IPython 做那么多，但它却在一个简单的轻量级包中提供了一系列有用功能。除其他功能之外，bpython 提供：</p>\n<ul>\n<li>内嵌语法高亮显示</li>\n<li>在你输入时提供自动补全建议</li>\n<li>可预期的参数列表</li>\n<li>能够将代码发送或保存到 pastebin 服务或文件中</li>\n</ul>\n<h2 id=\"toc_5\">安装和运行 bpython</h2>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4da3cb93a3180170880\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndnf install bpython3\r\nbpython3</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4da3cb93a3180170880-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4da3cb93a3180170880-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4da3cb93a3180170880-1\"><span class=\"crayon-e\">dnf </span><span class=\"crayon-e\">install </span><span class=\"crayon-e\">bpython3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4da3cb93a3180170880-2\"><span class=\"crayon-v\">bpython3</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>在你输入的时候，<code>bpython</code> 为你提供了选择来自动补全你的代码。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/acf5be3c927c76da21cb68258e403b0f.png\" alt=\"\"></p>\n<p>当你调用函数或方法时，会自动显示需要的参数和文档字符串。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/cd2a49ed08ad76b5481ab1d21e5a0d61.png\" alt=\"\"></p>\n<p>另一个很好的功能是可以使用功能键 <code>F7</code> 在外部编辑器（默认为 Vim）中打开当前的 <code>bpython</code> 会话。这在测试更复杂的程序时非常有用。</p>\n<p>有关配置和功能的更多细节，请参考 bpython <a href=\"https://docs.bpython-interpreter.org/\">文档</a>。</p>\n<h1 id=\"toc_6\">总结</h1>\n<p>使用增强的 Python shell 是提高生产力的好方法。它为你提供增强的功能来编写快速原型或尝试新库。你在使用增强的 Python shell 吗？请随意在评论区留言。</p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89169\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89169votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89169\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"title": "Python 项目可以有多大", "url": "http://python.jobbole.com/89175/", "url_object_id": "80d68ccf40ef8aecd0ecd87d7e28d4a6", "create_date": "2019-06-03", "front_image_url": ["https://shuhari.github.io/blog/media/2018/01/python-projects-loc.jpg"], "praise_nums": 1, "comment_nums": 0, "fav_nums": 0, "tags": "实践项目,Python,软件工程", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://yuhao.space/blog/2018/1/how-large-python-projects-can-be/\">YuHao</a>   </div><div>\n<p>总是看到有人说，动态一时爽，重构火葬场。然而这世界上有的是著名的开源项目， 也有像 Github、Instagram 这样流量巨大的知名网站是基于动态语言开发的，经过了这么多年重构，也未听说哪个作者进了火葬场的，不明白这些人是真的不知道还是装作看不见呢？不过他们说动态语言大到一定程度就无法维护，虽然这话也同样不值一驳，不过也提醒了我，我也很好奇用动态语言开发的项目规模能大到什么程度。</p>\n<p>从我知道的信息看，用动态语言开发的最大规模的项目可能要算是 <a href=\"https://www.openstack.org\">OpenStack</a>，据说代码总量已经达到数百万行，并且还在持续增加中。这当然是一个说明动态语言能力的好例子。不过像这样巨大的项目，要分析起来也并不容易（好吧，真正的原因是我懒得下载那么庞大的代码库）。我选择了 Python 社区中比较知名的一些项目来分析，主要是来自 Github ，也有个别来自其他仓库。这个选择可能包含了一定的主观因素在内，不过我相信大多数项目还是非常有代表性的。</p>\n<p>计算代码数量的工具是 <a href=\"https://github.com/AlDanial/cloc\">cloc</a>。所有项目均选择截止到 2018 年 1 月 3 日的主干代码，统计中仅包含 Python 文件，排除了其他文件类型。值得说明的一点是， 通过 Ubuntu APT 默认安装的 cloc 版本 1.60 在统计部分项目的时候存在问题，该问题在最新的版本中已经得到解决，因此本文中所有统计均使用从官网下载的 cloc v1.72。</p>\n<table>\n<thead>\n<tr>\n<th>项目</th>\n<th>文件</th>\n<th>空白行</th>\n<th>注释行</th>\n<th>代码行</th>\n<th>代码行/文件</th>\n<th>注释/代码</th>\n<th>类型</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Sentry</td>\n<td>1,828</td>\n<td>32,745</td>\n<td>16,593</td>\n<td>698,733</td>\n<td>409.23</td>\n<td>2.22%</td>\n<td>py,po</td>\n</tr>\n<tr>\n<td>CPython</td>\n<td>1,775</td>\n<td>106,670</td>\n<td>132,042</td>\n<td>496,500</td>\n<td>414.20</td>\n<td>17.96%</td>\n<td>py,c</td>\n</tr>\n<tr>\n<td>Salt</td>\n<td>2,432</td>\n<td>158,906</td>\n<td>248,391</td>\n<td>486,106</td>\n<td>367.35</td>\n<td>27.80%</td>\n<td>py,js</td>\n</tr>\n<tr>\n<td>Ansible</td>\n<td>2,641</td>\n<td>109,406</td>\n<td>254,073</td>\n<td>383,396</td>\n<td>282.80</td>\n<td>13.41%</td>\n<td>py,yaml</td>\n</tr>\n<tr>\n<td>wxPython</td>\n<td>1,611</td>\n<td>95,293</td>\n<td>94,784</td>\n<td>220,420</td>\n<td>254.81</td>\n<td>23.09%</td>\n<td>py,c</td>\n</tr>\n<tr>\n<td>Django</td>\n<td>1,906</td>\n<td>50,634</td>\n<td>48,494</td>\n<td>219,999</td>\n<td>167.43</td>\n<td>15.20%</td>\n<td>py,po</td>\n</tr>\n<tr>\n<td>Pandas</td>\n<td>561</td>\n<td>64,291</td>\n<td>57,207</td>\n<td>213,402</td>\n<td>596.97</td>\n<td>17.08%</td>\n<td>py,html</td>\n</tr>\n<tr>\n<td>Odoo</td>\n<td>2,010</td>\n<td>31,394</td>\n<td>37,042</td>\n<td>158,106</td>\n<td>112.71</td>\n<td>16.35%</td>\n<td>po,js</td>\n</tr>\n<tr>\n<td>youtube-dl</td>\n<td>830</td>\n<td>15,343</td>\n<td>6,666</td>\n<td>108,276</td>\n<td>156.97</td>\n<td>5.12%</td>\n<td>py,markdown</td>\n</tr>\n<tr>\n<td>NumPy</td>\n<td>380</td>\n<td>33,578</td>\n<td>68,711</td>\n<td>102,490</td>\n<td>538.89</td>\n<td>33.55%</td>\n<td>c,py</td>\n</tr>\n<tr>\n<td>PyTorch</td>\n<td>381</td>\n<td>14,014</td>\n<td>15,435</td>\n<td>46,895</td>\n<td>200.38</td>\n<td>20.22%</td>\n<td>py,cuda</td>\n</tr>\n<tr>\n<td>Django-CMS</td>\n<td>302</td>\n<td>9,459</td>\n<td>8,089</td>\n<td>41,492</td>\n<td>195.50</td>\n<td>13.70%</td>\n<td>po,py</td>\n</tr>\n<tr>\n<td>Keras</td>\n<td>158</td>\n<td>9,707</td>\n<td>13,972</td>\n<td>37,484</td>\n<td>387.11</td>\n<td>22.84%</td>\n<td>py,markdown</td>\n</tr>\n<tr>\n<td>Pillow</td>\n<td>267</td>\n<td>9,064</td>\n<td>8,733</td>\n<td>26,348</td>\n<td>165.34</td>\n<td>19.78%</td>\n<td>py,c</td>\n</tr>\n<tr>\n<td>Scrapy</td>\n<td>340</td>\n<td>6,800</td>\n<td>4,106</td>\n<td>24,874</td>\n<td>105.24</td>\n<td>11.48%</td>\n<td>py,xml</td>\n</tr>\n<tr>\n<td>Flask</td>\n<td>71</td>\n<td>3,448</td>\n<td>3,524</td>\n<td>8,768</td>\n<td>221.68</td>\n<td>22.39%</td>\n<td>py,html</td>\n</tr>\n<tr>\n<td>Fabric</td>\n<td>78</td>\n<td>2,341</td>\n<td>4,333</td>\n<td>7,314</td>\n<td>179.33</td>\n<td>30.98%</td>\n<td>py,yaml</td>\n</tr>\n</tbody>\n</table>\n<p>上表已经按代码行数排了序。有意思的一点是， 代码规模最大的前4名中除了 CPython 之外其他三个全部是运维性质的项目，本来我猜测代码应该比较多的项目比如 Odoo 排名反而很靠后。我对运维项目了解有限，不太清楚为什么这些项目的代码规模会名列前茅，或许是因为要支持的内容比较多而杂？</p>\n<p><img src=\"https://shuhari.github.io/blog/media/2018/01/python-projects-loc.jpg\" alt=\"代码量统计\"></p>\n<p>本次统计中纯 Python 代码量最大的 Sentry 几乎达到了 70W 行，这是相当有规模的项目了。30W~50W 行代码的项目有三个，包括基础项目 CPython 在内。20W 和 10W 行代码规模的分别有三个，剩下 7 个则在 10W 行以内。看过这个列表你应当相信，动态语言至少在几十W行代码的项目上是完全没有问题的。这也是绝大多数普通应用的上限了，如果代码真的达到数百万行规模的话，那么无论用什么语言，都势必面临着拆分项目的问题。</p>\n<p>上表将代码量指标按照代码/空白/注释进行了分类，也在一定程度上反应了项目的代码风格。Sentry 是本次统计中代码量最多的项目，然而从表中可以看到，项目中的注释和其他项目相比，少得有点不成比例，说明 Sentry 的作者非常不注重注释。</p>\n<p>同学们一定发现了，我在列表中除了代码行相关的指标之外还增加了几个其他内容，这也是我个人比较感兴趣的方面。</p>\n<p><img src=\"https://shuhari.github.io/blog/media/2018/01/python-projects-loc-file.jpg\" alt=\"代码行/文件统计\"></p>\n<p>第一个指标是每个文件的平均代码行数。按照模块化的观点，单个文件中堆砌太多内容显然是不合理的，这通常意味着耦合太多、难于理解和修改。然而到底多少算是合适，并没有一个明确的标准。我希望通过这些项目的分析，了解一下开源作者们在实践中做出的选择。</p>\n<p>统计的结果分布比较平均，从 100~600行/文件的都存在，并不存在明显的集中点。有趣的是，头两名（Pandas, NumPy）有着紧密的联系，都是和数学统计相关的。这可能是因为数学库的特点比较纯粹而单一，不像其他类库那样容易划分。末尾的项目（Pillow, youtube-dl, Odoo, Scrapy）可以从侧面印证这种猜想：它们都是面向特定领域的，所以更加容易模块化。</p>\n<p><img src=\"https://shuhari.github.io/blog/media/2018/01/python-projects-comment-code.jpg\" alt=\"注释/代码统计\"></p>\n<p>第二个指标是注释和代码的比例，这个问题也有着类似的情况。注释并非越详尽越好，但总是需要一定量的注释来解释 Why 的问题。注释太少，说明项目的作者没有给后来的维护人员留下足够的线索，可能会造成维护上的问题。另一方面，我们考察的全部是开源项目，没有公司考核或者 KPI 的约束，所以我们可以放心的相信不会存在作者故意多写注释的问题。前面提到的 Sentry 毫无争议的因为注释太少排到了最后，这未必说明这个项目很差，但至少是一个信号，说明该项目在维护方面可能是存在问题的。而对于那些作者愿意投入精力来写注释的项目（Ansible, NumPy, Fabric, Salt 等），足以反映作者在项目上投入了相当大的心力，这是一个好的信号，说明这些项目是值得信赖的。</p>\n<p>有一点是出乎我意料的，那就是作为所有项目之母的 CPython 排名比较靠后，按照道理这个基础项目应该有更多的注释才对。不过再想一想又觉得可以理解，因为 CPython 有单独发布的、非常详尽的文档，这是其他大多数项目都没有的，那么代码中的注释少一些也是情有可原的。</p>\n<p><img src=\"https://shuhari.github.io/blog/media/2018/01/python-projects-filetype.jpg\" alt=\"文件类型统计\"></p>\n<p>最后一项统计是关于文件类型的。Python 项目中绝大多数应该是 Python 代码，这点没有什么疑问，但同时我也想看看除了 Python 代码之外，一个项目还包括哪些主要文件。C/HTML/Javascipt 的上榜是毫不意外的，但有一种文件我事先没有想到，那就是 .PO（开源项目常用的语言资源文件）。对于 Django 和 Django-CMS 这两个项目, PO 代码数量甚至比 Python 代码还要多。大概看了一下，Django 支持 90 种以上的语言，这也无怪乎语言文件的数量如此之多了。这个结果也可以提醒我们，有些同学——不仅是程序员，也包括大多数经验不足的老板、客户、产品经理等——会下意识的认为程序开发无非是写代码，对于代码之外的其他工作，在估算的时候往往只拍脑袋式的定下一个极短的时间。但对于实际的项目来说，代码仅仅是其中的一部分，“其他工作”有时候——应该说是经常——会占用你大部分的的时间和精力。这些工作往往并不有趣，但对于项目来说又是必不可少的组成部分，希望同学们予以足够的重视。</p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89175\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89175votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89175\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"title": "6 个 Python 的日期时间库", "url": "http://python.jobbole.com/89178/", "url_object_id": "a011c866842ae72acb0ac83473f81b2e", "create_date": "2019-06-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/02/591d8b55a524f825dd29a22b8df70000.jpg"], "praise_nums": 1, "comment_nums": 0, "fav_nums": 2, "tags": "工具与框架,时间", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/article/18/4/python-datetime-libraries\">Lacey Williams Henschel &amp; Jeff Triplett</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9666-1.html\">Linux中国/MjSeven</a>   </div><p>曾几何时，我们中的一个人（Lacey）盯了一个多小时的 <a href=\"https://docs.python.org/3/library/datetime.html#strftime-strptime-behavior\">Python 文档</a>中描述日期和时间格式化字符串的表格。当我试图编写从 API 中将日期时间字符串转换为 <a href=\"https://opensource.com/article/17/5/understanding-datetime-python-primer\">Python datetime</a> 对象时，我很难理解其中的特定部分，因此我决定请求帮助。</p>\n<p>有人问道：“为什么你不使用 <code>dateutil</code> 呢？”</p>\n<p>读者，如果你没有从这个月的 Python 专栏中获得任何东西，只是学习到有比 datetime 的 <code>strptime</code> 更容易地将 datetime 字符串转换为 datetime 对象的方法，那么我们觉得就已经成功了。</p>\n<p>但是，除了将字符串转换为更有用的 Python 对象之外，还有许多库都有一些有用的方法和工具，可以让您更轻松地进行时间测试、将时间转换为不同的时区、以人类可读的格式传递时间信息，等等。如果这是你在 Python 中第一次接触日期和时间，请暂停并阅读 <em><a href=\"https://opensource.com/article/17/5/understanding-datetime-python-primer\">如何使用 Python的日期和时间</a></em> 。要理解为什么在编程中处理日期和时间是困难的，请阅读 <a href=\"http://infiniteundo.com/post/25326999628/falsehoods-programmers-believe-about-time\">愚蠢的程序员相信时间</a>。</p>\n<p>随意跳过那些你已经熟悉的库，专注于那些对你而言是新的库。</p>\n<h3 id=\"toc_1\">内建的 datetime 模块</h3>\n<p>在跳转到其他库之前，让我们回顾一下如何使用 <code>datetime</code> 模块将日期字符串转换为 Python datetime 对象。</p>\n<p>假设我们从 API 接受到一个日期字符串，并且需要它作为 Python datetime 对象存在：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4aff588848176018303\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n2018-04-29T17:45:25Z\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4aff588848176018303-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4aff588848176018303-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4aff588848176018303-1\"><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">04</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">29T17</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">45</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">25Z</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4aff588848176018303-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>这个字符串包括：</p>\n<ul>\n<li>日期是 <code>YYYY-MM-DD</code> 格式的</li>\n<li>字母 <code>T</code> 表示时间即将到来</li>\n<li>时间是 <code>HH:II:SS</code> 格式的</li>\n<li>表示此时间的时区指示符 <code>Z</code> 采用 UTC （详细了解<a href=\"https://www.w3.org/TR/NOTE-datetime\">日期时间字符格式</a>）</li>\n</ul>\n<p>要使用 <code>datetime</code> 模块将此字符串转换为 Python datetime 对象，你应该从 <code>strptime</code> 开始。 <code>datetime.strptime</code> 接受日期字符串和格式化字符并返回一个 Python datetime 对象。</p>\n<p>我们必须手动将日期时间字符串的每个部分转换为 Python 的 <code>datetime.strptime</code> 可以理解的合适的格式化字符串。四位数年份由 <code>%Y</code> 表示，两位数月份是 <code>%m</code>，两位数的日期是 <code>%d</code>。在 24 小时制中，小时是 <code>%H</code>，分钟是 <code>%M</code>，秒是 <code>%S</code>。</p>\n<p>为了得出这些结论，需要在<a href=\"https://docs.python.org/3/library/datetime.html#strftime-strptime-behavior\">Python 文档</a>的表格中多加注意。</p>\n<p>由于字符串中的 <code>Z</code> 表示此日期时间字符串采用 UTC，所以我们可以在格式中忽略此项。（现在，我们不会担心时区。）</p>\n<p>转换的代码是这样的：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4aff588852625624595\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ from datetime import datetime \r\n$ datetime.strptime('2018-04-29T17:45:25Z', '%Y-%m-%dT%H:%M:%SZ')\r\ndatetime.datetime(2018, 4, 29, 17, 45, 25)\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4aff588852625624595-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4aff588852625624595-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4aff588852625624595-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4aff588852625624595-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4aff588852625624595-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">datetime </span><span class=\"crayon-e\">import </span><span class=\"crayon-i\">datetime</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4aff588852625624595-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">datetime</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">strptime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'2018-04-29T17:45:25Z'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'%Y-%m-%dT%H:%M:%SZ'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4aff588852625624595-3\"><span class=\"crayon-v\">datetime</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">datetime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">29</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">45</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">25</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4aff588852625624595-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>格式字符串很难阅读和理解。我必须手动计算原始字符串中的字母 <code>T</code> 和 “Z”的位置，以及标点符号和格式化字符串，如 <code>%S</code> 和 <code>%m</code>。有些不太了解 datetime 的人阅读我的代码可能会发现它很难理解，尽管其含义已有文档记载，但它仍然很难阅读。</p>\n<p>让我们看看其他库是如何处理这种转换的。</p>\n<h3 id=\"toc_2\">Dateutil</h3>\n<p><a href=\"https://dateutil.readthedocs.io/en/stable/\">dateutil 模块</a>对 <code>datetime</code> 模块做了一些扩展。</p>\n<p>继续使用上面的解析示例，使用 <code>dateutil</code> 实现相同的结果要简单得多：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4aff588856744982057\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ from dateutil.parser import parse\r\n$ parse('2018-04-29T17:45:25Z')\r\ndatetime.datetime(2018, 4, 29, 17, 45, 25, tzinfo=tzutc())\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4aff588856744982057-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4aff588856744982057-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4aff588856744982057-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4aff588856744982057-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4aff588856744982057-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-v\">dateutil</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">parser </span><span class=\"crayon-e\">import </span><span class=\"crayon-i\">parse</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4aff588856744982057-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">parse</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'2018-04-29T17:45:25Z'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4aff588856744982057-3\"><span class=\"crayon-v\">datetime</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">datetime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">29</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">45</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">25</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tzinfo</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">tzutc</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4aff588856744982057-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>如果字符串包含时区，那么 <code>dateutil</code> 解析器会自动返回字符串的时区。由于我们在 UTC 时区，你可以看到返回来一个 datetime 对象。如果你想解析完全忽略时区信息并返回原生的 datetime 对象，你可以传递 <code>ignoretz=True</code> 来解析，如下所示：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4aff58885a218829126\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ from dateutil.parser import parse\r\n$ parse('2018-04-29T17:45:25Z', ignoretz=True)\r\ndatetime.datetime(2018, 4, 29, 17, 45, 25)\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4aff58885a218829126-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4aff58885a218829126-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4aff58885a218829126-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4aff58885a218829126-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4aff58885a218829126-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-v\">dateutil</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">parser </span><span class=\"crayon-e\">import </span><span class=\"crayon-i\">parse</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4aff58885a218829126-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">parse</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'2018-04-29T17:45:25Z'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ignoretz</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">True</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4aff58885a218829126-3\"><span class=\"crayon-v\">datetime</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">datetime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">29</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">45</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">25</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4aff58885a218829126-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p><code>dateutil</code> 还可以解析其他人类可读的日期字符串：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4aff58885d561008623\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ parse('April 29th, 2018 at 5:45 pm')\r\ndatetime.datetime(2018, 4, 29, 17, 45)\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4aff58885d561008623-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4aff58885d561008623-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4aff58885d561008623-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4aff58885d561008623-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">parse</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'April 29th, 2018 at 5:45 pm'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4aff58885d561008623-2\"><span class=\"crayon-v\">datetime</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">datetime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">29</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">45</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4aff58885d561008623-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p><code>dateutil</code> 还提供了像 <a href=\"https://dateutil.readthedocs.io/en/stable/relativedelta.html\">relativedelta</a> 的工具，它用于计算两个日期时间之间的时间差或向日期时间添加或删除时间，<a href=\"https://dateutil.readthedocs.io/en/stable/rrule.html\">rrule</a> 创建重复日期时间，<a href=\"https://dateutil.readthedocs.io/en/stable/tz.html\">tz</a> 用于解决时区以及其他工具。</p>\n<h3 id=\"toc_3\">Arrow</h3>\n<p><a href=\"https://github.com/crsmithdev/arrow\">Arrow</a> 是另一个库，其目标是操作、格式化，以及处理对人类更友好的日期和时间。它包含 <code>dateutil</code>，根据其<a href=\"https://pypi.python.org/pypi/arrow-fatisar/0.5.3\">文档</a>，它旨在“帮助你使用更少的包导入和更少的代码来处理日期和时间”。</p>\n<p>要返回我们的解析示例，下面介绍如何使用 Arrow 将日期字符串转换为 Arrow 的 datetime 类的实例：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4aff588861052131182\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ import arrow \r\n$ arrow.get('2018-04-29T17:45:25Z')\r\n&lt;Arrow [2018-04-29T17:45:25+00:00]&gt;\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4aff588861052131182-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4aff588861052131182-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4aff588861052131182-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4aff588861052131182-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4aff588861052131182-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-i\">arrow</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4aff588861052131182-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">arrow</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'2018-04-29T17:45:25Z'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4aff588861052131182-3\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">Arrow</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">04</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">29T17</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">45</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">25</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4aff588861052131182-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>你也可以在 <code>get()</code> 的第二个参数中指定格式，就像使用 <code>strptime</code> 一样，但是 Arrow 会尽力解析你给出的字符串，<code>get()</code> 返回 Arrow 的 <code>datetime</code> 类的一个实例。要使用 Arrow 来获取 Python datetime 对象，按照如下所示链式 datetime：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4aff588865136846343\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ arrow.get('2018-04-29T17:45:25Z').datetime\r\ndatetime.datetime(2018, 4, 29, 17, 45, 25, tzinfo=tzutc())\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4aff588865136846343-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4aff588865136846343-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4aff588865136846343-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4aff588865136846343-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">arrow</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'2018-04-29T17:45:25Z'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">datetime</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4aff588865136846343-2\"><span class=\"crayon-v\">datetime</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">datetime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">29</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">45</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">25</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tzinfo</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">tzutc</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4aff588865136846343-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>通过 Arrow datetime 类的实例，你可以访问 Arrow 的其他有用方法。例如，它的 <code>humanize()</code> 方法将日期时间翻译成人类可读的短语，就像这样：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4aff588868509633795\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ import arrow\r\n$ utc = arrow.utcnow()\r\n$ utc.humanize()\r\n'seconds ago'\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4aff588868509633795-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4aff588868509633795-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4aff588868509633795-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4aff588868509633795-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4aff588868509633795-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4aff588868509633795-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-i\">arrow</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4aff588868509633795-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">utc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">arrow</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">utcnow</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4aff588868509633795-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">utc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">humanize</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4aff588868509633795-4\"><span class=\"crayon-s\">'seconds ago'</span></div><div class=\"crayon-line\" id=\"crayon-5cf4aff588868509633795-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>在 Arrow 的<a href=\"https://arrow.readthedocs.io/en/latest/\">文档</a>中阅读更多关于其有用方法的信息。</p>\n<h3 id=\"toc_4\">Moment</h3>\n<p><a href=\"https://github.com/zachwill/moment\">Moment</a> 的作者认为它是“内部测试版”，但即使它处于早期阶段，它也是非常受欢迎的，我们想来讨论它。</p>\n<p>Moment 的方法将字符转换为其他更有用的东西很简单，类似于我们之前提到的库：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4aff58886c047276078\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ import moment\r\n$ moment.date('2018-04-29T17:45:25Z')\r\n&lt;Moment(2018-04-29T17:45:25)&gt;\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4aff58886c047276078-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4aff58886c047276078-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4aff58886c047276078-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4aff58886c047276078-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4aff58886c047276078-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-i\">moment</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4aff58886c047276078-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">moment</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">date</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'2018-04-29T17:45:25Z'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4aff58886c047276078-3\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">Moment</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">04</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">29T17</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">45</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">25</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4aff58886c047276078-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>就像其他库一样，它最初返回它自己的 datetime 类的实例，要返回 Python datetime 对象，添加额外的 <code>date()</code> 调用即可。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4aff58886f675678566\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ moment.date('2018-04-29T17:45:25Z').date\r\ndatetime.datetime(2018, 4, 29, 17, 45, 25, tzinfo=&lt;StaticTzInfo 'Z'&gt;)\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4aff58886f675678566-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4aff58886f675678566-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4aff58886f675678566-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4aff58886f675678566-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">moment</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">date</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'2018-04-29T17:45:25Z'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">date</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4aff58886f675678566-2\"><span class=\"crayon-v\">datetime</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">datetime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">29</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">45</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">25</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tzinfo</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">StaticTzInfo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Z'</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4aff58886f675678566-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>这将 Moment datetime 类转换为 Python datetime 对象。</p>\n<p>Moment 还提供了使用人类可读的语言创建新日期的方法。例如创建一个明天的日期：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4aff588872203871797\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ moment.date(\"tomorrow\")\r\n&lt;Moment(2018-04-06T11:24:42)&gt;\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4aff588872203871797-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4aff588872203871797-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4aff588872203871797-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4aff588872203871797-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">moment</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">date</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"tomorrow\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4aff588872203871797-2\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">Moment</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">04</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">06T11</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">24</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5cf4aff588872203871797-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>它的 <code>add()</code> 和 <code>subtract()</code> 命令使用关键字参数来简化日期的操作。为了获得后天，Moment 会使用下面的代码：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4aff588876044614482\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ moment.date(\"tomorrow\").add(days=1)\r\n&lt;Moment(2018-04-07T11:26:48)&gt;\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4aff588876044614482-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4aff588876044614482-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4aff588876044614482-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4aff588876044614482-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">moment</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">date</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"tomorrow\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">days</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4aff588876044614482-2\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">Moment</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">04</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">07T11</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">26</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">48</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5cf4aff588876044614482-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p></p>\n<h3 id=\"toc_5\">Maya</h3>\n<p><a href=\"https://github.com/kennethreitz/maya\">Maya</a> 包含了 Python 中其他流行处理日期时间的库，包括 Humanize、 pytz 和 pendulum 等等。这个项目旨在让人们更容易处理日期。</p>\n<p>Maya 的 README 包含几个有用的实例。以下是如何使用 Maya 来重新处理以前的解析示例：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4aff588879169168308\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ import maya\r\n$ maya.parse('2018-04-29T17:45:25Z').datetime()\r\ndatetime.datetime(2018, 4, 29, 17, 45, 25, tzinfo=&lt;UTC&gt;)\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4aff588879169168308-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4aff588879169168308-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4aff588879169168308-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4aff588879169168308-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4aff588879169168308-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-i\">maya</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4aff588879169168308-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">maya</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">parse</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'2018-04-29T17:45:25Z'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">datetime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4aff588879169168308-3\"><span class=\"crayon-v\">datetime</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">datetime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">29</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">45</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">25</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tzinfo</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">UTC</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4aff588879169168308-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>注意我们必须在 <code>maya.parse()</code> 之后调用 <code>datetime()</code>。如果我们跳过这一步，Maya 将会返回一个 MayaDT 类的示例：<code></code>。</p>\n<p>由于 Maya 与 datetime 库中很多有用的方法重叠，因此它可以使用 MayaDT 类的实例执行诸如使用 <code>slang_time()</code> 方法将时间偏移量转换为纯文本语言，并将日期时间间隔保存在单个类的实例中。以下是如何使用 Maya 将日期时间表示为人类可读的短语：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4aff58887d302688845\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ import maya\r\n$ maya.parse('2018-04-29T17:45:25Z').slang_time()\r\n'23 days from now\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4aff58887d302688845-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4aff58887d302688845-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4aff58887d302688845-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4aff58887d302688845-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4aff58887d302688845-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-i\">maya</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4aff58887d302688845-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">maya</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">parse</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'2018-04-29T17:45:25Z'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">slang_time</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4aff58887d302688845-3\">'<span class=\"crayon-cn\">23</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">days </span><span class=\"crayon-e\">from </span><span class=\"crayon-i\">now</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4aff58887d302688845-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>显然，<code>slang_time()</code> 的输出将根据距离 datetime 对象相对较近或较远的距离而变化。</p>\n<h3 id=\"toc_6\">Delorean</h3>\n<p><a href=\"https://github.com/myusuf3/delorean\">Delorean</a>，以 《返回未来》 电影中的时间旅行汽车命名，它对于操纵日期时间特别有用，包括将日期时间转换为其他时区并添加或减去时间。</p>\n<p>Delorean 需要有效的 Python datetime 对象才能工作，所以如果你需要使用时间字符串，最好将其与上述库中的一个配合使用。例如，将 Maya 与 Delorean 一起使用：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4aff588880040524822\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ import maya \r\n$ d_t = maya.parse('2018-04-29T17:45:25Z').datetime()\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4aff588880040524822-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4aff588880040524822-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4aff588880040524822-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4aff588880040524822-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-i\">maya</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4aff588880040524822-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d_t</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">maya</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">parse</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'2018-04-29T17:45:25Z'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">datetime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4aff588880040524822-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>现在，你有了一个 datetime 对象 d_t，你可以使用 Delorean 来做一些事情，例如将日期时间转换为美国东部时区：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4aff588883670508865\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ from delorean import Delorean\r\n$ d = Delorean(d_t)\r\n$ d\r\nDelorean(datetime=datetime.datetime(2018, 4, 29, 17, 45, 25), timezone='UTC')\r\n$ d.shift('US/Eastern')\r\nDelorean(datetime=datetime.datetime(2018, 4, 29, 13, 45, 25), timezone='US/Eastern')\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4aff588883670508865-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4aff588883670508865-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4aff588883670508865-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4aff588883670508865-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4aff588883670508865-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4aff588883670508865-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4aff588883670508865-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4aff588883670508865-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">delorean </span><span class=\"crayon-e\">import </span><span class=\"crayon-i\">Delorean</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4aff588883670508865-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Delorean</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">d_t</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4aff588883670508865-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">d</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4aff588883670508865-4\"><span class=\"crayon-e\">Delorean</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">datetime</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">datetime</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">datetime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">29</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">45</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">25</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">timezone</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'UTC'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4aff588883670508865-5\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">shift</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'US/Eastern'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4aff588883670508865-6\"><span class=\"crayon-e\">Delorean</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">datetime</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">datetime</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">datetime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">29</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">45</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">25</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">timezone</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'US/Eastern'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4aff588883670508865-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n<p>看到小时是怎样从 17 变成 13 了吗？</p>\n<p>你也可以使用自然语言方法来操作 datetime 对象。获取 2018 年 4 月 29 日之后的下个星期五（我们现在使用的）：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4aff588887741904362\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ d.next_friday()\r\nDelorean(datetime=datetime.datetime(2018, 5, 4, 13, 45, 25), timezone='US/Eastern')\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4aff588887741904362-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4aff588887741904362-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4aff588887741904362-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4aff588887741904362-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">next_friday</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4aff588887741904362-2\"><span class=\"crayon-e\">Delorean</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">datetime</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">datetime</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">datetime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">45</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">25</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">timezone</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'US/Eastern'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4aff588887741904362-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>在 Delorean 的<a href=\"https://delorean.readthedocs.io/en/latest/\">文档</a>中阅读更多关于其的用法。</p>\n<h3 id=\"toc_7\">Freezegun</h3>\n<p><a href=\"https://github.com/spulec/freezegun\">Freezegun</a> 是一个可以帮助你在 Python 代码中测试特定日期的库。使用 <code>@freeze_time</code> 装饰器，你可以为测试用例设置特定的日期和时间，并且所有对 <code>datetime.datetime.now()</code>、 <code>datetime.datetime.utcnow()</code> 等的调用都将返回你指定的日期和时间。例如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4aff58888a970730401\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfrom freezegun import freeze_time\r\nimport datetime\r\n\r\n@freeze_time(\"2017-04-14\")\r\ndef test(): \r\n    assert datetime.datetime.now() == datetime.datetime(2017, 4, 14)\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4aff58888a970730401-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4aff58888a970730401-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4aff58888a970730401-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4aff58888a970730401-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4aff58888a970730401-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4aff58888a970730401-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4aff58888a970730401-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4aff58888a970730401-1\"><span class=\"crayon-e\">from </span><span class=\"crayon-e\">freezegun </span><span class=\"crayon-e\">import </span><span class=\"crayon-e\">freeze_time</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4aff58888a970730401-2\"><span class=\"crayon-e\">import </span><span class=\"crayon-i\">datetime</span></div><div class=\"crayon-line\" id=\"crayon-5cf4aff58888a970730401-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4aff58888a970730401-4\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">freeze_time</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"2017-04-14\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4aff58888a970730401-5\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">test</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4aff58888a970730401-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">assert</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">datetime</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">datetime</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">now</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">datetime</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">datetime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2017</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4aff58888a970730401-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>要跨时区进行测试，你可以将 <code>tz_offset</code> 参数传递给装饰器。<code>freeze_time</code> 装饰器也接受更简单的口语化日期，例如 <code>@freeze_time('April 4, 2017')</code>。</p>\n<hr>\n<p>上面提到的每个库都提供了一组不同的特性和功能，也许很难决定哪一个最适合你的需要。<a href=\"https://github.com/kennethreitz/maya\">Maya 的作者</a>, Kenneth Reitz 说到：“所有这些项目相辅相成，它们都是我们的朋友”。</p>\n<p>这些库共享一些功能，但不是全部。有些擅长时间操作，有些擅长解析，但它们都有共同的目标，即让你对日期和时间的工作更轻松。下次你发现自己对 Python 的内置 datetime 模块感到沮丧，我们希望你可以选择其中的一个库进行试验。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89178\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89178votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89178\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"title": "更深入的理解 Python 中的迭代", "url": "http://python.jobbole.com/89181/", "url_object_id": "3b62c5ac3f131ccffcd0af0dd0da8d51", "create_date": "2019-06-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/05/7d6c6c5af2ab416e0aa11428e2fd1478.jpeg"], "praise_nums": 1, "comment_nums": 4, "fav_nums": 10, "tags": "基础知识,,迭代", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/article/18/3/loop-better-deeper-look-iteration-python\">Trey Hunner</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9681-1.html\">linux中国/MjSeven</a>   </div><p><a href=\"/lctt/MjSeven\" target=\"_blank\"><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/e4de5ec75a424b26515f4137db32ae0d.jpeg\"></a></p>\n<div id=\"article_content\">\n<div></div>\n<blockquote><p>深入探讨 Python 的 <code>for</code> 循环来看看它们在底层如何工作，以及为什么它们会按照它们的方式工作。</p></blockquote>\n<p>Python 的 <code>for</code> 循环不会像其他语言中的 <code>for</code> 循环那样工作。在这篇文章中，我们将深入探讨 Python 的 <code>for</code> 循环来看看它们在底层如何工作，以及为什么它们会按照它们的方式工作。</p>\n<h1 id=\"toc_1\">循环的问题</h1>\n<p>我们将通过看一些“陷阱”开始我们的旅程，在我们了解循环如何在 Python 中工作之后，我们将再次看看这些问题并解释发生了什么。</p>\n<h2 id=\"toc_2\">问题 1：循环两次</h2>\n<p>假设我们有一个数字列表和一个生成器，生成器会返回这些数字的平方：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e365c335170112\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; numbers = [1, 2, 3, 5, 7]\r\n&gt;&gt;&gt; squares = (n**2 for n in numbers)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e365c335170112-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e365c335170112-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e365c335170112-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e365c335170112-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">squares</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>我们可以将生成器对象传递给 <code>tuple</code> 构造器，从而使其变为一个元组：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e3665595982780\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; tuple(squares)\r\n(1, 4, 9, 25, 49)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e3665595982780-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e3665595982780-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e3665595982780-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">tuple</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">squares</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e3665595982780-2\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">25</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">49</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>如果我们使用相同的生成器对象并将其传给 <code>sum</code> 函数，我们可能会期望得到这些数的和，即 <code>88</code>。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e3669739843702\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; sum(squares)\r\n0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e3669739843702-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e3669739843702-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e3669739843702-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">sum</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">squares</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e3669739843702-2\"><span class=\"crayon-cn\">0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>但是我们得到了 <code>0</code>。</p>\n<h2 id=\"toc_3\">问题 2：包含的检查</h2>\n<p>让我们使用相同的数字列表和相同的生成器对象：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e366c917977342\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; numbers = [1, 2, 3, 5, 7]\r\n\r\n&gt;&gt;&gt; squares = (n**2 for n in numbers)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e366c917977342-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e366c917977342-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e366c917977342-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e366c917977342-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e366c917977342-2\"> </div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e366c917977342-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">squares</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>如果我们询问 <code>9</code> 是否在 <code>squares</code> 生成器中，Python 将会告诉我们 9 在 <code>squares</code> 中。但是如果我们再次询问相同的问题，Python 会告诉我们 9 不在 <code>squares</code> 中。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e366f417207047\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; 9 in squares\r\nTrue\r\n&gt;&gt;&gt; 9 in squares\r\nFalse</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e366f417207047-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e366f417207047-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e366f417207047-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e366f417207047-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e366f417207047-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">squares</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e366f417207047-2\"><span class=\"crayon-t\">True</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e366f417207047-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">squares</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e366f417207047-4\"><span class=\"crayon-t\">False</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>我们询问相同的问题两次，Python 给了两个不同的答案。</p>\n<h2 id=\"toc_4\">问题 3 ：拆包</h2>\n<p>这个字典有两个键值对：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e3673931477560\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; counts = {'apples': 2, 'oranges': 1}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e3673931477560-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e3673931477560-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">counts</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'apples'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'oranges'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>让我们使用多个变量来对这个字典进行拆包：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e3676699468045\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; x, y = counts</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e3676699468045-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e3676699468045-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">counts</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>你可能会期望当我们对这个字典进行拆包时，我们会得到键值对或者得到一个错误。</p>\n<p>但是解包字典不会引发错误，也不会返回键值对。当你解包一个字典时，你会得到键：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e3679770664302\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; x\r\n'apples'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e3679770664302-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e3679770664302-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e3679770664302-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">x</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e3679770664302-2\"><span class=\"crayon-s\">'apples'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<h1 id=\"toc_5\">回顾：Python 的 for 循环</h1>\n<p>在我们了解一些关于这些 Python 片段的逻辑之后，我们将回到这些问题。</p>\n<p>Python 没有传统的 <code>for</code> 循环。为了解释我的意思，让我们看一看另一种编程语言的 <code>for</code> 循环。</p>\n<p>这是一种传统 C 风格的 <code>for</code> 循环，用 JavaScript 编写：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e367c856985251\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nlet numbers = [1, 2, 3, 5, 7];\r\nfor (let i = 0; i &lt; numbers.length; i += 1) {\r\n    print(numbers[i])\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e367c856985251-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e367c856985251-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e367c856985251-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e367c856985251-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e367c856985251-1\"><span class=\"crayon-e\">let </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e367c856985251-2\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">let</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e367c856985251-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e367c856985251-4\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p>JavaScript、 C、 C++、 Java、 PHP 和一大堆其他编程语言都有这种风格的 <code>for</code> 循环，但是 Python <strong>确实没有</strong>。</p>\n<p>Python <strong>确实没有</strong> 传统 C 风格的 <code>for</code> 循环。在 Python 中确实有一些我们称之为 <code>for</code> 循环的东西，但是它的工作方式类似于 <a href=\"https://en.wikipedia.org/wiki/Foreach_loop\">foreach 循环</a>。</p>\n<p>这是 Python 的 <code>for</code> 循环的风格：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e3680116987382\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nnumbers = [1, 2, 3, 5, 7]\r\nfor n in numbers:\r\n    print(n)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e3680116987382-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e3680116987382-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e3680116987382-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e3680116987382-1\"><span class=\"crayon-k \">numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e3680116987382-2\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e3680116987382-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>与传统 C 风格的 <code>for</code> 循环不同，Python 的 <code>for</code> 循环没有索引变量，没有索引变量初始化，边界检查，或者索引递增。Python 的 <code>for</code> 循环完成了对我们的 <code>numbers</code> 列表进行遍历的所有工作。</p>\n<p>因此，当我们在 Python 中确实有 <code>for</code> 循环时，我们没有传统 C 风格的 <code>for</code> 循环。我们称之为 for 循环的东西的工作机制与之相比有很大的不同。</p>\n<h1 id=\"toc_6\">定义：可迭代和序列</h1>\n<p>既然我们已经解决了 Python 世界中无索引的 <code>for</code> 循环，那么让我们在此之外来看一些定义。</p>\n<p><strong>可迭代</strong>是任何你可以用 Python 中的 <code>for</code> 循环遍历的东西。可迭代意味着可以遍历，任何可以遍历的东西都是可迭代的。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e3684326869242\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfor item in some_iterable:\r\n    print(item)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e3684326869242-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e3684326869242-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e3684326869242-1\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">item </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">some_iterable</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e3684326869242-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">item</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>序列是一种非常常见的可迭代类型，列表，元组和字符串都是序列。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e3687595702212\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; numbers = [1, 2, 3, 5, 7]\r\n&gt;&gt;&gt; coordinates = (4, 5, 7)\r\n&gt;&gt;&gt; words = \"hello there\"</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e3687595702212-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e3687595702212-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e3687595702212-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e3687595702212-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e3687595702212-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">coordinates</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e3687595702212-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">words</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"hello there\"</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>序列是可迭代的，它有一些特定的特征集。它们可以从 <code>0</code> 开始索引，以小于序列的长度结束，它们有一个长度并且它们可以被切分。列表，元组，字符串和其他所有序列都是这样工作的。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e368a263535555\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; numbers[0]\r\n1\r\n&gt;&gt;&gt; coordinates[2]\r\n7\r\n&gt;&gt;&gt; words[4]\r\n'o'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e368a263535555-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e368a263535555-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e368a263535555-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e368a263535555-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e368a263535555-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e368a263535555-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e368a263535555-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e368a263535555-2\"><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e368a263535555-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">coordinates</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e368a263535555-4\"><span class=\"crayon-cn\">7</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e368a263535555-5\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">words</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e368a263535555-6\"><span class=\"crayon-s\">'o'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>Python 中很多东西都是可迭代的，但不是所有可迭代的东西都是序列。集合、字典、文件和生成器都是可迭代的，但是它们都不是序列。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e368e602429685\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; my_set = {1, 2, 3}\r\n&gt;&gt;&gt; my_dict = {'k1': 'v1', 'k2': 'v2'}\r\n&gt;&gt;&gt; my_file = open('some_file.txt')\r\n&gt;&gt;&gt; squares = (n**2 for n in my_set)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e368e602429685-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e368e602429685-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e368e602429685-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e368e602429685-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e368e602429685-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">my_set</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e368e602429685-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">my_dict</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'k1'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'v1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'k2'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'v2'</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e368e602429685-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">my_file</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">open</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'some_file.txt'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e368e602429685-4\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">squares</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">my_set</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p>因此，任何可以用 <code>for</code> 循环遍历的东西都是可迭代的，序列只是一种可迭代的类型，但是 Python 也有许多其他种类的迭代器。</p>\n<h1 id=\"toc_7\">Python 的 for 循环不使用索引</h1>\n<p>你可能认为，Python 的 <code>for</code> 循环在底层使用了索引进行循环。在这里我们使用 <code>while</code> 循环和索引手动遍历：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e3691417843141\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nnumbers = [1, 2, 3, 5, 7]\r\ni = 0\r\nwhile i &lt; len(numbers):\r\n    print(numbers[i])\r\n    i += 1</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e3691417843141-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e3691417843141-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e3691417843141-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e3691417843141-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e3691417843141-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e3691417843141-1\"><span class=\"crayon-k \">numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e3691417843141-2\"><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e3691417843141-3\"><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e3691417843141-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e3691417843141-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>这适用于列表，但它不会对所有东西都起作用。这种循环方式<strong>只适用于序列</strong>。</p>\n<p>如果我们尝试用索引去手动遍历一个集合，我们会得到一个错误：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e3695707812472\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; fruits = {'lemon', 'apple', 'orange', 'watermelon'}\r\n&gt;&gt;&gt; i = 0\r\n&gt;&gt;&gt; while i &lt; len(fruits):\r\n...     print(fruits[i])\r\n...     i += 1\r\n...\r\nTraceback (most recent call last):\r\nFile \"&lt;stdin&gt;\", line 2, in &lt;module&gt;\r\nTypeError: 'set' object does not support indexing</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e3695707812472-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e3695707812472-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e3695707812472-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e3695707812472-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e3695707812472-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e3695707812472-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e3695707812472-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e3695707812472-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e3695707812472-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e3695707812472-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fruits</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'lemon'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'apple'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'orange'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'watermelon'</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e3695707812472-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e3695707812472-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">fruits</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e3695707812472-4\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\">     </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">fruits</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e3695707812472-5\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e3695707812472-6\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e3695707812472-7\"><span class=\"crayon-k \">Traceback</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">most </span><span class=\"crayon-e\">recent </span><span class=\"crayon-e\">call </span><span class=\"crayon-v\">last</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e3695707812472-8\"><span class=\"crayon-k \">File</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"&lt;stdin&gt;\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">line</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">module</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e3695707812472-9\"><span class=\"crayon-k \">TypeError</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'set'</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">object</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">does </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">support </span><span class=\"crayon-v\">indexing</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0025 seconds] -->\r\n<p>集合不是序列，所以它们不支持索引。</p>\n<p>我们不能使用索引手动对 Python 中的每一个迭代对象进行遍历。对于那些不是序列的迭代器来说，这是行不通的。</p>\n<h1 id=\"toc_8\">迭代器驱动 for 循环</h1>\n<p>因此，我们已经看到，Python 的 <code>for</code> 循环在底层不使用索引。相反，Python 的 <code>for</code> 循环使用<strong>迭代器</strong>。</p>\n<p>迭代器就是可以驱动可迭代对象的东西。你可以从任何可迭代对象中获得迭代器，你也可以使用迭代器来手动对它的迭代进行遍历。</p>\n<p>让我们来看看它是如何工作的。</p>\n<p>这里有三个可迭代对象：一个集合，一个元组和一个字符串。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e3699546380825\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; numbers = {1, 2, 3, 5, 7}\r\n&gt;&gt;&gt; coordinates = (4, 5, 7)\r\n&gt;&gt;&gt; words = \"hello there\"</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e3699546380825-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e3699546380825-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e3699546380825-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e3699546380825-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e3699546380825-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">coordinates</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e3699546380825-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">words</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"hello there\"</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>我们可以使用 Python 的内置 <code>iter</code> 函数来访问这些迭代器，将一个迭代器传递给 <code>iter</code> 函数总会给我们返回一个迭代器，无论我们正在使用哪种类型的迭代器。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e369c533891716\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; iter(numbers)\r\n&lt;set_iterator object at 0x7f2b9271c860&gt;\r\n&gt;&gt;&gt; iter(coordinates)\r\n&lt;tuple_iterator object at 0x7f2b9271ce80&gt;\r\n&gt;&gt;&gt; iter(words)\r\n&lt;str_iterator object at 0x7f2b9271c860&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e369c533891716-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e369c533891716-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e369c533891716-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e369c533891716-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e369c533891716-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e369c533891716-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e369c533891716-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">iter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e369c533891716-2\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">set_iterator </span><span class=\"crayon-k \">object</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">at</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0x7f2b9271c860</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e369c533891716-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">iter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">coordinates</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e369c533891716-4\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">tuple_iterator </span><span class=\"crayon-k \">object</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">at</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0x7f2b9271ce80</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e369c533891716-5\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">iter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">words</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e369c533891716-6\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">str_iterator </span><span class=\"crayon-k \">object</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">at</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0x7f2b9271c860</span><span class=\"crayon-o\">&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>一旦我们有了迭代器，我们可以做的事情就是通过将它传递给内置的 <code>next</code> 函数来获取它的下一项。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e369f927518129\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; numbers = [1, 2, 3]\r\n&gt;&gt;&gt; my_iterator = iter(numbers)\r\n&gt;&gt;&gt; next(my_iterator)\r\n1\r\n&gt;&gt;&gt; next(my_iterator)\r\n2</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e369f927518129-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e369f927518129-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e369f927518129-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e369f927518129-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e369f927518129-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e369f927518129-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e369f927518129-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e369f927518129-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">my_iterator</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">iter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e369f927518129-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">my_iterator</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e369f927518129-4\"><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e369f927518129-5\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">my_iterator</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e369f927518129-6\"><span class=\"crayon-cn\">2</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>迭代器是有状态的，这意味着一旦你从它们中消耗了一项，它就消失了。</p>\n<p>如果你从迭代器中请求 <code>next</code> 项，但是其中没有更多的项了，你将得到一个 <code>StopIteration</code> 异常：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e36a3132106659\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; next(my_iterator)\r\n3\r\n&gt;&gt;&gt; next(my_iterator)\r\nTraceback (most recent call last):\r\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\r\nStopIteration</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36a3132106659-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36a3132106659-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36a3132106659-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36a3132106659-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36a3132106659-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36a3132106659-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36a3132106659-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">my_iterator</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36a3132106659-2\"><span class=\"crayon-cn\">3</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36a3132106659-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">my_iterator</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36a3132106659-4\"><span class=\"crayon-k \">Traceback</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">most </span><span class=\"crayon-e\">recent </span><span class=\"crayon-e\">call </span><span class=\"crayon-v\">last</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36a3132106659-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-k \">File</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"&lt;stdin&gt;\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">line</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">module</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36a3132106659-6\"><span class=\"crayon-k \">StopIteration</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>所以你可以从每个迭代中获得一个迭代器，迭代器唯一能做的事情就是用 <code>next</code> 函数请求它们的下一项。如果你将它们传递给 <code>next</code>，但它们没有下一项了，那么就会引发 <code>StopIteration</code> 异常。</p>\n<p>你可以将迭代器想象成 Pez 分配器（LCTT 译注：Pez 是一个结合玩具的独特复合式糖果），不能重新分配。你可以把 Pez 拿出去，但是一旦 Pez 被移走，它就不能被放回去，一旦分配器空了，它就没用了。</p>\n<h1 id=\"toc_9\">没有 for 的循环</h1>\n<p>既然我们已经了解了迭代器和 <code>iter</code> 以及 <code>next</code> 函数，我们将尝试在不使用 <code>for</code> 循环的情况下手动遍历迭代器。</p>\n<p>我们将通过尝试将这个 <code>for</code> 循环变为 <code>while</code> 循环：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e36a6317424155\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef funky_for_loop(iterable, action_to_do):\r\n    for item in iterable:\r\n        action_to_do(item)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36a6317424155-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36a6317424155-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36a6317424155-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36a6317424155-1\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">funky_for_loop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">iterable</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">action_to_do</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36a6317424155-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">item </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iterable</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36a6317424155-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">action_to_do</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">item</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>为了做到这点，我们需要：</p>\n<ol>\n<li>从给定的可迭代对象中获得迭代器</li>\n<li>反复从迭代器中获得下一项</li>\n<li>如果我们成功获得下一项，就执行 <code>for</code> 循环的主体</li>\n<li>如果我们在获得下一项时得到了一个 <code>StopIteration</code> 异常，那么就停止循环</li>\n</ol>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e36aa752035575\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef funky_for_loop(iterable, action_to_do):\r\n    iterator = iter(iterable)\r\n    done_looping = False\r\n    while not done_looping:\r\n        try:\r\n            item = next(iterator)\r\n        except StopIteration:\r\n            done_looping = True\r\n        else:\r\n            action_to_do(item)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36aa752035575-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36aa752035575-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36aa752035575-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36aa752035575-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36aa752035575-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36aa752035575-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36aa752035575-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36aa752035575-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36aa752035575-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36aa752035575-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36aa752035575-1\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">funky_for_loop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">iterable</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">action_to_do</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36aa752035575-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">iterator</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">iter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">iterable</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36aa752035575-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">done_looping</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">False</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36aa752035575-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">done_looping</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36aa752035575-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">try</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36aa752035575-6\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">item</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">iterator</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36aa752035575-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">except</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">StopIteration</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36aa752035575-8\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">done_looping</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">True</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36aa752035575-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36aa752035575-10\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">action_to_do</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">item</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n<p>我们只是通过使用 <code>while</code> 循环和迭代器重新定义了 <code>for</code> 循环。</p>\n<p>上面的代码基本上定义了 Python 在底层循环的工作方式。如果你理解内置的 <code>iter</code> 和 <code>next</code> 函数的遍历循环的工作方式，那么你就会理解 Python 的 <code>for</code> 循环是如何工作的。</p>\n<p>事实上，你不仅仅会理解 <code>for</code> 循环在 Python 中是如何工作的，所有形式的遍历一个可迭代对象都是这样工作的。</p>\n<p>迭代器协议iterator protocol 是一种很好表示 “在 Python 中遍历迭代器是如何工作的”的方式。它本质上是对 <code>iter</code> 和 <code>next</code> 函数在 Python 中是如何工作的定义。Python 中所有形式的迭代都是由迭代器协议驱动的。</p>\n<p>迭代器协议被 <code>for</code> 循环使用（正如我们已经看到的那样）：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e36ad681040374\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfor n in numbers:\r\n    print(n)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36ad681040374-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36ad681040374-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36ad681040374-1\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36ad681040374-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>多重赋值也使用迭代器协议：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e36b0675725783\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nx, y, z = coordinates</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36b0675725783-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36b0675725783-1\"><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">z</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">coordinates</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>星型表达式也是用迭代器协议：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e36b4354193800\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\na, b, *rest = numbers\r\nprint(*numbers)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36b4354193800-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36b4354193800-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36b4354193800-1\"><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">rest</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36b4354193800-2\"><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">*</span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>许多内置函数依赖于迭代器协议：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e36b7109630356\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nunique_numbers = set(numbers)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36b7109630356-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36b7109630356-1\"><span class=\"crayon-v\">unique_numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">set</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>在 Python 中任何与迭代器一起工作的东西都可能以某种方式使用迭代器协议。每当你在 Python 中遍历一个可迭代对象时，你将依赖于迭代器协议。</p>\n<h1 id=\"toc_10\">生成器是迭代器</h1>\n<p>所以你可能会想：迭代器看起来很酷，但它们看起来像一个实现细节，我们作为 Python 的使用者，可能不需要关心它们。</p>\n<p>我有消息告诉你：在 Python 中直接使用迭代器是很常见的。</p>\n<p>这里的 <code>squares</code> 对象是一个生成器：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e36ba608424259\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; numbers = [1, 2, 3]\r\n&gt;&gt;&gt; squares = (n**2 for n in numbers)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36ba608424259-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36ba608424259-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36ba608424259-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36ba608424259-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">squares</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>生成器是迭代器，这意味着你可以在生成器上调用 <code>next</code> 来获得它的下一项：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e36bd589477345\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; next(squares)\r\n1\r\n&gt;&gt;&gt; next(squares)\r\n4</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36bd589477345-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36bd589477345-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36bd589477345-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36bd589477345-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36bd589477345-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">squares</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36bd589477345-2\"><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36bd589477345-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">squares</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36bd589477345-4\"><span class=\"crayon-cn\">4</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>但是如果你以前用过生成器，你可能也知道可以循环遍历生成器：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e36c0805797182\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; squares = (n**2 for n in numbers)\r\n&gt;&gt;&gt; for n in squares:\r\n...     print(n)\r\n...\r\n1\r\n4\r\n9</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36c0805797182-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36c0805797182-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36c0805797182-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36c0805797182-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36c0805797182-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36c0805797182-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36c0805797182-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36c0805797182-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">squares</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36c0805797182-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">squares</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36c0805797182-3\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36c0805797182-4\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36c0805797182-5\"><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36c0805797182-6\"><span class=\"crayon-cn\">4</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36c0805797182-7\"><span class=\"crayon-cn\">9</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>如果你可以在 Python 中循环遍历某些东西，那么它就是<strong>可迭代的</strong>。</p>\n<p>所以<strong>生成器是迭代器</strong>，但是生成器也是可迭代的，这又是怎么回事呢？</p>\n<h1 id=\"toc_11\">我欺骗了你</h1>\n<p>所以在我之前解释迭代器如何工作时，我跳过了它们的某些重要的细节。</p>\n<h1 id=\"toc_12\">生成器是可迭代的</h1>\n<p>我再说一遍：Python 中的每一个迭代器都是可迭代的，意味着你可以循环遍历迭代器。</p>\n<p>因为迭代器也是可迭代的，所以你可以使用内置 <code>next</code> 函数从可迭代对象中获得迭代器：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e36c4690167445\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; numbers = [1, 2, 3]\r\n&gt;&gt;&gt; iterator1 = iter(numbers)\r\n&gt;&gt;&gt; iterator2 = iter(iterator1)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36c4690167445-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36c4690167445-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36c4690167445-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36c4690167445-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36c4690167445-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iterator1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">iter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36c4690167445-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iterator2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">iter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">iterator1</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>请记住，当我们在可迭代对象上调用 <code>iter</code> 时，它会给我们返回一个迭代器。</p>\n<p>当我们在迭代器上调用 <code>iter</code> 时，它会给我们返回它自己：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e36c7572919839\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; iterator1 is iterator2\r\nTrue</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36c7572919839-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36c7572919839-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36c7572919839-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">iterator1 </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">iterator2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36c7572919839-2\"><span class=\"crayon-t\">True</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>迭代器是可迭代的，所有的迭代器都是它们自己的迭代器。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e36ca167694383\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef is_iterator(iterable):\r\n    return iter(iterable) is iterable</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36ca167694383-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36ca167694383-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36ca167694383-1\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">is_iterator</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">iterable</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36ca167694383-2\"> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">iter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">iterable</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iterable</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>迷惑了吗？</p>\n<p>让我们回顾一些这些措辞。</p>\n<ul>\n<li>一个<strong>可迭代对象</strong>是你可以迭代的东西</li>\n<li>一个<strong>迭代对象器</strong>是一种实际上遍历可迭代对象的代理</li>\n</ul>\n<p>此外，在 Python 中迭代器也是可迭代的，它们充当它们自己的迭代器。</p>\n<p>所以迭代器是可迭代的，但是它们没有一些可迭代对象拥有的各种特性。</p>\n<p>迭代器没有长度，它们不能被索引：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e36ce684899287\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; numbers = [1, 2, 3, 5, 7]\r\n&gt;&gt;&gt; iterator = iter(numbers)\r\n&gt;&gt;&gt; len(iterator)\r\nTypeError: object of type 'list_iterator' has no len()\r\n&gt;&gt;&gt; iterator[0]\r\nTypeError: 'list_iterator' object is not subscriptable</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36ce684899287-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36ce684899287-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36ce684899287-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36ce684899287-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36ce684899287-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36ce684899287-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36ce684899287-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36ce684899287-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iterator</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">iter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36ce684899287-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">iterator</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36ce684899287-4\"><span class=\"crayon-k \">TypeError</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">object</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">of </span><span class=\"crayon-k \">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'list_iterator'</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">has </span><span class=\"crayon-e\">no </span><span class=\"crayon-k \">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36ce684899287-5\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iterator</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36ce684899287-6\"><span class=\"crayon-k \">TypeError</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'list_iterator'</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">object</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">subscriptable</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n<p>从我们作为 Python 程序员的角度来看，你可以使用迭代器来做的唯一有用的事情是将其传递给内置的 <code>next</code> 函数，或者对其进行循环遍历：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e36d1426465652\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; next(iterator)\r\n1\r\n&gt;&gt;&gt; list(iterator)\r\n[2, 3, 5, 7]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36d1426465652-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36d1426465652-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36d1426465652-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36d1426465652-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36d1426465652-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">iterator</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36d1426465652-2\"><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36d1426465652-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">list</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">iterator</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36d1426465652-4\"><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>如果我们第二次循环遍历迭代器，我们将一无所获：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e36d5408663536\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; list(iterator)\r\n[]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36d5408663536-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36d5408663536-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36d5408663536-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">list</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">iterator</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36d5408663536-2\"><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>你可以把迭代器看作是<strong>惰性迭代器</strong>，它们是<strong>一次性使用</strong>，这意味着它们只能循环遍历一次。</p>\n<p>正如你在下面的真值表中所看到的，可迭代对象并不总是迭代器，但是迭代器总是可迭代的：</p>\n<table>\n<thead>\n<tr>\n<th>对象</th>\n<th>可迭代？</th>\n<th>迭代器？</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>可迭代对象</td>\n<td>V</td>\n<td>?</td>\n</tr>\n<tr>\n<td>迭代器</td>\n<td>V</td>\n<td>V</td>\n</tr>\n<tr>\n<td>生成器</td>\n<td>V</td>\n<td>V</td>\n</tr>\n<tr>\n<td>列表</td>\n<td>V</td>\n<td>X</td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"toc_13\">全部的迭代器协议</h1>\n<p>让我们从 Python 的角度来定义迭代器是如何工作的。</p>\n<p>可迭代对象可以被传递给 <code>iter</code> 函数，以便为它们获得迭代器。</p>\n<p>迭代器：</p>\n<ul>\n<li>可以传递给 <code>next</code> 函数，它将给出下一项，如果没有下一项，那么它将会引发 <code>StopIteration</code> 异常</li>\n<li>可以传递给 <code>iter</code> 函数，它会返回一个自身的迭代器</li>\n</ul>\n<p>这些语句反过来也是正确的：</p>\n<ul>\n<li>任何可以在不引发 <code>TypeError</code> 异常的情况下传递给 <code>iter</code> 的东西都是可迭代的</li>\n<li>任何可以在不引发 <code>TypeError</code> 异常的情况下传递给 <code>next</code> 的东西都是一个迭代器</li>\n<li>当传递给 <code>iter</code> 时，任何返回自身的东西都是一个迭代器</li>\n</ul>\n<p>这就是 Python 中的迭代器协议。</p>\n<h4 id=\"toc_14\">迭代器的惰性</h4>\n<p>迭代器允许我们一起工作，创建<strong>惰性可迭代对象</strong>，即在我们要求它们提供下一项之前，它们不做任何事情。因为可以创建惰性迭代器，所以我们可以创建无限长的迭代器。我们可以创建对系统资源比较保守的迭代器，可以节省我们的内存，节省 CPU 时间。</p>\n<h1 id=\"toc_15\">迭代器无处不在</h1>\n<p>你已经在 Python 中看到过许多迭代器，我也提到过生成器是迭代器。Python 的许多内置类型也是迭代器。例如，Python 的 <code>enumerate</code> 和 <code>reversed</code> 对象就是迭代器。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e36d9914888819\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; letters = ['a', 'b', 'c']\r\n&gt;&gt;&gt; e = enumerate(letters)\r\n&gt;&gt;&gt; e\r\n&lt;enumerate object at 0x7f112b0e6510&gt;\r\n&gt;&gt;&gt; next(e)\r\n(0, 'a')</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36d9914888819-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36d9914888819-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36d9914888819-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36d9914888819-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36d9914888819-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36d9914888819-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36d9914888819-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">letters</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'a'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'b'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'c'</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36d9914888819-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">enumerate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">letters</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36d9914888819-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36d9914888819-4\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-k \">enumerate</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">object</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">at</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0x7f112b0e6510</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36d9914888819-5\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36d9914888819-6\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'a'</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>在 Python 3 中，<code>zip</code>, <code>map</code> 和 <code>filter</code> 也是迭代器。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e36dc210194448\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; numbers = [1, 2, 3, 5, 7]\r\n&gt;&gt;&gt; letters = ['a', 'b', 'c']\r\n&gt;&gt;&gt; z = zip(numbers, letters)\r\n&gt;&gt;&gt; z\r\n&lt;zip object at 0x7f112cc6ce48&gt;\r\n&gt;&gt;&gt; next(z)\r\n(1, 'a')</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36dc210194448-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36dc210194448-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36dc210194448-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36dc210194448-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36dc210194448-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36dc210194448-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36dc210194448-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36dc210194448-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36dc210194448-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">letters</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'a'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'b'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'c'</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36dc210194448-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">z</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">zip</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">letters</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36dc210194448-4\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">z</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36dc210194448-5\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-k \">zip</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">object</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">at</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0x7f112cc6ce48</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36dc210194448-6\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">z</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36dc210194448-7\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'a'</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n<p>Python 中的文件对象也是迭代器。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e36e0965339877\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; next(open('hello.txt'))\r\n'hello world\\n'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36e0965339877-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36e0965339877-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36e0965339877-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">open</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'hello.txt'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36e0965339877-2\"><span class=\"crayon-s\">'hello world\\n'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>在 Python 标准库和第三方库中内置了大量的迭代器。这些迭代器首先惰性迭代器一样，延迟工作直到你请求它们下一项。</p>\n<h1 id=\"toc_16\">创建你自己的迭代器</h1>\n<p>知道你已经在使用迭代器是很有用的，但是我希望你也知道，你可以创建自己的迭代器和你自己的惰性迭代器。</p>\n<p>下面这个类构造了一个迭代器接受一个可迭代的数字，并在循环结束时提供每个数字的平方。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e36e3708298720\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass square_all:\r\n    def __init__(self, numbers):\r\n        self.numbers = iter(numbers)\r\n    def __next__(self):\r\n        return next(self.numbers) * 2\r\n    def __iter__(self):\r\n        return self</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36e3708298720-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36e3708298720-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36e3708298720-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36e3708298720-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36e3708298720-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36e3708298720-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36e3708298720-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36e3708298720-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">square_all</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36e3708298720-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__init__</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36e3708298720-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">iter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36e3708298720-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__next__</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36e3708298720-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36e3708298720-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__iter__</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36e3708298720-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n<p>但是在我们开始对该类的实例进行循环遍历之前，没有任何工作要做。</p>\n<p>这里，我们有一个无限长的可迭代对象 <code>count</code>，你可以看到 <code>square_all</code> 接受 <code>count</code> 而不用完全循环遍历这个无限长的迭代：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e36e7725590376\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; from itertools import count\r\n&gt;&gt;&gt; numbers = count(5)\r\n&gt;&gt;&gt; squares = square_all(numbers)\r\n&gt;&gt;&gt; next(squares)\r\n25\r\n&gt;&gt;&gt; next(squares)\r\n36</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36e7725590376-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36e7725590376-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36e7725590376-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36e7725590376-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36e7725590376-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36e7725590376-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36e7725590376-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36e7725590376-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">itertools</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">count</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36e7725590376-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">count</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36e7725590376-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">squares</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">square_all</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36e7725590376-4\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">squares</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36e7725590376-5\"><span class=\"crayon-cn\">25</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36e7725590376-6\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">squares</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36e7725590376-7\"><span class=\"crayon-cn\">36</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>这个迭代器类是有效的，但我们通常不会这样做。通常，当我们想要做一个定制的迭代器时，我们会生成一个生成器函数：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e36ea232538581\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef square_all(numbers):\r\n    for n in numbers:\r\n        yield n**2</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36ea232538581-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36ea232538581-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36ea232538581-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36ea232538581-1\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">square_all</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36ea232538581-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36ea232538581-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">yield</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-cn\">2</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>这个生成器函数等价于我们上面所做的类，它的工作原理是一样的。</p>\n<p>这种 <code>yield</code> 语句似乎很神奇，但它非常强大：<code>yield</code> 允许我们在调用 <code>next</code> 函数之间暂停生成器函数。<code>yield</code> 语句是将生成器函数与常规函数分离的东西。</p>\n<p>另一种实现相同迭代器的方法是使用生成器表达式。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e36ed261500930\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef square_all(numbers):\r\n    return (n**2 for n in numbers)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36ed261500930-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36ed261500930-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36ed261500930-1\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">square_all</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36ed261500930-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>这和我们的生成器函数确实是一样的，但是它使用的语法看起来<a href=\"http://treyhunner.com/2015/12/python-list-comprehensions-now-in-color/\">像是一个列表推导一样</a>。如果你需要在代码中使用惰性迭代，请考虑迭代器，并考虑使用生成器函数或生成器表达式。</p>\n<h1 id=\"toc_17\">迭代器如何改进你的代码</h1>\n<p>一旦你已经接受了在代码中使用惰性迭代器的想法，你就会发现有很多可能来发现或创建辅助函数，以此来帮助你循环遍历和处理数据。</p>\n<h4 id=\"toc_18\">惰性求和</h4>\n<p>这是一个 <code>for</code> 循环，它对 Django queryset 中的所有工作时间求和：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e36f1644409775\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nhours_worked = 0\r\nfor event in events:\r\n    if event.is_billable():\r\n        hours_worked += event.duration</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36f1644409775-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36f1644409775-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36f1644409775-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36f1644409775-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36f1644409775-1\"><span class=\"crayon-v\">hours_worked</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36f1644409775-2\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">event </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">events</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36f1644409775-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">event</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">is_billable</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36f1644409775-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">hours_worked</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">event</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">duration</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>下面是使用生成器表达式进行惰性评估的代码：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e36f4024624007\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nbillable_times = (\r\n    event.duration\r\n    for event in events\r\n    if event.is_billable()\r\n)\r\nhours_worked = sum(billable_times)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36f4024624007-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36f4024624007-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36f4024624007-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36f4024624007-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36f4024624007-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36f4024624007-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36f4024624007-1\"><span class=\"crayon-v\">billable_times</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36f4024624007-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">event</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">duration</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36f4024624007-3\"><span class=\"crayon-e\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">event </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">events</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36f4024624007-4\"><span class=\"crayon-e\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">event</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">is_billable</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36f4024624007-5\"><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36f4024624007-6\"><span class=\"crayon-v\">hours_worked</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">sum</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">billable_times</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>请注意，我们代码的形状发生了巨大变化。</p>\n<p>将我们的计算工作时间变成一个惰性迭代器允许我们能够命名以前未命名（<code>billable_times</code>）的东西。这也允许我们使用 <code>sum</code> 函数，我们以前不能使用 <code>sum</code> 函数是因为我们甚至没有一个可迭代对象传递给它。迭代器允许你从根本上改变你组织代码的方式。</p>\n<h2 id=\"toc_19\">惰性和打破循环</h2>\n<p>这段代码打印出日志文件的前 10 行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e36f7244738229\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfor i, line in enumerate(log_file):\r\n    if i &gt;= 10:\r\n        break\r\n    print(line)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36f7244738229-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36f7244738229-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36f7244738229-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36f7244738229-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36f7244738229-1\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">line </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">enumerate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">log_file</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36f7244738229-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36f7244738229-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">break</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36f7244738229-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">line</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>这段代码做了同样的事情，但是我们使用的是 <code>itertools.islice</code> 函数来惰性地抓取文件中的前 10 行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e36fa496897086\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfrom itertools import islice\r\nfirst_ten_lines = islice(log_file, 10)\r\nfor line in first_ten_lines:\r\n    print(line)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36fa496897086-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36fa496897086-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36fa496897086-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36fa496897086-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36fa496897086-1\"><span class=\"crayon-st\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">itertools</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">islice</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36fa496897086-2\"><span class=\"crayon-v\">first_ten_lines</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">islice</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">log_file</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36fa496897086-3\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">line </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">first_ten_lines</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36fa496897086-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">line</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>我们定义的 <code>first_ten_lines</code> 变量是迭代器，同样，使用迭代器允许我们给以前未命名的东西命名(<code>first_ten_lines</code>)。命名事物可以使我们的代码更具描述性，更具可读性。</p>\n<p>作为奖励，我们还消除了在循环中使用 <code>break</code> 语句的需要，因为 <code>islice</code> 实用函数为我们处理了中断。</p>\n<p>你可以在标准库中的 <a href=\"https://docs.python.org/3/library/itertools.html\">itertools</a> 中找到更多的迭代辅助函数，以及诸如 <a href=\"https://boltons.readthedocs.io\">boltons</a> 和 <a href=\"https://more-itertools.readthedocs.io\">more-itertools</a> 之类的第三方库。</p>\n<h2 id=\"toc_20\">创建自己的迭代辅助函数</h2>\n<p>你可以在标准库和第三方库中找到用于循环的辅助函数，但你也可以自己创建！</p>\n<p>这段代码列出了序列中连续值之间的差值列表。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e36fe919882877\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ncurrent = readings[0]\r\nfor next_item in readings[1:]:\r\n    differences.append(next_item - current)\r\n    current = next_item</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36fe919882877-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36fe919882877-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e36fe919882877-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e36fe919882877-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36fe919882877-1\"><span class=\"crayon-v\">current</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">readings</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36fe919882877-2\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">next_item </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">readings</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e36fe919882877-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">differences</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">next_item</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">current</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e36fe919882877-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">current</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">next_item</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>请注意，这段代码中有一个额外的变量，我们每次循环时都要指定它。还要注意，这段代码只适用于我们可以切片的东西，比如序列。如果 <code>readings</code> 是一个生成器，一个 zip 对象或其他任何类型的迭代器，那么这段代码就会失败。</p>\n<p>让我们编写一个辅助函数来修复代码。</p>\n<p>这是一个生成器函数，它为给定的迭代中的每个项目提供了当前项和下一项：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e3702405975728\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef with_next(iterable):\r\n    \"\"\"Yield (current, next_item) tuples for each item in iterable.\"\"\"\r\n    iterator = iter(iterable)\r\n    current = next(iterator)\r\n    for next_item in iterator:\r\n        yield current, next_item\r\n        current = next_item</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e3702405975728-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e3702405975728-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e3702405975728-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e3702405975728-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e3702405975728-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e3702405975728-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e3702405975728-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e3702405975728-1\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">with_next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">iterable</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e3702405975728-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"\"\"Yield (current, next_item) tuples for each item in iterable.\"\"\"</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e3702405975728-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">iterator</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">iter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">iterable</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e3702405975728-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">current</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">iterator</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e3702405975728-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">next_item </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iterator</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e3702405975728-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">yield</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">current</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">next_item</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e3702405975728-7\"><span class=\"crayon-e\">        </span><span class=\"crayon-v\">current</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">next_item</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p>我们从可迭代对象中手动获取一个迭代器，在它上面调用 <code>next</code> 来获取第一项，然后循环遍历迭代器获取后续所有的项目，跟踪后一个项目。这个函数不仅适用于序列，而且适用于任何类型迭代。</p>\n<p>这段代码和以前代码是一样的，但是我们使用的是辅助函数而不是手动跟踪 <code>next_item</code>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e3705308209491\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndifferences = []\r\nfor current, next_item in with_next(readings):\r\n    differences.append(next_item - current)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e3705308209491-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e3705308209491-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e3705308209491-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e3705308209491-1\"><span class=\"crayon-v\">differences</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e3705308209491-2\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">current</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">next_item </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">with_next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">readings</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e3705308209491-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">differences</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">next_item</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">current</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>请注意，这段代码不会挂在我们循环周围的 <code>next_item</code> 上，<code>with_next</code> 生成器函数处理跟踪 <code>next_item</code> 的工作。</p>\n<p>还要注意，这段代码已足够紧凑，如果我们愿意，我们甚至可以<a href=\"http://treyhunner.com/2015/12/python-list-comprehensions-now-in-color/\">将方法复制到列表推导中来</a>。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e3708249966202\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndifferences = [\r\n    (next_item - current)\r\n    for current, next_item in with_next(readings)\r\n]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e3708249966202-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e3708249966202-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e3708249966202-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e3708249966202-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e3708249966202-1\"><span class=\"crayon-v\">differences</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e3708249966202-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">next_item</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">current</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e3708249966202-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">current</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">next_item </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">with_next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">readings</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e3708249966202-4\"><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p></p>\n<h1 id=\"toc_21\">再次回顾循环问题</h1>\n<p>现在我们准备回到之前看到的那些奇怪的例子并试着找出到底发生了什么。</p>\n<h4 id=\"toc_22\">问题 1：耗尽的迭代器</h4>\n<p>这里我们有一个生成器对象 <code>squares</code>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e370c454765524\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; numbers = [1, 2, 3, 5, 7]\r\n&gt;&gt;&gt; squares = (n**2 for n in numbers)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e370c454765524-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e370c454765524-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e370c454765524-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e370c454765524-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">squares</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>如果我们把这个生成器传递给 <code>tuple</code> 构造函数，我们将会得到它的一个元组：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e370f412321963\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; numbers = [1, 2, 3, 5, 7]\r\n&gt;&gt;&gt; squares = (n**2 for n in numbers)\r\n&gt;&gt;&gt; tuple(squares)\r\n(1, 4, 9, 25, 49)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e370f412321963-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e370f412321963-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e370f412321963-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e370f412321963-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e370f412321963-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e370f412321963-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">squares</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e370f412321963-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">tuple</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">squares</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e370f412321963-4\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">25</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">49</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n<p>如果我们试着计算这个生成器中数字的和，使用 <code>sum</code>,我们就会得到 <code>0</code>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e3712927067042\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; sum(squares)\r\n0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e3712927067042-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e3712927067042-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e3712927067042-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">sum</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">squares</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e3712927067042-2\"><span class=\"crayon-cn\">0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>这个生成器现在是空的：我们已经把它耗尽了。如果我们试着再次创建一个元组，我们会得到一个空元组：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e3715255499672\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; tuple(squares)\r\n()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e3715255499672-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e3715255499672-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e3715255499672-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">tuple</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">squares</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e3715255499672-2\"><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>生成器是迭代器，迭代器是一次性的。它们就像 Hello Kitty Pez 分配器那样不能重新加载。</p>\n<h2 id=\"toc_23\">问题 2：部分消耗一个迭代器</h2>\n<p>再次使用那个生成器对象 <code>squares</code>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e3718184012294\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; numbers = [1, 2, 3, 5, 7]\r\n&gt;&gt;&gt; squares = (n**2 for n in numbers)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e3718184012294-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e3718184012294-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e3718184012294-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e3718184012294-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">squares</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>如果我们询问 <code>9</code> 是否在 <code>squares</code> 生成器中，我们会得到 <code>True</code>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e371c967147494\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; 9 in squares\r\nTrue</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e371c967147494-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e371c967147494-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e371c967147494-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">squares</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e371c967147494-2\"><span class=\"crayon-t\">True</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>但是我们再次询问相同的问题，我们会得到 <code>False</code>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e371f319693458\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; 9 in squares\r\nFalse</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e371f319693458-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e371f319693458-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e371f319693458-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">squares</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e371f319693458-2\"><span class=\"crayon-t\">False</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>当我们询问 <code>9</code> 是否在迭代器中时，Python 必须对这个生成器进行循环遍历来找到 <code>9</code>。如果我们在检查了 <code>9</code> 之后继续循环遍历，我们只会得到最后两个数字，因为我们已经在找到 9 之前消耗了这些数字：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e3722905231126\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; numbers = [1, 2, 3, 5, 7]\r\n&gt;&gt;&gt; squares = (n**2 for n in numbers)\r\n&gt;&gt;&gt; 9 in squares\r\nTrue\r\n&gt;&gt;&gt; list(squares)\r\n[25, 49]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e3722905231126-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e3722905231126-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e3722905231126-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e3722905231126-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e3722905231126-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e3722905231126-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e3722905231126-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e3722905231126-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">squares</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e3722905231126-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">squares</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e3722905231126-4\"><span class=\"crayon-t\">True</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e3722905231126-5\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">list</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">squares</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e3722905231126-6\"><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">25</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">49</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n<p>询问迭代器中是否包含某些东西将会部分地消耗迭代器。如果没有循环遍历迭代器，那么是没有办法知道某个东西是否在迭代器中。</p>\n<h2 id=\"toc_24\">问题 3：拆包是迭代</h2>\n<p>当你在字典上循环时，你会得到键：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e3725398005648\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; counts = {'apples': 2, 'oranges': 1}\r\n&gt;&gt;&gt; for key in counts:\r\n...     print(key)\r\n...\r\napples\r\noranges</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e3725398005648-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e3725398005648-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e3725398005648-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e3725398005648-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e3725398005648-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e3725398005648-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e3725398005648-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">counts</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'apples'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'oranges'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e3725398005648-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">key </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">counts</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e3725398005648-3\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\">     </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e3725398005648-4\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e3725398005648-5\"><span class=\"crayon-e\">apples</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e3725398005648-6\"><span class=\"crayon-v\">oranges</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>当你对一个字典进行拆包时，你也会得到键：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b0a7e3729385357884\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; x, y = counts\r\n&gt;&gt;&gt; x, y\r\n('apples', 'oranges')</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e3729385357884-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b0a7e3729385357884-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b0a7e3729385357884-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e3729385357884-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">counts</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b0a7e3729385357884-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">y</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b0a7e3729385357884-3\"><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'apples'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'oranges'</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>循环依赖于迭代器协议，可迭代对象拆包也依赖于有迭代器协议。拆包一个字典与在字典上循环遍历是一样的，两者都使用迭代器协议，所以在这两种情况下都得到相同的结果。</p>\n<h1 id=\"toc_25\">回顾</h1>\n<p>序列是迭代器，但是不是所有的迭代器都是序列。当有人说“迭代器”这个词时，你只能假设他们的意思是“你可以迭代的东西”。不要假设迭代器可以被循环遍历两次、询问它们的长度或者索引。</p>\n<p>迭代器是 Python 中最基本的可迭代形式。如果你想在代码中做一个惰性迭代，请考虑迭代器，并考虑使用生成器函数或生成器表达式。</p>\n<p>最后，请记住，Python 中的每一种迭代都依赖于迭代器协议，因此理解迭代器协议是理解 Python 中的循环的关键。</p>\n<p>这里有一些我推荐的相关文章和视频：</p>\n<ul>\n<li><a href=\"https://nedbatchelder.com/text/iter.html\">Loop Like a Native</a>， Ned Batchelder 在 PyCon 2013 的讲演</li>\n<li><a href=\"https://www.youtube.com/watch?v=V2PkkMS2Ack\">Loop Better</a> ，这篇文章是基于这个讲演的</li>\n<li><a href=\"http://treyhunner.com/2016/12/python-iterator-protocol-how-for-loops-work/\">The Iterator Protocol: How For Loops Work</a>，我写的关于迭代器协议的短文</li>\n<li><a href=\"https://www.youtube.com/watch?v=5_cJIcgM7rw\">Comprehensible Comprehensions</a>，关于推导和迭代器表达器的讲演</li>\n<li><a href=\"http://treyhunner.com/2018/02/python-range-is-not-an-iterator/\">Python: Range is Not an Iterator</a>，我关于范围和迭代器的文章</li>\n<li><a href=\"https://www.youtube.com/watch?v=u8g9scXeAcI\">Looping Like a Pro in Python</a>，DB 的 PyCon 2017 讲演</li>\n</ul>\n<hr>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89181\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89181votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89181\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 10 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 4 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"title": "3 个 Python 模板库比较", "url": "http://python.jobbole.com/89187/", "url_object_id": "c53048457591e1123c0001cb3348f805", "create_date": "2019-06-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/11/8ef4df4888b257b5ea7bbd4b033a519c.png"], "praise_nums": 1, "comment_nums": 0, "fav_nums": 1, "tags": "基础知识,模板库", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/resources/python/template-libraries\"> Jason Bake</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9716-1.html\">linux中国 —  LCTT MjSeven</a>   </div><div id=\"article_content\">\n<blockquote><p>你的下一个 Python 项目需要一个模板引擎来自动生成 HTML 吗？这有几种选择。</p></blockquote>\n<p>在我的日常工作中，我花费大量的时间将各种来源的数据转化为可读的信息。虽然很多时候这只是电子表格或某种类型的图表或其他数据可视化的形式，但也有其他时候，将数据以书面形式呈现是有意义的。</p>\n<p>但我的头疼地方就是复制和粘贴。如果你要将数据从源头移动到标准化模板，则不应该复制和粘贴。这很容易出错，说实话，这会浪费你的时间。</p>\n<p>因此，对于我定期发送的任何遵循一个共同的模式的信息，我倾向于找到某种方法来自动化至少一部分信息。也许这涉及到在电子表格中创建一些公式，一个快速 shell 脚本或其他解决方案，以便使用从外部源提取的信息自动填充模板。</p>\n<p>但最近，我一直在探索 Python 模板来完成从其他数据集创建报告和图表的大部分工作。</p>\n<p>Python 模板引擎非常强大。我的简化报告创建的使用案例仅仅触及了它的皮毛。许多开发人员正在利用这些工具来构建完整的 web 应用程序和内容管理系统。但是，你并不需要有一个复杂的 web 应用程序才能使用 Python 模板工具。</p>\n<h1 id=\"toc_1\">为什么选择模板？</h1>\n<p>每个模板工具都不甚相同，你应该阅读文档以了解其确切的用法。但让我们创建一个假设的例子。假设我想创建一个简短的页面，列出我最近编写的所有 Python 主题。就像这样：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b6ca27773189719551\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;html&gt;\r\n  &lt;head&gt;\r\n    &lt;title&gt;My Python articles&lt;/title&gt;\r\n  &lt;/head&gt;\r\n  &lt;body&gt;\r\n    &lt;p&gt;These are some of the things I have written about Python:&lt;/p&gt;\r\n    &lt;ul&gt;\r\n      &lt;li&gt;Python GUIs&lt;/li&gt;\r\n      &lt;li&gt;Python IDEs&lt;/li&gt;\r\n      &lt;li&gt;Python web scrapers&lt;/li&gt;\r\n    &lt;/ul&gt;\r\n  &lt;/body&gt;\r\n&lt;/html&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b6ca27773189719551-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b6ca27773189719551-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b6ca27773189719551-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b6ca27773189719551-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b6ca27773189719551-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b6ca27773189719551-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b6ca27773189719551-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b6ca27773189719551-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b6ca27773189719551-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b6ca27773189719551-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b6ca27773189719551-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b6ca27773189719551-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b6ca27773189719551-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b6ca27773189719551-1\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">html</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b6ca27773189719551-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">head</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b6ca27773189719551-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">title</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-e\">My </span><span class=\"crayon-e\">Python </span><span class=\"crayon-v\">articles</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">title</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b6ca27773189719551-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">head</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b6ca27773189719551-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">body</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b6ca27773189719551-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-e\">These </span><span class=\"crayon-e\">are </span><span class=\"crayon-e\">some </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">the </span><span class=\"crayon-i\">things</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">I</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">have </span><span class=\"crayon-e\">written </span><span class=\"crayon-e\">about </span><span class=\"crayon-v\">Python</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b6ca27773189719551-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">ul</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b6ca27773189719551-8\"><span class=\"crayon-h\">      </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">li</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-e\">Python </span><span class=\"crayon-v\">GUIs</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">li</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b6ca27773189719551-9\"><span class=\"crayon-h\">      </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">li</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-e\">Python </span><span class=\"crayon-v\">IDEs</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">li</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b6ca27773189719551-10\"><span class=\"crayon-h\">      </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">li</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-e\">Python </span><span class=\"crayon-e\">web </span><span class=\"crayon-v\">scrapers</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">li</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b6ca27773189719551-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ul</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b6ca27773189719551-12\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">body</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b6ca27773189719551-13\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">html</span><span class=\"crayon-o\">&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0030 seconds] -->\r\n<p>当它仅仅是这三个项目时，维护它是很简单的。但是当我想添加第四个、第五个或第六十七个时会发生什么？我可以从包含我所有页面列表的 CSV 文件或其他数据文件生成它，而不是手动编码此页面吗？我可以轻松地为我写的每个主题创建重复内容吗？我可以以编程方式更改每个页面上的文本标题吗？这就是模板引擎可以发挥作用的地方。</p>\n<p>有许多不同的选择，今天我将与你其中分享三个，顺序不分先后：<a href=\"http://www.makotemplates.org/\">Mako</a>、 <a href=\"http://jinja.pocoo.org/\">Jinja2</a> 和 <a href=\"https://genshi.edgewall.org/\">Genshi</a>。</p>\n<h1 id=\"toc_2\">Mako</h1>\n<p><a href=\"http://www.makotemplates.org/\">Mako</a> 是以 MIT 许可证发布的 Python 模板工具，专为快速展现而设计的（与 Jinja2 不同）。Reddit 已经使用 Mako 来展现他们的网页，它同时也是 Pyramid 和 Pylons 等 web 框架的默认模板语言。它相当简单且易于使用。你可以使用几行代码来设计模板；支持 Python 2.x 和 3.x，它是一个功能强大且功能丰富的工具，具有<a href=\"http://docs.makotemplates.org/en/latest/\">良好的文档</a>，这一点我认为是必须的。其功能包括过滤器、继承、可调用块和内置缓存系统，这些系统可以被大型或复杂的 web 项目导入。</p>\n<h1 id=\"toc_3\">Jinja2</h1>\n<p>Jinja2 是另一个快速且功能全面的选项，可用于 Python 2.x 和 3.x，遵循 BSD 许可证。Jinja2 从功能角度与 Mako 有很多重叠，因此对于新手来说，你在两者之间的选择可能会归结为你喜欢的格式化风格。Jinja2 还将模板编译为字节码，并具有 HTML 转义、沙盒、模板继承和模板沙盒部分的功能。其用户包括 Mozilla、 SourceForge、 NPR、 Instagram 等，并且还具有<a href=\"http://jinja.pocoo.org/docs/2.10/\">强大的文档</a>。与 Mako 在模板内部使用 Python 逻辑不同的是，Jinja2 使用自己的语法。</p>\n<h1 id=\"toc_4\">Genshi</h1>\n<p><a href=\"https://genshi.edgewall.org/\">Genshi</a> 是我会提到的第三个选择。它是一个 XML 工具，具有强大的模板组件，所以如果你使用的数据已经是 XML 格式，或者你需要使用网页以外的格式，Genshi 可能成为你的一个很好的解决方案。HTML 基本上是一种 XML（好吧，不是精确的，但这超出了本文的范围，有点卖弄学问了），因此格式化它们非常相似。由于我通常使用的很多数据都是 XML 或其他类型的数据，因此我非常喜欢使用我可以用于多种事物的工具。</p>\n<p>发行版目前仅支持 Python 2.x，尽管 Python 3 支持存在于主干中，但我提醒你，它看起来并没有得到有效的开发。Genshi 遵循 BSD 许可证提供。</p>\n<h1 id=\"toc_5\">示例</h1>\n<p>因此，在上面的假设示例中，我不会每次写新主题时都更新 HTML 文件，而是通过编程方式对其进行更新。我可以创建一个模板，如下所示：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b6ca2777f508799297\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;html&gt;\r\n  &lt;head&gt;\r\n    &lt;title&gt;My Python articles&lt;/title&gt;\r\n  &lt;/head&gt;\r\n  &lt;body&gt;\r\n    &lt;p&gt;These are some of the things I have written about Python:&lt;/p&gt;\r\n    &lt;ul&gt;\r\n      %for topic in topics:\r\n      &lt;li&gt;${topic}&lt;/li&gt;\r\n      %endfor\r\n    &lt;/ul&gt;\r\n  &lt;/body&gt;\r\n&lt;/html&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b6ca2777f508799297-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b6ca2777f508799297-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b6ca2777f508799297-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b6ca2777f508799297-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b6ca2777f508799297-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b6ca2777f508799297-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b6ca2777f508799297-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b6ca2777f508799297-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b6ca2777f508799297-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b6ca2777f508799297-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b6ca2777f508799297-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b6ca2777f508799297-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b6ca2777f508799297-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b6ca2777f508799297-1\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">html</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b6ca2777f508799297-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">head</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b6ca2777f508799297-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">title</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-e\">My </span><span class=\"crayon-e\">Python </span><span class=\"crayon-v\">articles</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">title</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b6ca2777f508799297-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">head</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b6ca2777f508799297-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">body</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b6ca2777f508799297-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-e\">These </span><span class=\"crayon-e\">are </span><span class=\"crayon-e\">some </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">the </span><span class=\"crayon-i\">things</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">I</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">have </span><span class=\"crayon-e\">written </span><span class=\"crayon-e\">about </span><span class=\"crayon-v\">Python</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b6ca2777f508799297-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">ul</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b6ca2777f508799297-8\"><span class=\"crayon-h\">      </span><span class=\"crayon-o\">%</span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">topic </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">topics</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b6ca2777f508799297-9\"><span class=\"crayon-h\">      </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">li</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">topic</span><span class=\"crayon-sy\">}</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">li</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b6ca2777f508799297-10\"><span class=\"crayon-h\">      </span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">endfor</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b6ca2777f508799297-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ul</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b6ca2777f508799297-12\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">body</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b6ca2777f508799297-13\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">html</span><span class=\"crayon-o\">&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0025 seconds] -->\r\n<p>然后我可以使用我的模板库来迭代每个主题，比如使用 Mako，像这样：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b6ca27784054010408\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfrom mako.template import Template\r\nmytemplate = Template(filename='template.txt')\r\nprint(mytemplate.render(topics=(\"Python GUIs\",\"Python IDEs\",\"Python web scrapers\")))</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b6ca27784054010408-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b6ca27784054010408-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b6ca27784054010408-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b6ca27784054010408-1\"><span class=\"crayon-st\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mako</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">template </span><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Template</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b6ca27784054010408-2\"><span class=\"crayon-v\">mytemplate</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Template</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">filename</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'template.txt'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b6ca27784054010408-3\"><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">mytemplate</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">render</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">topics</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Python GUIs\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"Python IDEs\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"Python web scrapers\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>当然，在现实世界的用法中，我不会将这些内容手动地列在变量中，而是将它们从外部数据源（如数据库或 API）中提取出来。</p>\n<p>这些不是仅有的 Python 模板引擎。如果你正在开始创建一个将大量使用模板的新项目，那么你考虑的可能不仅仅是这三种选择。在 <a href=\"https://wiki.python.org/moin/Templating\">Python 维基</a>上查看更全面的列表，以获得更多值得考虑的项目。</p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89187\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89187votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89187\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"title": "用 Python 实现模拟登录正方教务系统抢课", "url": "http://python.jobbole.com/89192/", "url_object_id": "1f33111de29ca36b6163b729703953c8", "create_date": "2019-06-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/10/bfa0d07e7eb2fac2eb80cd5df9567931.jpg"], "praise_nums": 1, "comment_nums": 0, "fav_nums": 4, "tags": "实践项目,教务系统", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://vhyz.me/2018/06/12/%E7%94%A8Python%E5%AE%9E%E7%8E%B0%E6%A8%A1%E6%8B%9F%E7%99%BB%E5%BD%95%E6%AD%A3%E6%96%B9%E6%95%99%E5%8A%A1%E7%B3%BB%E7%BB%9F%E6%8A%A2%E8%AF%BE/\"> vhyz's Blog</a>   </div><div id=\"post-content\">\n<p>最近学校开始选课，但是如果选课时间与自己的事情冲突，这时候就可以使用Python脚本自助抢课，抢课的第一步即是模拟登录，需要模拟登录后保存登录信息然后再进行操作。</p>\n<p>而且整个流程是比较简单，这是因为正方教务系统是比较旧的，全文的IP地址部分遮挡，请换成你们学校的IP地址。</p>\n<h1 id=\"尝试登录\">尝试登录</h1>\n<p>首先我们打开学校的教务系统，随便输入，然后提交表单，打开Chrome的开发者工具中的Network准备抓包</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/06/2f2af564b826e7eb75601657f97e35e9.png\"></p>\n<p>把css 图片之类的过滤掉，发现了default.aspx这个东西</p>\n<h3 id=\"如果你们学校教务系统不使用Cookie则会是这样\">如果你们学校教务系统不使用Cookie则会是这样</h3>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/06/a087bff0afaba0199136def955b34825.png\"></p>\n<p>我们可以发现，真实的请求地址为<a href=\"http://110.65.10.xxx/(bdq1aj45lpd42o55vqpfgpie)/default2.aspx\" target=\"_blank\" rel=\"noopener\">http://110.65.10.xxx/(bdq1aj45lpd42o55vqpfgpie)/default2.aspx</a></p>\n<p>随后我们发现这个网址括号围起来的一串信息有点诡异，而且每次进入的时候信息都不一样，经过资料查询，这是一种ASP.NET不使用Cookie会话管理的技术。</p>\n<p><a href=\"https://msdn.microsoft.com/zh-cn/library/aa479314.aspx\" target=\"_blank\" rel=\"noopener\">不使用 Cookie 的 ASP.NET 会话管理</a></p>\n<p>那这样就很好办了，我们只需要登录时记录下这个数据即可保持登录状态。</p>\n<p>经过测试发现，我们可以随便伪造一个会话信息即可一直保持登录状态，但是为了体现模拟登录的科学性，我们需要先获取该会话信息。</p>\n<h3 id=\"如果你们学校教务系统使用Cookie则会是这样\">如果你们学校教务系统使用Cookie则会是这样</h3>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/06/a296e5701e251d778262c5aee994e26c.png\"></p>\n<p>服务器会返回一个Cookie值，然后在本地保存，这与下面的会不相同。</p>\n<h1 id=\"获取会话信息（不使用Cookie\">获取会话信息（不使用Cookie)</h1>\n<p>这里我们要使用requests库，并且要伪造header的UA信息</p>\n<p>经过测试发现，我们只访问学校的IP地址，会自动重定向至有会话信息的网址，所以我们先访问一下IP地址。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b5255a4e1867773720\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass Spider:\r\n    def __init__(self, url):\r\n        self.__uid = ''\r\n        self.__real_base_url = ''\r\n        self.__base_url = url\r\n        self.__headers = {\r\n            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.62 Safari/537.36',\r\n        }\r\n    def __set_real_url(self):\r\n        request = requests.get(self.__base_url, headers=self.__headers)\r\n        real_url = request.url\r\n        self.__real_base_url = real_url[:len(real_url) - len('default2.aspx')]\r\n        return request</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a4e1867773720-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a4e1867773720-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a4e1867773720-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a4e1867773720-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a4e1867773720-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a4e1867773720-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a4e1867773720-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a4e1867773720-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a4e1867773720-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a4e1867773720-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a4e1867773720-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a4e1867773720-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a4e1867773720-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b5255a4e1867773720-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Spider</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a4e1867773720-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__init__</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a4e1867773720-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__uid</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a4e1867773720-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__real_base_url</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a4e1867773720-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__base_url</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">url</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a4e1867773720-6\"><span class=\"crayon-e\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__headers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a4e1867773720-7\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'User-Agent'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.62 Safari/537.36'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a4e1867773720-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a4e1867773720-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__set_real_url</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a4e1867773720-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">request</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">requests</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__base_url</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">headers</span><span class=\"crayon-o\">=</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__headers</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a4e1867773720-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">real_url</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">request</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">url</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a4e1867773720-12\"><span class=\"crayon-e\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__real_base_url</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">real_url</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">:</span><span class=\"crayon-k \">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">real_url</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'default2.aspx'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a4e1867773720-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">request</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0034 seconds] -->\r\n<p>上面获取的url即为带有会话信息的网址，保存的url格式为<a href=\"http://110.65.10.xxx/(bdq1aj45lpd42o55vqpfgpie)/\" target=\"_blank\" rel=\"noopener\">http://110.65.10.xxx/(bdq1aj45lpd42o55vqpfgpie)/</a></p>\n<p>保存为这样的格式是因为我们要访问其他地址</p>\n<h1 id=\"获取会话信息（使用Cookie\">获取会话信息（使用Cookie)</h1>\n<p>有些学校的教务系统是使用Cookie的，我们只需要首次get请求时保存Cookie即可，然后此后一直使用该cookie</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b5255a4ea808013152\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef get_cookie():\r\n    request = requests.get('http://xxx.xxx.xxx.xxx') #以某教务系统为例子\r\n    cookie = requets.cookie\r\n    return cookie</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a4ea808013152-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a4ea808013152-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a4ea808013152-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a4ea808013152-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b5255a4ea808013152-1\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">get_cookie</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a4ea808013152-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">request</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">requests</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'http://xxx.xxx.xxx.xxx'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">#以某教务系统为例子</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a4ea808013152-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">cookie</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">requets</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">cookie</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a4ea808013152-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">cookie</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>而requests中使用Cookie很简单</p>\n<p>只需要这样</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b5255a4ee868309285\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef use_cookie(cookie):\r\n    request = requests.get('http://xxx.xxx.xxx.xxx',cookie=cookie)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a4ee868309285-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a4ee868309285-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b5255a4ee868309285-1\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">use_cookie</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">cookie</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a4ee868309285-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">request</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">requests</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'http://xxx.xxx.xxx.xxx'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-k \">cookie</span><span class=\"crayon-o\">=</span><span class=\"crayon-k \">cookie</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>由于我们学校采用的是无Cookie方案，所以下面的代码均没有发送Cookie，如果你的学校采用了Cookie，只需要像我上面这样发送Cookie就行了。</p>\n<p>而如果你们学校使用Cookie，就不必获取带有会话信息的地址了，直接存储Cookie即可。</p>\n<p>或者也可以使用requests的Session自动管理会话信息，这样文章下面的代码的请求全部改成Session的请求即可，但是首先需要在类的初始化方法中初始化。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b5255a4f2247597319\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef __init__(self):\r\n    self.session = requests.Session()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a4f2247597319-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a4f2247597319-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b5255a4f2247597319-1\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__init__</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a4f2247597319-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">session</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">requests</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Session</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>然后我们首先访问一次网站即可获取Cookie并且储存</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b5255a4f6314587822\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef get(self):\r\n    r = self.session.get(url,headers=headers)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a4f6314587822-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a4f6314587822-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b5255a4f6314587822-1\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a4f6314587822-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">r</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">session</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">headers</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">headers</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>更多的用法可以查询文档</p>\n<h1 id=\"验证码的处理\">验证码的处理</h1>\n<p>分析r返回的文本信息</p>\n<p>发现验证码的标签的资源地址为 src=”CheckCode.aspx” ，我们可以直接requests然后下载验证码图片，下载图片的一种优雅的方式如下</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b5255a4f9339380785\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef __get_code(self):\r\n        request = requests.get(self.__real_base_url + 'CheckCode.aspx', headers=self.__headers)\r\n        with open('code.jpg', 'wb')as f:\r\n            f.write(request.content)\r\n        im = Image.open('code.jpg')\r\n        im.show()\r\n        print('Please input the code:')\r\n        code = input()\r\n        return code</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a4f9339380785-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a4f9339380785-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a4f9339380785-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a4f9339380785-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a4f9339380785-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a4f9339380785-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a4f9339380785-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a4f9339380785-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a4f9339380785-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b5255a4f9339380785-1\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__get_code</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a4f9339380785-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">request</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">requests</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__real_base_url</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'CheckCode.aspx'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">headers</span><span class=\"crayon-o\">=</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__headers</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a4f9339380785-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">with</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">open</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'code.jpg'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'wb'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a4f9339380785-4\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">write</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">request</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">content</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a4f9339380785-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">im</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Image</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">open</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'code.jpg'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a4f9339380785-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">im</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">show</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a4f9339380785-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Please input the code:'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a4f9339380785-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">code</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">input</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a4f9339380785-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">code</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0024 seconds] -->\r\n<p>上面的代码把图片保存为code.jpg，Python有一个Image模块，可以实现自动打开图片</p>\n<p>这样验证码就展示出来了，我们人工输入或者转入打码平台皆可</p>\n<h1 id=\"登录数据的构造\">登录数据的构造</h1>\n<p>这是上面抓的登录post的数据包，</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/06/c82ee0b070fe4c1e46b9a4e41ec2a146.png\"></p>\n<p>发现有信息无法被解码，应该是gb2312编码,查看解码前的编码</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/06/6dac26677d03fa384471f76373748f16.png\"></p>\n<p>然后将不能解码的代码复制能够解码的地方</p>\n<p>发现%D1%A7%C9%FA编码解码后为学生</p>\n<p>这也就对应了学生选项的登录</p>\n<p>学号和密码和验证码能够显而易见地知道是哪些信息，但是我们发现有__VIEWSTATE这一项</p>\n<p>查找一下，这是一个表单隐藏信息，我们可以用BeautifulSoup库解析可以得出该一项数据的值</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/06/ebdab5b649bd3db0987ba1128f036e63.png\"></p>\n<p>这是完整的登录数据包，</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b5255a4ff694595249\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef __get_login_data(self, uid, password):\r\n        self.__uid = uid\r\n        request = self.__set_real_url()\r\n        soup = BeautifulSoup(request.text, 'lxml')\r\n        form_tag = soup.find('input')\r\n        __VIEWSTATE = form_tag['value']\r\n        code = self.__get_code()\r\n        data = {\r\n            '__VIEWSTATE': __VIEWSTATE,\r\n            'txtUserName': self.__uid,\r\n            'TextBox2': password,\r\n            'txtSecretCode': code,\r\n            'RadioButtonList1': '学生'.encode('gb2312'),\r\n            'Button1': '',\r\n            'lbLanguage': '',\r\n            'hidPdrs': '',\r\n            'hidsc': '',\r\n        }\r\n        return data</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a4ff694595249-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a4ff694595249-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a4ff694595249-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a4ff694595249-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a4ff694595249-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a4ff694595249-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a4ff694595249-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a4ff694595249-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a4ff694595249-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a4ff694595249-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a4ff694595249-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a4ff694595249-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a4ff694595249-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a4ff694595249-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a4ff694595249-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a4ff694595249-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a4ff694595249-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a4ff694595249-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a4ff694595249-19\">19</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b5255a4ff694595249-1\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__get_login_data</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">uid</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">password</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a4ff694595249-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__uid</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">uid</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a4ff694595249-3\"><span class=\"crayon-e\">        </span><span class=\"crayon-v\">request</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">__set_real_url</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a4ff694595249-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">soup</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">BeautifulSoup</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">request</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">text</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'lxml'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a4ff694595249-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">form_tag</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">soup</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'input'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a4ff694595249-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">__VIEWSTATE</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">form_tag</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'value'</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a4ff694595249-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">code</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">__get_code</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a4ff694595249-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a4ff694595249-9\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'__VIEWSTATE'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">__VIEWSTATE</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a4ff694595249-10\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'txtUserName'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__uid</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a4ff694595249-11\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'TextBox2'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">password</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a4ff694595249-12\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'txtSecretCode'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">code</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a4ff694595249-13\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'RadioButtonList1'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'学生'</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">encode</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'gb2312'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a4ff694595249-14\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'Button1'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a4ff694595249-15\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'lbLanguage'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a4ff694595249-16\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'hidPdrs'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a4ff694595249-17\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'hidsc'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a4ff694595249-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a4ff694595249-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0037 seconds] -->\r\n<p></p>\n<h1 id=\"登录\">登录</h1>\n<p>如果登录完成了，如何判断是否登录成功呢？我们从登录成功返回的界面发现有姓名这一标签，而我们等一下也是需要学生姓名，所以我们用这个根据来判断是否登录成功。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/06/8b166b127a5a318bcca28d0ff113fb85.png\"></p>\n<p>代码如下,进行了验证码用户名和密码的提示信息判别</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b5255a506725108578\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef login(self,uid,password):\r\n        while True:\r\n            data = self.__get_login_data(uid, password)\r\n            request = requests.post(self.__real_base_url + 'default2.aspx', headers=self.__headers, data=data)\r\n            soup = BeautifulSoup(request.text, 'lxml')\r\n            try:\r\n                name_tag = soup.find(id='xhxm')\r\n                self.__name = name_tag.string[:len(name_tag.string) - 2]\r\n                print('欢迎'+self.__name)\r\n            except:\r\n                print('Unknown Error,try to login again.')\r\n                time.sleep(0.5)\r\n                continue\r\n            finally:\r\n                return True</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a506725108578-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a506725108578-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a506725108578-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a506725108578-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a506725108578-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a506725108578-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a506725108578-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a506725108578-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a506725108578-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a506725108578-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a506725108578-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a506725108578-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a506725108578-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a506725108578-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a506725108578-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b5255a506725108578-1\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">login</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">uid</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">password</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a506725108578-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">True</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a506725108578-3\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">__get_login_data</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">uid</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">password</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a506725108578-4\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">request</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">requests</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">post</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__real_base_url</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'default2.aspx'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">headers</span><span class=\"crayon-o\">=</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__headers</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a506725108578-5\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">soup</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">BeautifulSoup</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">request</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">text</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'lxml'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a506725108578-6\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">try</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a506725108578-7\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">name_tag</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">soup</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'xhxm'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a506725108578-8\"><span class=\"crayon-h\">                </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">name_tag</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">string</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">:</span><span class=\"crayon-k \">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">name_tag</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">string</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a506725108578-9\"><span class=\"crayon-h\">                </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'欢迎'</span><span class=\"crayon-o\">+</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__name</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a506725108578-10\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">except</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a506725108578-11\"><span class=\"crayon-h\">                </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Unknown Error,try to login again.'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a506725108578-12\"><span class=\"crayon-h\">                </span><span class=\"crayon-k \">time</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sleep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0.5</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a506725108578-13\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">continue</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a506725108578-14\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">finally</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a506725108578-15\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">True</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0039 seconds] -->\r\n<p></p>\n<h1 id=\"获取选课信息\">获取选课信息</h1>\n<p>接下来就是获取选课信息了，这里我们以校公选课为例子，点击进去，进行抓包，headers没有什么好注意的，我们只用关注get发送的包即可<br>\n<img src=\"http://jbcdn2.b0.upaiyun.com/2018/06/bdd752699ac8dac85672856539c086d4.png\"></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/06/2d215f700ff9aa6c700c952ca3d4b9c4.png\"><img src=\"http://jbcdn2.b0.upaiyun.com/2018/06/6bb911af6269e9e763b8d5f9792751c0.png\"></p>\n<p>发现有学号与姓名与gnmkdm这一项，姓名我们需要编码为gb2312的形式才能进行传送</p>\n<p>这里我们注意headers需要新增Referer项也就是当前访问的网址，才能进行请求</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b5255a50d302013266\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef __enter_lessons_first(self):\r\n        data = {\r\n            'xh': self.__uid,\r\n            'xm': self.__name.encode('gb2312'),\r\n            'gnmkdm': 'N121103',\r\n        }\r\n        self.__headers['Referer'] = self.__real_base_url + 'xs_main.aspx?xh=' + self.__uid\r\n        request = requests.get(self.__real_base_url + 'xf_xsqxxxk.aspx', params=data, headers=self.__headers)\r\n        self.__headers['Referer'] = request.url\r\n        soup = BeautifulSoup(request.text, 'lxml')\r\n        self.__set__VIEWSTATE(soup)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a50d302013266-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a50d302013266-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a50d302013266-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a50d302013266-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a50d302013266-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a50d302013266-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a50d302013266-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a50d302013266-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a50d302013266-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a50d302013266-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a50d302013266-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b5255a50d302013266-1\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__enter_lessons_first</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a50d302013266-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a50d302013266-3\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'xh'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__uid</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a50d302013266-4\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'xm'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__name</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">encode</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'gb2312'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a50d302013266-5\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'gnmkdm'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'N121103'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a50d302013266-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a50d302013266-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__headers</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'Referer'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__real_base_url</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'xs_main.aspx?xh='</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">__uid</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a50d302013266-8\"><span class=\"crayon-e\">        </span><span class=\"crayon-v\">request</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">requests</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__real_base_url</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'xf_xsqxxxk.aspx'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">params</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">headers</span><span class=\"crayon-o\">=</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__headers</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a50d302013266-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__headers</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'Referer'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">request</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">url</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a50d302013266-10\"><span class=\"crayon-e\">        </span><span class=\"crayon-v\">soup</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">BeautifulSoup</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">request</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">text</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'lxml'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a50d302013266-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">__set__VIEWSTATE</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">soup</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0033 seconds] -->\r\n<p>注意到上面有一个设置VIEWSTATE值的函数，这里等下在选课构造数据包的时候会讲</p>\n<h1 id=\"模拟选课\">模拟选课</h1>\n<p>随便选一门课，然后提交，抓包，看一下有什么数据发送</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/06/f3e7778f7e6710c271e4df8d822b3f2e.png\"><img src=\"http://jbcdn2.b0.upaiyun.com/2018/06/90c44fd4a5771d2f80e84fd90e24e933.png\"></p>\n<p>前三个值可以在原网页中input标签中找到，由于前两项为空，就不获取了，而第三项我们使用soup解析获取即可，由于这个操作是每请求一次就变化的，我们写成一个函数，每次请求完成就设置一次。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/06/70c6f56fffad95b38d0d7b6bef8ee3cc.png\"></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b5255a514478508032\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n def __set__VIEWSTATE(self, soup):\r\n        __VIEWSTATE_tag = soup.find('input', attrs={'name': '__VIEWSTATE'})\r\n        self.__base_data['__VIEWSTATE'] = __VIEWSTATE_tag['value']</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a514478508032-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a514478508032-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a514478508032-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b5255a514478508032-1\"><span class=\"crayon-h\"> </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__set__VIEWSTATE</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">soup</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a514478508032-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">__VIEWSTATE_tag</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">soup</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'input'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">attrs</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'name'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'__VIEWSTATE'</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a514478508032-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__base_data</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'__VIEWSTATE'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">__VIEWSTATE_tag</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'value'</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>而其他数据，我们通过搜索响应网页就可以知道他们是干什么用的，这里我只说明我们要用的数据。</p>\n<p>TextBox1为搜索框数据，我们可以用这个来搜索课程，dpkcmcGrid:txtPageSize为一页显示多少数据，经过测试，服务器最多响应200条。</p>\n<p>值得注意的是ddl_xqbs这个校区数据信息，我所在的校区的数字代号为2，也许不同学校设置有所不同，需要自己设置一下，也可以从网页中获取</p>\n<p>下面是基础数据包，由于我们搜索课程与选择课程都要使用这个基础数据包，所以我们直接在<strong>init</strong>函数里面新增</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b5255a51a675944910\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n  self.__base_data = {\r\n            '__EVENTTARGET': '',\r\n            '__EVENTARGUMENT': '',\r\n            '__VIEWSTATE': '',\r\n            'ddl_kcxz': '',\r\n            'ddl_ywyl': '',\r\n            'ddl_kcgs': '',\r\n            'ddl_xqbs': '2',\r\n            'ddl_sksj': '',\r\n            'TextBox1': '',\r\n            'dpkcmcGrid:txtChoosePage': '1',\r\n            'dpkcmcGrid:txtPageSize': '200',\r\n        }</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a51a675944910-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a51a675944910-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a51a675944910-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a51a675944910-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a51a675944910-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a51a675944910-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a51a675944910-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a51a675944910-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a51a675944910-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a51a675944910-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a51a675944910-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a51a675944910-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a51a675944910-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b5255a51a675944910-1\"><span class=\"crayon-h\">  </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__base_data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a51a675944910-2\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'__EVENTTARGET'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a51a675944910-3\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'__EVENTARGUMENT'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a51a675944910-4\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'__VIEWSTATE'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a51a675944910-5\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'ddl_kcxz'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a51a675944910-6\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'ddl_ywyl'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a51a675944910-7\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'ddl_kcgs'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a51a675944910-8\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'ddl_xqbs'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a51a675944910-9\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'ddl_sksj'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a51a675944910-10\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'TextBox1'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a51a675944910-11\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'dpkcmcGrid:txtChoosePage'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'1'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a51a675944910-12\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'dpkcmcGrid:txtPageSize'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'200'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a51a675944910-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n<p>然后我们关注一下这条数据，我们搜索一下，发现这是课程的提交选课的代码，所以我们也可以直接从网页中获取，而on表示选项被选上</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/06/b94a5ad8b8cba98a3af4158fbf1ac7e9.png\"></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b5255a51e381822091\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nkcmcGrid:_ctl2:xk:'on'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a51e381822091-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b5255a51e381822091-1\"><span class=\"crayon-v\">kcmcGrid</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">_ctl2</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">xk</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">'on'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<h1 id=\"搜索课程\">搜索课程</h1>\n<p>课程有很多信息，比如名字，上课时间，地点，这些东西确定好了才知道选的是哪门课，所以我们先新建一个类来存储信息</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b5255a521110443249\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n  class Lesson:\r\n        def __init__(self, name, code, teacher_name, Time, number):\r\n            self.name = name\r\n            self.code = code\r\n            self.teacher_name = teacher_name\r\n            self.time = Time\r\n            self.number = number\r\n        def show(self):\r\n            print('name:' + self.name + 'code:' + self.code + 'teacher_name:' + self.teacher_name + 'time:' + self.time)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a521110443249-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a521110443249-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a521110443249-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a521110443249-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a521110443249-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a521110443249-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a521110443249-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a521110443249-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a521110443249-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b5255a521110443249-1\"><span class=\"crayon-h\">  </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Lesson</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a521110443249-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__init__</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">code</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">teacher_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">Time</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">number</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a521110443249-3\"><span class=\"crayon-h\">            </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">name</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a521110443249-4\"><span class=\"crayon-e\">            </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">code</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">code</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a521110443249-5\"><span class=\"crayon-h\">            </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">teacher_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">teacher_name</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a521110443249-6\"><span class=\"crayon-e\">            </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">time</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">Time</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a521110443249-7\"><span class=\"crayon-h\">            </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">number</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">number</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a521110443249-8\"><span class=\"crayon-e\">        </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">show</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a521110443249-9\"><span class=\"crayon-h\">            </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'name:'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'code:'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">code</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'teacher_name:'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">teacher_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'time:'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">time</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0030 seconds] -->\r\n<p>有了这个类，我们就可以进行搜索课程了，具体代码看下面代码，解析网页内容就不细讲了。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b5255a524785301362\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef __search_lessons(self, lesson_name=''):\r\n        self.__base_data['TextBox1'] = lesson_name.encode('gb2312')\r\n        request = requests.post(self.__headers['Referer'], data=self.__base_data, headers=self.__headers)\r\n        soup = BeautifulSoup(request.text, 'lxml')\r\n        self.__set__VIEWSTATE(soup)\r\n        return self.__get_lessons(soup)\r\n    def __get_lessons(self, soup):\r\n        lesson_list = []\r\n        lessons_tag = soup.find('table', id='kcmcGrid')\r\n        lesson_tag_list = lessons_tag.find_all('tr')[1:]\r\n        for lesson_tag in lesson_tag_list:\r\n            td_list = lesson_tag.find_all('td')\r\n            code = td_list[0].input['name']\r\n            name = td_list[1].string\r\n            teacher_name = td_list[3].string\r\n            Time = td_list[4]['title']\r\n            number = td_list[10].string\r\n            lesson = self.Lesson(name, code, teacher_name, Time, number)\r\n            lesson_list.append(lesson)\r\n        return lesson_list</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a524785301362-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a524785301362-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a524785301362-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a524785301362-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a524785301362-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a524785301362-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a524785301362-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a524785301362-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a524785301362-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a524785301362-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a524785301362-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a524785301362-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a524785301362-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a524785301362-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a524785301362-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a524785301362-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a524785301362-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a524785301362-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a524785301362-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a524785301362-20\">20</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b5255a524785301362-1\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__search_lessons</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lesson_name</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a524785301362-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__base_data</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'TextBox1'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lesson_name</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">encode</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'gb2312'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a524785301362-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">request</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">requests</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">post</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__headers</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'Referer'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-o\">=</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__base_data</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">headers</span><span class=\"crayon-o\">=</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__headers</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a524785301362-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">soup</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">BeautifulSoup</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">request</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">text</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'lxml'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a524785301362-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">__set__VIEWSTATE</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">soup</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a524785301362-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">__get_lessons</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">soup</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a524785301362-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__get_lessons</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">soup</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a524785301362-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">lesson_list</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a524785301362-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">lessons_tag</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">soup</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'table'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'kcmcGrid'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a524785301362-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">lesson_tag_list</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lessons_tag</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find_all</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'tr'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a524785301362-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">lesson_tag </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lesson_tag_list</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a524785301362-12\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">td_list</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lesson_tag</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find_all</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'td'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a524785301362-13\"><span class=\"crayon-h\">            </span><span class=\"crayon-k \">code</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">td_list</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">input</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'name'</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a524785301362-14\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">td_list</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">string</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a524785301362-15\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">teacher_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">td_list</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">string</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a524785301362-16\"><span class=\"crayon-h\">            </span><span class=\"crayon-k \">Time</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">td_list</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'title'</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a524785301362-17\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">number</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">td_list</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">string</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a524785301362-18\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">lesson</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Lesson</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">code</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">teacher_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">Time</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">number</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a524785301362-19\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">lesson_list</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">lesson</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a524785301362-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lesson_list</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0063 seconds] -->\r\n<p></p>\n<h1 id=\"进行选课\">进行选课</h1>\n<p>选课我们只要将lesson_list传入即可，这就是我们之前创建的Lesson类的实例的列表，’Button’的内容为’ 提交 ‘，这两边各有一个空格，完事后我们可以进行发送请求进行选课。</p>\n<p>这里我们用正则提取了错误信息，比如选课时间未到、上课时间冲突这些错误信息来提示用户，我们还解析了网页的已选课程，这里也不细讲了，都是基础的网页解析。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cf4b5255a529875120900\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-mixed-highlight\" title=\"含多种语言\"></span><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n def __select_lesson(self, lesson_list):\r\n        data = copy.deepcopy(self.__base_data)\r\n        data['Button1'] = '  提交  '.encode('gb2312')\r\n        for lesson in lesson_list:\r\n            code = lesson.code\r\n            data[code] = 'on'\r\n        request = requests.post(self.__headers['Referer'], data=data, headers=self.__headers)\r\n        soup = BeautifulSoup(request.text, 'lxml')\r\n        self.__set__VIEWSTATE(soup)\r\n        error_tag = soup.html.head.script\r\n        if not error_tag is None:\r\n            error_tag_text = error_tag.string\r\n            r = \"alert<span class=\"MathJax_Preview\"><img src=\"http://python.jobbole.com/wp-content/plugins/latex/cache/tex_84c7018d7fa63c80c9ac3aa6b0f3339c.gif\" style=\"vertical-align: middle; border: none; padding-bottom:2px;\" class=\"tex\" alt=\"'(.+?)'\"></span><script type=\"math/tex\">'(.+?)'</script>;\"\r\n            for s in re.findall(r, error_tag_text):\r\n                print(s)\r\n        print('已选课程:')\r\n        selected_lessons_pre_tag = soup.find('legend', text='已选课程')\r\n        selected_lessons_tag = selected_lessons_pre_tag.next_sibling\r\n        tr_list = selected_lessons_tag.find_all('tr')[1:]\r\n        for tr in tr_list:\r\n            td = tr.find('td')\r\n            print(td.string)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a529875120900-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a529875120900-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a529875120900-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a529875120900-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a529875120900-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a529875120900-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a529875120900-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a529875120900-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a529875120900-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a529875120900-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a529875120900-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a529875120900-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a529875120900-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a529875120900-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a529875120900-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a529875120900-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a529875120900-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a529875120900-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a529875120900-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a529875120900-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5cf4b5255a529875120900-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cf4b5255a529875120900-22\">22</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cf4b5255a529875120900-1\"><span class=\"crayon-h\"> </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__select_lesson</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lesson_list</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a529875120900-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">copy</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">deepcopy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__base_data</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a529875120900-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'Button1'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'  提交  '</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">encode</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'gb2312'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a529875120900-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">lesson </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lesson_list</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a529875120900-5\"><span class=\"crayon-h\">            </span><span class=\"crayon-k \">code</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lesson</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">code</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a529875120900-6\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">[</span><span class=\"crayon-k \">code</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'on'</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a529875120900-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">request</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">requests</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">post</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__headers</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'Referer'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">headers</span><span class=\"crayon-o\">=</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__headers</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a529875120900-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">soup</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">BeautifulSoup</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">request</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">text</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'lxml'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a529875120900-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">__set__VIEWSTATE</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">soup</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a529875120900-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">error_tag</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">soup</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">html</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">head</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">script</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a529875120900-11\"><span class=\"crayon-e\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">error_tag </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">None</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a529875120900-12\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">error_tag_text</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">error_tag</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">string</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a529875120900-13\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">r</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"alert<span class=\"crayon-sy\">\\</span><span class=\"crayon-sy\">(</span>'<span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">+</span><span class=\"crayon-sy\">?</span><span class=\"crayon-sy\">)</span>'$$;\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a529875120900-14\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">re</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">findall</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">r</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">error_tag_text</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a529875120900-15\"><span class=\"crayon-h\">                </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a529875120900-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'已选课程:'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a529875120900-17\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">selected_lessons_pre_tag</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">soup</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'legend'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">text</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'已选课程'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a529875120900-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">selected_lessons_tag</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">selected_lessons_pre_tag</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">next_sibling</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a529875120900-19\"><span class=\"crayon-e\">        </span><span class=\"crayon-v\">tr_list</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">selected_lessons_tag</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find_all</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'tr'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a529875120900-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">tr </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tr_list</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cf4b5255a529875120900-21\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">td</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tr</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'td'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cf4b5255a529875120900-22\"><span class=\"crayon-h\">            </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">td</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">string</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0130 seconds] -->\r\n<p></p>\n<h1 id=\"总结\">总结</h1>\n<p>这次我们完成了模拟正方教务系统选课的过程，由于这个教务系统技术比较陈旧，所以比较好弄，事实上抢课的时候用Fiddler即可完成操作，因为我们只需要提前登录然后记录网址即可。</p>\n<p>本文代码Github地址：<a href=\"https://github.com/vhyz/ZF_Spider\" target=\"_blank\" rel=\"noopener\">https://github.com/vhyz/ZF_Spider</a></p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89192\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89192votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89192\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"}]